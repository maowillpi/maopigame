<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”„ ç¼“å­˜æ›´æ–° - MAOè½¬ç›˜æ¸¸æˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            color: white;
        }
        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 500px;
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #FFE066;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .button {
            background: linear-gradient(45deg, #FFE066, #FF6B9D);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
        }
        .cache-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        .cache-info h3 {
            margin-top: 0;
            color: #FFE066;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ æ­£åœ¨æ›´æ–°ç¼“å­˜...</h1>
        <div class="spinner"></div>
        <p>æ­£åœ¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œè¯·ç¨ç­‰...</p>
        
        <div class="cache-info">
            <h3>ğŸ“‹ å¦‚æœæ‚¨çœ‹åˆ°çš„æ˜¯æ—§ç•Œé¢ï¼š</h3>
            <ol>
                <li><strong>å¼ºåˆ¶åˆ·æ–°</strong>ï¼šæŒ‰ Ctrl+F5 (Windows) æˆ– Cmd+Shift+R (Mac)</li>
                <li><strong>æ¸…é™¤ç¼“å­˜</strong>ï¼šæŒ‰ F12 â†’ Network â†’ å‹¾é€‰"Disable cache"</li>
                <li><strong>æ— ç—•æ¨¡å¼</strong>ï¼šæ‰“å¼€æ— ç—•/éšç§æµè§ˆçª—å£</li>
                <li><strong>æ‰‹åŠ¨æ¸…é™¤</strong>ï¼šæµè§ˆå™¨è®¾ç½® â†’ æ¸…é™¤æµè§ˆæ•°æ®</li>
            </ol>
        </div>

        <div id="status">
            <p>ğŸ¯ <strong>æœ€æ–°ç‰ˆæœ¬</strong>ï¼šv5.1 ä¿®å¤ç‰ˆ</p>
            <p>ğŸ• <strong>æ›´æ–°æ—¶é—´</strong>ï¼š2025-07-15 10:40</p>
            <p>âœ… <strong>ä¿®å¤å†…å®¹</strong>ï¼šæ¸¸æˆè‡´å‘½é”™è¯¯å·²å®Œå…¨ä¿®å¤</p>
        </div>

        <button class="button" onclick="forceRefresh()">ğŸš€ ç«‹å³è®¿é—®æœ€æ–°ç‰ˆ</button>
        <button class="button" onclick="clearAllCache()">ğŸ§¹ æ¸…é™¤æ‰€æœ‰ç¼“å­˜</button>
    </div>

    <script>
        // æ·»åŠ ç¼“å­˜æ¸…é™¤å‚æ•°
        function forceRefresh() {
            const timestamp = new Date().getTime();
            window.location.href = `game.html?v=5.1&t=${timestamp}&cache=clear`;
        }

        // æ¸…é™¤æ‰€æœ‰ç¼“å­˜
        function clearAllCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
            
            // æ¸…é™¤localStorageä¸­çš„æ—§ç‰ˆæœ¬æ•°æ®
            localStorage.removeItem('mao_game_history');
            
            // 3ç§’åè‡ªåŠ¨è·³è½¬
            setTimeout(() => {
                forceRefresh();
            }, 3000);
            
            document.getElementById('status').innerHTML = `
                <p style="color: #4ECDC4;">âœ… ç¼“å­˜æ¸…é™¤å®Œæˆï¼</p>
                <p>3ç§’åè‡ªåŠ¨è·³è½¬åˆ°æœ€æ–°ç‰ˆæœ¬...</p>
            `;
        }

        // 5ç§’åè‡ªåŠ¨è·³è½¬
        setTimeout(() => {
            forceRefresh();
        }, 5000);

        // æ£€æµ‹æ˜¯å¦ä¸ºæ–°ç‰ˆæœ¬
        fetch('game.html', {cache: 'no-cache'})
            .then(response => response.text())
            .then(html => {
                if (html.includes('ä¿®å¤ç‰ˆ v5.1')) {
                    document.getElementById('status').innerHTML += `
                        <p style="color: #4ECDC4;">âœ… æœåŠ¡å™¨å·²éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬</p>
                    `;
                } else {
                    document.getElementById('status').innerHTML += `
                        <p style="color: #FF6B6B;">âš ï¸ æœåŠ¡å™¨å¯èƒ½è¿˜åœ¨æ›´æ–°ä¸­...</p>
                    `;
                }
            })
            .catch(err => {
                console.log('æ£€æŸ¥ç‰ˆæœ¬å¤±è´¥:', err);
            });
    </script>
</body>
</html> 