(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1729)}])},1729:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var l=s(5893),a=s(7294),n=s(1476),i=s(7583),r=s(8470),c=s(4222),components_WalletConnection=e=>{let{account:t,balances:s,onConnect:a}=e,formatBalance=e=>parseFloat(e).toFixed(2);return(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"钱包连接"}),t?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-4xl mb-2",children:"✅"}),(0,l.jsx)("p",{className:"text-green-400 font-semibold",children:"钱包已连接"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm mt-1",children:t?"".concat(t.slice(0,6),"...").concat(t.slice(-4)):""})]}),(0,l.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,l.jsx)("h4",{className:"text-white font-semibold mb-3",children:"代币余额"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3",children:"M"}),(0,l.jsx)("span",{className:"text-white",children:"MAO"})]}),(0,l.jsx)("span",{className:"text-yellow-400 font-bold",children:formatBalance(s.MAO)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3",children:"π"}),(0,l.jsx)("span",{className:"text-white",children:"PI"})]}),(0,l.jsx)("span",{className:"text-yellow-400 font-bold",children:formatBalance(s.PI)})]})]})]}),(0,l.jsx)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-3",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"text-blue-400 mr-2",children:"ℹ️"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm",children:"确保您在 AlveyChain 网络上"})]})})]}):(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD12"}),(0,l.jsx)("p",{className:"text-blue-200 mb-4",children:"请连接您的钱包开始游戏"}),(0,l.jsx)("button",{onClick:a,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",children:"\uD83D\uDD17 连接钱包"})]})]})},d=s(6415),components_GameHistory=e=>{let{history:t,account:s}=e,[n,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(s){let e=localStorage.getItem("gameHistory_".concat(s));e&&i(JSON.parse(e))}},[s]);let formatTime=e=>new Date(e).toLocaleString("zh-CN"),formatAmount=e=>parseFloat(e).toFixed(2),r=[{id:1,token:"MAO",betAmount:"100",rewardAmount:"0",isWin:!1,timestamp:Date.now()-36e5,txHash:"0x123...abc"},{id:2,token:"PI",betAmount:"10000",rewardAmount:"1000",isWin:!0,timestamp:Date.now()-72e5,txHash:"0x456...def"},{id:3,token:"MAO",betAmount:"100",rewardAmount:"25",isWin:!0,timestamp:Date.now()-108e5,txHash:"0x789...ghi"}],c=n.length>0?n:r;return(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 h-full",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"游戏历史"}),s?(0,l.jsx)("div",{className:"space-y-4",children:0===c.length?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFAE"}),(0,l.jsx)("p",{className:"text-blue-200",children:"还没有游戏记录"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm mt-1",children:"开始您的第一次游戏吧！"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("span",{className:"text-blue-200 text-sm",children:"最近游戏记录"}),(0,l.jsxs)("span",{className:"text-blue-200 text-sm",children:[c.length," 条记录"]})]}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3",children:c.map(e=>(0,l.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e.isWin?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"text-2xl mr-3",children:e.isWin?"\uD83C\uDF89":"\uD83D\uDE14"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-white font-semibold",children:[e.token," 转盘"]}),(0,l.jsx)("div",{className:"text-blue-200 text-xs",children:formatTime(e.timestamp)})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"font-bold ".concat(e.isWin?"text-green-400":"text-red-400"),children:e.isWin?"+".concat(formatAmount(e.rewardAmount)):"谢谢惠顾"}),(0,l.jsxs)("div",{className:"text-blue-200 text-xs",children:["投注: ",formatAmount(e.betAmount)," ",e.token]})]})]}),e.txHash&&(0,l.jsx)("div",{className:"mt-2 pt-2 border-t border-white/20",children:(0,l.jsxs)("a",{href:"https://alveyscan.com/tx/".concat(e.txHash),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs flex items-center",children:[(0,l.jsx)("span",{className:"mr-1",children:"\uD83D\uDD17"}),"查看交易详情"]})})]},e.id))}),(0,l.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/20",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"总游戏次数:"}),(0,l.jsx)("span",{className:"text-white font-semibold",children:c.length})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"胜率:"}),(0,l.jsx)("span",{className:"text-green-400 font-semibold",children:c.length>0?"".concat((c.filter(e=>e.isWin).length/c.length*100).toFixed(1),"%"):"0%"})]})]})]})}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC8"}),(0,l.jsx)("p",{className:"text-blue-200",children:"连接钱包查看游戏历史"})]})]})},o=s(2592),components_QRGameComponent=e=>{let{gameType:t,onGameResult:s}=e,[n,i]=(0,a.useState)(""),[r,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(!1),generateMobileGameUrl=()=>{let e=window.location.origin,s="".concat(e,"/mobile?token=").concat(t);return s},generateQRCode=async()=>{try{x(!0);let e=generateMobileGameUrl();c(e);let t=await o.toDataURL(e,{width:280,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"});i(t)}catch(e){console.error("生成二维码失败:",e),alert("生成二维码失败")}finally{x(!1)}};return(0,l.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 max-w-md mx-auto",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"\uD83D\uDCF1 手机游戏"}),(0,l.jsxs)("div",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg mb-4",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[t," 游戏"]}),(0,l.jsxs)("p",{className:"text-sm opacity-90",children:["投注: ","MAO"===t?"100 MAO":"10,000 PI"]})]}),n?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 qr-container",children:(0,l.jsx)("img",{src:n,alt:"游戏二维码",className:"w-full max-w-xs mx-auto qr-code"})}),(0,l.jsxs)("div",{className:"bg-white/20 rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-blue-200 text-sm mb-2",children:"\uD83D\uDCF1 扫码说明"}),(0,l.jsxs)("div",{className:"text-xs text-blue-100 space-y-1",children:[(0,l.jsx)("p",{children:"• 使用手机相机或微信扫一扫"}),(0,l.jsx)("p",{children:"• 自动跳转到移动端游戏"}),(0,l.jsx)("p",{children:"• 连接钱包开始游戏"})]})]}),(0,l.jsxs)("div",{className:"bg-white/20 rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-blue-200 text-sm mb-2",children:"\uD83D\uDD17 游戏链接"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"text",value:r,readOnly:!0,className:"flex-1 bg-black/20 text-white text-xs p-2 rounded border border-white/20 font-mono"}),(0,l.jsx)("button",{onClick:()=>{r&&navigator.clipboard.writeText(r).then(()=>{alert("链接已复制到剪贴板！")}).catch(()=>{alert("复制失败，请手动复制链接")})},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-xs font-bold transition-colors",children:"复制"})]})]}),(0,l.jsxs)("div",{className:"bg-white/20 rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-blue-200 text-sm mb-2",children:"\uD83C\uDFAE 支持的钱包"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"MetaMask",icon:"\uD83E\uDD8A"},{name:"Trust Wallet",icon:"\uD83D\uDEE1️"},{name:"Coinbase Wallet",icon:"\uD83D\uDCB0"},{name:"WalletConnect",icon:"\uD83D\uDD17"}].map(e=>(0,l.jsxs)("div",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs flex items-center",children:[(0,l.jsx)("span",{className:"mr-1",children:e.icon}),e.name]},e.name))})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>{i(""),c("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"\uD83D\uDD04 重新生成"}),(0,l.jsx)("button",{onClick:()=>window.open(r,"_blank"),className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"\uD83D\uDE80 直接访问"})]})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-white/20 rounded-lg p-4",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDFB0"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm mb-2",children:"\uD83D\uDCDD 使用说明"}),(0,l.jsxs)("ul",{className:"text-xs text-blue-100 space-y-1 text-left",children:[(0,l.jsx)("li",{children:'• 点击"生成二维码"按钮'}),(0,l.jsx)("li",{children:"• 用手机扫描二维码"}),(0,l.jsx)("li",{children:"• 在手机上连接钱包"}),(0,l.jsx)("li",{children:"• 开始游戏！"})]})]}),(0,l.jsx)("button",{onClick:generateQRCode,disabled:d,className:"w-full py-3 px-6 rounded-lg font-bold transition-all transform ".concat(d?"bg-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white hover:scale-105 shadow-lg"),children:d?(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"生成中..."]}):"\uD83C\uDFAF 生成游戏二维码"})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-lg p-4 mt-4",children:[(0,l.jsx)("h4",{className:"text-white font-bold text-sm mb-2",children:"\uD83C\uDF1F 游戏特色"}),(0,l.jsxs)("div",{className:"text-xs text-yellow-200 space-y-1",children:[(0,l.jsx)("p",{children:"• \uD83C\uDFAF 6个区域平均分配，视觉美观"}),(0,l.jsxs)("p",{children:["• \uD83C\uDFC6 丰富奖励等级，从150到","MAO"===t?"3000":"300000"]}),(0,l.jsx)("p",{children:"• \uD83D\uDCF1 移动端优化，流畅游戏体验"}),(0,l.jsx)("p",{children:"• \uD83D\uDD17 区块链技术，透明公平"})]})]})]})})};let x=["function playMAOGame() external","function playPIGame() external","function getPlayerHistory(address player) external view returns (tuple(address player, uint8 tokenType, uint256 betAmount, uint256 rewardAmount, uint8 rewardLevel, uint256 timestamp, uint256 randomSeed)[])","function getRewardLevelName(uint8 level) external pure returns (string)","event GamePlayed(address indexed player, uint8 tokenType, uint256 betAmount, uint256 rewardAmount, uint8 rewardLevel, uint256 randomSeed)"],m=["function balanceOf(address owner) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)"],h={WHEEL_GAME:"0xc27e29BCe41db77815435a9415329424849Daeb6",MAO_TOKEN:"0x22f49bcb3dad370a9268ba3fca33cb037ca3d022",PI_TOKEN:"0xfd4680e25e05b3435c7f698668d1ce80d2a9f444"},u={chainId:"0xED5",chainName:"AlveyChain Mainnet",nativeCurrency:{name:"ALV",symbol:"ALV",decimals:18},rpcUrls:["https://elves-core1.alvey.io"],blockExplorerUrls:["https://alveyscan.com"]};function Home(){let[e,t]=(0,a.useState)(null),[s,o]=(0,a.useState)(null),[b,p]=(0,a.useState)(null),[w,j]=(0,a.useState)({}),[N,g]=(0,a.useState)({MAO:"0",PI:"0"}),[f,v]=(0,a.useState)([]),[D,y]=(0,a.useState)(!1),[A,k]=(0,a.useState)("web"),[C,E]=(0,a.useState)("MAO"),checkNetwork=async()=>{if(!window.ethereum)return!1;try{let e=await window.ethereum.request({method:"eth_chainId"});return e===u.chainId}catch(e){return console.error("检查网络错误:",e),!1}},switchToAlveyNetwork=async()=>{try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:u.chainId}]})}catch(e){if(4902===e.code)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[u]})}catch(e){throw console.error("添加网络错误:",e),e}else throw e}},connectWallet=async()=>{if(!window.ethereum){alert("请安装 MetaMask!");return}try{y(!0);let e=await checkNetwork();e||await switchToAlveyNetwork();let s=await window.ethereum.request({method:"eth_requestAccounts"});if(s.length>0){let e=new n.Q(window.ethereum),l=await e.getSigner();t(s[0]),o(e),p(l),await initializeContracts(l),await loadBalances(s[0],l),await loadGameHistory(s[0],l)}}catch(e){console.error("连接钱包错误:",e),alert("连接钱包失败: "+e.message)}finally{y(!1)}},initializeContracts=async e=>{try{let t=new i.CH(h.WHEEL_GAME,x,e),s=new i.CH(h.MAO_TOKEN,m,e),l=new i.CH(h.PI_TOKEN,m,e);return j({wheelGame:t,maoToken:s,piToken:l}),{wheelGame:t,maoToken:s,piToken:l}}catch(e){throw console.error("初始化合约错误:",e),e}},loadBalances=async(e,t)=>{try{let s=w.maoToken?w:await initializeContracts(t),[l,a]=await Promise.all([s.maoToken.balanceOf(e),s.piToken.balanceOf(e)]);g({MAO:r.dF(l),PI:r.dF(a)})}catch(e){console.error("加载余额错误:",e)}},loadGameHistory=async(e,t)=>{try{let s=w.wheelGame?w:await initializeContracts(t),l=await s.wheelGame.getPlayerHistory(e),a=l.map((e,t)=>({id:t,player:e.player,tokenType:0===e.tokenType?"MAO":"PI",betAmount:r.dF(e.betAmount),rewardAmount:r.dF(e.rewardAmount),rewardLevel:Number(e.rewardLevel),timestamp:new Date(1e3*Number(e.timestamp)).toLocaleString(),randomSeed:e.randomSeed.toString()}));v(a.reverse())}catch(e){console.error("加载游戏历史错误:",e),v([])}},updateBalances=async()=>{e&&b&&await loadBalances(e,b)},approveTokens=async()=>{if(w.maoToken&&w.piToken)try{y(!0);let t=c.Bz,[s,l]=await Promise.all([w.maoToken.allowance(e,h.WHEEL_GAME),w.piToken.allowance(e,h.WHEEL_GAME)]),a=[];if(s<r.fi("1000")&&a.push(w.maoToken.approve(h.WHEEL_GAME,t)),l<r.fi("100000")&&a.push(w.piToken.approve(h.WHEEL_GAME,t)),a.length>0){for(let e of(alert("需要授权 ".concat(a.length," 个代币，请在钱包中确认交易")),a)){let t=await e;await t.wait()}alert("代币授权成功！")}}catch(e){console.error("授权错误:",e),alert("授权失败: "+e.message)}finally{y(!1)}};return(0,a.useEffect)(()=>(window.ethereum&&(window.ethereum.on("accountsChanged",e=>{0===e.length?(t(null),o(null),p(null),j({}),g({MAO:"0",PI:"0"}),v([])):connectWallet()}),window.ethereum.on("chainChanged",()=>{window.location.reload()})),()=>{window.ethereum&&(window.ethereum.removeAllListeners("accountsChanged"),window.ethereum.removeAllListeners("chainChanged"))}),[]),(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[(0,l.jsx)("header",{className:"bg-black/20 backdrop-blur-lg border-b border-white/10",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\uD83C\uDFB0 MAO转盘游戏"}),(0,l.jsx)("div",{className:"ml-4 text-sm text-blue-200",children:"AlveyChain 区块链游戏"})]}),e&&(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"bg-white/10 rounded-lg p-1 flex",children:[(0,l.jsx)("button",{onClick:()=>k("web"),className:"px-4 py-2 rounded-md font-semibold text-sm transition-all ".concat("web"===A?"bg-blue-600 text-white":"text-blue-200 hover:text-white"),children:"\uD83D\uDDA5️ 网页游戏"}),(0,l.jsx)("button",{onClick:()=>k("qr"),className:"px-4 py-2 rounded-md font-semibold text-sm transition-all ".concat("qr"===A?"bg-purple-600 text-white":"text-blue-200 hover:text-white"),children:"\uD83D\uDCF1 扫码游戏"})]}),(0,l.jsx)("button",{onClick:approveTokens,disabled:D,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-semibold text-sm",children:D?"处理中...":"授权代币"}),(0,l.jsx)("button",{onClick:updateBalances,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold text-sm",children:"\uD83D\uDD04 刷新余额"})]})]})})}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["0x0000000000000000000000000000000000000000"===h.WHEEL_GAME&&(0,l.jsx)("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-8",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"text-red-400 mr-2",children:"⚠️"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-red-200 font-semibold",children:"合约未部署"}),(0,l.jsx)("p",{className:"text-red-200 text-sm",children:"请先部署智能合约并更新合约地址"})]})]})}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDDA5️"}),(0,l.jsx)("h3",{className:"text-white font-semibold",children:"网页游戏"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm",children:"在电脑上直接游戏"})]}),(0,l.jsx)("div",{className:"text-white text-2xl",children:"VS"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF1"}),(0,l.jsx)("h3",{className:"text-white font-semibold",children:"扫码游戏"}),(0,l.jsx)("p",{className:"text-blue-200 text-sm",children:"用手机钱包扫码游戏"})]})]})})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,l.jsx)(components_WalletConnection,{account:e,balances:N,isLoading:D,onConnect:connectWallet}),"qr"===A&&e&&(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\uD83C\uDFAF 选择代币"}),(0,l.jsx)("div",{className:"space-y-3",children:["MAO","PI"].map(e=>(0,l.jsx)("button",{onClick:()=>E(e),className:"w-full p-3 rounded-lg font-semibold transition-all ".concat(C===e?"bg-blue-600 text-white":"bg-white/20 text-blue-200 hover:bg-white/30 hover:text-white"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("span",{className:"text-sm",children:"MAO"===e?"100 MAO":"10,000 PI"})]})},e))})]}),e&&(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\uD83C\uDFC6 游戏统计"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"总游戏次数:"}),(0,l.jsx)("span",{className:"text-white font-bold",children:f.length})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"获胜次数:"}),(0,l.jsx)("span",{className:"text-green-400 font-bold",children:f.filter(e=>e.isWin).length})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"胜率:"}),(0,l.jsx)("span",{className:"text-yellow-400 font-bold",children:f.length>0?"".concat((f.filter(e=>e.isWin).length/f.length*100).toFixed(1),"%"):"0%"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-blue-200",children:"游戏模式:"}),(0,l.jsx)("span",{className:"text-purple-400 font-bold",children:"web"===A?"\uD83D\uDDA5️ 网页":"\uD83D\uDCF1 扫码"})]})]})]})]}),(0,l.jsx)("div",{className:"lg:col-span-1",children:"web"===A?(0,l.jsx)(d.Z,{selectedToken:C,setSelectedToken:E,account:e,contracts:w,balances:N,onGameResult:t=>{let s={id:f.length+1,player:e,tokenType:C,betAmount:"MAO"===C?"100":"10000",rewardAmount:t.amount.toString(),rewardLevel:t.rewardLevel||0,isWin:t.isWin,timestamp:Date.now(),txHash:t.transactionHash};if(v(e=>[s,...e]),e){let t=[s,...f];localStorage.setItem("gameHistory_".concat(e),JSON.stringify(t))}},isLoading:D,setIsLoading:y}):(0,l.jsx)(components_QRGameComponent,{selectedToken:C,setSelectedToken:E,account:e,onGameComplete:t=>{let s={id:f.length+1,token:C,betAmount:"MAO"===C?"100":"10000",rewardAmount:t.amount.toString(),isWin:t.isWin,timestamp:Date.now(),txHash:t.transactionHash};if(v(e=>[s,...e]),e){let t=[s,...f];localStorage.setItem("gameHistory_".concat(e),JSON.stringify(t))}updateBalances(),alert("游戏完成！".concat(t.isWin?"恭喜获得 ".concat(t.amount," ").concat(C,"！"):"谢谢惠顾！"))}})}),(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsx)(components_GameHistory,{gameHistory:f,account:e})})]})]}),(0,l.jsx)("footer",{className:"bg-black/20 backdrop-blur-lg border-t border-white/10 mt-16",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-blue-200 text-sm",children:"\uD83C\uDFAE 基于 AlveyChain 的去中心化转盘游戏"}),(0,l.jsx)("p",{className:"text-blue-300 text-xs mt-2",children:"支持网页游戏和手机扫码游戏 • 请理性游戏，风险自担"})]})})})]})}}},function(e){e.O(0,[26,29,415,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);