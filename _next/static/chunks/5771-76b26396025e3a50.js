(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5771],{926:function(C,T,N){"use strict";function getBrowerCrypto(){return(null===N.g||void 0===N.g?void 0:N.g.crypto)||(null===N.g||void 0===N.g?void 0:N.g.msCrypto)||{}}function getSubtleCrypto(){let C=getBrowerCrypto();return C.subtle||C.webkitSubtle}Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowserCryptoAvailable=T.getSubtleCrypto=T.getBrowerCrypto=void 0,T.getBrowerCrypto=getBrowerCrypto,T.getSubtleCrypto=getSubtleCrypto,T.isBrowserCryptoAvailable=function(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},8618:function(C,T,N){"use strict";var U=N(3454);function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==U&&void 0!==U.versions&&void 0!==U.versions.node}Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowser=T.isNode=T.isReactNative=void 0,T.isReactNative=isReactNative,T.isNode=isNode,T.isBrowser=function(){return!isReactNative()&&!isNode()}},1468:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});let U=N(655);U.__exportStar(N(926),T),U.__exportStar(N(8618),T)},7999:function(C,T,N){"use strict";N.d(T,{Gn:function(){return oC}});var U=N(7187),$=N.n(U),Q=N(3631),Y=N(6736),X=N(2873),ee=N(5755);let es="2.31.0",el={getDocsUrl:({docsBaseUrl:C,docsPath:T="",docsSlug:N})=>T?`${C??"https://viem.sh"}${T}${N?`#${N}`:""}`:void 0,version:`viem@${es}`};let base_BaseError=class base_BaseError extends Error{constructor(C,T={}){let N=T.cause instanceof base_BaseError?T.cause.details:T.cause?.message?T.cause.message:T.details,U=T.cause instanceof base_BaseError&&T.cause.docsPath||T.docsPath,$=el.getDocsUrl?.({...T,docsPath:U}),Q=[C||"An error occurred.","",...T.metaMessages?[...T.metaMessages,""]:[],...$?[`Docs: ${$}`]:[],...N?[`Details: ${N}`]:[],...el.version?[`Version: ${el.version}`]:[]].join("\n");super(Q,T.cause?{cause:T.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=N,this.docsPath=U,this.metaMessages=T.metaMessages,this.name=T.name??this.name,this.shortMessage=C,this.version=es}walk(C){return function walk(C,T){return T?.(C)?C:C&&"object"==typeof C&&"cause"in C&&void 0!==C.cause?walk(C.cause,T):T?null:C}(this,C)}};function isHex(C,{strict:T=!0}={}){return!!C&&"string"==typeof C&&(T?/^0x[0-9a-fA-F]*$/.test(C):C.startsWith("0x"))}let SizeExceedsPaddingSizeError=class SizeExceedsPaddingSizeError extends base_BaseError{constructor({size:C,targetSize:T,type:N}){super(`${N.charAt(0).toUpperCase()}${N.slice(1).toLowerCase()} size (${C}) exceeds padding size (${T}).`,{name:"SizeExceedsPaddingSizeError"})}};function pad(C,{dir:T,size:N=32}={}){return"string"==typeof C?function(C,{dir:T,size:N=32}={}){if(null===N)return C;let U=C.replace("0x","");if(U.length>2*N)throw new SizeExceedsPaddingSizeError({size:Math.ceil(U.length/2),targetSize:N,type:"hex"});return`0x${U["right"===T?"padEnd":"padStart"](2*N,"0")}`}(C,{dir:T,size:N}):function(C,{dir:T,size:N=32}={}){if(null===N)return C;if(C.length>N)throw new SizeExceedsPaddingSizeError({size:C.length,targetSize:N,type:"bytes"});let U=new Uint8Array(N);for(let $=0;$<N;$++){let Q="right"===T;U[Q?$:N-$-1]=C[Q?$:C.length-$-1]}return U}(C,{dir:T,size:N})}let IntegerOutOfRangeError=class IntegerOutOfRangeError extends base_BaseError{constructor({max:C,min:T,signed:N,size:U,value:$}){super(`Number "${$}" is not in safe ${U?`${8*U}-bit ${N?"signed":"unsigned"} `:""}integer range ${C?`(${T} to ${C})`:`(above ${T})`}`,{name:"IntegerOutOfRangeError"})}};let SizeOverflowError=class SizeOverflowError extends base_BaseError{constructor({givenSize:C,maxSize:T}){super(`Size cannot exceed ${T} bytes. Given size: ${C} bytes.`,{name:"SizeOverflowError"})}};function size_size(C){return isHex(C,{strict:!1})?Math.ceil((C.length-2)/2):C.length}function assertSize(C,{size:T}){if(size_size(C)>T)throw new SizeOverflowError({givenSize:size_size(C),maxSize:T})}function hexToBigInt(C,T={}){let{signed:N}=T;T.size&&assertSize(C,{size:T.size});let U=BigInt(C);if(!N)return U;let $=(C.length-2)/2,Q=(1n<<8n*BigInt($)-1n)-1n;return U<=Q?U:U-BigInt(`0x${"f".padStart(2*$,"f")}`)-1n}let ec=Array.from({length:256},(C,T)=>T.toString(16).padStart(2,"0"));function toHex(C,T={}){return"number"==typeof C||"bigint"==typeof C?numberToHex(C,T):"string"==typeof C?function(C,T={}){let N=eh.encode(C);return bytesToHex(N,T)}(C,T):"boolean"==typeof C?function(C,T={}){let N=`0x${Number(C)}`;return"number"==typeof T.size?(assertSize(N,{size:T.size}),pad(N,{size:T.size})):N}(C,T):bytesToHex(C,T)}function bytesToHex(C,T={}){let N="";for(let T=0;T<C.length;T++)N+=ec[C[T]];let U=`0x${N}`;return"number"==typeof T.size?(assertSize(U,{size:T.size}),pad(U,{dir:"right",size:T.size})):U}function numberToHex(C,T={}){let N;let{signed:U,size:$}=T,Q=BigInt(C);$?N=U?(1n<<8n*BigInt($)-1n)-1n:2n**(8n*BigInt($))-1n:"number"==typeof C&&(N=BigInt(Number.MAX_SAFE_INTEGER));let Y="bigint"==typeof N&&U?-N-1n:0;if(N&&Q>N||Q<Y){let T="bigint"==typeof C?"n":"";throw new IntegerOutOfRangeError({max:N?`${N}${T}`:void 0,min:`${Y}${T}`,signed:U,size:$,value:`${C}${T}`})}let X=`0x${(U&&Q<0?(1n<<BigInt(8*$))+BigInt(Q):Q).toString(16)}`;return $?pad(X,{size:$}):X}let eh=new TextEncoder,eu=new TextEncoder,ed={zero:48,nine:57,A:65,F:70,a:97,f:102};function charCodeToBase16(C){return C>=ed.zero&&C<=ed.nine?C-ed.zero:C>=ed.A&&C<=ed.F?C-(ed.A-10):C>=ed.a&&C<=ed.f?C-(ed.a-10):void 0}function toBytes_hexToBytes(C,T={}){let N=C;T.size&&(assertSize(N,{size:T.size}),N=pad(N,{dir:"right",size:T.size}));let U=N.slice(2);U.length%2&&(U=`0${U}`);let $=U.length/2,Q=new Uint8Array($);for(let C=0,T=0;C<$;C++){let N=charCodeToBase16(U.charCodeAt(T++)),$=charCodeToBase16(U.charCodeAt(T++));if(void 0===N||void 0===$)throw new base_BaseError(`Invalid byte sequence ("${U[T-2]}${U[T-1]}" in "${U}").`);Q[C]=16*N+$}return Q}function stringToBytes(C,T={}){let N=eu.encode(C);return"number"==typeof T.size?(assertSize(N,{size:T.size}),pad(N,{dir:"right",size:T.size})):N}let ep=BigInt(4294967296-1),eg=BigInt(32),rotlSH=(C,T,N)=>C<<N|T>>>32-N,rotlSL=(C,T,N)=>T<<N|C>>>32-N,rotlBH=(C,T,N)=>T<<N-32|C>>>64-N,rotlBL=(C,T,N)=>C<<N-32|T>>>64-N;var ey=N(1220);let em=BigInt(0),eb=BigInt(1),ew=BigInt(2),e_=BigInt(7),ev=BigInt(256),eE=BigInt(113),ex=[],eA=[],eI=[];for(let C=0,T=eb,N=1,U=0;C<24;C++){[N,U]=[U,(2*N+3*U)%5],ex.push(2*(5*U+N)),eA.push((C+1)*(C+2)/2%64);let $=em;for(let C=0;C<7;C++)(T=(T<<eb^(T>>e_)*eE)%ev)&ew&&($^=eb<<(eb<<BigInt(C))-eb);eI.push($)}let eP=function(C,T=!1){let N=C.length,U=new Uint32Array(N),$=new Uint32Array(N);for(let Q=0;Q<N;Q++){let{h:N,l:Y}=function(C,T=!1){return T?{h:Number(C&ep),l:Number(C>>eg&ep)}:{h:0|Number(C>>eg&ep),l:0|Number(C&ep)}}(C[Q],T);[U[Q],$[Q]]=[N,Y]}return[U,$]}(eI,!0),eS=eP[0],eD=eP[1],rotlH=(C,T,N)=>N>32?rotlBH(C,T,N):rotlSH(C,T,N),rotlL=(C,T,N)=>N>32?rotlBL(C,T,N):rotlSL(C,T,N);let Keccak=class Keccak extends ey.kb{constructor(C,T,N,U=!1,$=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=C,this.suffix=T,this.outputLen=N,this.enableXOF=U,this.rounds=$,(0,ey.k8)(N),!(0<C&&C<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,ey.Jq)(this.state)}clone(){return this._cloneInto()}keccak(){(0,ey.Ux)(this.state32),function(C,T=24){let N=new Uint32Array(10);for(let U=24-T;U<24;U++){for(let T=0;T<10;T++)N[T]=C[T]^C[T+10]^C[T+20]^C[T+30]^C[T+40];for(let T=0;T<10;T+=2){let U=(T+8)%10,$=(T+2)%10,Q=N[$],Y=N[$+1],X=rotlH(Q,Y,1)^N[U],ee=rotlL(Q,Y,1)^N[U+1];for(let N=0;N<50;N+=10)C[T+N]^=X,C[T+N+1]^=ee}let T=C[2],$=C[3];for(let N=0;N<24;N++){let U=eA[N],Q=rotlH(T,$,U),Y=rotlL(T,$,U),X=ex[N];T=C[X],$=C[X+1],C[X]=Q,C[X+1]=Y}for(let T=0;T<50;T+=10){for(let U=0;U<10;U++)N[U]=C[T+U];for(let U=0;U<10;U++)C[T+U]^=~N[(U+2)%10]&N[(U+4)%10]}C[0]^=eS[U],C[1]^=eD[U]}(0,ey.ru)(N)}(this.state32,this.rounds),(0,ey.Ux)(this.state32),this.posOut=0,this.pos=0}update(C){(0,ey.$h)(this),C=(0,ey.O0)(C),(0,ey.gk)(C);let{blockLen:T,state:N}=this,U=C.length;for(let $=0;$<U;){let Q=Math.min(T-this.pos,U-$);for(let T=0;T<Q;T++)N[this.pos++]^=C[$++];this.pos===T&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:C,suffix:T,pos:N,blockLen:U}=this;C[N]^=T,(128&T)!=0&&N===U-1&&this.keccak(),C[U-1]^=128,this.keccak()}writeInto(C){(0,ey.$h)(this,!1),(0,ey.gk)(C),this.finish();let T=this.state,{blockLen:N}=this;for(let U=0,$=C.length;U<$;){this.posOut>=N&&this.keccak();let Q=Math.min(N-this.posOut,$-U);C.set(T.subarray(this.posOut,this.posOut+Q),U),this.posOut+=Q,U+=Q}return C}xofInto(C){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(C)}xof(C){return(0,ey.k8)(C),this.xofInto(new Uint8Array(C))}digestInto(C){if((0,ey.eB)(C,this),this.finished)throw Error("digest() was already called");return this.writeInto(C),this.destroy(),C}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,ey.ru)(this.state)}_cloneInto(C){let{blockLen:T,suffix:N,outputLen:U,rounds:$,enableXOF:Q}=this;return C||(C=new Keccak(T,N,U,Q,$)),C.state32.set(this.state32),C.pos=this.pos,C.posOut=this.posOut,C.finished=this.finished,C.rounds=$,C.suffix=N,C.outputLen=U,C.enableXOF=Q,C.destroyed=this.destroyed,C}};let eB=(0,ey.V1)(()=>new Keccak(136,1,32));function keccak256(C,T){let N=eB(isHex(C,{strict:!1})?function(C,T={}){return"number"==typeof C||"bigint"==typeof C?function(C,T){let N=numberToHex(C,T);return toBytes_hexToBytes(N)}(C,T):"boolean"==typeof C?function(C,T={}){let N=new Uint8Array(1);return(N[0]=Number(C),"number"==typeof T.size)?(assertSize(N,{size:T.size}),pad(N,{size:T.size})):N}(C,T):isHex(C)?toBytes_hexToBytes(C,T):stringToBytes(C,T)}(C):C);return"bytes"===(T||"hex")?N:toHex(N)}let LruMap=class LruMap extends Map{constructor(C){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=C}get(C){let T=super.get(C);return super.has(C)&&void 0!==T&&(this.delete(C),super.set(C,T)),T}set(C,T){if(super.set(C,T),this.maxSize&&this.size>this.maxSize){let C=this.keys().next().value;C&&this.delete(C)}return this}};let eC=new LruMap(8192);async function recoverPublicKey({hash:C,signature:T}){let U=isHex(C)?C:toHex(C),{secp256k1:$}=await N.e(6657).then(N.bind(N,6657)),Q=(()=>{if("object"==typeof T&&"r"in T&&"s"in T){let{r:C,s:N,v:U,yParity:Q}=T,Y=Number(Q??U),X=toRecoveryBit(Y);return new $.Signature(hexToBigInt(C),hexToBigInt(N)).addRecoveryBit(X)}let C=isHex(T)?T:toHex(T);if(65!==size_size(C))throw Error("invalid signature length");let N=function(C,T={}){return Number(hexToBigInt(C,T))}(`0x${C.slice(130)}`),U=toRecoveryBit(N);return $.Signature.fromCompact(C.substring(2,130)).addRecoveryBit(U)})(),Y=Q.recoverPublicKey(U.substring(2)).toHex(!1);return`0x${Y}`}function toRecoveryBit(C){if(0===C||1===C)return C;if(27===C)return 0;if(28===C)return 1;throw Error("Invalid yParityOrV value")}async function recoverAddress({hash:C,signature:T}){return function(C){let T=keccak256(`0x${C.substring(4)}`).substring(26);return function(C,T){if(eC.has(`${C}.${T}`))return eC.get(`${C}.${T}`);let N=T?`${T}${C.toLowerCase()}`:C.substring(2).toLowerCase(),U=keccak256(stringToBytes(N),"bytes"),$=(T?N.substring(`${T}0x`.length):N).split("");for(let C=0;C<40;C+=2)U[C>>1]>>4>=8&&$[C]&&($[C]=$[C].toUpperCase()),(15&U[C>>1])>=8&&$[C+1]&&($[C+1]=$[C+1].toUpperCase());let Q=`0x${$.join("")}`;return eC.set(`${C}.${T}`,Q),Q}(`0x${T}`)}(await recoverPublicKey({hash:C,signature:T}))}var eO=function(C){if(C.length>=255)throw TypeError("Alphabet too long");let T=new Uint8Array(256);for(let C=0;C<T.length;C++)T[C]=255;for(let N=0;N<C.length;N++){let U=C.charAt(N),$=U.charCodeAt(0);if(255!==T[$])throw TypeError(U+" is ambiguous");T[$]=N}let N=C.length,U=C.charAt(0),$=Math.log(N)/Math.log(256),Q=Math.log(256)/Math.log(N);function decodeUnsafe(C){if("string"!=typeof C)throw TypeError("Expected String");if(0===C.length)return new Uint8Array;let Q=0,Y=0,X=0;for(;C[Q]===U;)Y++,Q++;let ee=(C.length-Q)*$+1>>>0,es=new Uint8Array(ee);for(;Q<C.length;){let U=C.charCodeAt(Q);if(U>255)return;let $=T[U];if(255===$)return;let Y=0;for(let C=ee-1;(0!==$||Y<X)&&-1!==C;C--,Y++)$+=N*es[C]>>>0,es[C]=$%256>>>0,$=$/256>>>0;if(0!==$)throw Error("Non-zero carry");X=Y,Q++}let el=ee-X;for(;el!==ee&&0===es[el];)el++;let ec=new Uint8Array(Y+(ee-el)),eh=Y;for(;el!==ee;)ec[eh++]=es[el++];return ec}return{encode:function(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===T.length)return"";let $=0,Y=0,X=0,ee=T.length;for(;X!==ee&&0===T[X];)X++,$++;let es=(ee-X)*Q+1>>>0,el=new Uint8Array(es);for(;X!==ee;){let C=T[X],U=0;for(let T=es-1;(0!==C||U<Y)&&-1!==T;T--,U++)C+=256*el[T]>>>0,el[T]=C%N>>>0,C=C/N>>>0;if(0!==C)throw Error("Non-zero carry");Y=U,X++}let ec=es-Y;for(;ec!==es&&0===el[ec];)ec++;let eh=U.repeat($);for(;ec<es;++ec)eh+=C.charAt(el[ec]);return eh},decodeUnsafe,decode:function(C){let T=decodeUnsafe(C);if(T)return T;throw Error("Non-base"+N+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function prettyByte(C){return`${C<0?"-":""}0x${Math.abs(C).toString(16).padStart(2,"0")}`}let ExtData=class ExtData{constructor(C,T){this.type=C,this.data=T}};let DecodeError=class DecodeError extends Error{constructor(C){super(C);let T=Object.create(DecodeError.prototype);Object.setPrototypeOf(this,T),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:DecodeError.name})}};function setInt64(C,T,N){let U=Math.floor(N/4294967296);C.setUint32(T,U),C.setUint32(T+4,N)}function getInt64(C,T){let N=C.getInt32(T),U=C.getUint32(T+4);return 4294967296*N+U}let eR={type:-1,encode:function(C){if(!(C instanceof Date))return null;{let T=function(C){let T=C.getTime(),N=Math.floor(T/1e3),U=(T-1e3*N)*1e6,$=Math.floor(U/1e9);return{sec:N+$,nsec:U-1e9*$}}(C);return function({sec:C,nsec:T}){if(C>=0&&T>=0&&C<=17179869183){if(0===T&&C<=4294967295){let T=new Uint8Array(4),N=new DataView(T.buffer);return N.setUint32(0,C),T}{let N=C/4294967296,U=4294967295&C,$=new Uint8Array(8),Q=new DataView($.buffer);return Q.setUint32(0,T<<2|3&N),Q.setUint32(4,U),$}}{let N=new Uint8Array(12),U=new DataView(N.buffer);return U.setUint32(0,T),setInt64(U,4,C),N}}(T)}},decode:function(C){let T=function(C){let T=new DataView(C.buffer,C.byteOffset,C.byteLength);switch(C.byteLength){case 4:{let C=T.getUint32(0);return{sec:C,nsec:0}}case 8:{let C=T.getUint32(0),N=T.getUint32(4);return{sec:(3&C)*4294967296+N,nsec:C>>>2}}case 12:{let C=getInt64(T,4),N=T.getUint32(0);return{sec:C,nsec:N}}default:throw new DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${C.length}`)}}(C);return new Date(1e3*T.sec+T.nsec/1e6)}};let ExtensionCodec=class ExtensionCodec{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(eR)}register({type:C,encode:T,decode:N}){if(C>=0)this.encoders[C]=T,this.decoders[C]=N;else{let U=-1-C;this.builtInEncoders[U]=T,this.builtInDecoders[U]=N}}tryToEncode(C,T){for(let N=0;N<this.builtInEncoders.length;N++){let U=this.builtInEncoders[N];if(null!=U){let $=U(C,T);if(null!=$){let C=-1-N;return new ExtData(C,$)}}}for(let N=0;N<this.encoders.length;N++){let U=this.encoders[N];if(null!=U){let $=U(C,T);if(null!=$){let C=N;return new ExtData(C,$)}}}return C instanceof ExtData?C:null}decode(C,T,N){let U=T<0?this.builtInDecoders[-1-T]:this.decoders[T];return U?U(C,T,N):new ExtData(T,C)}};ExtensionCodec.defaultCodec=new ExtensionCodec;let eT=new TextEncoder;function utf8DecodeJs(C,T,N){let U=T,$=U+N,Q=[],Y="";for(;U<$;){let T=C[U++];if((128&T)==0)Q.push(T);else if((224&T)==192){let N=63&C[U++];Q.push((31&T)<<6|N)}else if((240&T)==224){let N=63&C[U++],$=63&C[U++];Q.push((31&T)<<12|N<<6|$)}else if((248&T)==240){let N=63&C[U++],$=63&C[U++],Y=63&C[U++],X=(7&T)<<18|N<<12|$<<6|Y;X>65535&&(X-=65536,Q.push(X>>>10&1023|55296),X=56320|1023&X),Q.push(X)}else Q.push(T);Q.length>=4096&&(Y+=String.fromCharCode(...Q),Q.length=0)}return Q.length>0&&(Y+=String.fromCharCode(...Q)),Y}let eN=new TextDecoder;function ensureUint8Array(C){return C instanceof Uint8Array?C:ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):C instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&C instanceof SharedArrayBuffer?new Uint8Array(C):Uint8Array.from(C)}let ek="array",eU="map_key",eL="map_value",mapKeyConverter=C=>{if("string"==typeof C||"number"==typeof C)return C;throw new DecodeError("The type of key must be string or number but "+typeof C)};let StackPool=class StackPool{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(C){let T=this.getUninitializedStateFromPool();T.type=ek,T.position=0,T.size=C,T.array=Array(C)}pushMapState(C){let T=this.getUninitializedStateFromPool();T.type=eU,T.readCount=0,T.size=C,T.map={}}getUninitializedStateFromPool(){return this.stackHeadPosition++,this.stackHeadPosition===this.stack.length&&this.stack.push({type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null}),this.stack[this.stackHeadPosition]}release(C){let T=this.stack[this.stackHeadPosition];if(T!==C)throw Error("Invalid stack state. Released state is not on top of the stack.");C.type===ek&&(C.size=0,C.array=void 0,C.position=0,C.type=void 0),(C.type===eU||C.type===eL)&&(C.size=0,C.map=void 0,C.readCount=0,C.type=void 0),this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}};let eM=new DataView(new ArrayBuffer(0)),eF=new Uint8Array(eM.buffer);try{eM.getInt8(0)}catch(C){if(!(C instanceof RangeError))throw Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}let ej=RangeError("Insufficient data"),ez=new class{constructor(C=16,T=16){this.hit=0,this.miss=0,this.maxKeyLength=C,this.maxLengthPerKey=T,this.caches=[];for(let C=0;C<this.maxKeyLength;C++)this.caches.push([])}canBeCached(C){return C>0&&C<=this.maxKeyLength}find(C,T,N){let U=this.caches[N-1];e:for(let $ of U){let U=$.bytes;for(let $=0;$<N;$++)if(U[$]!==C[T+$])continue e;return $.str}return null}store(C,T){let N=this.caches[C.length-1],U={bytes:C,str:T};N.length>=this.maxLengthPerKey?N[Math.random()*N.length|0]=U:N.push(U)}decode(C,T,N){let U=this.find(C,T,N);if(null!=U)return this.hit++,U;this.miss++;let $=utf8DecodeJs(C,T,N),Q=Uint8Array.prototype.slice.call(C,T,T+N);return this.store(Q,$),$}};let Decoder_Decoder=class Decoder_Decoder{constructor(C){this.totalPos=0,this.pos=0,this.view=eM,this.bytes=eF,this.headByte=-1,this.stack=new StackPool,this.entered=!1,this.extensionCodec=C?.extensionCodec??ExtensionCodec.defaultCodec,this.context=C?.context,this.useBigInt64=C?.useBigInt64??!1,this.rawStrings=C?.rawStrings??!1,this.maxStrLength=C?.maxStrLength??4294967295,this.maxBinLength=C?.maxBinLength??4294967295,this.maxArrayLength=C?.maxArrayLength??4294967295,this.maxMapLength=C?.maxMapLength??4294967295,this.maxExtLength=C?.maxExtLength??4294967295,this.keyDecoder=C?.keyDecoder!==void 0?C.keyDecoder:ez,this.mapKeyConverter=C?.mapKeyConverter??mapKeyConverter}clone(){return new Decoder_Decoder({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.reset()}setBuffer(C){let T=ensureUint8Array(C);this.bytes=T,this.view=new DataView(T.buffer,T.byteOffset,T.byteLength),this.pos=0}appendBuffer(C){if(-1!==this.headByte||this.hasRemaining(1)){let T=this.bytes.subarray(this.pos),N=ensureUint8Array(C),U=new Uint8Array(T.length+N.length);U.set(T),U.set(N,T.length),this.setBuffer(U)}else this.setBuffer(C)}hasRemaining(C){return this.view.byteLength-this.pos>=C}createExtraByteError(C){let{view:T,pos:N}=this;return RangeError(`Extra ${T.byteLength-N} of ${T.byteLength} byte(s) found at buffer[${C}]`)}decode(C){if(this.entered){let T=this.clone();return T.decode(C)}try{this.entered=!0,this.reinitializeState(),this.setBuffer(C);let T=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return T}finally{this.entered=!1}}*decodeMulti(C){if(this.entered){let T=this.clone();yield*T.decodeMulti(C);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(C);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(C){if(this.entered){let T=this.clone();return T.decodeAsync(C)}try{let T;this.entered=!0;let N=!1;for await(let U of C){if(N)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(U);try{T=this.doDecodeSync(),N=!0}catch(C){if(!(C instanceof RangeError))throw C}this.totalPos+=this.pos}if(N){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return T}let{headByte:U,pos:$,totalPos:Q}=this;throw RangeError(`Insufficient data in parsing ${prettyByte(U)} at ${Q} (${$} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(C){return this.decodeMultiAsync(C,!0)}decodeStream(C){return this.decodeMultiAsync(C,!1)}async *decodeMultiAsync(C,T){if(this.entered){let N=this.clone();yield*N.decodeMultiAsync(C,T);return}try{this.entered=!0;let N=T,U=-1;for await(let $ of C){if(T&&0===U)throw this.createExtraByteError(this.totalPos);this.appendBuffer($),N&&(U=this.readArraySize(),N=!1,this.complete());try{for(;yield this.doDecodeSync(),0!=--U;);}catch(C){if(!(C instanceof RangeError))throw C}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){t:for(;;){let C;let T=this.readHeadByte();if(T>=224)C=T-256;else if(T<192){if(T<128)C=T;else if(T<144){let N=T-128;if(0!==N){this.pushMapState(N),this.complete();continue}C={}}else if(T<160){let N=T-144;if(0!==N){this.pushArrayState(N),this.complete();continue}C=[]}else{let N=T-160;C=this.decodeString(N,0)}}else if(192===T)C=null;else if(194===T)C=!1;else if(195===T)C=!0;else if(202===T)C=this.readF32();else if(203===T)C=this.readF64();else if(204===T)C=this.readU8();else if(205===T)C=this.readU16();else if(206===T)C=this.readU32();else if(207===T)C=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===T)C=this.readI8();else if(209===T)C=this.readI16();else if(210===T)C=this.readI32();else if(211===T)C=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===T){let T=this.lookU8();C=this.decodeString(T,1)}else if(218===T){let T=this.lookU16();C=this.decodeString(T,2)}else if(219===T){let T=this.lookU32();C=this.decodeString(T,4)}else if(220===T){let T=this.readU16();if(0!==T){this.pushArrayState(T),this.complete();continue}C=[]}else if(221===T){let T=this.readU32();if(0!==T){this.pushArrayState(T),this.complete();continue}C=[]}else if(222===T){let T=this.readU16();if(0!==T){this.pushMapState(T),this.complete();continue}C={}}else if(223===T){let T=this.readU32();if(0!==T){this.pushMapState(T),this.complete();continue}C={}}else if(196===T){let T=this.lookU8();C=this.decodeBinary(T,1)}else if(197===T){let T=this.lookU16();C=this.decodeBinary(T,2)}else if(198===T){let T=this.lookU32();C=this.decodeBinary(T,4)}else if(212===T)C=this.decodeExtension(1,0);else if(213===T)C=this.decodeExtension(2,0);else if(214===T)C=this.decodeExtension(4,0);else if(215===T)C=this.decodeExtension(8,0);else if(216===T)C=this.decodeExtension(16,0);else if(199===T){let T=this.lookU8();C=this.decodeExtension(T,1)}else if(200===T){let T=this.lookU16();C=this.decodeExtension(T,2)}else if(201===T){let T=this.lookU32();C=this.decodeExtension(T,4)}else throw new DecodeError(`Unrecognized type byte: ${prettyByte(T)}`);this.complete();let N=this.stack;for(;N.length>0;){let T=N.top();if(T.type===ek){if(T.array[T.position]=C,T.position++,T.position===T.size)C=T.array,N.release(T);else continue t}else if(T.type===eU){if("__proto__"===C)throw new DecodeError("The key __proto__ is not allowed");T.key=this.mapKeyConverter(C),T.type=eL;continue t}else if(T.map[T.key]=C,T.readCount++,T.readCount===T.size)C=T.map,N.release(T);else{T.key=null,T.type=eU;continue t}}return C}}readHeadByte(){return -1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){let C=this.readHeadByte();switch(C){case 220:return this.readU16();case 221:return this.readU32();default:if(C<160)return C-144;throw new DecodeError(`Unrecognized array type byte: ${prettyByte(C)}`)}}pushMapState(C){if(C>this.maxMapLength)throw new DecodeError(`Max length exceeded: map length (${C}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(C)}pushArrayState(C){if(C>this.maxArrayLength)throw new DecodeError(`Max length exceeded: array length (${C}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(C)}decodeString(C,T){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(C,T):this.decodeBinary(C,T)}decodeUtf8String(C,T){let N;if(C>this.maxStrLength)throw new DecodeError(`Max length exceeded: UTF-8 byte length (${C}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+T+C)throw ej;let U=this.pos+T;if(this.stateIsMapKey()&&this.keyDecoder?.canBeCached(C))N=this.keyDecoder.decode(this.bytes,U,C);else{var $;$=this.bytes,N=C>200?function(C,T,N){let U=C.subarray(T,T+N);return eN.decode(U)}($,U,C):utf8DecodeJs($,U,C)}return this.pos+=T+C,N}stateIsMapKey(){if(this.stack.length>0){let C=this.stack.top();return C.type===eU}return!1}decodeBinary(C,T){if(C>this.maxBinLength)throw new DecodeError(`Max length exceeded: bin length (${C}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(C+T))throw ej;let N=this.pos+T,U=this.bytes.subarray(N,N+C);return this.pos+=T+C,U}decodeExtension(C,T){if(C>this.maxExtLength)throw new DecodeError(`Max length exceeded: ext length (${C}) > maxExtLength (${this.maxExtLength})`);let N=this.view.getInt8(this.pos+T),U=this.decodeBinary(C,T+1);return this.extensionCodec.decode(U,N,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let C=this.view.getUint8(this.pos);return this.pos++,C}readI8(){let C=this.view.getInt8(this.pos);return this.pos++,C}readU16(){let C=this.view.getUint16(this.pos);return this.pos+=2,C}readI16(){let C=this.view.getInt16(this.pos);return this.pos+=2,C}readU32(){let C=this.view.getUint32(this.pos);return this.pos+=4,C}readI32(){let C=this.view.getInt32(this.pos);return this.pos+=4,C}readU64(){let C=function(C,T){let N=C.getUint32(T),U=C.getUint32(T+4);return 4294967296*N+U}(this.view,this.pos);return this.pos+=8,C}readI64(){let C=getInt64(this.view,this.pos);return this.pos+=8,C}readU64AsBigInt(){let C=this.view.getBigUint64(this.pos);return this.pos+=8,C}readI64AsBigInt(){let C=this.view.getBigInt64(this.pos);return this.pos+=8,C}readF32(){let C=this.view.getFloat32(this.pos);return this.pos+=4,C}readF64(){let C=this.view.getFloat64(this.pos);return this.pos+=8,C}};let Encoder=class Encoder{constructor(C){this.entered=!1,this.extensionCodec=C?.extensionCodec??ExtensionCodec.defaultCodec,this.context=C?.context,this.useBigInt64=C?.useBigInt64??!1,this.maxDepth=C?.maxDepth??100,this.initialBufferSize=C?.initialBufferSize??2048,this.sortKeys=C?.sortKeys??!1,this.forceFloat32=C?.forceFloat32??!1,this.ignoreUndefined=C?.ignoreUndefined??!1,this.forceIntegerToFloat=C?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Encoder({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(C){if(this.entered){let T=this.clone();return T.encodeSharedRef(C)}try{return this.entered=!0,this.reinitializeState(),this.doEncode(C,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(C){if(this.entered){let T=this.clone();return T.encode(C)}try{return this.entered=!0,this.reinitializeState(),this.doEncode(C,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(C,T){if(T>this.maxDepth)throw Error(`Too deep objects in depth ${T}`);null==C?this.encodeNil():"boolean"==typeof C?this.encodeBoolean(C):"number"==typeof C?this.forceIntegerToFloat?this.encodeNumberAsFloat(C):this.encodeNumber(C):"string"==typeof C?this.encodeString(C):this.useBigInt64&&"bigint"==typeof C?this.encodeBigInt64(C):this.encodeObject(C,T)}ensureBufferSizeToWrite(C){let T=this.pos+C;this.view.byteLength<T&&this.resizeBuffer(2*T)}resizeBuffer(C){let T=new ArrayBuffer(C),N=new Uint8Array(T),U=new DataView(T);N.set(this.bytes),this.view=U,this.bytes=N}encodeNil(){this.writeU8(192)}encodeBoolean(C){!1===C?this.writeU8(194):this.writeU8(195)}encodeNumber(C){!this.forceIntegerToFloat&&Number.isSafeInteger(C)?C>=0?C<128?this.writeU8(C):C<256?(this.writeU8(204),this.writeU8(C)):C<65536?(this.writeU8(205),this.writeU16(C)):C<4294967296?(this.writeU8(206),this.writeU32(C)):this.useBigInt64?this.encodeNumberAsFloat(C):(this.writeU8(207),this.writeU64(C)):C>=-32?this.writeU8(224|C+32):C>=-128?(this.writeU8(208),this.writeI8(C)):C>=-32768?(this.writeU8(209),this.writeI16(C)):C>=-2147483648?(this.writeU8(210),this.writeI32(C)):this.useBigInt64?this.encodeNumberAsFloat(C):(this.writeU8(211),this.writeI64(C)):this.encodeNumberAsFloat(C)}encodeNumberAsFloat(C){this.forceFloat32?(this.writeU8(202),this.writeF32(C)):(this.writeU8(203),this.writeF64(C))}encodeBigInt64(C){C>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(C)):(this.writeU8(211),this.writeBigInt64(C))}writeStringHeader(C){if(C<32)this.writeU8(160+C);else if(C<256)this.writeU8(217),this.writeU8(C);else if(C<65536)this.writeU8(218),this.writeU16(C);else if(C<4294967296)this.writeU8(219),this.writeU32(C);else throw Error(`Too long string: ${C} bytes in UTF-8`)}encodeString(C){var T,N,U;let $=function(C){let T=C.length,N=0,U=0;for(;U<T;){let $=C.charCodeAt(U++);if((4294967168&$)==0){N++;continue}if((4294965248&$)==0)N+=2;else{if($>=55296&&$<=56319&&U<T){let T=C.charCodeAt(U);(64512&T)==56320&&(++U,$=((1023&$)<<10)+(1023&T)+65536)}(4294901760&$)==0?N+=3:N+=4}}return N}(C);this.ensureBufferSizeToWrite(5+$),this.writeStringHeader($),T=C,N=this.bytes,U=this.pos,T.length>50?eT.encodeInto(T,N.subarray(U)):function(C,T,N){let U=C.length,$=N,Q=0;for(;Q<U;){let N=C.charCodeAt(Q++);if((4294967168&N)==0){T[$++]=N;continue}if((4294965248&N)==0)T[$++]=N>>6&31|192;else{if(N>=55296&&N<=56319&&Q<U){let T=C.charCodeAt(Q);(64512&T)==56320&&(++Q,N=((1023&N)<<10)+(1023&T)+65536)}(4294901760&N)==0?T[$++]=N>>12&15|224:(T[$++]=N>>18&7|240,T[$++]=N>>12&63|128),T[$++]=N>>6&63|128}T[$++]=63&N|128}}(T,N,U),this.pos+=$}encodeObject(C,T){let N=this.extensionCodec.tryToEncode(C,this.context);if(null!=N)this.encodeExtension(N);else if(Array.isArray(C))this.encodeArray(C,T);else if(ArrayBuffer.isView(C))this.encodeBinary(C);else if("object"==typeof C)this.encodeMap(C,T);else throw Error(`Unrecognized object: ${Object.prototype.toString.apply(C)}`)}encodeBinary(C){let T=C.byteLength;if(T<256)this.writeU8(196),this.writeU8(T);else if(T<65536)this.writeU8(197),this.writeU16(T);else if(T<4294967296)this.writeU8(198),this.writeU32(T);else throw Error(`Too large binary: ${T}`);let N=ensureUint8Array(C);this.writeU8a(N)}encodeArray(C,T){let N=C.length;if(N<16)this.writeU8(144+N);else if(N<65536)this.writeU8(220),this.writeU16(N);else if(N<4294967296)this.writeU8(221),this.writeU32(N);else throw Error(`Too large array: ${N}`);for(let N of C)this.doEncode(N,T+1)}countWithoutUndefined(C,T){let N=0;for(let U of T)void 0!==C[U]&&N++;return N}encodeMap(C,T){let N=Object.keys(C);this.sortKeys&&N.sort();let U=this.ignoreUndefined?this.countWithoutUndefined(C,N):N.length;if(U<16)this.writeU8(128+U);else if(U<65536)this.writeU8(222),this.writeU16(U);else if(U<4294967296)this.writeU8(223),this.writeU32(U);else throw Error(`Too large map object: ${U}`);for(let U of N){let N=C[U];this.ignoreUndefined&&void 0===N||(this.encodeString(U),this.doEncode(N,T+1))}}encodeExtension(C){if("function"==typeof C.data){let T=C.data(this.pos+6),N=T.length;if(N>=4294967296)throw Error(`Too large extension object: ${N}`);this.writeU8(201),this.writeU32(N),this.writeI8(C.type),this.writeU8a(T);return}let T=C.data.length;if(1===T)this.writeU8(212);else if(2===T)this.writeU8(213);else if(4===T)this.writeU8(214);else if(8===T)this.writeU8(215);else if(16===T)this.writeU8(216);else if(T<256)this.writeU8(199),this.writeU8(T);else if(T<65536)this.writeU8(200),this.writeU16(T);else if(T<4294967296)this.writeU8(201),this.writeU32(T);else throw Error(`Too large extension object: ${T}`);this.writeI8(C.type),this.writeU8a(C.data)}writeU8(C){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,C),this.pos++}writeU8a(C){let T=C.length;this.ensureBufferSizeToWrite(T),this.bytes.set(C,this.pos),this.pos+=T}writeI8(C){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,C),this.pos++}writeU16(C){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,C),this.pos+=2}writeI16(C){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,C),this.pos+=2}writeU32(C){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,C),this.pos+=4}writeI32(C){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,C),this.pos+=4}writeF32(C){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,C),this.pos+=4}writeF64(C){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,C),this.pos+=8}writeU64(C){this.ensureBufferSizeToWrite(8),function(C,T,N){let U=N/4294967296;C.setUint32(T,U),C.setUint32(T+4,N)}(this.view,this.pos,C),this.pos+=8}writeI64(C){this.ensureBufferSizeToWrite(8),setInt64(this.view,this.pos,C),this.pos+=8}writeBigUint64(C){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,C),this.pos+=8}writeBigInt64(C){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,C),this.pos+=8}};function isArrayOf(C,T){return!!Array.isArray(T)&&(0===T.length||(C?T.every(C=>"string"==typeof C):T.every(C=>Number.isSafeInteger(C))))}function astr(C,T){if("string"!=typeof T)throw Error(`${C}: string expected`);return!0}function anumber(C){if(!Number.isSafeInteger(C))throw Error(`invalid integer: ${C}`)}function aArr(C){if(!Array.isArray(C))throw Error("array expected")}function astrArr(C,T){if(!isArrayOf(!0,T))throw Error(`${C}: array of strings expected`)}function chain(...C){let id=C=>C,wrap=(C,T)=>N=>C(T(N)),T=C.map(C=>C.encode).reduceRight(wrap,id),N=C.map(C=>C.decode).reduce(wrap,id);return{encode:T,decode:N}}function alphabet(C){let T="string"==typeof C?C.split(""):C,N=T.length;astrArr("alphabet",T);let U=new Map(T.map((C,T)=>[C,T]));return{encode:U=>(aArr(U),U.map(U=>{if(!Number.isSafeInteger(U)||U<0||U>=N)throw Error(`alphabet.encode: digit index outside alphabet "${U}". Allowed: ${C}`);return T[U]})),decode:T=>(aArr(T),T.map(T=>{astr("alphabet.decode",T);let N=U.get(T);if(void 0===N)throw Error(`Unknown letter: "${T}". Allowed: ${C}`);return N}))}}function join(C=""){return astr("join",C),{encode:T=>(astrArr("join.decode",T),T.join(C)),decode:T=>(astr("join.decode",T),T.split(C))}}let gcd=(C,T)=>0===T?C:gcd(T,C%T),radix2carry=(C,T)=>C+(T-gcd(C,T)),eq=(()=>{let C=[];for(let T=0;T<40;T++)C.push(2**T);return C})();function convertRadix2(C,T,N,U){if(aArr(C),T<=0||T>32)throw Error(`convertRadix2: wrong from=${T}`);if(N<=0||N>32)throw Error(`convertRadix2: wrong to=${N}`);if(radix2carry(T,N)>32)throw Error(`convertRadix2: carry overflow from=${T} to=${N} carryBits=${radix2carry(T,N)}`);let $=0,Q=0,Y=eq[T],X=eq[N]-1,ee=[];for(let U of C){if(anumber(U),U>=Y)throw Error(`convertRadix2: invalid data word=${U} from=${T}`);if($=$<<T|U,Q+T>32)throw Error(`convertRadix2: carry overflow pos=${Q} from=${T}`);for(Q+=T;Q>=N;Q-=N)ee.push(($>>Q-N&X)>>>0);let C=eq[Q];if(void 0===C)throw Error("invalid carry");$&=C-1}if($=$<<N-Q&X,!U&&Q>=T)throw Error("Excess padding");if(!U&&$>0)throw Error(`Non-zero padding: ${$}`);return U&&Q>0&&ee.push($>>>0),ee}let eH=chain(function(C,T=!1){if(anumber(C),C<=0||C>32)throw Error("radix2: bits should be in (0..32]");if(radix2carry(8,C)>32||radix2carry(C,8)>32)throw Error("radix2: carry overflow");return{encode:N=>{var U;if(!((U=N)instanceof Uint8Array||ArrayBuffer.isView(U)&&"Uint8Array"===U.constructor.name))throw Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(N),8,C,!T)},decode:N=>((function(C,T){if(!isArrayOf(!1,T))throw Error(`${C}: array of numbers expected`)})("radix2.decode",N),Uint8Array.from(convertRadix2(N,C,8,T)))}}(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),function(C,T="="){return anumber(C),astr("padding",T),{encode(N){for(astrArr("padding.encode",N);N.length*C%8;)N.push(T);return N},decode(N){astrArr("padding.decode",N);let U=N.length;if(U*C%8)throw Error("padding: invalid, string should have whole number of bytes");for(;U>0&&N[U-1]===T;U--){let T=U-1,N=T*C;if(N%8==0)throw Error("padding: invalid, string has too much padding")}return N.slice(0,U)}}}(5),join("")),eV=("function"==typeof Uint8Array.from([]).toBase64&&Uint8Array.fromBase64,[996825010,642813549,513874426,1027748829,705979059]),eK="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex;eK||function(C){if("function"!=typeof C)throw Error("function expected")}(C=>{if("string"!=typeof C||C.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof C} with length ${C.length}`);return C.toLowerCase()});var eG=N(9392);function as_uint8array_asUint8Array(C){return null!=globalThis.Buffer?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):C}function allocUnsafe(C=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?as_uint8array_asUint8Array(globalThis.Buffer.allocUnsafe(C)):new Uint8Array(C)}function concat(C,T){T||(T=C.reduce((C,T)=>C+T.length,0));let N=allocUnsafe(T),U=0;for(let T of C)N.set(T,U),U+=T.length;return as_uint8array_asUint8Array(N)}var e$=N(1835);function createCodec(C,T,N,U){return{name:C,prefix:T,encoder:{name:C,prefix:T,encode:N},decoder:{decode:U}}}let eQ=createCodec("utf8","u",C=>{let T=new TextDecoder("utf8");return"u"+T.decode(C)},C=>{let T=new TextEncoder;return T.encode(C.substring(1))}),eJ=createCodec("ascii","a",C=>{let T="a";for(let N=0;N<C.length;N++)T+=String.fromCharCode(C[N]);return T},C=>{C=C.substring(1);let T=allocUnsafe(C.length);for(let N=0;N<C.length;N++)T[N]=C.charCodeAt(N);return T}),eW={utf8:eQ,"utf-8":eQ,hex:e$.gh.base16,latin1:eJ,ascii:eJ,binary:eJ,...e$.gh};function fromString(C,T="utf8"){let N=eW[T];if(!N)throw Error(`Unsupported encoding "${T}"`);return("utf8"===T||"utf-8"===T)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?as_uint8array_asUint8Array(globalThis.Buffer.from(C,"utf-8")):N.decoder.decode(`${N.prefix}${C}`)}function to_string_toString(C,T="utf8"){let N=eW[T];if(!N)throw Error(`Unsupported encoding "${T}"`);return("utf8"===T||"utf-8"===T)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(C.buffer,C.byteOffset,C.byteLength).toString("utf8"):N.encoder.encode(C).substring(1)}var eZ=N(7968),eY=N(1191),eX=N(3454),e0=N(8764).lW;function Fe(C){let[T,N]=C.split(":");return{namespace:T,reference:N}}function _s(C,T=[]){let N=[];return Object.keys(C).forEach(U=>{if(T.length&&!T.includes(U))return;let $=C[U];N.push(...$.accounts)}),N}function ve(C,T){return C.includes(":")?[C]:T.chains||[]}var e1=Object.defineProperty,e2=Object.defineProperties,e3=Object.getOwnPropertyDescriptors,e8=Object.getOwnPropertySymbols,e4=Object.prototype.hasOwnProperty,e6=Object.prototype.propertyIsEnumerable,Ze=(C,T,N)=>T in C?e1(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,Qn=(C,T)=>{for(var N in T||(T={}))e4.call(T,N)&&Ze(C,N,T[N]);if(e8)for(var N of e8(T))e6.call(T,N)&&Ze(C,N,T[N]);return C},Ps=(C,T)=>e2(C,e3(T)),tr=(C,T,N)=>Ze(C,"symbol"!=typeof T?T+"":T,N);let e5={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function Ye(){return"u">typeof eX&&"u">typeof eX.versions&&"u">typeof eX.versions.node}function Bt(){return!(0,X.getDocument)()&&!!(0,X.getNavigator)()&&"ReactNative"===navigator.product}function zt(){return!Ye()&&!!(0,X.getNavigator)()&&!!(0,X.getDocument)()}function Pt(){return Bt()?e5.reactNative:Ye()?e5.node:zt()?e5.browser:e5.unknown}function qs(){var C;try{return Bt()&&"u">typeof N.g&&"u">typeof(null==N.g?void 0:N.g.Application)?null==(C=N.g.Application)?void 0:C.applicationId:void 0}catch{return}}function sr(){return(0,ee.D)()||{name:"",description:"",url:"",icons:[""]}}function cr(C,T,U){let $=function(){if(Pt()===e5.reactNative&&"u">typeof N.g&&"u">typeof(null==N.g?void 0:N.g.Platform)){let{OS:C,Version:T}=N.g.Platform;return[C,T].join("-")}let C=(0,Q.qY)();if(null===C)return"unknown";let T=C.os?C.os.replace(" ","").toLowerCase():"unknown";return"browser"===C.type?[T,C.name,C.version].join("-"):[T,C.version].join("-")}(),Y=function(){var C;let T=Pt();return T===e5.browser?[T,(null==(C=(0,X.getLocation)())?void 0:C.host)||"unknown"].join(":"):T}();return[[C,T].join("-"),["js",U].join("-"),$,Y].join("/")}function It(C,T){return C.filter(C=>T.includes(C)).length===C.length}function Ys(C){return Object.fromEntries(C.entries())}function Xs(C){return new Map(Object.entries(C))}function ei(C=Y.FIVE_MINUTES,T){let N,U,$,Q;let X=(0,Y.toMiliseconds)(C||Y.FIVE_MINUTES);return{resolve:C=>{$&&N&&(clearTimeout($),N(C),Q=Promise.resolve(C))},reject:C=>{$&&U&&(clearTimeout($),U(C))},done:()=>new Promise((C,Y)=>{if(Q)return C(Q);$=setTimeout(()=>{let C=Error(T);Q=Promise.reject(C),Y(C)},X),N=C,U=Y})}}function ni(C,T,N){return new Promise(async(U,$)=>{let Q=setTimeout(()=>$(Error(N)),T);try{let T=await C;U(T)}catch(C){$(C)}clearTimeout(Q)})}function Xe(C,T){if("string"==typeof T&&T.startsWith(`${C}:`))return T;if("topic"===C.toLowerCase()){if("string"!=typeof T)throw Error('Value must be "string" for expirer target type: topic');return`topic:${T}`}if("id"===C.toLowerCase()){if("number"!=typeof T)throw Error('Value must be "number" for expirer target type: id');return`id:${T}`}throw Error(`Unknown expirer target type: ${C}`)}function si(C){let[T,N]=C.split(":"),U={id:void 0,topic:void 0};if("topic"===T&&"string"==typeof N)U.topic=N;else if("id"===T&&Number.isInteger(Number(N)))U.id=Number(N);else throw Error(`Invalid target, expected id:number or topic:string, got ${T}:${N}`);return U}function ii(C,T){return(0,Y.fromMiliseconds)((T||Date.now())+(0,Y.toMiliseconds)(C))}function fi(C){return Date.now()>=(0,Y.toMiliseconds)(C)}function ci(C,T){return`${C}${T?`:${T}`:""}`}function ct(C=[],T=[]){return[...new Set([...C,...T])]}async function ai({id:C,topic:T,wcDeepLink:U}){var $;try{if(!U)return;let Q="string"==typeof U?JSON.parse(U):U,Y=Q?.href;if("string"!=typeof Y)return;let ee=function(C,T,N){let U=`requestId=${T}&sessionTopic=${N}`;C.endsWith("/")&&(C=C.slice(0,-1));let $=`${C}`;if(C.startsWith("https://t.me")){let T=C.includes("?")?"&startapp=":"?startapp=";$=`${$}${T}${function(C,T=!1){let N=e0.from(C).toString("base64");return T?N.replace(/[=]/g,""):N}(U,!0)}`}else $=`${$}/wc?${U}`;return $}(Y,C,T),es=Pt();if(es===e5.browser){let C;if(!(null!=($=(0,X.getDocument)())&&$.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}C="_self",function(){try{return window.self!==window.top}catch{return!1}}()?C="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||ee.startsWith("https://")||ee.startsWith("http://"))&&(C="_blank"),window.open(ee,C,"noreferrer noopener")}else es===e5.reactNative&&"u">typeof(null==N.g?void 0:N.g.Linking)&&await N.g.Linking.openURL(ee)}catch(C){console.error(C)}}async function ui(C,T){let N="";try{if(zt()&&(N=localStorage.getItem(T)))return N;N=await C.getItem(T)}catch(C){console.error(C)}return N}function li(C,T){if(!C.includes(T))return null;let N=C.split(/([&,?,=])/),U=N.indexOf(T);return N[U+2]}function di(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,C=>{let T=16*Math.random()|0;return("x"===C?T:3&T|8).toString(16)})}function hi(){return"u">typeof eX&&"true"===eX.env.IS_VITEST}function Qe(C){return e0.from(C,"base64").toString("utf-8")}let gi=class gi{constructor({limit:C}){tr(this,"limit"),tr(this,"set"),this.limit=C,this.set=new Set}add(C){if(!this.set.has(C)){if(this.set.size>=this.limit){let C=this.set.values().next().value;C&&this.set.delete(C)}this.set.add(C)}}has(C){return this.set.has(C)}};let e9=BigInt(4294967296-1),e7=BigInt(32);function mr(C,T=!1){return T?{h:Number(C&e9),l:Number(C>>e7&e9)}:{h:0|Number(C>>e7&e9),l:0|Number(C&e9)}}function wr(C,T=!1){let N=C.length,U=new Uint32Array(N),$=new Uint32Array(N);for(let Q=0;Q<N;Q++){let{h:N,l:Y}=mr(C[Q],T);[U[Q],$[Q]]=[N,Y]}return[U,$]}let xr=(C,T,N)=>C>>>N,vr=(C,T,N)=>C<<32-N|T>>>N,At=(C,T,N)=>C>>>N|T<<32-N,St=(C,T,N)=>C<<32-N|T>>>N,se=(C,T,N)=>C<<64-N|T>>>N-32,index_es_ie=(C,T,N)=>C>>>N-32|T<<64-N,bi=(C,T)=>T,yi=(C,T)=>C,mi=(C,T,N)=>C<<N|T>>>32-N,wi=(C,T,N)=>T<<N|C>>>32-N,xi=(C,T,N)=>T<<N-32|C>>>64-N,vi=(C,T,N)=>C<<N-32|T>>>64-N;function dt(C,T,N,U){let $=(T>>>0)+(U>>>0);return{h:C+N+($/4294967296|0)|0,l:0|$}}let tn=(C,T,N)=>(C>>>0)+(T>>>0)+(N>>>0),en=(C,T,N,U)=>T+N+U+(C/4294967296|0)|0,Ei=(C,T,N,U)=>(C>>>0)+(T>>>0)+(N>>>0)+(U>>>0),Bi=(C,T,N,U,$)=>T+N+U+$+(C/4294967296|0)|0,Ii=(C,T,N,U,$)=>(C>>>0)+(T>>>0)+(N>>>0)+(U>>>0)+($>>>0),Ai=(C,T,N,U,$,Q)=>T+N+U+$+Q+(C/4294967296|0)|0,te="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function nn(C){return C instanceof Uint8Array||ArrayBuffer.isView(C)&&"Uint8Array"===C.constructor.name}function mt(C){if(!Number.isSafeInteger(C)||C<0)throw Error("positive integer expected, got "+C)}function at(C,...T){if(!nn(C))throw Error("Uint8Array expected");if(T.length>0&&!T.includes(C.length))throw Error("Uint8Array expected of length "+T+", got length="+C.length)}function rn(C){if("function"!=typeof C||"function"!=typeof C.create)throw Error("Hash should be wrapped by utils.createHasher");mt(C.outputLen),mt(C.blockLen)}function Nt(C,T=!0){if(C.destroyed)throw Error("Hash instance has been destroyed");if(T&&C.finished)throw Error("Hash#digest() has already been called")}function on(C,T){at(C);let N=T.outputLen;if(C.length<N)throw Error("digestInto() expects output buffer of length at least "+N)}function fe(C){return new Uint32Array(C.buffer,C.byteOffset,Math.floor(C.byteLength/4))}function ut(...C){for(let T=0;T<C.length;T++)C[T].fill(0)}function sn(C){return new DataView(C.buffer,C.byteOffset,C.byteLength)}function gt(C,T){return C<<32-T|C>>>T}let ti=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Br(C){return C<<24&4278190080|C<<8&16711680|C>>>8&65280|C>>>24&255}let ts=ti?C=>C:C=>Br(C),ta=ti?C=>C:function(C){for(let T=0;T<C.length;T++)C[T]=Br(C[T]);return C},tl="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,tc=Array.from({length:256},(C,T)=>T.toString(16).padStart(2,"0"));function ce(C){if(at(C),tl)return C.toHex();let T="";for(let N=0;N<C.length;N++)T+=tc[C[N]];return T}let th={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ar(C){return C>=th._0&&C<=th._9?C-th._0:C>=th.A&&C<=th.F?C-(th.A-10):C>=th.a&&C<=th.f?C-(th.a-10):void 0}function fn(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);if(tl)return Uint8Array.fromHex(C);let T=C.length,N=T/2;if(T%2)throw Error("hex string expected, got unpadded hex of length "+T);let U=new Uint8Array(N);for(let T=0,$=0;T<N;T++,$+=2){let N=Ar(C.charCodeAt($)),Q=Ar(C.charCodeAt($+1));if(void 0===N||void 0===Q){let T=C[$]+C[$+1];throw Error('hex string expected, got non-hex character "'+T+'" at index '+$)}U[T]=16*N+Q}return U}function ht(C){return"string"==typeof C&&(C=function(C){if("string"!=typeof C)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(C))}(C)),at(C),C}function Ht(...C){let T=0;for(let N=0;N<C.length;N++){let U=C[N];at(U),T+=U.length}let N=new Uint8Array(T);for(let T=0,U=0;T<C.length;T++){let $=C[T];N.set($,U),U+=$.length}return N}let Ie=class Ie{};function ae(C){let e=T=>C().update(ht(T)).digest(),T=C();return e.outputLen=T.outputLen,e.blockLen=T.blockLen,e.create=()=>C(),e}function Zt(C=32){if(te&&"function"==typeof te.getRandomValues)return te.getRandomValues(new Uint8Array(C));if(te&&"function"==typeof te.randomBytes)return Uint8Array.from(te.randomBytes(C));throw Error("crypto.getRandomValues must be defined")}let tu=BigInt(0),td=BigInt(1),tp=BigInt(2),tg=BigInt(7),ty=BigInt(256),tm=BigInt(113),tb=[],tw=[],t_=[];for(let C=0,T=td,N=1,U=0;C<24;C++){[N,U]=[U,(2*N+3*U)%5],tb.push(2*(5*U+N)),tw.push((C+1)*(C+2)/2%64);let $=tu;for(let C=0;C<7;C++)(T=(T<<td^(T>>tg)*tm)%ty)&tp&&($^=td<<(td<<BigInt(C))-td);t_.push($)}let tv=wr(t_,!0),tE=tv[0],tx=tv[1],_r=(C,T,N)=>N>32?xi(C,T,N):mi(C,T,N),Tr=(C,T,N)=>N>32?vi(C,T,N):wi(C,T,N);let qn=class qn extends Ie{constructor(C,T,N,U=!1,$=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=C,this.suffix=T,this.outputLen=N,this.enableXOF=U,this.rounds=$,mt(N),!(0<C&&C<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=fe(this.state)}clone(){return this._cloneInto()}keccak(){ta(this.state32),function(C,T=24){let N=new Uint32Array(10);for(let U=24-T;U<24;U++){for(let T=0;T<10;T++)N[T]=C[T]^C[T+10]^C[T+20]^C[T+30]^C[T+40];for(let T=0;T<10;T+=2){let U=(T+8)%10,$=(T+2)%10,Q=N[$],Y=N[$+1],X=_r(Q,Y,1)^N[U],ee=Tr(Q,Y,1)^N[U+1];for(let N=0;N<50;N+=10)C[T+N]^=X,C[T+N+1]^=ee}let T=C[2],$=C[3];for(let N=0;N<24;N++){let U=tw[N],Q=_r(T,$,U),Y=Tr(T,$,U),X=tb[N];T=C[X],$=C[X+1],C[X]=Q,C[X+1]=Y}for(let T=0;T<50;T+=10){for(let U=0;U<10;U++)N[U]=C[T+U];for(let U=0;U<10;U++)C[T+U]^=~N[(U+2)%10]&N[(U+4)%10]}C[0]^=tE[U],C[1]^=tx[U]}ut(N)}(this.state32,this.rounds),ta(this.state32),this.posOut=0,this.pos=0}update(C){Nt(this),at(C=ht(C));let{blockLen:T,state:N}=this,U=C.length;for(let $=0;$<U;){let Q=Math.min(T-this.pos,U-$);for(let T=0;T<Q;T++)N[this.pos++]^=C[$++];this.pos===T&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:C,suffix:T,pos:N,blockLen:U}=this;C[N]^=T,(128&T)!=0&&N===U-1&&this.keccak(),C[U-1]^=128,this.keccak()}writeInto(C){Nt(this,!1),at(C),this.finish();let T=this.state,{blockLen:N}=this;for(let U=0,$=C.length;U<$;){this.posOut>=N&&this.keccak();let Q=Math.min(N-this.posOut,$-U);C.set(T.subarray(this.posOut,this.posOut+Q),U),this.posOut+=Q,U+=Q}return C}xofInto(C){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(C)}xof(C){return mt(C),this.xofInto(new Uint8Array(C))}digestInto(C){if(on(C,this),this.finished)throw Error("digest() was already called");return this.writeInto(C),this.destroy(),C}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ut(this.state)}_cloneInto(C){let{blockLen:T,suffix:N,outputLen:U,rounds:$,enableXOF:Q}=this;return C||(C=new qn(T,N,U,Q,$)),C.state32.set(this.state32),C.pos=this.pos,C.posOut=this.posOut,C.finished=this.finished,C.rounds=$,C.suffix=N,C.outputLen=U,C.enableXOF=Q,C.destroyed=this.destroyed,C}};let tA=ae(()=>new qn(136,1,32));let Rr=class Rr extends Ie{constructor(C,T,N,U){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=C,this.outputLen=T,this.padOffset=N,this.isLE=U,this.buffer=new Uint8Array(C),this.view=sn(this.buffer)}update(C){Nt(this),at(C=ht(C));let{view:T,buffer:N,blockLen:U}=this,$=C.length;for(let Q=0;Q<$;){let Y=Math.min(U-this.pos,$-Q);if(Y===U){let T=sn(C);for(;U<=$-Q;Q+=U)this.process(T,Q);continue}N.set(C.subarray(Q,Q+Y),this.pos),this.pos+=Y,Q+=Y,this.pos===U&&(this.process(T,0),this.pos=0)}return this.length+=C.length,this.roundClean(),this}digestInto(C){Nt(this),on(C,this),this.finished=!0;let{buffer:T,view:N,blockLen:U,isLE:$}=this,{pos:Q}=this;T[Q++]=128,ut(this.buffer.subarray(Q)),this.padOffset>U-Q&&(this.process(N,0),Q=0);for(let C=Q;C<U;C++)T[C]=0;(function(C,T,N,U){if("function"==typeof C.setBigUint64)return C.setBigUint64(T,N,U);let $=BigInt(32),Q=BigInt(4294967295),Y=Number(N>>$&Q),X=Number(N&Q),ee=U?4:0,es=U?0:4;C.setUint32(T+ee,Y,U),C.setUint32(T+es,X,U)})(N,U-8,BigInt(8*this.length),$),this.process(N,0);let Y=sn(C),X=this.outputLen;if(X%4)throw Error("_sha2: outputLen should be aligned to 32bit");let ee=X/4,es=this.get();if(ee>es.length)throw Error("_sha2: outputLen bigger than state");for(let C=0;C<ee;C++)Y.setUint32(4*C,es[C],$)}digest(){let{buffer:C,outputLen:T}=this;this.digestInto(C);let N=C.slice(0,T);return this.destroy(),N}_cloneInto(C){C||(C=new this.constructor),C.set(...this.get());let{blockLen:T,buffer:N,length:U,finished:$,destroyed:Q,pos:Y}=this;return C.destroyed=Q,C.finished=$,C.length=U,C.pos=Y,U%T&&C.buffer.set(N),C}clone(){return this._cloneInto()}};let tI=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tP=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),tS=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),tD=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tB=new Uint32Array(64);let Ki=class Ki extends Rr{constructor(C=32){super(64,C,8,!1),this.A=0|tI[0],this.B=0|tI[1],this.C=0|tI[2],this.D=0|tI[3],this.E=0|tI[4],this.F=0|tI[5],this.G=0|tI[6],this.H=0|tI[7]}get(){let{A:C,B:T,C:N,D:U,E:$,F:Q,G:Y,H:X}=this;return[C,T,N,U,$,Q,Y,X]}set(C,T,N,U,$,Q,Y,X){this.A=0|C,this.B=0|T,this.C=0|N,this.D=0|U,this.E=0|$,this.F=0|Q,this.G=0|Y,this.H=0|X}process(C,T){for(let N=0;N<16;N++,T+=4)tB[N]=C.getUint32(T,!1);for(let C=16;C<64;C++){let T=tB[C-15],N=tB[C-2],U=gt(T,7)^gt(T,18)^T>>>3,$=gt(N,17)^gt(N,19)^N>>>10;tB[C]=$+tB[C-7]+U+tB[C-16]|0}let{A:N,B:U,C:$,D:Q,E:Y,F:X,G:ee,H:es}=this;for(let C=0;C<64;C++){var el,ec,eh,eu;let T=gt(Y,6)^gt(Y,11)^gt(Y,25),ed=es+T+((el=Y)&X^~el&ee)+tD[C]+tB[C]|0,ep=(gt(N,2)^gt(N,13)^gt(N,22))+((ec=N)&(eh=U)^ec&(eu=$)^eh&eu)|0;es=ee,ee=X,X=Y,Y=Q+ed|0,Q=$,$=U,U=N,N=ed+ep|0}N=N+this.A|0,U=U+this.B|0,$=$+this.C|0,Q=Q+this.D|0,Y=Y+this.E|0,X=X+this.F|0,ee=ee+this.G|0,es=es+this.H|0,this.set(N,U,$,Q,Y,X,ee,es)}roundClean(){ut(tB)}destroy(){this.set(0,0,0,0,0,0,0,0),ut(this.buffer)}};let tC=wr(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(C=>BigInt(C))),tO=tC[0],tR=tC[1],tT=new Uint32Array(80),tN=new Uint32Array(80);let cn=class cn extends Rr{constructor(C=64){super(128,C,16,!1),this.Ah=0|tS[0],this.Al=0|tS[1],this.Bh=0|tS[2],this.Bl=0|tS[3],this.Ch=0|tS[4],this.Cl=0|tS[5],this.Dh=0|tS[6],this.Dl=0|tS[7],this.Eh=0|tS[8],this.El=0|tS[9],this.Fh=0|tS[10],this.Fl=0|tS[11],this.Gh=0|tS[12],this.Gl=0|tS[13],this.Hh=0|tS[14],this.Hl=0|tS[15]}get(){let{Ah:C,Al:T,Bh:N,Bl:U,Ch:$,Cl:Q,Dh:Y,Dl:X,Eh:ee,El:es,Fh:el,Fl:ec,Gh:eh,Gl:eu,Hh:ed,Hl:ep}=this;return[C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep]}set(C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep){this.Ah=0|C,this.Al=0|T,this.Bh=0|N,this.Bl=0|U,this.Ch=0|$,this.Cl=0|Q,this.Dh=0|Y,this.Dl=0|X,this.Eh=0|ee,this.El=0|es,this.Fh=0|el,this.Fl=0|ec,this.Gh=0|eh,this.Gl=0|eu,this.Hh=0|ed,this.Hl=0|ep}process(C,T){for(let N=0;N<16;N++,T+=4)tT[N]=C.getUint32(T),tN[N]=C.getUint32(T+=4);for(let C=16;C<80;C++){let T=0|tT[C-15],N=0|tN[C-15],U=At(T,N,1)^At(T,N,8)^xr(T,N,7),$=St(T,N,1)^St(T,N,8)^vr(T,N,7),Q=0|tT[C-2],Y=0|tN[C-2],X=At(Q,Y,19)^se(Q,Y,61)^xr(Q,Y,6),ee=St(Q,Y,19)^index_es_ie(Q,Y,61)^vr(Q,Y,6),es=Ei($,ee,tN[C-7],tN[C-16]),el=Bi(es,U,X,tT[C-7],tT[C-16]);tT[C]=0|el,tN[C]=0|es}let{Ah:N,Al:U,Bh:$,Bl:Q,Ch:Y,Cl:X,Dh:ee,Dl:es,Eh:el,El:ec,Fh:eh,Fl:eu,Gh:ed,Gl:ep,Hh:eg,Hl:ey}=this;for(let C=0;C<80;C++){let T=At(el,ec,14)^At(el,ec,18)^se(el,ec,41),em=St(el,ec,14)^St(el,ec,18)^index_es_ie(el,ec,41),eb=el&eh^~el&ed,ew=ec&eu^~ec&ep,e_=Ii(ey,em,ew,tR[C],tN[C]),ev=Ai(e_,eg,T,eb,tO[C],tT[C]),eE=0|e_,ex=At(N,U,28)^se(N,U,34)^se(N,U,39),eA=St(N,U,28)^index_es_ie(N,U,34)^index_es_ie(N,U,39),eI=N&$^N&Y^$&Y,eP=U&Q^U&X^Q&X;eg=0|ed,ey=0|ep,ed=0|eh,ep=0|eu,eh=0|el,eu=0|ec,({h:el,l:ec}=dt(0|ee,0|es,0|ev,0|eE)),ee=0|Y,es=0|X,Y=0|$,X=0|Q,$=0|N,Q=0|U;let eS=tn(eE,eA,eP);N=en(eS,ev,ex,eI),U=0|eS}({h:N,l:U}=dt(0|this.Ah,0|this.Al,0|N,0|U)),({h:$,l:Q}=dt(0|this.Bh,0|this.Bl,0|$,0|Q)),({h:Y,l:X}=dt(0|this.Ch,0|this.Cl,0|Y,0|X)),({h:ee,l:es}=dt(0|this.Dh,0|this.Dl,0|ee,0|es)),({h:el,l:ec}=dt(0|this.Eh,0|this.El,0|el,0|ec)),({h:eh,l:eu}=dt(0|this.Fh,0|this.Fl,0|eh,0|eu)),({h:ed,l:ep}=dt(0|this.Gh,0|this.Gl,0|ed,0|ep)),({h:eg,l:ey}=dt(0|this.Hh,0|this.Hl,0|eg,0|ey)),this.set(N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep,eg,ey)}roundClean(){ut(tT,tN)}destroy(){ut(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};let Gi=class Gi extends cn{constructor(){super(48),this.Ah=0|tP[0],this.Al=0|tP[1],this.Bh=0|tP[2],this.Bl=0|tP[3],this.Ch=0|tP[4],this.Cl=0|tP[5],this.Dh=0|tP[6],this.Dl=0|tP[7],this.Eh=0|tP[8],this.El=0|tP[9],this.Fh=0|tP[10],this.Fl=0|tP[11],this.Gh=0|tP[12],this.Gl=0|tP[13],this.Hh=0|tP[14],this.Hl=0|tP[15]}};let tk=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Zi=class Zi extends cn{constructor(){super(32),this.Ah=0|tk[0],this.Al=0|tk[1],this.Bh=0|tk[2],this.Bl=0|tk[3],this.Ch=0|tk[4],this.Cl=0|tk[5],this.Dh=0|tk[6],this.Dl=0|tk[7],this.Eh=0|tk[8],this.El=0|tk[9],this.Fh=0|tk[10],this.Fl=0|tk[11],this.Gh=0|tk[12],this.Gl=0|tk[13],this.Hh=0|tk[14],this.Hl=0|tk[15]}};let tU=ae(()=>new Ki),tL=ae(()=>new cn),tM=ae(()=>new Gi),tF=ae(()=>new Zi),tj=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),tz=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),tq=new Uint32Array(32);function $t(C,T,N,U,$,Q){let Y=$[Q],X=$[Q+1],ee=tq[2*C],es=tq[2*C+1],el=tq[2*T],ec=tq[2*T+1],eh=tq[2*N],eu=tq[2*N+1],ed=tq[2*U],ep=tq[2*U+1],eg=tn(ee,el,Y);es=en(eg,es,ec,X),ee=0|eg,({Dh:ep,Dl:ed}={Dh:ep^es,Dl:ed^ee}),({Dh:ep,Dl:ed}={Dh:bi(ep,ed),Dl:yi(ep)}),({h:eu,l:eh}=dt(eu,eh,ep,ed)),({Bh:ec,Bl:el}={Bh:ec^eu,Bl:el^eh}),({Bh:ec,Bl:el}={Bh:At(ec,el,24),Bl:St(ec,el,24)}),tq[2*C]=ee,tq[2*C+1]=es,tq[2*T]=el,tq[2*T+1]=ec,tq[2*N]=eh,tq[2*N+1]=eu,tq[2*U]=ed,tq[2*U+1]=ep}function Ct(C,T,N,U,$,Q){let Y=$[Q],X=$[Q+1],ee=tq[2*C],es=tq[2*C+1],el=tq[2*T],ec=tq[2*T+1],eh=tq[2*N],eu=tq[2*N+1],ed=tq[2*U],ep=tq[2*U+1],eg=tn(ee,el,Y);es=en(eg,es,ec,X),ee=0|eg,({Dh:ep,Dl:ed}={Dh:ep^es,Dl:ed^ee}),({Dh:ep,Dl:ed}={Dh:At(ep,ed,16),Dl:St(ep,ed,16)}),({h:eu,l:eh}=dt(eu,eh,ep,ed)),({Bh:ec,Bl:el}={Bh:ec^eu,Bl:el^eh}),({Bh:ec,Bl:el}={Bh:se(ec,el,63),Bl:index_es_ie(ec,el,63)}),tq[2*C]=ee,tq[2*C+1]=es,tq[2*T]=el,tq[2*T+1]=ec,tq[2*N]=eh,tq[2*N+1]=eu,tq[2*U]=ed,tq[2*U+1]=ep}let tf=class tf extends Ie{constructor(C,T){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,mt(C),mt(T),this.blockLen=C,this.outputLen=T,this.buffer=new Uint8Array(C),this.buffer32=fe(this.buffer)}update(C){Nt(this),at(C=ht(C));let{blockLen:T,buffer:N,buffer32:U}=this,$=C.length,Q=C.byteOffset,Y=C.buffer;for(let X=0;X<$;){this.pos===T&&(ta(U),this.compress(U,0,!1),ta(U),this.pos=0);let ee=Math.min(T-this.pos,$-X),es=Q+X;if(ee===T&&!(es%4)&&X+ee<$){let C=new Uint32Array(Y,es,Math.floor(($-X)/4));ta(C);for(let N=0;X+T<$;N+=U.length,X+=T)this.length+=T,this.compress(C,N,!1);ta(C);continue}N.set(C.subarray(X,X+ee),this.pos),this.pos+=ee,this.length+=ee,X+=ee}return this}digestInto(C){Nt(this),on(C,this);let{pos:T,buffer32:N}=this;this.finished=!0,ut(this.buffer.subarray(T)),ta(N),this.compress(N,0,!0),ta(N);let U=fe(C);this.get().forEach((C,T)=>U[T]=ts(C))}digest(){let{buffer:C,outputLen:T}=this;this.digestInto(C);let N=C.slice(0,T);return this.destroy(),N}_cloneInto(C){let{buffer:T,length:N,finished:U,destroyed:$,outputLen:Q,pos:Y}=this;return C||(C=new this.constructor({dkLen:Q})),C.set(...this.get()),C.buffer.set(T),C.destroyed=$,C.finished=U,C.length=N,C.pos=Y,C.outputLen=Q,C}clone(){return this._cloneInto()}};let ef=class ef extends tf{constructor(C={}){let T=void 0===C.dkLen?64:C.dkLen;super(128,T),this.v0l=0|tz[0],this.v0h=0|tz[1],this.v1l=0|tz[2],this.v1h=0|tz[3],this.v2l=0|tz[4],this.v2h=0|tz[5],this.v3l=0|tz[6],this.v3h=0|tz[7],this.v4l=0|tz[8],this.v4h=0|tz[9],this.v5l=0|tz[10],this.v5h=0|tz[11],this.v6l=0|tz[12],this.v6h=0|tz[13],this.v7l=0|tz[14],this.v7h=0|tz[15],function(C,T={},N,U,$){if(mt(N),C<0||C>N)throw Error("outputLen bigger than keyLen");let{key:Q,salt:Y,personalization:X}=T;if(void 0!==Q&&(Q.length<1||Q.length>N))throw Error("key length must be undefined or 1.."+N);if(void 0!==Y&&Y.length!==U)throw Error("salt must be undefined or "+U);if(void 0!==X&&X.length!==$)throw Error("personalization must be undefined or "+$)}(T,C,64,16,16);let{key:N,personalization:U,salt:$}=C,Q=0;if(void 0!==N&&(Q=(N=ht(N)).length),this.v0l^=this.outputLen|Q<<8|16842752,void 0!==$){$=ht($);let C=fe($);this.v4l^=ts(C[0]),this.v4h^=ts(C[1]),this.v5l^=ts(C[2]),this.v5h^=ts(C[3])}if(void 0!==U){U=ht(U);let C=fe(U);this.v6l^=ts(C[0]),this.v6h^=ts(C[1]),this.v7l^=ts(C[2]),this.v7h^=ts(C[3])}if(void 0!==N){let C=new Uint8Array(this.blockLen);C.set(N),this.update(C)}}get(){let{v0l:C,v0h:T,v1l:N,v1h:U,v2l:$,v2h:Q,v3l:Y,v3h:X,v4l:ee,v4h:es,v5l:el,v5h:ec,v6l:eh,v6h:eu,v7l:ed,v7h:ep}=this;return[C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep]}set(C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep){this.v0l=0|C,this.v0h=0|T,this.v1l=0|N,this.v1h=0|U,this.v2l=0|$,this.v2h=0|Q,this.v3l=0|Y,this.v3h=0|X,this.v4l=0|ee,this.v4h=0|es,this.v5l=0|el,this.v5h=0|ec,this.v6l=0|eh,this.v6h=0|eu,this.v7l=0|ed,this.v7h=0|ep}compress(C,T,N){this.get().forEach((C,T)=>tq[T]=C),tq.set(tz,16);let{h:U,l:$}=mr(BigInt(this.length));tq[24]=tz[8]^$,tq[25]=tz[9]^U,N&&(tq[28]=~tq[28],tq[29]=~tq[29]);let Q=0;for(let N=0;N<12;N++)$t(0,4,8,12,C,T+2*tj[Q++]),Ct(0,4,8,12,C,T+2*tj[Q++]),$t(1,5,9,13,C,T+2*tj[Q++]),Ct(1,5,9,13,C,T+2*tj[Q++]),$t(2,6,10,14,C,T+2*tj[Q++]),Ct(2,6,10,14,C,T+2*tj[Q++]),$t(3,7,11,15,C,T+2*tj[Q++]),Ct(3,7,11,15,C,T+2*tj[Q++]),$t(0,5,10,15,C,T+2*tj[Q++]),Ct(0,5,10,15,C,T+2*tj[Q++]),$t(1,6,11,12,C,T+2*tj[Q++]),Ct(1,6,11,12,C,T+2*tj[Q++]),$t(2,7,8,13,C,T+2*tj[Q++]),Ct(2,7,8,13,C,T+2*tj[Q++]),$t(3,4,9,14,C,T+2*tj[Q++]),Ct(3,4,9,14,C,T+2*tj[Q++]);this.v0l^=tq[0]^tq[16],this.v0h^=tq[1]^tq[17],this.v1l^=tq[2]^tq[18],this.v1h^=tq[3]^tq[19],this.v2l^=tq[4]^tq[20],this.v2h^=tq[5]^tq[21],this.v3l^=tq[6]^tq[22],this.v3h^=tq[7]^tq[23],this.v4l^=tq[8]^tq[24],this.v4h^=tq[9]^tq[25],this.v5l^=tq[10]^tq[26],this.v5h^=tq[11]^tq[27],this.v6l^=tq[12]^tq[28],this.v6h^=tq[13]^tq[29],this.v7l^=tq[14]^tq[30],this.v7h^=tq[15]^tq[31],ut(tq)}destroy(){this.destroyed=!0,ut(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};let tH=function(C){let e=(T,N)=>C(N).update(ht(T)).digest(),T=C({});return e.outputLen=T.outputLen,e.blockLen=T.blockLen,e.create=T=>C(T),e}(C=>new ef(C));function an(C){let T=`Ethereum Signed Message:
${C.length}`,N=new TextEncoder().encode(T+C);return"0x"+e0.from(tA(N)).toString("hex")}async function Cr(C,T,N,U,$,Q){switch(N.t){case"eip191":return await Lr(C,T,N.s);case"eip1271":return await jr(C,T,N.s,U,$,Q);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${N.t}`)}}async function Lr(C,T,N){return(await recoverAddress({hash:an(T),signature:N})).toLowerCase()===C.toLowerCase()}async function jr(C,T,N,U,$,Q){let Y=Fe(U);if(!Y.namespace||!Y.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${U}`);try{let Y="0x1626ba7e",X=N.substring(2),ee=(X.length/2).toString(16).padStart(64,"0"),es=(T.startsWith("0x")?T:an(T)).substring(2),el=await fetch(`${Q||"https://rpc.walletconnect.org/v1"}/?chainId=${U}&projectId=${$}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:C,data:Y+es+"0000000000000000000000000000000000000000000000000000000000000040"+ee+X},"latest"]})}),{result:ec}=await el.json();return!!ec&&ec.slice(0,Y.length).toLowerCase()===Y.toLowerCase()}catch(C){return console.error("isValidEip1271Signature: ",C),!1}}function cf(C){let T=new Uint8Array(tU(function(C){if(C instanceof Uint8Array)return C;if(Array.isArray(C))return new Uint8Array(C);if("object"==typeof C&&null!=C&&C.data)return new Uint8Array(Object.values(C.data));if("object"==typeof C&&C)return new Uint8Array(Object.values(C));throw Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}(C)));return eO.encode(T)}function af(C){let T=e0.from(C,"base64"),N=function(C,T){let N=new Decoder_Decoder(void 0);return N.decode(C)}(T).txn;if(!N)throw Error("Invalid signed transaction: missing 'txn' field");let U=function(C,T){let N=new Encoder(void 0);return N.encodeSharedRef(C)}(N),$=e0.from("TX"),Q=e0.concat([$,e0.from(U)]),Y=tF(Q);return eH.encode(Y).replace(/=+$/,"")}function un(C){let T=[],N=BigInt(C);for(;N>=BigInt(128);)T.push(Number(N&BigInt(127)|BigInt(128))),N>>=BigInt(7);return T.push(Number(N)),e0.from(T)}var tV=Object.defineProperty,tK=Object.defineProperties,tG=Object.getOwnPropertyDescriptors,t$=Object.getOwnPropertySymbols,tQ=Object.prototype.hasOwnProperty,tJ=Object.prototype.propertyIsEnumerable,Hr=(C,T,N)=>T in C?tV(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,ln=(C,T)=>{for(var N in T||(T={}))tQ.call(T,N)&&Hr(C,N,T[N]);if(t$)for(var N of t$(T))tJ.call(T,N)&&Hr(C,N,T[N]);return C},Dr=(C,T)=>tK(C,tG(T));let Se=C=>C?.split(":"),Mr=C=>{let T=C&&Se(C);if(T)return C.includes("did:pkh:")?T[3]:T[1]},Vr=C=>{let T=C&&Se(C);if(T)return T[2]+":"+T[3]},dn=C=>{let T=C&&Se(C);if(T)return T.pop()};async function yf(C){let{cacao:T,projectId:N}=C,{s:U,p:$}=T,Q=qr($,$.iss),Y=dn($.iss);return await Cr(Y,Q,U,Vr($.iss),N)}let qr=(C,T)=>{let N=`${C.domain} wants you to sign in with your Ethereum account:`,U=dn(T);if(!C.aud&&!C.uri)throw Error("Either `aud` or `uri` is required to construct the message");let $=C.statement||void 0,Q=`URI: ${C.aud||C.uri}`,Y=`Version: ${C.version}`,X=`Chain ID: ${Mr(T)}`,ee=`Nonce: ${C.nonce}`,es=`Issued At: ${C.iat}`,el=C.exp?`Expiration Time: ${C.exp}`:void 0,ec=C.nbf?`Not Before: ${C.nbf}`:void 0,eh=C.requestId?`Request ID: ${C.requestId}`:void 0,eu=C.resources?`Resources:${C.resources.map(C=>`
- ${C}`).join("")}`:void 0,ed=Oe(C.resources);if(ed){let C=Lt(ed);$=function(C="",T){bt(T);let N="I further authorize the stated URI to perform the following actions on my behalf: ";if(C.includes(N))return C;let U=[],$=0;Object.keys(T.att).forEach(C=>{let N=Object.keys(T.att[C]).map(C=>({ability:C.split("/")[0],action:C.split("/")[1]}));N.sort((C,T)=>C.action.localeCompare(T.action));let Q={};N.forEach(C=>{Q[C.ability]||(Q[C.ability]=[]),Q[C.ability].push(C.action)});let Y=Object.keys(Q).map(T=>($++,`(${$}) '${T}': '${Q[T].join("', '")}' for '${C}'.`));U.push(Y.join(", ").replace(".,","."))});let Q=U.join(" "),Y=`${N}${Q}`;return`${C?C+" ":""}${Y}`}($,C)}return[N,U,"",$,"",Q,Y,X,ee,es,el,ec,eh,eu].filter(C=>null!=C).join(`
`)};function bt(C){if(!C)throw Error("No recap provided, value is undefined");if(!C.att)throw Error("No `att` property found");let T=Object.keys(C.att);if(!(null!=T&&T.length))throw Error("No resources found in `att` property");T.forEach(T=>{let N=C.att[T];if(Array.isArray(N)||"object"!=typeof N)throw Error(`Resource must be an object: ${T}`);if(!Object.keys(N).length)throw Error(`Resource object is empty: ${T}`);Object.keys(N).forEach(C=>{let T=N[C];if(!Array.isArray(T))throw Error(`Ability limits ${C} must be an array of objects, found: ${T}`);if(!T.length)throw Error(`Value of ${C} is empty array, must be an array with objects`);T.forEach(T=>{if("object"!=typeof T)throw Error(`Ability limits (${C}) must be an array of objects, found: ${T}`)})})})}function Ne(C){return bt(C),`urn:recap:${e0.from(JSON.stringify(C)).toString("base64").replace(/=/g,"")}`}function Lt(C){var T;let N=(T=C.replace("urn:recap:",""),JSON.parse(e0.from(T,"base64").toString("utf-8")));return bt(N),N}function If(C){var T;let N=Lt(C);bt(N);let U=null==(T=N.att)?void 0:T.eip155;return U?Object.keys(U).map(C=>C.split("/")[1]):[]}function Af(C){let T=Lt(C);bt(T);let N=[];return Object.values(T.att).forEach(C=>{Object.values(C).forEach(C=>{var T;null!=(T=C?.[0])&&T.chains&&N.push(C[0].chains)})}),[...new Set(N.flat())]}function Oe(C){if(!C)return;let T=C?.[C.length-1];return T&&T.includes("urn:recap:")?T:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Qr(C){return C instanceof Uint8Array||ArrayBuffer.isView(C)&&"Uint8Array"===C.constructor.name}function bn(C){if("boolean"!=typeof C)throw Error(`boolean expected, not ${C}`)}function yn(C){if(!Number.isSafeInteger(C)||C<0)throw Error("positive integer expected, got "+C)}function nt(C,...T){if(!Qr(C))throw Error("Uint8Array expected");if(T.length>0&&!T.includes(C.length))throw Error("Uint8Array expected of length "+T+", got length="+C.length)}function to(C,T=!0){if(C.destroyed)throw Error("Hash instance has been destroyed");if(T&&C.finished)throw Error("Hash#digest() has already been called")}function jt(C){return new Uint32Array(C.buffer,C.byteOffset,Math.floor(C.byteLength/4))}function Wt(...C){for(let T=0;T<C.length;T++)C[T].fill(0)}let tW=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function mn(C){if("string"==typeof C)C=function(C){if("string"!=typeof C)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(C))}(C);else if(Qr(C))C=wn(C);else throw Error("Uint8Array expected, got "+typeof C);return C}function eo(C,T,N=!0){if(void 0===T)return new Uint8Array(C);if(T.length!==C)throw Error("invalid output length, expected "+C+", got: "+T.length);if(N&&T.byteOffset%4!=0)throw Error("invalid output, must be aligned");return T}function no(C,T,N,U){if("function"==typeof C.setBigUint64)return C.setBigUint64(T,N,U);let $=BigInt(32),Q=BigInt(4294967295),Y=Number(N>>$&Q),X=Number(N&Q),ee=U?4:0,es=U?0:4;C.setUint32(T+ee,Y,U),C.setUint32(T+es,X,U)}function wn(C){return Uint8Array.from(C)}let ro=C=>Uint8Array.from(C.split("").map(C=>C.charCodeAt(0))),tZ=ro("expand 16-byte k"),tY=ro("expand 32-byte k"),tX=jt(tZ),t0=jt(tY);function M(C,T){return C<<T|C>>>32-T}function xn(C){return C.byteOffset%4==0}let t1=4294967296-1,t2=new Uint32Array,G=(C,T)=>255&C[T++]|(255&C[T++])<<8;let Vf=class Vf{constructor(C){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,nt(C=mn(C),32);let T=G(C,0),N=G(C,2),U=G(C,4),$=G(C,6),Q=G(C,8),Y=G(C,10),X=G(C,12),ee=G(C,14);this.r[0]=8191&T,this.r[1]=(T>>>13|N<<3)&8191,this.r[2]=(N>>>10|U<<6)&7939,this.r[3]=(U>>>7|$<<9)&8191,this.r[4]=($>>>4|Q<<12)&255,this.r[5]=Q>>>1&8190,this.r[6]=(Q>>>14|Y<<2)&8191,this.r[7]=(Y>>>11|X<<5)&8065,this.r[8]=(X>>>8|ee<<8)&8191,this.r[9]=ee>>>5&127;for(let T=0;T<8;T++)this.pad[T]=G(C,16+2*T)}process(C,T,N=!1){let{h:U,r:$}=this,Q=$[0],Y=$[1],X=$[2],ee=$[3],es=$[4],el=$[5],ec=$[6],eh=$[7],eu=$[8],ed=$[9],ep=G(C,T+0),eg=G(C,T+2),ey=G(C,T+4),em=G(C,T+6),eb=G(C,T+8),ew=G(C,T+10),e_=G(C,T+12),ev=G(C,T+14),eE=U[0]+(8191&ep),ex=U[1]+((ep>>>13|eg<<3)&8191),eA=U[2]+((eg>>>10|ey<<6)&8191),eI=U[3]+((ey>>>7|em<<9)&8191),eP=U[4]+((em>>>4|eb<<12)&8191),eS=U[5]+(eb>>>1&8191),eD=U[6]+((eb>>>14|ew<<2)&8191),eB=U[7]+((ew>>>11|e_<<5)&8191),eC=U[8]+((e_>>>8|ev<<8)&8191),eO=U[9]+(ev>>>5|(N?0:2048)),eR=0,eT=0+eE*Q+ex*(5*ed)+eA*(5*eu)+eI*(5*eh)+eP*(5*ec);eR=eT>>>13,eT&=8191,eT+=eS*(5*el)+eD*(5*es)+eB*(5*ee)+eC*(5*X)+eO*(5*Y),eR+=eT>>>13,eT&=8191;let eN=eR+eE*Y+ex*Q+eA*(5*ed)+eI*(5*eu)+eP*(5*eh);eR=eN>>>13,eN&=8191,eN+=eS*(5*ec)+eD*(5*el)+eB*(5*es)+eC*(5*ee)+eO*(5*X),eR+=eN>>>13,eN&=8191;let ek=eR+eE*X+ex*Y+eA*Q+eI*(5*ed)+eP*(5*eu);eR=ek>>>13,ek&=8191,ek+=eS*(5*eh)+eD*(5*ec)+eB*(5*el)+eC*(5*es)+eO*(5*ee),eR+=ek>>>13,ek&=8191;let eU=eR+eE*ee+ex*X+eA*Y+eI*Q+eP*(5*ed);eR=eU>>>13,eU&=8191,eU+=eS*(5*eu)+eD*(5*eh)+eB*(5*ec)+eC*(5*el)+eO*(5*es),eR+=eU>>>13,eU&=8191;let eL=eR+eE*es+ex*ee+eA*X+eI*Y+eP*Q;eR=eL>>>13,eL&=8191,eL+=eS*(5*ed)+eD*(5*eu)+eB*(5*eh)+eC*(5*ec)+eO*(5*el),eR+=eL>>>13,eL&=8191;let eM=eR+eE*el+ex*es+eA*ee+eI*X+eP*Y;eR=eM>>>13,eM&=8191,eM+=eS*Q+eD*(5*ed)+eB*(5*eu)+eC*(5*eh)+eO*(5*ec),eR+=eM>>>13,eM&=8191;let eF=eR+eE*ec+ex*el+eA*es+eI*ee+eP*X;eR=eF>>>13,eF&=8191,eF+=eS*Y+eD*Q+eB*(5*ed)+eC*(5*eu)+eO*(5*eh),eR+=eF>>>13,eF&=8191;let ej=eR+eE*eh+ex*ec+eA*el+eI*es+eP*ee;eR=ej>>>13,ej&=8191,ej+=eS*X+eD*Y+eB*Q+eC*(5*ed)+eO*(5*eu),eR+=ej>>>13,ej&=8191;let ez=eR+eE*eu+ex*eh+eA*ec+eI*el+eP*es;eR=ez>>>13,ez&=8191,ez+=eS*ee+eD*X+eB*Y+eC*Q+eO*(5*ed),eR+=ez>>>13,ez&=8191;let eq=eR+eE*ed+ex*eu+eA*eh+eI*ec+eP*el;eR=eq>>>13,eq&=8191,eq+=eS*es+eD*ee+eB*X+eC*Y+eO*Q,eR+=eq>>>13,eq&=8191,eT=8191&(eR=(eR=(eR<<2)+eR|0)+eT|0),eR>>>=13,eN+=eR,U[0]=eT,U[1]=eN,U[2]=ek,U[3]=eU,U[4]=eL,U[5]=eM,U[6]=eF,U[7]=ej,U[8]=ez,U[9]=eq}finalize(){let{h:C,pad:T}=this,N=new Uint16Array(10),U=C[1]>>>13;C[1]&=8191;for(let T=2;T<10;T++)C[T]+=U,U=C[T]>>>13,C[T]&=8191;C[0]+=5*U,U=C[0]>>>13,C[0]&=8191,C[1]+=U,U=C[1]>>>13,C[1]&=8191,C[2]+=U,N[0]=C[0]+5,U=N[0]>>>13,N[0]&=8191;for(let T=1;T<10;T++)N[T]=C[T]+U,U=N[T]>>>13,N[T]&=8191;N[9]-=8192;let $=(1^U)-1;for(let C=0;C<10;C++)N[C]&=$;$=~$;for(let T=0;T<10;T++)C[T]=C[T]&$|N[T];C[0]=(C[0]|C[1]<<13)&65535,C[1]=(C[1]>>>3|C[2]<<10)&65535,C[2]=(C[2]>>>6|C[3]<<7)&65535,C[3]=(C[3]>>>9|C[4]<<4)&65535,C[4]=(C[4]>>>12|C[5]<<1|C[6]<<14)&65535,C[5]=(C[6]>>>2|C[7]<<11)&65535,C[6]=(C[7]>>>5|C[8]<<8)&65535,C[7]=(C[8]>>>8|C[9]<<5)&65535;let Q=C[0]+T[0];C[0]=65535&Q;for(let N=1;N<8;N++)Q=(C[N]+T[N]|0)+(Q>>>16)|0,C[N]=65535&Q;Wt(N)}update(C){to(this),nt(C=mn(C));let{buffer:T,blockLen:N}=this,U=C.length;for(let $=0;$<U;){let Q=Math.min(N-this.pos,U-$);if(Q===N){for(;N<=U-$;$+=N)this.process(C,$);continue}T.set(C.subarray($,$+Q),this.pos),this.pos+=Q,$+=Q,this.pos===N&&(this.process(T,0,!1),this.pos=0)}return this}destroy(){Wt(this.h,this.r,this.buffer,this.pad)}digestInto(C){to(this),function(C,T){nt(C);let N=T.outputLen;if(C.length<N)throw Error("digestInto() expects output buffer of length at least "+N)}(C,this),this.finished=!0;let{buffer:T,h:N}=this,{pos:U}=this;if(U){for(T[U++]=1;U<16;U++)T[U]=0;this.process(T,0,!0)}this.finalize();let $=0;for(let T=0;T<8;T++)C[$++]=N[T]>>>0,C[$++]=N[T]>>>8;return C}digest(){let{buffer:C,outputLen:T}=this;this.digestInto(C);let N=C.slice(0,T);return this.destroy(),N}};let t3=function(C){let e=(T,N)=>C(N).update(mn(T)).digest(),T=C(new Uint8Array(32));return e.outputLen=T.outputLen,e.blockLen=T.blockLen,e.create=T=>C(T),e}(C=>new Vf(C)),t8=function(C,T){let{allowShortKeys:N,extendNonceFn:U,counterLength:$,counterRight:Q,rounds:Y}=function(C,T){if(null==T||"object"!=typeof T)throw Error("options must be defined");return Object.assign(C,T)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},T);if("function"!=typeof C)throw Error("core must be a function");return yn($),yn(Y),bn(Q),bn(N),(T,X,ee,es,el=0)=>{nt(T),nt(X),nt(ee);let ec=ee.length;if(void 0===es&&(es=new Uint8Array(ec)),nt(es),yn(el),el<0||el>=t1)throw Error("arx: counter overflow");if(es.length<ec)throw Error(`arx: output (${es.length}) is shorter than data (${ec})`);let eh=[],eu=T.length,ed,ep;if(32===eu)eh.push(ed=wn(T)),ep=t0;else if(16===eu&&N)(ed=new Uint8Array(32)).set(T),ed.set(T,16),ep=tX,eh.push(ed);else throw Error(`arx: invalid 32-byte key, got length=${eu}`);xn(X)||eh.push(X=wn(X));let eg=jt(ed);if(U){if(24!==X.length)throw Error("arx: extended nonce must be 24 bytes");U(ep,eg,jt(X.subarray(0,16)),eg),X=X.subarray(16)}let ey=16-$;if(ey!==X.length)throw Error(`arx: nonce must be ${ey} or 16 bytes`);if(12!==ey){let C=new Uint8Array(12);C.set(X,Q?0:12-X.length),X=C,eh.push(X)}let em=jt(X);return function(C,T,N,U,$,Q,Y,X){let ee=$.length,es=new Uint8Array(64),el=jt(es),ec=xn($)&&xn(Q),eh=ec?jt($):t2,eu=ec?jt(Q):t2;for(let ed=0;ed<ee;Y++){if(C(T,N,U,el,Y,X),Y>=t1)throw Error("arx: counter overflow");let ep=Math.min(64,ee-ed);if(ec&&64===ep){let C=ed/4;if(ed%4!=0)throw Error("arx: invalid block position");for(let T=0,N;T<16;T++)eu[N=C+T]=eh[N]^el[T];ed+=64;continue}for(let C=0,T;C<ep;C++)Q[T=ed+C]=$[T]^es[C];ed+=ep}}(C,ep,eg,em,ee,es,el,Y),Wt(...eh),es}}(function(C,T,N,U,$,Q=20){let Y=C[0],X=C[1],ee=C[2],es=C[3],el=T[0],ec=T[1],eh=T[2],eu=T[3],ed=T[4],ep=T[5],eg=T[6],ey=T[7],em=N[0],eb=N[1],ew=N[2],e_=Y,ev=X,eE=ee,ex=es,eA=el,eI=ec,eP=eh,eS=eu,eD=ed,eB=ep,eC=eg,eO=ey,eR=$,eT=em,eN=eb,ek=ew;for(let C=0;C<Q;C+=2)eD=eD+(eR=M(eR^(e_=e_+eA|0),16))|0,e_=e_+(eA=M(eA^eD,12))|0,eD=eD+(eR=M(eR^e_,8))|0,eA=M(eA^eD,7),eB=eB+(eT=M(eT^(ev=ev+eI|0),16))|0,ev=ev+(eI=M(eI^eB,12))|0,eB=eB+(eT=M(eT^ev,8))|0,eI=M(eI^eB,7),eC=eC+(eN=M(eN^(eE=eE+eP|0),16))|0,eE=eE+(eP=M(eP^eC,12))|0,eC=eC+(eN=M(eN^eE,8))|0,eP=M(eP^eC,7),eO=eO+(ek=M(ek^(ex=ex+eS|0),16))|0,ex=ex+(eS=M(eS^eO,12))|0,eO=eO+(ek=M(ek^ex,8))|0,eS=M(eS^eO,7),eC=eC+(ek=M(ek^(e_=e_+eI|0),16))|0,e_=e_+(eI=M(eI^eC,12))|0,eC=eC+(ek=M(ek^e_,8))|0,eI=M(eI^eC,7),eO=eO+(eR=M(eR^(ev=ev+eP|0),16))|0,ev=ev+(eP=M(eP^eO,12))|0,eO=eO+(eR=M(eR^ev,8))|0,eP=M(eP^eO,7),eD=eD+(eT=M(eT^(eE=eE+eS|0),16))|0,eE=eE+(eS=M(eS^eD,12))|0,eD=eD+(eT=M(eT^eE,8))|0,eS=M(eS^eD,7),eB=eB+(eN=M(eN^(ex=ex+eA|0),16))|0,ex=ex+(eA=M(eA^eB,12))|0,eB=eB+(eN=M(eN^ex,8))|0,eA=M(eA^eB,7);let eU=0;U[eU++]=Y+e_|0,U[eU++]=X+ev|0,U[eU++]=ee+eE|0,U[eU++]=es+ex|0,U[eU++]=el+eA|0,U[eU++]=ec+eI|0,U[eU++]=eh+eP|0,U[eU++]=eu+eS|0,U[eU++]=ed+eD|0,U[eU++]=ep+eB|0,U[eU++]=eg+eC|0,U[eU++]=ey+eO|0,U[eU++]=$+eR|0,U[eU++]=em+eT|0,U[eU++]=eb+eN|0,U[eU++]=ew+ek|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),t4=new Uint8Array(16),io=(C,T)=>{C.update(T);let N=T.length%16;N&&C.update(t4.subarray(N))},t6=new Uint8Array(32);function fo(C,T,N,U,$){let Q=C(T,N,t6),Y=t3.create(Q);$&&io(Y,$),io(Y,U);let X=function(C,T,N){bn(N);let U=new Uint8Array(16),$=new DataView(U.buffer,U.byteOffset,U.byteLength);return no($,0,BigInt(T),N),no($,8,BigInt(C),N),U}(U.length,$?$.length:0,!0);Y.update(X);let ee=Y.digest();return Wt(Q,X),ee}let t5=((C,T)=>{function n(N,...U){if(nt(N),!tW)throw Error("Non little-endian hardware is not yet supported");if(void 0!==C.nonceLength){let T=U[0];if(!T)throw Error("nonce / iv required");C.varSizeNonce?nt(T):nt(T,C.nonceLength)}let $=C.tagLength;$&&void 0!==U[1]&&nt(U[1]);let Q=T(N,...U),f=(C,T)=>{if(void 0!==T){if(2!==C)throw Error("cipher output not supported");nt(T)}},Y=!1;return{encrypt(C,T){if(Y)throw Error("cannot encrypt() twice with same key + nonce");return Y=!0,nt(C),f(Q.encrypt.length,T),Q.encrypt(C,T)},decrypt(C,T){if(nt(C),$&&C.length<$)throw Error("invalid ciphertext length: smaller than tagLength="+$);return f(Q.decrypt.length,T),Q.decrypt(C,T)}}}return Object.assign(n,C),n})({blockSize:64,nonceLength:12,tagLength:16},(C,T,N)=>({encrypt(U,$){let Q=U.length;($=eo(Q+16,$,!1)).set(U);let Y=$.subarray(0,-16);t8(C,T,Y,Y,1);let X=fo(t8,C,T,Y,N);return $.set(X,Q),Wt(X),$},decrypt(U,$){$=eo(U.length-16,$,!1);let Q=U.subarray(0,-16),Y=U.subarray(-16),X=fo(t8,C,T,Q,N);if(!function(C,T){if(C.length!==T.length)return!1;let N=0;for(let U=0;U<C.length;U++)N|=C[U]^T[U];return 0===N}(Y,X))throw Error("invalid tag");return $.set(U.subarray(0,-16)),t8(C,T,$,$,1),Wt(X),$}}));let ao=class ao extends Ie{constructor(C,T){super(),this.finished=!1,this.destroyed=!1,rn(C);let N=ht(T);if(this.iHash=C.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let U=this.blockLen,$=new Uint8Array(U);$.set(N.length>U?C.create().update(N).digest():N);for(let C=0;C<$.length;C++)$[C]^=54;this.iHash.update($),this.oHash=C.create();for(let C=0;C<$.length;C++)$[C]^=106;this.oHash.update($),ut($)}update(C){return Nt(this),this.iHash.update(C),this}digestInto(C){Nt(this),at(C,this.outputLen),this.finished=!0,this.iHash.digestInto(C),this.oHash.update(C),this.oHash.digestInto(C),this.destroy()}digest(){let C=new Uint8Array(this.oHash.outputLen);return this.digestInto(C),C}_cloneInto(C){C||(C=Object.create(Object.getPrototypeOf(this),{}));let{oHash:T,iHash:N,finished:U,destroyed:$,blockLen:Q,outputLen:Y}=this;return C.finished=U,C.destroyed=$,C.blockLen=Q,C.outputLen=Y,C.oHash=T._cloneInto(C.oHash),C.iHash=N._cloneInto(C.iHash),C}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};let _e=(C,T,N)=>new ao(C,T).update(N).digest();_e.create=(C,T)=>new ao(C,T);let t9=Uint8Array.from([0]),t7=Uint8Array.of(),Jf=(C,T,N,U,$)=>{var Q;return function(C,T,N,U=32){rn(C),mt(U);let $=C.outputLen;if(U>255*$)throw Error("Length should be <= 255*HashLen");let Q=Math.ceil(U/$);void 0===N&&(N=t7);let Y=new Uint8Array(Q*$),X=_e.create(C,T),ee=X._cloneInto(),es=new Uint8Array(X.outputLen);for(let C=0;C<Q;C++)t9[0]=C+1,ee.update(0===C?t7:es).update(N).update(t9).digestInto(es),Y.set(es,$*C),X._cloneInto(ee);return X.destroy(),ee.destroy(),ut(es,t9),Y.slice(0,U)}(C,(Q=N,rn(C),void 0===Q&&(Q=new Uint8Array(C.outputLen)),_e(C,ht(Q),ht(T))),U,$)},re=BigInt(0),rr=BigInt(1);function Re(C,T){if("boolean"!=typeof T)throw Error(C+" boolean expected, got "+T)}function $e(C){let T=C.toString(16);return 1&T.length?"0"+T:T}function lo(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);return""===C?re:BigInt("0x"+C)}function Le(C){return at(C),lo(ce(Uint8Array.from(C).reverse()))}function In(C,T){return fn(C.toString(16).padStart(2*T,"0"))}function An(C,T){return In(C,T).reverse()}function rt(C,T,N){let U;if("string"==typeof T)try{U=fn(T)}catch(T){throw Error(C+" must be hex string or Uint8Array, cause: "+T)}else if(nn(T))U=Uint8Array.from(T);else throw Error(C+" must be hex string or Uint8Array");let $=U.length;if("number"==typeof N&&$!==N)throw Error(C+" of length "+N+" expected, got "+$);return U}let Sn=C=>"bigint"==typeof C&&re<=C;function Nn(C,T,N,U){if(!(Sn(T)&&Sn(N)&&Sn(U))||!(N<=T)||!(T<U))throw Error("expected valid "+C+": "+N+" <= n < "+U+", got "+T)}let je=C=>(rr<<BigInt(C))-rr;function ke(C,T,N={}){if(!C||"object"!=typeof C)throw Error("expected valid options object");function r(T,N,U){let $=C[T];if(U&&void 0===$)return;let Q=typeof $;if(Q!==N||null===$)throw Error(`param "${T}" is invalid: expected ${N}, got ${Q}`)}Object.entries(T).forEach(([C,T])=>r(C,T,!1)),Object.entries(N).forEach(([C,T])=>r(C,T,!0))}function ho(C){let T=new WeakMap;return(N,...U)=>{let $=T.get(N);if(void 0!==$)return $;let Q=C(N,...U);return T.set(N,Q),Q}}let ri=BigInt(0),rs=BigInt(1),rl=BigInt(2),rh=BigInt(3),ru=BigInt(4),rd=BigInt(5),rf=BigInt(8);function lt(C,T){let N=C%T;return N>=ri?N:T+N}function pt(C,T,N){let U=C;for(;T-- >ri;)U*=U,U%=N;return U}function yo(C,T){if(C===ri)throw Error("invert: expected non-zero number");if(T<=ri)throw Error("invert: expected positive modulus, got "+T);let N=lt(C,T),U=T,$=ri,Q=rs;for(;N!==ri;){let C=U/N,T=U%N,Y=$-Q*C;U=N,N=T,$=Q,Q=Y}if(U!==rs)throw Error("invert: does not exist");return lt($,T)}function mo(C,T){let N=(C.ORDER+rs)/ru,U=C.pow(T,N);if(!C.eql(C.sqr(U),T))throw Error("Cannot find square root");return U}function rc(C,T){let N=(C.ORDER-rd)/rf,U=C.mul(T,rl),$=C.pow(U,N),Q=C.mul(T,$),Y=C.mul(C.mul(Q,rl),$),X=C.mul(Q,C.sub(Y,C.ONE));if(!C.eql(C.sqr(X),T))throw Error("Cannot find square root");return X}let rp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wo(C,T,N=!1){let U=Array(T.length).fill(N?C.ZERO:void 0),$=T.reduce((T,N,$)=>C.is0(N)?T:(U[$]=T,C.mul(T,N)),C.ONE),Q=C.inv($);return T.reduceRight((T,N,$)=>C.is0(N)?T:(U[$]=C.mul(T,U[$]),C.mul(T,N)),Q),U}function xo(C,T){let N=(C.ORDER-rs)/rl,U=C.pow(T,N),$=C.eql(U,C.ONE),Q=C.eql(U,C.ZERO),Y=C.eql(U,C.neg(C.ONE));if(!$&&!Q&&!Y)throw Error("invalid Legendre symbol result");return $?1:Q?0:-1}function Yt(C,T,N=!1,U={}){let $,Q,Y;if(C<=ri)throw Error("invalid field: expected ORDER > 0, got "+C);if("object"==typeof T&&null!=T){if(U.sqrt||N)throw Error("cannot specify opts in two arguments");T.BITS&&($=T.BITS),T.sqrt&&(Q=T.sqrt),"boolean"==typeof T.isLE&&(N=T.isLE)}else"number"==typeof T&&($=T),U.sqrt&&(Q=U.sqrt);let{nBitLength:X,nByteLength:ee}=function(C,T){void 0!==T&&mt(T);let N=void 0!==T?T:C.toString(2).length,U=Math.ceil(N/8);return{nBitLength:N,nByteLength:U}}(C,$);if(ee>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let es=Object.freeze({ORDER:C,isLE:N,BITS:X,BYTES:ee,MASK:je(X),ZERO:ri,ONE:rs,create:T=>lt(T,C),isValid:T=>{if("bigint"!=typeof T)throw Error("invalid field element: expected bigint, got "+typeof T);return ri<=T&&T<C},is0:C=>C===ri,isValidNot0:C=>!es.is0(C)&&es.isValid(C),isOdd:C=>(C&rs)===rs,neg:T=>lt(-T,C),eql:(C,T)=>C===T,sqr:T=>lt(T*T,C),add:(T,N)=>lt(T+N,C),sub:(T,N)=>lt(T-N,C),mul:(T,N)=>lt(T*N,C),pow:(C,T)=>(function(C,T,N){if(N<ri)throw Error("invalid exponent, negatives unsupported");if(N===ri)return C.ONE;if(N===rs)return T;let U=C.ONE,$=T;for(;N>ri;)N&rs&&(U=C.mul(U,$)),$=C.sqr($),N>>=rs;return U})(es,C,T),div:(T,N)=>lt(T*yo(N,C),C),sqrN:C=>C*C,addN:(C,T)=>C+T,subN:(C,T)=>C-T,mulN:(C,T)=>C*T,inv:T=>yo(T,C),sqrt:Q||(T=>(Y||(Y=C%ru===rh?mo:C%rf===rd?rc:function(C){if(C<BigInt(3))throw Error("sqrt is not defined for small field");let T=C-rs,N=0;for(;T%rl===ri;)T/=rl,N++;let U=rl,$=Yt(C);for(;1===xo($,U);)if(U++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===N)return mo;let Q=$.pow(U,T),Y=(T+rs)/rl;return function(C,U){if(C.is0(U))return U;if(1!==xo(C,U))throw Error("Cannot find square root");let $=N,X=C.mul(C.ONE,Q),ee=C.pow(U,T),es=C.pow(U,Y);for(;!C.eql(ee,C.ONE);){if(C.is0(ee))return C.ZERO;let T=1,N=C.sqr(ee);for(;!C.eql(N,C.ONE);)if(T++,N=C.sqr(N),T===$)throw Error("Cannot find square root");let U=rs<<BigInt($-T-1),Q=C.pow(X,U);$=T,X=C.sqr(Q),ee=C.mul(ee,X),es=C.mul(es,Q)}return es}}(C)),Y(es,T))),toBytes:C=>N?An(C,ee):In(C,ee),fromBytes:C=>{if(C.length!==ee)throw Error("Field.fromBytes: expected "+ee+" bytes, got "+C.length);return N?Le(C):lo(ce(C))},invertBatch:C=>wo(es,C),cmov:(C,T,N)=>N?T:C});return Object.freeze(es)}function vo(C){if("bigint"!=typeof C)throw Error("field order must be bigint");let T=C.toString(2).length;return Math.ceil(T/8)}function Eo(C){let T=vo(C);return T+Math.ceil(T/2)}let rg=BigInt(0),ry=BigInt(1);function le(C,T){let N=T.negate();return C?N:T}function Bo(C,T){if(!Number.isSafeInteger(C)||C<=0||C>T)throw Error("invalid window size, expected [1.."+T+"], got W="+C)}function On(C,T){Bo(C,T);let N=Math.ceil(T/C)+1,U=2**(C-1),$=2**C,Q=je(C),Y=BigInt(C);return{windows:N,windowSize:U,mask:Q,maxNumber:$,shiftBy:Y}}function Io(C,T,N){let{windowSize:U,mask:$,maxNumber:Q,shiftBy:Y}=N,X=Number(C&$),ee=C>>Y;X>U&&(X-=Q,ee+=ry);let es=T*U,el=es+Math.abs(X)-1,ec=0===X,eh=X<0;return{nextN:ee,offset:el,isZero:ec,isNeg:eh,isNegF:T%2!=0,offsetF:es}}let rm=new WeakMap,rb=new WeakMap;function _n(C){return rb.get(C)||1}function So(C){if(C!==rg)throw Error("invalid wNAF")}function No(C,T){if(!T)return Yt(C);if(T.ORDER!==C)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return function(C){let T=rp.reduce((C,T)=>(C[T]="function",C),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});ke(C,T)}(T),T}BigInt(0),BigInt(1),BigInt(2),BigInt(8);let rw=BigInt(0),r_=BigInt(1),rv=BigInt(2);BigInt(0);let rE=BigInt(1),rx=BigInt(2),rA=BigInt(3),rI=BigInt(5),rP=BigInt(8),rS={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:rP,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Ac(C){return C[0]&=248,C[31]&=127,C[31]|=64,C}let rD=(()=>{let C=rS.p;return function(C){let T=(ke(C,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...C})),{P:N,type:U,adjustScalarBytes:$,powPminus2:Q,randomBytes:Y}=T,X="x25519"===U;if(!X&&"x448"!==U)throw Error("invalid type");let ee=Y||Zt,es=X?255:448,el=X?32:56,ec=BigInt(X?9:5),eh=BigInt(X?121665:39081),eu=X?rv**BigInt(254):rv**BigInt(447),ed=X?BigInt(8)*rv**BigInt(251)-r_:BigInt(4)*rv**BigInt(445)-r_,ep=eu+ed+r_,v=C=>lt(C,N),eg=An(v(ec),el);function _(C,T){let U=function(C,T){Nn("u",C,rw,N),Nn("scalar",T,eu,ep);let U=r_,$=rw,Y=C,X=r_,ee=rw;for(let N=BigInt(es-1);N>=rw;N--){let Q=T>>N&r_;ee^=Q,({x_2:U,x_3:Y}=P(ee,U,Y)),({x_2:$,x_3:X}=P(ee,$,X)),ee=Q;let es=U+$,el=v(es*es),ec=U-$,eu=v(ec*ec),ed=el-eu,ep=Y+X,eg=Y-X,ey=v(eg*es),em=v(ep*ec),eb=ey+em,ew=ey-em;Y=v(eb*eb),X=v(C*v(ew*ew)),U=v(el*eu),$=v(ed*(el+v(eh*ed)))}({x_2:U,x_3:Y}=P(ee,U,Y)),{x_2:$,x_3:X}=P(ee,$,X);let el=Q($);return v(U*el)}(function(C){let T=rt("u coordinate",C,el);return X&&(T[31]&=127),v(Le(T))}(T),Le($(rt("scalar",C,el))));if(U===rw)throw Error("invalid private or public key received");return An(v(U),el)}function k(C){return _(C,eg)}function P(C,T,N){let U=v(C*(T-N));return{x_2:T=v(T-U),x_3:N=v(N+U)}}return{scalarMult:_,scalarMultBase:k,getSharedSecret:(C,T)=>_(C,T),getPublicKey:C=>k(C),utils:{randomPrivateKey:()=>ee(el)},GuBytes:eg.slice()}}({P:C,type:"x25519",powPminus2:T=>{let{pow_p_5_8:N,b2:U}=function(C){let T=BigInt(10),N=BigInt(20),U=BigInt(40),$=BigInt(80),Q=rS.p,Y=C*C%Q*C%Q,X=pt(Y,rx,Q)*Y%Q,ee=pt(X,rE,Q)*C%Q,es=pt(ee,rI,Q)*ee%Q,el=pt(es,T,Q)*es%Q,ec=pt(el,N,Q)*el%Q,eh=pt(ec,U,Q)*ec%Q,eu=pt(eh,$,Q)*eh%Q,ed=pt(eu,$,Q)*eh%Q,ep=pt(ed,T,Q)*es%Q;return{pow_p_5_8:pt(ep,rx,Q)*C%Q,b2:Y}}(T);return lt(pt(N,rA,C)*U,C)},adjustScalarBytes:Ac})})();function _o(C){void 0!==C.lowS&&Re("lowS",C.lowS),void 0!==C.prehash&&Re("prehash",C.prehash)}let rB={Err:class extends Error{constructor(C=""){super(C)}},_tlv:{encode:(C,T)=>{let{Err:N}=rB;if(C<0||C>256)throw new N("tlv.encode: wrong tag");if(1&T.length)throw new N("tlv.encode: unpadded data");let U=T.length/2,$=$e(U);if($.length/2&128)throw new N("tlv.encode: long form length too big");let Q=U>127?$e($.length/2|128):"";return $e(C)+Q+$+T},decode(C,T){let{Err:N}=rB,U=0;if(C<0||C>256)throw new N("tlv.encode: wrong tag");if(T.length<2||T[U++]!==C)throw new N("tlv.decode: wrong tlv");let $=T[U++],Q=!!(128&$),Y=0;if(Q){let C=127&$;if(!C)throw new N("tlv.decode(long): indefinite length not supported");if(C>4)throw new N("tlv.decode(long): byte length is too big");let Q=T.subarray(U,U+C);if(Q.length!==C)throw new N("tlv.decode: length bytes not complete");if(0===Q[0])throw new N("tlv.decode(long): zero leftmost byte");for(let C of Q)Y=Y<<8|C;if(U+=C,Y<128)throw new N("tlv.decode(long): not minimal encoding")}else Y=$;let X=T.subarray(U,U+Y);if(X.length!==Y)throw new N("tlv.decode: wrong value length");return{v:X,l:T.subarray(U+Y)}}},_int:{encode(C){let{Err:T}=rB;if(C<rC)throw new T("integer: negative integers are not allowed");let N=$e(C);if(8&Number.parseInt(N[0],16)&&(N="00"+N),1&N.length)throw new T("unexpected DER parsing assertion: unpadded hex");return N},decode(C){let{Err:T}=rB;if(128&C[0])throw new T("invalid signature integer: negative");if(0===C[0]&&!(128&C[1]))throw new T("invalid signature integer: unnecessary leading zero");return lo(ce(C))}},toSig(C){let{Err:T,_int:N,_tlv:U}=rB,$=rt("signature",C),{v:Q,l:Y}=U.decode(48,$);if(Y.length)throw new T("invalid signature: left bytes after parsing");let{v:X,l:ee}=U.decode(2,Q),{v:es,l:el}=U.decode(2,ee);if(el.length)throw new T("invalid signature: left bytes after parsing");return{r:N.decode(X),s:N.decode(es)}},hexFromSig(C){let{_tlv:T,_int:N}=rB,U=T.encode(2,N.encode(C.r)),$=T.encode(2,N.encode(C.s));return T.encode(48,U+$)}},rC=BigInt(0),rO=BigInt(1),rR=BigInt(2),rT=BigInt(3),rN=BigInt(4);function To(C,T,N){let{BYTES:U}=C;return function($){let Q;if("bigint"==typeof $)Q=$;else{let N=rt("private key",$);if(T){if(!T.includes(2*N.length))throw Error("invalid private key");let C=new Uint8Array(U);C.set(N,C.length-N.length),N=C}try{Q=C.fromBytes(N)}catch{throw Error(`invalid private key: expected ui8a of size ${U}, got ${typeof $}`)}}if(N&&(Q=C.create(Q)),!C.isValidNot0(Q))throw Error("invalid private key: out of range [1..N-1]");return Q}}function Ro(C){return Uint8Array.of(C?2:3)}function Rn(C,T){let n=T=>(function(C){let{CURVE:T,curveOpts:N,ecdsaOpts:U}=function(C){let{CURVE:T,curveOpts:N}=function(C){let T={a:C.a,b:C.b,p:C.Fp.ORDER,n:C.n,h:C.h,Gx:C.Gx,Gy:C.Gy},N=C.Fp,U=Yt(T.n,C.nBitLength),$={Fp:N,Fn:U,allowedPrivateKeyLengths:C.allowedPrivateKeyLengths,allowInfinityPoint:C.allowInfinityPoint,endo:C.endo,wrapPrivateKey:C.wrapPrivateKey,isTorsionFree:C.isTorsionFree,clearCofactor:C.clearCofactor,fromBytes:C.fromBytes,toBytes:C.toBytes};return{CURVE:T,curveOpts:$}}(C),U={hash:C.hash,hmac:C.hmac,randomBytes:C.randomBytes,lowS:C.lowS,bits2int:C.bits2int,bits2int_modN:C.bits2int_modN};return{CURVE:T,curveOpts:N,ecdsaOpts:U}}(C),$=function(C,T={}){var N,U,$;let{Fp:Q,Fn:Y}=function(C,T,N={}){if(!T||"object"!=typeof T)throw Error(`expected valid ${C} CURVE object`);for(let C of["p","n","h"]){let N=T[C];if(!("bigint"==typeof N&&N>rg))throw Error(`CURVE.${C} must be positive bigint`)}let U=No(T.p,N.Fp),$=No(T.n,N.Fn);for(let N of["Gx","Gy","a","weierstrass"===C?"b":"d"])if(!U.isValid(T[N]))throw Error(`CURVE.${N} must be valid field element of CURVE.Fp`);return{Fp:U,Fn:$}}("weierstrass",C,T),{h:X,n:ee}=C;ke(T,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:es}=T;if(es&&(!Q.is0(C.a)||"bigint"!=typeof es.beta||"function"!=typeof es.splitScalar))throw Error('invalid endo: expected "beta": bigint and "splitScalar": function');function f(){if(!Q.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let el=T.toBytes||function(C,T,N){let{x:U,y:$}=T.toAffine(),Y=Q.toBytes(U);if(Re("isCompressed",N),!N)return Ht(Uint8Array.of(4),Y,Q.toBytes($));{f();let C=!Q.isOdd($);return Ht(Ro(C),Y)}},ec=T.fromBytes||function(C){at(C);let T=Q.BYTES,N=T+1,U=2*T+1,$=C.length,Y=C[0],X=C.subarray(1);if($===N&&(2===Y||3===Y)){let C;let T=Q.fromBytes(X);if(!Q.isValid(T))throw Error("bad point: is not on curve, wrong x");let N=eh(T);try{C=Q.sqrt(N)}catch(T){let C=T instanceof Error?": "+T.message:"";throw Error("bad point: is not on curve, sqrt error"+C)}f();let U=Q.isOdd(C);return(1&Y)==1!==U&&(C=Q.neg(C)),{x:T,y:C}}if($===U&&4===Y){let C=Q.fromBytes(X.subarray(0*T,1*T)),N=Q.fromBytes(X.subarray(1*T,2*T));if(!g(C,N))throw Error("bad point: is not on curve");return{x:C,y:N}}throw Error(`bad point: got length ${$}, expected compressed=${N} or uncompressed=${U}`)},eh=(N=C.a,U=C.b,function(C){let T=Q.sqr(C),$=Q.mul(T,C);return Q.add(Q.add($,Q.mul(C,N)),U)});function g(C,T){let N=Q.sqr(T),U=eh(C);return Q.eql(N,U)}if(!g(C.Gx,C.Gy))throw Error("bad curve params: generator point");let eu=Q.mul(Q.pow(C.a,rT),rN),ed=Q.mul(Q.sqr(C.b),BigInt(27));if(Q.is0(Q.add(eu,ed)))throw Error("bad curve params: a or b");function v(C,T,N=!1){if(!Q.isValid(T)||N&&Q.is0(T))throw Error(`bad point coordinate ${C}`);return T}function L(C){if(!(C instanceof _))throw Error("ProjectivePoint expected")}let ep=ho((C,T)=>{let{px:N,py:U,pz:$}=C;if(Q.eql($,Q.ONE))return{x:N,y:U};let Y=C.is0();null==T&&(T=Y?Q.ONE:Q.inv($));let X=Q.mul(N,T),ee=Q.mul(U,T),es=Q.mul($,T);if(Y)return{x:Q.ZERO,y:Q.ZERO};if(!Q.eql(es,Q.ONE))throw Error("invZ was invalid");return{x:X,y:ee}}),eg=ho(C=>{if(C.is0()){if(T.allowInfinityPoint&&!Q.is0(C.py))return;throw Error("bad point: ZERO")}let{x:N,y:U}=C.toAffine();if(!Q.isValid(N)||!Q.isValid(U))throw Error("bad point: x or y not field elements");if(!g(N,U))throw Error("bad point: equation left != right");if(!C.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function H(C,T,N,U,$){return N=new _(Q.mul(N.px,C),N.py,N.pz),T=le(U,T),N=le($,N),T.add(N)}let _=class _{constructor(C,T,N){this.px=v("x",C),this.py=v("y",T,!0),this.pz=v("z",N),Object.freeze(this)}static fromAffine(C){let{x:T,y:N}=C||{};if(!C||!Q.isValid(T)||!Q.isValid(N))throw Error("invalid affine point");if(C instanceof _)throw Error("projective point not allowed");return Q.is0(T)&&Q.is0(N)?_.ZERO:new _(T,N,Q.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return function(C,T,N){let U=wo(C.Fp,N.map(C=>C.pz));return N.map((C,T)=>C.toAffine(U[T])).map(C.fromAffine)}(_,0,C)}static fromBytes(C){return at(C),_.fromHex(C)}static fromHex(C){let T=_.fromAffine(ec(rt("pointHex",C)));return T.assertValidity(),T}static fromPrivateKey(C){let N=To(Y,T.allowedPrivateKeyLengths,T.wrapPrivateKey);return _.BASE.multiply(N(C))}static msm(C,T){return function(C,T,N,U){(function(C,T){if(!Array.isArray(C))throw Error("array expected");C.forEach((C,N)=>{if(!(C instanceof T))throw Error("invalid point at index "+N)})})(N,C),function(C,T){if(!Array.isArray(C))throw Error("array of scalars expected");C.forEach((C,N)=>{if(!T.isValid(C))throw Error("invalid scalar at index "+N)})}(U,T);let $=N.length,Q=U.length;if($!==Q)throw Error("arrays of points and scalars must have equal length");let Y=C.ZERO,X=function(C){let T;for(T=0;C>re;C>>=rr,T+=1);return T}(BigInt($)),ee=1;X>12?ee=X-3:X>4?ee=X-2:X>0&&(ee=2);let es=je(ee),el=Array(Number(es)+1).fill(Y),ec=Math.floor((T.BITS-1)/ee)*ee,eh=Y;for(let C=ec;C>=0;C-=ee){el.fill(Y);for(let T=0;T<Q;T++){let $=U[T],Q=Number($>>BigInt(C)&es);el[Q]=el[Q].add(N[T])}let T=Y;for(let C=el.length-1,N=Y;C>0;C--)N=N.add(el[C]),T=T.add(N);if(eh=eh.add(T),0!==C)for(let C=0;C<ee;C++)eh=eh.double()}return eh}(_,Y,C,T)}precompute(C=8,T=!0){return em.setWindowSize(this,C),T||this.multiply(rT),this}_setWindowSize(C){this.precompute(C)}assertValidity(){eg(this)}hasEvenY(){let{y:C}=this.toAffine();if(!Q.isOdd)throw Error("Field doesn't support isOdd");return!Q.isOdd(C)}equals(C){L(C);let{px:T,py:N,pz:U}=this,{px:$,py:Y,pz:X}=C,ee=Q.eql(Q.mul(T,X),Q.mul($,U)),es=Q.eql(Q.mul(N,X),Q.mul(Y,U));return ee&&es}negate(){return new _(this.px,Q.neg(this.py),this.pz)}double(){let{a:T,b:N}=C,U=Q.mul(N,rT),{px:$,py:Y,pz:X}=this,ee=Q.ZERO,es=Q.ZERO,el=Q.ZERO,ec=Q.mul($,$),eh=Q.mul(Y,Y),eu=Q.mul(X,X),ed=Q.mul($,Y);return ed=Q.add(ed,ed),el=Q.mul($,X),el=Q.add(el,el),ee=Q.mul(T,el),es=Q.mul(U,eu),es=Q.add(ee,es),ee=Q.sub(eh,es),es=Q.add(eh,es),es=Q.mul(ee,es),ee=Q.mul(ed,ee),el=Q.mul(U,el),eu=Q.mul(T,eu),ed=Q.sub(ec,eu),ed=Q.mul(T,ed),ed=Q.add(ed,el),el=Q.add(ec,ec),ec=Q.add(el,ec),ec=Q.add(ec,eu),ec=Q.mul(ec,ed),es=Q.add(es,ec),eu=Q.mul(Y,X),eu=Q.add(eu,eu),ec=Q.mul(eu,ed),ee=Q.sub(ee,ec),el=Q.mul(eu,eh),el=Q.add(el,el),el=Q.add(el,el),new _(ee,es,el)}add(T){L(T);let{px:N,py:U,pz:$}=this,{px:Y,py:X,pz:ee}=T,es=Q.ZERO,el=Q.ZERO,ec=Q.ZERO,eh=C.a,eu=Q.mul(C.b,rT),ed=Q.mul(N,Y),ep=Q.mul(U,X),eg=Q.mul($,ee),ey=Q.add(N,U),em=Q.add(Y,X);ey=Q.mul(ey,em),em=Q.add(ed,ep),ey=Q.sub(ey,em),em=Q.add(N,$);let eb=Q.add(Y,ee);return em=Q.mul(em,eb),eb=Q.add(ed,eg),em=Q.sub(em,eb),eb=Q.add(U,$),es=Q.add(X,ee),eb=Q.mul(eb,es),es=Q.add(ep,eg),eb=Q.sub(eb,es),ec=Q.mul(eh,em),es=Q.mul(eu,eg),ec=Q.add(es,ec),es=Q.sub(ep,ec),ec=Q.add(ep,ec),el=Q.mul(es,ec),ep=Q.add(ed,ed),ep=Q.add(ep,ed),eg=Q.mul(eh,eg),em=Q.mul(eu,em),ep=Q.add(ep,eg),eg=Q.sub(ed,eg),eg=Q.mul(eh,eg),em=Q.add(em,eg),ed=Q.mul(ep,em),el=Q.add(el,ed),ed=Q.mul(eb,em),es=Q.mul(ey,es),es=Q.sub(es,ed),ed=Q.mul(ey,ep),ec=Q.mul(eb,ec),ec=Q.add(ec,ed),new _(es,el,ec)}subtract(C){return this.add(C.negate())}is0(){return this.equals(_.ZERO)}multiply(C){let N,U;let{endo:$}=T;if(!Y.isValidNot0(C))throw Error("invalid scalar: out of range");let x=C=>em.wNAFCached(this,C,_.normalizeZ);if($){let{k1neg:T,k1:Q,k2neg:Y,k2:X}=$.splitScalar(C),{p:ee,f:es}=x(Q),{p:el,f:ec}=x(X);U=es.add(ec),N=H($.beta,ee,el,T,Y)}else{let{p:T,f:$}=x(C);N=T,U=$}return _.normalizeZ([N,U])[0]}multiplyUnsafe(C){let{endo:N}=T;if(!Y.isValid(C))throw Error("invalid scalar: out of range");if(C===rC||this.is0())return _.ZERO;if(C===rO)return this;if(em.hasPrecomputes(this))return this.multiply(C);if(!N)return em.wNAFCachedUnsafe(this,C);{let{k1neg:T,k1:U,k2neg:$,k2:Q}=N.splitScalar(C),{p1:Y,p2:X}=function(C,T,N,U){let $=T,Q=C.ZERO,Y=C.ZERO;for(;N>rg||U>rg;)N&ry&&(Q=Q.add($)),U&ry&&(Y=Y.add($)),$=$.double(),N>>=ry,U>>=ry;return{p1:Q,p2:Y}}(_,this,U,Q);return H(N.beta,Y,X,T,$)}}multiplyAndAddUnsafe(C,T,N){let U=this.multiplyUnsafe(T).add(C.multiplyUnsafe(N));return U.is0()?void 0:U}toAffine(C){return ep(this,C)}isTorsionFree(){let{isTorsionFree:C}=T;return X===rO||(C?C(_,this):em.wNAFCachedUnsafe(this,ee).is0())}clearCofactor(){let{clearCofactor:C}=T;return X===rO?this:C?C(_,this):this.multiplyUnsafe(X)}toBytes(C=!0){return Re("isCompressed",C),this.assertValidity(),el(_,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return ce(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}};_.BASE=new _(C.Gx,C.Gy,Q.ONE),_.ZERO=new _(Q.ZERO,Q.ONE,Q.ZERO),_.Fp=Q,_.Fn=Y;let ey=Y.BITS,em=($=T.endo?Math.ceil(ey/2):ey,{constTimeNegate:le,hasPrecomputes:C=>1!==_n(C),unsafeLadder(C,T,N=_.ZERO){let U=C;for(;T>rg;)T&ry&&(N=N.add(U)),U=U.double(),T>>=ry;return N},precomputeWindow(C,T){let{windows:N,windowSize:U}=On(T,$),Q=[],Y=C,X=Y;for(let C=0;C<N;C++){X=Y,Q.push(X);for(let C=1;C<U;C++)X=X.add(Y),Q.push(X);Y=X.double()}return Q},wNAF(C,T,N){let U=_.ZERO,Q=_.BASE,Y=On(C,$);for(let C=0;C<Y.windows;C++){let{nextN:$,offset:X,isZero:ee,isNeg:es,isNegF:el,offsetF:ec}=Io(N,C,Y);N=$,ee?Q=Q.add(le(el,T[ec])):U=U.add(le(es,T[X]))}return So(N),{p:U,f:Q}},wNAFUnsafe(C,T,N,U=_.ZERO){let Q=On(C,$);for(let C=0;C<Q.windows&&N!==rg;C++){let{nextN:$,offset:Y,isZero:X,isNeg:ee}=Io(N,C,Q);if(N=$,!X){let C=T[Y];U=U.add(ee?C.negate():C)}}return So(N),U},getPrecomputes(C,T,N){let U=rm.get(T);return U||(U=this.precomputeWindow(T,C),1!==C&&("function"==typeof N&&(U=N(U)),rm.set(T,U))),U},wNAFCached(C,T,N){let U=_n(C);return this.wNAF(U,this.getPrecomputes(U,C,N),T)},wNAFCachedUnsafe(C,T,N,U){let $=_n(C);return 1===$?this.unsafeLadder(C,T,U):this.wNAFUnsafe($,this.getPrecomputes($,C,N),T,U)},setWindowSize(C,T){Bo(T,$),rb.set(C,T),rm.delete(C)}});return _}(T,N),Q=function(C,T,N={}){ke(T,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let U=T.randomBytes||Zt,$=T.hmac||((C,...N)=>_e(T.hash,C,Ht(...N))),{Fp:Q,Fn:Y}=C,{ORDER:X,BITS:ee}=Y;function u(C){let T=X>>rO;return C>T}function l(C,T){if(!Y.isValidNot0(T))throw Error(`invalid signature ${C}: out of range 1..CURVE.n`)}let h=class h{constructor(C,T,N){l("r",C),l("s",T),this.r=C,this.s=T,null!=N&&(this.recovery=N),Object.freeze(this)}static fromCompact(C){let T=Y.BYTES,N=rt("compactSignature",C,2*T);return new h(Y.fromBytes(N.subarray(0,T)),Y.fromBytes(N.subarray(T,2*T)))}static fromDER(C){let{r:T,s:N}=rB.toSig(rt("DER",C));return new h(T,N)}assertValidity(){}addRecoveryBit(C){return new h(this.r,this.s,C)}recoverPublicKey(T){let N=Q.ORDER,{r:U,s:$,recovery:ee}=this;if(null==ee||![0,1,2,3].includes(ee))throw Error("recovery id invalid");if(X*rR<N&&ee>1)throw Error("recovery id is ambiguous for h>1 curve");let es=2===ee||3===ee?U+X:U;if(!Q.isValid(es))throw Error("recovery id 2 or 3 invalid");let el=Q.toBytes(es),eh=C.fromHex(Ht(Ro((1&ee)==0),el)),eu=Y.inv(es),ed=ec(rt("msgHash",T)),ep=Y.create(-ed*eu),eg=Y.create($*eu),ey=C.BASE.multiplyUnsafe(ep).add(eh.multiplyUnsafe(eg));if(ey.is0())throw Error("point at infinify");return ey.assertValidity(),ey}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,Y.neg(this.s),this.recovery):this}toBytes(C){if("compact"===C)return Ht(Y.toBytes(this.r),Y.toBytes(this.s));if("der"===C)return fn(rB.hexFromSig(this));throw Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ce(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ce(this.toBytes("compact"))}};let es=To(Y,N.allowedPrivateKeyLengths,N.wrapPrivateKey);function v(T){if("bigint"==typeof T)return!1;if(T instanceof C)return!0;let U=rt("key",T).length,$=Q.BYTES,X=$+1;if(!(N.allowedPrivateKeyLengths||Y.BYTES===X))return U===X||U===2*$+1}let el=T.bits2int||function(C){if(C.length>8192)throw Error("input is too large");let T=lo(ce(C)),N=8*C.length-ee;return N>0?T>>BigInt(N):T},ec=T.bits2int_modN||function(C){return Y.create(el(C))},eh=je(ee);function _(C){return Nn("num < 2^"+ee,C,rC,eh),Y.toBytes(C)}let eu={lowS:T.lowS,prehash:!1},ed={lowS:T.lowS,prehash:!1};return C.BASE.precompute(8),Object.freeze({getPublicKey:function(T,N=!0){return C.fromPrivateKey(T).toBytes(N)},getSharedSecret:function(T,N,U=!0){if(!0===v(T))throw Error("first arg must be private key");if(!1===v(N))throw Error("second arg must be public key");return C.fromHex(N).multiply(es(T)).toBytes(U)},sign:function(N,X,ee=eu){let{seed:eh,k2sig:ed}=function(N,$,X=eu){if(["recovered","canonical"].some(C=>C in X))throw Error("sign() legacy options not supported");let{hash:ee}=T,{lowS:eh,prehash:ed,extraEntropy:ep}=X;null==eh&&(eh=!0),N=rt("msgHash",N),_o(X),ed&&(N=rt("prehashed msgHash",ee(N)));let eg=ec(N),ey=es($),em=[_(ey),_(eg)];if(null!=ep&&!1!==ep){let C=!0===ep?U(Q.BYTES):ep;em.push(rt("extraEntropy",C))}let eb=Ht(...em);return{seed:eb,k2sig:function(T){let N=el(T);if(!Y.isValidNot0(N))return;let U=Y.inv(N),$=C.BASE.multiply(N).toAffine(),Q=Y.create($.x);if(Q===rC)return;let X=Y.create(U*Y.create(eg+Q*ey));if(X===rC)return;let ee=($.x===Q?0:2)|Number($.y&rO),es=X;return eh&&u(X)&&(es=u(X)?Y.neg(X):X,ee^=1),new h(Q,es,ee)}}}(N,X,ee);return(function(C,T,N){if("number"!=typeof C||C<2)throw Error("hashLen must be a number");if("number"!=typeof T||T<2)throw Error("qByteLen must be a number");if("function"!=typeof N)throw Error("hmacFn must be a function");let r=C=>new Uint8Array(C),o=C=>Uint8Array.of(C),U=r(C),$=r(C),Q=0,c=()=>{U.fill(1),$.fill(0),Q=0},u=(...C)=>N($,U,...C),a=(C=r(0))=>{$=u(o(0),C),U=u(),0!==C.length&&($=u(o(1),C),U=u())},l=()=>{if(Q++>=1e3)throw Error("drbg: tried 1000 values");let C=0,N=[];for(;C<T;){U=u();let T=U.slice();N.push(T),C+=U.length}return Ht(...N)};return(C,T)=>{let N;for(c(),a(C);!(N=T(l()));)a();return c(),N}})(T.hash.outputLen,Y.BYTES,$)(eh,ed)},verify:function(N,U,$,Q=ed){let X,ee;U=rt("msgHash",U),$=rt("publicKey",$),_o(Q);let{lowS:es,prehash:el,format:eh}=Q;if("strict"in Q)throw Error("options.strict was renamed to lowS");if(void 0!==eh&&!["compact","der","js"].includes(eh))throw Error('format must be "compact", "der" or "js"');let eu="string"==typeof N||nn(N),ep=!eu&&!eh&&"object"==typeof N&&null!==N&&"bigint"==typeof N.r&&"bigint"==typeof N.s;if(!eu&&!ep)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(ep){if(void 0===eh||"js"===eh)X=new h(N.r,N.s);else throw Error("invalid format")}if(eu){try{"compact"!==eh&&(X=h.fromDER(N))}catch(C){if(!(C instanceof rB.Err))throw C}X||"der"===eh||(X=h.fromCompact(N))}ee=C.fromHex($)}catch{return!1}if(!X||es&&X.hasHighS())return!1;el&&(U=T.hash(U));let{r:eg,s:ey}=X,em=ec(U),eb=Y.inv(ey),ew=Y.create(em*eb),e_=Y.create(eg*eb),ev=C.BASE.multiplyUnsafe(ew).add(ee.multiplyUnsafe(e_));return!ev.is0()&&Y.create(ev.x)===eg},utils:{isValidPrivateKey(C){try{return es(C),!0}catch{return!1}},normPrivateKeyToScalar:es,randomPrivateKey:()=>(function(C,T,N=!1){let U=C.length,$=vo(T),Q=Eo(T);if(U<16||U<Q||U>1024)throw Error("expected "+Q+"-1024 bytes of input, got "+U);let Y=N?Le(C):lo(ce(C)),X=lt(Y,T-rs)+rs;return N?An(X,$):In(X,$)})(U(Eo(X)),X),precompute:(T=8,N=C.BASE)=>N.precompute(T,!1)},Point:C,Signature:h})}($,U,N);return Object.assign({},Q,{ProjectivePoint:Q.Point,CURVE:C})})({...C,hash:T});return{...n(T),create:n}}let rk={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},rU={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},rL={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},rM=Yt(rk.p),rF=Yt(rU.p),rj=Yt(rL.p),rz=Rn({...rk,Fp:rM,lowS:!1},tU);Rn({...rU,Fp:rF,lowS:!1},tM),Rn({...rL,Fp:rj,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},tL);let rq="base10",rH="base16",rV="base64pad",rK="base64url",rG="utf8";function qc(){let C=Zt(32);return to_string_toString(C,rH)}function Fc(C){let T=tU(fromString(C,rH));return to_string_toString(T,rH)}function zc(C){let T=tU(fromString(C,rG));return to_string_toString(T,rH)}function Vt(C){return Number(to_string_toString(C,rq))}function ko(C){return C.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Po(C){let T=C.replace(/-/g,"+").replace(/_/g,"/"),N=(4-T.length%4)%4;return T+"=".repeat(N)}function kn(C){if(2===Vt(C.type))return to_string_toString(concat([C.type,C.sealed]),rV);if(1===Vt(C.type)){if(typeof C.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return to_string_toString(concat([C.type,C.senderPublicKey,C.iv,C.sealed]),rV)}return to_string_toString(concat([C.type,C.iv,C.sealed]),rV)}function Me(C){let T=(C.encoding||rV)===rK?Po(C.encoded):C.encoded,N=fromString(T,rV),U=N.slice(0,1);if(1===Vt(U)){let C=N.slice(1,33),T=N.slice(33,45),$=N.slice(45);return{type:U,sealed:$,iv:T,senderPublicKey:C}}if(2===Vt(U)){let C=N.slice(1),T=Zt(12);return{type:U,sealed:C,iv:T}}let $=N.slice(1,13),Q=N.slice(13);return{type:U,sealed:Q,iv:$}}function Ho(C){let T=C?.type||0;if(1===T){if(typeof C?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof C?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:T,senderPublicKey:C?.senderPublicKey,receiverPublicKey:C?.receiverPublicKey}}function Jc(C){return 1===C.type&&"string"==typeof C.senderPublicKey&&"string"==typeof C.receiverPublicKey}function ea(C){return C?.relay||{protocol:"irn"}}function na(C){let T=eZ.iO[C];if(typeof T>"u")throw Error(`Relay Protocol not supported: ${C}`);return T}function ra(C){var T;if(!C.includes("wc:")){let T=Qe(C);null!=T&&T.includes("wc:")&&(C=T)}C=(C=C.includes("wc://")?C.replace("wc://",""):C).includes("wc:")?C.replace("wc:",""):C;let N=C.indexOf(":"),U=-1!==C.indexOf("?")?C.indexOf("?"):void 0,$=C.substring(0,N),Q=C.substring(N+1,U).split("@"),Y="u">typeof U?C.substring(U):"",X=new URLSearchParams(Y),ee={};X.forEach((C,T)=>{ee[T]=C});let es="string"==typeof ee.methods?ee.methods.split(","):void 0;return{protocol:$,topic:(T=Q[0]).startsWith("//")?T.substring(2):T,version:parseInt(Q[1],10),symKey:ee.symKey,relay:function(C,T="-"){let N={},U="relay"+T;return Object.keys(C).forEach(T=>{if(T.startsWith(U)){let $=T.replace(U,""),Q=C[T];N[$]=Q}}),N}(ee),methods:es,expiryTimestamp:ee.expiryTimestamp?parseInt(ee.expiryTimestamp,10):void 0}}function oa(C){let T=new URLSearchParams,N=function(C,T="-"){let N={};return Object.keys(C).forEach(U=>{C[U]&&(N["relay"+T+U]=C[U])}),N}(C.relay);Object.keys(N).sort().forEach(C=>{T.set(C,N[C])}),T.set("symKey",C.symKey),C.expiryTimestamp&&T.set("expiryTimestamp",C.expiryTimestamp.toString()),C.methods&&T.set("methods",C.methods.join(","));let U=T.toString();return`${C.protocol}:${C.topic}@${C.version}?${U}`}function sa(C,T,N){return`${C}?wc_ev=${N}&topic=${T}`}var r$=Object.defineProperty,rQ=Object.defineProperties,rJ=Object.getOwnPropertyDescriptors,rW=Object.getOwnPropertySymbols,rZ=Object.prototype.hasOwnProperty,rY=Object.prototype.propertyIsEnumerable,zo=(C,T,N)=>T in C?r$(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,la=(C,T)=>{for(var N in T||(T={}))rZ.call(T,N)&&zo(C,N,T[N]);if(rW)for(var N of rW(T))rY.call(T,N)&&zo(C,N,T[N]);return C},da=(C,T)=>rQ(C,rJ(T));function qt(C){let T=[];return C.forEach(C=>{let[N,U]=C.split(":");T.push(`${N}:${U}`)}),T}function Pn(C){return C.includes(":")}function Yo(C){return Pn(C)?C.split(":")[0]:C}function ye(C){var T,N,U;let $={};if(!Ve(C))return $;for(let[Q,Y]of Object.entries(C)){let C=Pn(Q)?[Q]:Y.chains,X=Y.methods||[],ee=Y.events||[],es=Yo(Q);$[es]=da(la({},$[es]),{chains:ct(C,null==(T=$[es])?void 0:T.chains),methods:ct(X,null==(N=$[es])?void 0:N.methods),events:ct(ee,null==(U=$[es])?void 0:U.events)})}return $}function ga(C,T){T=T.map(C=>C.replace("did:pkh:",""));let N=function(C){let T={};return C?.forEach(C=>{var N;let[U,$]=C.split(":");T[U]||(T[U]={accounts:[],chains:[],events:[],methods:[]}),T[U].accounts.push(C),null==(N=T[U].chains)||N.push(`${U}:${$}`)}),T}(T);for(let[T,U]of Object.entries(N))U.methods?U.methods=ct(U.methods,C):U.methods=C,U.events=["chainChanged","accountsChanged"];return N}let rX={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},r0={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Et(C,T){let{message:N,code:U}=r0[C];return{message:T?`${N} ${T}`:N,code:U}}function Kt(C,T){let{message:N,code:U}=rX[C];return{message:T?`${N} ${T}`:N,code:U}}function me(C,T){return!!Array.isArray(C)&&(!("u">typeof T)||!C.length||C.every(T))}function Ve(C){return Object.getPrototypeOf(C)===Object.prototype&&Object.keys(C).length}function kt(C){return typeof C>"u"}function it(C,T){return!!(T&&kt(C))||"string"==typeof C&&!!C.trim().length}function qe(C,T){return!!(T&&kt(C))||"number"==typeof C&&!isNaN(C)}function we(C){return!!(it(C,!1)&&C.includes(":"))&&2===C.split(":").length}function Hn(C){let T=!0;return me(C)?C.length&&(T=C.every(C=>it(C,!1))):T=!1,T}function Dn(C,T){let N=null;return Object.values(C).forEach(C=>{var U;let $;if(N)return;let Q=(U=`${T}, namespace`,$=null,Hn(C?.methods)?Hn(C?.events)||($=Kt("UNSUPPORTED_EVENTS",`${U}, events should be an array of strings or empty array for no events`)):$=Kt("UNSUPPORTED_METHODS",`${U}, methods should be an array of strings or empty array for no methods`),$);Q&&(N=Q)}),N}function is(C,T){let N=null;if(C&&Ve(C)){let U;let $=Dn(C,T);$&&(N=$);let Q=(U=null,Object.values(C).forEach(C=>{var N,$;let Q;if(U)return;let Y=(N=C?.accounts,$=`${T} namespace`,Q=null,me(N)?N.forEach(C=>{Q||function(C){if(it(C,!1)&&C.includes(":")){let T=C.split(":");if(3===T.length){let C=T[0]+":"+T[1];return!!T[2]&&we(C)}}return!1}(C)||(Q=Kt("UNSUPPORTED_ACCOUNTS",`${$}, account ${C} should be a string and conform to "namespace:chainId:address" format`))}):Q=Kt("UNSUPPORTED_ACCOUNTS",`${$}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),Q);Y&&(U=Y)}),U);Q&&(N=Q)}else N=Et("MISSING_OR_INVALID",`${T}, namespaces should be an object with data`);return N}function fs(C){return it(C.protocol,!0)}function Aa(C){return"u">typeof C}function _a(C,T){return!(!we(T)||!(function(C){let T=[];return Object.values(C).forEach(C=>{T.push(...qt(C.accounts))}),T})(C).includes(T))}function cs(C,T,N){let U=null,$=function(C){let T={};return Object.keys(C).forEach(N=>{var U;N.includes(":")?T[N]=C[N]:null==(U=C[N].chains)||U.forEach(U=>{T[U]={methods:C[N].methods,events:C[N].events}})}),T}(C),Q=function(C){let T={};return Object.keys(C).forEach(N=>{if(N.includes(":"))T[N]=C[N];else{let U=qt(C[N].accounts);U?.forEach(U=>{T[U]={accounts:C[N].accounts.filter(C=>C.includes(`${U}:`)),methods:C[N].methods,events:C[N].events}})}}),T}(T),Y=Object.keys($),X=Object.keys(Q),ee=as(Object.keys(C)),es=as(Object.keys(T)),el=ee.filter(C=>!es.includes(C));return el.length&&(U=Et("NON_CONFORMING_NAMESPACES",`${N} namespaces keys don't satisfy requiredNamespaces.
      Required: ${el.toString()}
      Received: ${Object.keys(T).toString()}`)),It(Y,X)||(U=Et("NON_CONFORMING_NAMESPACES",`${N} namespaces chains don't satisfy required namespaces.
      Required: ${Y.toString()}
      Approved: ${X.toString()}`)),Object.keys(T).forEach(C=>{if(!C.includes(":")||U)return;let $=qt(T[C].accounts);$.includes(C)||(U=Et("NON_CONFORMING_NAMESPACES",`${N} namespaces accounts don't satisfy namespace accounts for ${C}
        Required: ${C}
        Approved: ${$.toString()}`))}),Y.forEach(C=>{U||(It($[C].methods,Q[C].methods)?It($[C].events,Q[C].events)||(U=Et("NON_CONFORMING_NAMESPACES",`${N} namespaces events don't satisfy namespace events for ${C}`)):U=Et("NON_CONFORMING_NAMESPACES",`${N} namespaces methods don't satisfy namespace methods for ${C}`))}),U}function as(C){return[...new Set(C.map(C=>C.includes(":")?C.split(":")[0]:C))]}function ja(){let C=Pt();return new Promise(T=>{switch(C){case e5.browser:T(zt()&&navigator?.onLine);break;case e5.reactNative:T(ls());break;case e5.node:default:T(!0)}})}async function ls(){if(Bt()&&"u">typeof N.g&&null!=N.g&&N.g.NetInfo){let C=await (null==N.g?void 0:N.g.NetInfo.fetch());return C?.isConnected}return!0}let r1={};let Ha=class Ha{static get(C){return r1[C]}static set(C,T){r1[C]=T}static delete(C){delete r1[C]}};function Vn(C){return new Uint8Array(C.replace(/^0x/,"").match(/.{1,2}/g).map(C=>parseInt(C,16)))}var r2=N(9490),r3=N(1873),r8=N(2044),r4=N(8200),r6=Object.defineProperty,u=(C,T,N)=>T in C?r6(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,c=(C,T,N)=>u(C,"symbol"!=typeof T?T+"":T,N);let h=class h extends r4.q{constructor(C){super(),this.opts=C,c(this,"protocol","wc"),c(this,"version",2)}};var r5=Object.defineProperty,b=(C,T,N)=>T in C?r5(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,v=(C,T,N)=>b(C,"symbol"!=typeof T?T+"":T,N);let I=class I extends r4.q{constructor(C,T){super(),this.core=C,this.logger=T,v(this,"records",new Map)}};let y=class y{constructor(C,T){this.logger=C,this.core=T}};let m=class m extends r4.q{constructor(C,T){super(),this.relayer=C,this.logger=T}};let d=class d extends r4.q{constructor(C){super()}};let f=class f{constructor(C,T,N,U){this.core=C,this.logger=T,this.name=N}};let P=class P extends r4.q{constructor(C,T){super(),this.relayer=C,this.logger=T}};let S=class S extends r4.q{constructor(C,T){super(),this.core=C,this.logger=T}};let index_es_M=class index_es_M{constructor(C,T,N){this.core=C,this.logger=T,this.store=N}};let O=class O{constructor(C,T){this.projectId=C,this.logger=T}};let R=class R{constructor(C,T,N){this.core=C,this.logger=T,this.telemetryEnabled=N}};var r9=Object.defineProperty,k=(C,T,N)=>T in C?r9(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,i=(C,T,N)=>k(C,"symbol"!=typeof T?T+"":T,N);let index_es_J=class index_es_J{constructor(C){this.opts=C,i(this,"protocol","wc"),i(this,"version",2)}};let V=class V{constructor(C){this.client=C}};var r7=N(5094),ie=N(4534),ir=N(6186),ia=N(8939),il=N(8764).lW,ic=N(3454);let ih="core",iu=`wc@2:${ih}:`,ip={logger:"error"},ig={database:":memory:"},iy="client_ed25519_seed",im=Y.ONE_DAY,ib=Y.SIX_HOURS,iw="wss://relay.walletconnect.org",i_={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},iv={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},iE="2.21.4",ix={link_mode:"link_mode",relay:"relay"},iA={inbound:"inbound",outbound:"outbound"},iI="WALLETCONNECT_LINK_MODE_APPS",iP={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},iS=(Y.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:0},res:{ttl:Y.ONE_DAY,prompt:!1,tag:0}}}),iD={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},iB={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},iC={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},iO="https://verify.walletconnect.org",iR=`${iO}/v3`,iT=["https://verify.walletconnect.com",iO],iN={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},ik={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},iU={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},iL={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},iM={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},iF={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var index_es_ar=function(C,T){if(C.length>=255)throw TypeError("Alphabet too long");for(var N=new Uint8Array(256),U=0;U<N.length;U++)N[U]=255;for(var $=0;$<C.length;$++){var Q=C.charAt($),Y=Q.charCodeAt(0);if(255!==N[Y])throw TypeError(Q+" is ambiguous");N[Y]=$}var X=C.length,ee=C.charAt(0),es=Math.log(X)/Math.log(256),el=Math.log(256)/Math.log(X);function g(C){if("string"!=typeof C)throw TypeError("Expected String");if(0===C.length)return new Uint8Array;var T=0;if(" "!==C[0]){for(var U=0,$=0;C[T]===ee;)U++,T++;for(var Q=(C.length-T)*es+1>>>0,Y=new Uint8Array(Q);C[T];){var el=N[C.charCodeAt(T)];if(255===el)return;for(var ec=0,eh=Q-1;(0!==el||ec<$)&&-1!==eh;eh--,ec++)el+=X*Y[eh]>>>0,Y[eh]=el%256>>>0,el=el/256>>>0;if(0!==el)throw Error("Non-zero carry");$=ec,T++}if(" "!==C[T]){for(var eu=Q-$;eu!==Q&&0===Y[eu];)eu++;for(var ed=new Uint8Array(U+(Q-eu)),ep=U;eu!==Q;)ed[ep++]=Y[eu++];return ed}}}return{encode:function(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===T.length)return"";for(var N=0,U=0,$=0,Q=T.length;$!==Q&&0===T[$];)$++,N++;for(var Y=(Q-$)*el+1>>>0,es=new Uint8Array(Y);$!==Q;){for(var ec=T[$],eh=0,eu=Y-1;(0!==ec||eh<U)&&-1!==eu;eu--,eh++)ec+=256*es[eu]>>>0,es[eu]=ec%X>>>0,ec=ec/X>>>0;if(0!==ec)throw Error("Non-zero carry");U=eh,$++}for(var ed=Y-U;ed!==Y&&0===es[ed];)ed++;for(var ep=ee.repeat(N);ed<Y;++ed)ep+=C.charAt(es[ed]);return ep},decodeUnsafe:g,decode:function(C){var N=g(C);if(N)return N;throw Error(`Non-${T} character`)}}};let index_es_si=C=>{if(C instanceof Uint8Array&&"Uint8Array"===C.constructor.name)return C;if(C instanceof ArrayBuffer)return new Uint8Array(C);if(ArrayBuffer.isView(C))return new Uint8Array(C.buffer,C.byteOffset,C.byteLength);throw Error("Unknown type, must be binary type")},index_es_cr=C=>new TextEncoder().encode(C),index_es_hr=C=>new TextDecoder().decode(C);let index_es_lr=class index_es_lr{constructor(C,T,N){this.name=C,this.prefix=T,this.baseEncode=N}encode(C){if(C instanceof Uint8Array)return`${this.prefix}${this.baseEncode(C)}`;throw Error("Unknown type, must be binary type")}};let index_es_ur=class index_es_ur{constructor(C,T,N){if(this.name=C,this.prefix=T,void 0===T.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=T.codePointAt(0),this.baseDecode=N}decode(C){if("string"==typeof C){if(C.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(C)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(C.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(C){return index_es_ri(this,C)}};let index_es_dr=class index_es_dr{constructor(C){this.decoders=C}or(C){return index_es_ri(this,C)}decode(C){let T=C[0],N=this.decoders[T];if(N)return N.decode(C);throw RangeError(`Unable to decode multibase string ${JSON.stringify(C)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let index_es_ri=(C,T)=>new index_es_dr({...C.decoders||{[C.prefix]:C},...T.decoders||{[T.prefix]:T}});let index_es_gr=class index_es_gr{constructor(C,T,N,U){this.name=C,this.prefix=T,this.baseEncode=N,this.baseDecode=U,this.encoder=new index_es_lr(C,T,N),this.decoder=new index_es_ur(C,T,U)}encode(C){return this.encoder.encode(C)}decode(C){return this.decoder.decode(C)}};let index_es_Ee=({name:C,prefix:T,encode:N,decode:U})=>new index_es_gr(C,T,N,U),index_es_de=({prefix:C,name:T,alphabet:N})=>{let{encode:U,decode:$}=index_es_ar(N,T);return index_es_Ee({prefix:C,name:T,encode:U,decode:C=>index_es_si($(C))})},index_es_pr=(C,T,N,U)=>{let $={};for(let C=0;C<T.length;++C)$[T[C]]=C;let Q=C.length;for(;"="===C[Q-1];)--Q;let Y=new Uint8Array(Q*N/8|0),X=0,ee=0,es=0;for(let T=0;T<Q;++T){let Q=$[C[T]];if(void 0===Q)throw SyntaxError(`Non-${U} character`);ee=ee<<N|Q,(X+=N)>=8&&(X-=8,Y[es++]=255&ee>>X)}if(X>=N||255&ee<<8-X)throw SyntaxError("Unexpected end of data");return Y},index_es_yr=(C,T,N)=>{let U="="===T[T.length-1],$=(1<<N)-1,Q="",Y=0,X=0;for(let U=0;U<C.length;++U)for(X=X<<8|C[U],Y+=8;Y>N;)Y-=N,Q+=T[$&X>>Y];if(Y&&(Q+=T[$&X<<N-Y]),U)for(;Q.length*N&7;)Q+="=";return Q},index_es_P=({name:C,prefix:T,bitsPerChar:N,alphabet:U})=>index_es_Ee({prefix:T,name:C,encode:C=>index_es_yr(C,U,N),decode:T=>index_es_pr(T,U,N,C)}),ij=index_es_Ee({prefix:"\x00",name:"identity",encode:C=>index_es_hr(C),decode:C=>index_es_cr(C)});var iz=Object.freeze({__proto__:null,identity:ij});let iq=index_es_P({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iH=Object.freeze({__proto__:null,base2:iq});let iV=index_es_P({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iK=Object.freeze({__proto__:null,base8:iV});let iG=index_es_de({prefix:"9",name:"base10",alphabet:"0123456789"});var i$=Object.freeze({__proto__:null,base10:iG});let iQ=index_es_P({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iJ=index_es_P({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iW=Object.freeze({__proto__:null,base16:iQ,base16upper:iJ});let iZ=index_es_P({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iY=index_es_P({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iX=index_es_P({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),i0=index_es_P({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i1=index_es_P({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i2=index_es_P({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),i3=index_es_P({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i8=index_es_P({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),i4=index_es_P({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var i6=Object.freeze({__proto__:null,base32:iZ,base32upper:iY,base32pad:iX,base32padupper:i0,base32hex:i1,base32hexupper:i2,base32hexpad:i3,base32hexpadupper:i8,base32z:i4});let i5=index_es_de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i9=index_es_de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var i7=Object.freeze({__proto__:null,base36:i5,base36upper:i9});let st=index_es_de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ss=index_es_de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var so=Object.freeze({__proto__:null,base58btc:st,base58flickr:ss});let sl=index_es_P({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sc=index_es_P({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sh=index_es_P({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),su=index_es_P({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sd=Object.freeze({__proto__:null,base64:sl,base64pad:sc,base64url:sh,base64urlpad:su});let sf=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sp=sf.reduce((C,T,N)=>(C[N]=T,C),[]),sg=sf.reduce((C,T,N)=>(C[T.codePointAt(0)]=N,C),[]),sy=index_es_Ee({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(C){return C.reduce((C,T)=>C+=sp[T],"")},decode:function(C){let T=[];for(let N of C){let C=sg[N.codePointAt(0)];if(void 0===C)throw Error(`Non-base256emoji character: ${N}`);T.push(C)}return new Uint8Array(T)}});var sm=Object.freeze({__proto__:null,base256emoji:sy});function index_es_ai(C,T,N){T=T||[],N=N||0;for(var U=N;C>=2147483648;)T[N++]=255&C|128,C/=128;for(;-128&C;)T[N++]=255&C|128,C>>>=7;return T[N]=0|C,index_es_ai.bytes=N-U+1,T}function index_es_Me(C,T){var N,U=0,T=T||0,$=0,Q=T,Y=C.length;do{if(Q>=Y)throw index_es_Me.bytes=0,RangeError("Could not decode varint");N=C[Q++],U+=$<28?(127&N)<<$:(127&N)*Math.pow(2,$),$+=7}while(N>=128);return index_es_Me.bytes=Q-T,U}var sb={encode:index_es_ai,decode:index_es_Me,encodingLength:function(C){return C<128?1:C<16384?2:C<2097152?3:C<268435456?4:C<34359738368?5:C<4398046511104?6:C<562949953421312?7:C<72057594037927940?8:C<0x7fffffffffffffff?9:10}};let index_es_li=(C,T,N=0)=>(sb.encode(C,T,N),T),index_es_ui=C=>sb.encodingLength(C),Ke=(C,T)=>{let N=T.byteLength,U=index_es_ui(C),$=U+index_es_ui(N),Q=new Uint8Array($+N);return index_es_li(C,Q,0),index_es_li(N,Q,U),Q.set(T,$),new index_es_fn(C,N,T,Q)};let index_es_fn=class index_es_fn{constructor(C,T,N,U){this.code=C,this.size=T,this.digest=N,this.bytes=U}};let index_es_di=({name:C,code:T,encode:N})=>new index_es_Dn(C,T,N);let index_es_Dn=class index_es_Dn{constructor(C,T,N){this.name=C,this.code=T,this.encode=N}digest(C){if(C instanceof Uint8Array){let T=this.encode(C);return T instanceof Uint8Array?Ke(this.code,T):T.then(C=>Ke(this.code,C))}throw Error("Unknown type, must be binary type")}};let index_es_gi=C=>async T=>new Uint8Array(await crypto.subtle.digest(C,T)),sw=index_es_di({name:"sha2-256",code:18,encode:index_es_gi("SHA-256")}),s_=index_es_di({name:"sha2-512",code:19,encode:index_es_gi("SHA-512")});var sv=Object.freeze({__proto__:null,sha256:sw,sha512:s_}),sE=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:index_es_si,digest:C=>Ke(0,index_es_si(C))}});new TextEncoder,new TextDecoder;let sx={...iz,...iH,...iK,...i$,...iW,...i6,...i7,...so,...sd,...sm};function index_es_mi(C){return null!=globalThis.Buffer?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):C}function index_es_fi(C,T,N,U){return{name:C,prefix:T,encoder:{name:C,prefix:T,encode:N},decoder:{decode:U}}}({...sv,...sE});let sA=index_es_fi("utf8","u",C=>"u"+new TextDecoder("utf8").decode(C),C=>new TextEncoder().encode(C.substring(1))),sI=index_es_fi("ascii","a",C=>{let T="a";for(let N=0;N<C.length;N++)T+=String.fromCharCode(C[N]);return T},C=>{C=C.substring(1);let T=function(C=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?index_es_mi(globalThis.Buffer.allocUnsafe(C)):new Uint8Array(C)}(C.length);for(let N=0;N<C.length;N++)T[N]=C.charCodeAt(N);return T}),sP={utf8:sA,"utf-8":sA,hex:sx.base16,latin1:sI,ascii:sI,binary:sI,...sx};var sS=Object.defineProperty,index_es_An=(C,T,N)=>T in C?sS(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_W=(C,T,N)=>index_es_An(C,"symbol"!=typeof T?T+"":T,N);let index_es_vi=class index_es_vi{constructor(C,T){this.core=C,this.logger=T,index_es_W(this,"keychain",new Map),index_es_W(this,"name","keychain"),index_es_W(this,"version","0.3"),index_es_W(this,"initialized",!1),index_es_W(this,"storagePrefix",iu),index_es_W(this,"init",async()=>{if(!this.initialized){let C=await this.getKeyChain();"u">typeof C&&(this.keychain=C),this.initialized=!0}}),index_es_W(this,"has",C=>(this.isInitialized(),this.keychain.has(C))),index_es_W(this,"set",async(C,T)=>{this.isInitialized(),this.keychain.set(C,T),await this.persist()}),index_es_W(this,"get",C=>{this.isInitialized();let T=this.keychain.get(C);if(typeof T>"u"){let{message:T}=Et("NO_MATCHING_KEY",`${this.name}: ${C}`);throw Error(T)}return T}),index_es_W(this,"del",async C=>{this.isInitialized(),this.keychain.delete(C),await this.persist()}),this.core=C,this.logger=(0,r8.Ep)(T,this.name)}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(C){await this.core.storage.setItem(this.storageKey,Ys(C))}async getKeyChain(){let C=await this.core.storage.getItem(this.storageKey);return"u">typeof C?Xs(C):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var sD=Object.defineProperty,index_es_Nn=(C,T,N)=>T in C?sD(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_S=(C,T,N)=>index_es_Nn(C,"symbol"!=typeof T?T+"":T,N);let index_es_wi=class index_es_wi{constructor(C,T,N){this.core=C,this.logger=T,index_es_S(this,"name","crypto"),index_es_S(this,"keychain"),index_es_S(this,"randomSessionIdentifier",qc()),index_es_S(this,"initialized",!1),index_es_S(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),index_es_S(this,"hasKeys",C=>(this.isInitialized(),this.keychain.has(C))),index_es_S(this,"getClientId",async()=>{this.isInitialized();let C=await this.getClientSeed(),T=eG.Au(C);return eG.bG(T.publicKey)}),index_es_S(this,"generateKeyPair",()=>{this.isInitialized();let C=function(){let C=rD.utils.randomPrivateKey(),T=rD.getPublicKey(C);return{privateKey:to_string_toString(C,rH),publicKey:to_string_toString(T,rH)}}();return this.setPrivateKey(C.publicKey,C.privateKey)}),index_es_S(this,"signJWT",async C=>{this.isInitialized();let T=await this.getClientSeed(),N=eG.Au(T),U=this.randomSessionIdentifier;return await eG.vf(U,C,im,N)}),index_es_S(this,"generateSharedKey",(C,T,N)=>{this.isInitialized();let U=this.getPrivateKey(C),$=function(C,T){let N=rD.getSharedSecret(fromString(C,rH),fromString(T,rH)),U=Jf(tU,N,void 0,void 0,32);return to_string_toString(U,rH)}(U,T);return this.setSymKey($,N)}),index_es_S(this,"setSymKey",async(C,T)=>{this.isInitialized();let N=T||Fc(C);return await this.keychain.set(N,C),N}),index_es_S(this,"deleteKeyPair",async C=>{this.isInitialized(),await this.keychain.del(C)}),index_es_S(this,"deleteSymKey",async C=>{this.isInitialized(),await this.keychain.del(C)}),index_es_S(this,"encode",async(C,T,N)=>{this.isInitialized();let U=Ho(N),$=(0,r7.u)(T);if(2===U.type)return function(C,T){let N=fromString("2",rq),U=Zt(12),$=fromString(C,rG),Q=kn({type:N,sealed:$,iv:U});return T===rK?ko(Q):Q}($,N?.encoding);if(Jc(U)){let T=U.senderPublicKey,N=U.receiverPublicKey;C=await this.generateSharedKey(T,N)}let Q=this.getSymKey(C),{type:Y,senderPublicKey:X}=U;return function(C){var T;let N=(T="u">typeof C.type?C.type:0,fromString(`${T}`,rq));if(1===Vt(N)&&typeof C.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let U="u">typeof C.senderPublicKey?fromString(C.senderPublicKey,rH):void 0,$="u">typeof C.iv?fromString(C.iv,rH):Zt(12),Q=fromString(C.symKey,rH),Y=t5(Q,$).encrypt(fromString(C.message,rG)),X=kn({type:N,sealed:Y,iv:$,senderPublicKey:U});return C.encoding===rK?ko(X):X}({type:Y,symKey:Q,message:$,senderPublicKey:X,encoding:N?.encoding})}),index_es_S(this,"decode",async(C,T,N)=>{this.isInitialized();let U=function(C,T){let N=Me({encoded:C,encoding:T?.encoding});return Ho({type:Vt(N.type),senderPublicKey:"u">typeof N.senderPublicKey?to_string_toString(N.senderPublicKey,rH):void 0,receiverPublicKey:T?.receiverPublicKey})}(T,N);if(2===U.type){let C=function(C,T){let{sealed:N}=Me({encoded:C,encoding:T});return to_string_toString(N,rG)}(T,N?.encoding);return(0,r7.D)(C)}if(Jc(U)){let T=U.receiverPublicKey,N=U.senderPublicKey;C=await this.generateSharedKey(T,N)}try{let U=this.getSymKey(C),$=function(C){let T=fromString(C.symKey,rH),{sealed:N,iv:U}=Me({encoded:C.encoded,encoding:C.encoding}),$=t5(T,U).decrypt(N);if(null===$)throw Error("Failed to decrypt");return to_string_toString($,rG)}({symKey:U,encoded:T,encoding:N?.encoding});return(0,r7.D)($)}catch(T){this.logger.error(`Failed to decode message from topic: '${C}', clientId: '${await this.getClientId()}'`),this.logger.error(T)}}),index_es_S(this,"getPayloadType",(C,T=rV)=>{let N=Me({encoded:C,encoding:T});return Vt(N.type)}),index_es_S(this,"getPayloadSenderPublicKey",(C,T=rV)=>{let N=Me({encoded:C,encoding:T});return N.senderPublicKey?to_string_toString(N.senderPublicKey,rH):void 0}),this.core=C,this.logger=(0,r8.Ep)(T,this.name),this.keychain=N||new index_es_vi(this.core,this.logger)}get context(){return(0,r8.Fd)(this.logger)}async setPrivateKey(C,T){return await this.keychain.set(C,T),C}getPrivateKey(C){return this.keychain.get(C)}async getClientSeed(){let C="";try{C=this.keychain.get(iy)}catch{C=qc(),await this.keychain.set(iy,C)}return function(C,T="utf8"){let N=sP[T];if(!N)throw Error(`Unsupported encoding "${T}"`);return("utf8"===T||"utf-8"===T)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?index_es_mi(globalThis.Buffer.from(C,"utf-8")):N.decoder.decode(`${N.prefix}${C}`)}(C,"base16")}getSymKey(C){return this.keychain.get(C)}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var sB=Object.defineProperty,sC=Object.defineProperties,sO=Object.getOwnPropertyDescriptors,sR=Object.getOwnPropertySymbols,sT=Object.prototype.hasOwnProperty,sN=Object.prototype.propertyIsEnumerable,index_es_Ve=(C,T,N)=>T in C?sB(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Un=(C,T)=>{for(var N in T||(T={}))sT.call(T,N)&&index_es_Ve(C,N,T[N]);if(sR)for(var N of sR(T))sN.call(T,N)&&index_es_Ve(C,N,T[N]);return C},Fn=(C,T)=>sC(C,sO(T)),index_es_k=(C,T,N)=>index_es_Ve(C,"symbol"!=typeof T?T+"":T,N);let index_es_Ei=class index_es_Ei extends y{constructor(C,T){super(C,T),this.logger=C,this.core=T,index_es_k(this,"messages",new Map),index_es_k(this,"messagesWithoutClientAck",new Map),index_es_k(this,"name","messages"),index_es_k(this,"version","0.3"),index_es_k(this,"initialized",!1),index_es_k(this,"storagePrefix",iu),index_es_k(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let C=await this.getRelayerMessages();"u">typeof C&&(this.messages=C);let T=await this.getRelayerMessagesWithoutClientAck();"u">typeof T&&(this.messagesWithoutClientAck=T),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(C){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(C)}finally{this.initialized=!0}}}),index_es_k(this,"set",async(C,T,N)=>{this.isInitialized();let U=zc(T),$=this.messages.get(C);if(typeof $>"u"&&($={}),"u">typeof $[U])return U;if($[U]=T,this.messages.set(C,$),N===iA.inbound){let N=this.messagesWithoutClientAck.get(C)||{};this.messagesWithoutClientAck.set(C,Fn(index_es_Un({},N),{[U]:T}))}return await this.persist(),U}),index_es_k(this,"get",C=>{this.isInitialized();let T=this.messages.get(C);return typeof T>"u"&&(T={}),T}),index_es_k(this,"getWithoutAck",C=>{this.isInitialized();let T={};for(let N of C){let C=this.messagesWithoutClientAck.get(N)||{};T[N]=Object.values(C)}return T}),index_es_k(this,"has",(C,T)=>{this.isInitialized();let N=this.get(C),U=zc(T);return"u">typeof N[U]}),index_es_k(this,"ack",async(C,T)=>{this.isInitialized();let N=this.messagesWithoutClientAck.get(C);if(typeof N>"u")return;let U=zc(T);delete N[U],0===Object.keys(N).length?this.messagesWithoutClientAck.delete(C):this.messagesWithoutClientAck.set(C,N),await this.persist()}),index_es_k(this,"del",async C=>{this.isInitialized(),this.messages.delete(C),this.messagesWithoutClientAck.delete(C),await this.persist()}),this.logger=(0,r8.Ep)(C,this.name),this.core=T}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(C){await this.core.storage.setItem(this.storageKey,Ys(C))}async setRelayerMessagesWithoutClientAck(C){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ys(C))}async getRelayerMessages(){let C=await this.core.storage.getItem(this.storageKey);return"u">typeof C?Xs(C):void 0}async getRelayerMessagesWithoutClientAck(){let C=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof C?Xs(C):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var sk=Object.defineProperty,sU=Object.defineProperties,sL=Object.getOwnPropertyDescriptors,sM=Object.getOwnPropertySymbols,sF=Object.prototype.hasOwnProperty,sj=Object.prototype.propertyIsEnumerable,index_es_qe=(C,T,N)=>T in C?sk(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Ie=(C,T)=>{for(var N in T||(T={}))sF.call(T,N)&&index_es_qe(C,N,T[N]);if(sM)for(var N of sM(T))sj.call(T,N)&&index_es_qe(C,N,T[N]);return C},index_es_Ge=(C,T)=>sU(C,sL(T)),index_es_V=(C,T,N)=>index_es_qe(C,"symbol"!=typeof T?T+"":T,N);let index_es_Gn=class index_es_Gn extends m{constructor(C,T){super(C,T),this.relayer=C,this.logger=T,index_es_V(this,"events",new U.EventEmitter),index_es_V(this,"name","publisher"),index_es_V(this,"queue",new Map),index_es_V(this,"publishTimeout",(0,Y.toMiliseconds)(Y.ONE_MINUTE)),index_es_V(this,"initialPublishTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),index_es_V(this,"needsTransportRestart",!1),index_es_V(this,"publish",async(C,T,N)=>{var U;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:C,message:T,opts:N}});let $=N?.ttl||ib,Q=ea(N),Y=N?.prompt||!1,X=N?.tag||0,ee=N?.id||(0,ir.getBigIntRpcId)().toString(),es={topic:C,message:T,opts:{ttl:$,relay:Q,prompt:Y,tag:X,id:ee,attestation:N?.attestation,tvf:N?.tvf}},el=`Failed to publish payload, please try again. id:${ee} tag:${X}`;try{let U=new Promise(async U=>{let x=({id:C})=>{es.opts.id===C&&(this.removeRequestFromQueue(C),this.relayer.events.removeListener(i_.publish,x),U(es))};this.relayer.events.on(i_.publish,x);let Q=ni(new Promise((U,Q)=>{this.rpcPublish({topic:C,message:T,ttl:$,prompt:Y,tag:X,id:ee,attestation:N?.attestation,tvf:N?.tvf}).then(U).catch(C=>{this.logger.warn(C,C?.message),Q(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${ee} tag:${X}`);try{await Q,this.events.removeListener(i_.publish,x)}catch(C){this.queue.set(ee,index_es_Ge(index_es_Ie({},es),{attempt:1})),this.logger.warn(C,C?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:ee,topic:C,message:T,opts:N}}),await ni(U,this.publishTimeout,el)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),null!=(U=N?.internal)&&U.throwOnFailedPublish)throw C}finally{this.queue.delete(ee)}}),index_es_V(this,"on",(C,T)=>{this.events.on(C,T)}),index_es_V(this,"once",(C,T)=>{this.events.once(C,T)}),index_es_V(this,"off",(C,T)=>{this.events.off(C,T)}),index_es_V(this,"removeListener",(C,T)=>{this.events.removeListener(C,T)}),this.relayer=C,this.logger=(0,r8.Ep)(T,this.name),this.registerEventListeners()}get context(){return(0,r8.Fd)(this.logger)}async rpcPublish(C){var T,N,U,$;let{topic:Q,message:Y,ttl:X=ib,prompt:ee,tag:es,id:el,attestation:ec,tvf:eh}=C,eu={method:na(ea().protocol).publish,params:index_es_Ie({topic:Q,message:Y,ttl:X,prompt:ee,tag:es,attestation:ec},eh),id:el};kt(null==(T=eu.params)?void 0:T.prompt)&&(null==(N=eu.params)||delete N.prompt),kt(null==(U=eu.params)?void 0:U.tag)&&(null==($=eu.params)||delete $.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:eu});let ed=await this.relayer.request(eu);return this.relayer.events.emit(i_.publish,C),this.logger.debug("Successfully Published Payload"),ed}removeRequestFromQueue(C){this.queue.delete(C)}checkQueue(){this.queue.forEach(async(C,T)=>{let N=C.attempt+1;this.queue.set(T,index_es_Ge(index_es_Ie({},C),{attempt:N}));let{topic:U,message:$,opts:Q,attestation:Y}=C;this.logger.warn({},`Publisher: queue->publishing: ${C.opts.id}, tag: ${C.opts.tag}, attempt: ${N}`),await this.rpcPublish(index_es_Ge(index_es_Ie({},C),{topic:U,message:$,ttl:Q.ttl,prompt:Q.prompt,tag:Q.tag,id:Q.id,attestation:Y,tvf:Q.tvf})),this.logger.warn({},`Publisher: queue->published: ${C.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(r2.Lx.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(i_.connection_stalled);return}this.checkQueue()}),this.relayer.on(i_.message_ack,C=>{this.removeRequestFromQueue(C.id.toString())})}};var sz=Object.defineProperty,index_es_Hn=(C,T,N)=>T in C?sz(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,ne=(C,T,N)=>index_es_Hn(C,"symbol"!=typeof T?T+"":T,N);let index_es_Yn=class index_es_Yn{constructor(){ne(this,"map",new Map),ne(this,"set",(C,T)=>{let N=this.get(C);this.exists(C,T)||this.map.set(C,[...N,T])}),ne(this,"get",C=>this.map.get(C)||[]),ne(this,"exists",(C,T)=>this.get(C).includes(T)),ne(this,"delete",(C,T)=>{if(typeof T>"u"){this.map.delete(C);return}if(!this.map.has(C))return;let N=this.get(C);if(!this.exists(C,T))return;let U=N.filter(C=>C!==T);if(!U.length){this.map.delete(C);return}this.map.set(C,U)}),ne(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var sq=Object.defineProperty,sH=Object.defineProperties,sV=Object.getOwnPropertyDescriptors,sK=Object.getOwnPropertySymbols,sG=Object.prototype.hasOwnProperty,s$=Object.prototype.propertyIsEnumerable,index_es_We=(C,T,N)=>T in C?sq(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_ge=(C,T)=>{for(var N in T||(T={}))sG.call(T,N)&&index_es_We(C,N,T[N]);if(sK)for(var N of sK(T))s$.call(T,N)&&index_es_We(C,N,T[N]);return C},index_es_He=(C,T)=>sH(C,sV(T)),index_es_f=(C,T,N)=>index_es_We(C,"symbol"!=typeof T?T+"":T,N);let index_es_Ci=class index_es_Ci extends P{constructor(C,T){super(C,T),this.relayer=C,this.logger=T,index_es_f(this,"subscriptions",new Map),index_es_f(this,"topicMap",new index_es_Yn),index_es_f(this,"events",new U.EventEmitter),index_es_f(this,"name","subscription"),index_es_f(this,"version","0.3"),index_es_f(this,"pending",new Map),index_es_f(this,"cached",[]),index_es_f(this,"initialized",!1),index_es_f(this,"storagePrefix",iu),index_es_f(this,"subscribeTimeout",(0,Y.toMiliseconds)(Y.ONE_MINUTE)),index_es_f(this,"initialSubscribeTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),index_es_f(this,"clientId"),index_es_f(this,"batchSubscribeTopicsLimit",500),index_es_f(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),index_es_f(this,"subscribe",async(C,T)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:C,opts:T}});try{let N=ea(T),U={topic:C,relay:N,transportType:T?.transportType};this.pending.set(C,U);let $=await this.rpcSubscribe(C,N,T);return"string"==typeof $&&(this.onSubscribe($,U),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:C,opts:T}})),$}catch(C){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(C),C}}),index_es_f(this,"unsubscribe",async(C,T)=>{this.isInitialized(),"u">typeof T?.id?await this.unsubscribeById(C,T.id,T):await this.unsubscribeByTopic(C,T)}),index_es_f(this,"isSubscribed",C=>new Promise(T=>{T(this.topicMap.topics.includes(C))})),index_es_f(this,"isKnownTopic",C=>new Promise(T=>{T(this.topicMap.topics.includes(C)||this.pending.has(C)||this.cached.some(T=>T.topic===C))})),index_es_f(this,"on",(C,T)=>{this.events.on(C,T)}),index_es_f(this,"once",(C,T)=>{this.events.once(C,T)}),index_es_f(this,"off",(C,T)=>{this.events.off(C,T)}),index_es_f(this,"removeListener",(C,T)=>{this.events.removeListener(C,T)}),index_es_f(this,"start",async()=>{await this.onConnect()}),index_es_f(this,"stop",async()=>{await this.onDisconnect()}),index_es_f(this,"restart",async()=>{await this.restore(),await this.onRestart()}),index_es_f(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let C=[];this.pending.forEach(T=>{C.push(T)}),await this.batchSubscribe(C)}),index_es_f(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(r2.Lx.pulse,async()=>{await this.checkPending()}),this.events.on(iP.created,async C=>{let T=iP.created;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,data:C}),await this.persist()}),this.events.on(iP.deleted,async C=>{let T=iP.deleted;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,data:C}),await this.persist()})}),this.relayer=C,this.logger=(0,r8.Ep)(T,this.name),this.clientId=""}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(C,T){let N=!1;try{N=this.getSubscription(C).topic===T}catch{}return N}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(C,T){let N=this.topicMap.get(C);await Promise.all(N.map(async N=>await this.unsubscribeById(C,N,T)))}async unsubscribeById(C,T,N){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:C,id:T,opts:N}});try{let U=ea(N);await this.restartToComplete({topic:C,id:T,relay:U}),await this.rpcUnsubscribe(C,T,U);let $=Kt("USER_DISCONNECTED",`${this.name}, ${C}`);await this.onUnsubscribe(C,T,$),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:C,id:T,opts:N}})}catch(C){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(C),C}}async rpcSubscribe(C,T,N){var U;N&&N?.transportType!==ix.relay||await this.restartToComplete({topic:C,id:C,relay:T});let $={method:na(T.protocol).subscribe,params:{topic:C}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:$});let Q=null==(U=N?.internal)?void 0:U.throwOnFailedPublish;try{let T=await this.getSubscriptionId(C);if(N?.transportType===ix.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request($).catch(C=>this.logger.warn(C))},(0,Y.toMiliseconds)(Y.ONE_SECOND)),T;let U=new Promise(async T=>{let d=N=>{N.topic===C&&(this.events.removeListener(iP.created,d),T(N.id))};this.events.on(iP.created,d);try{let N=await ni(new Promise((C,T)=>{this.relayer.request($).catch(C=>{this.logger.warn(C,C?.message),T(C)}).then(C)}),this.initialSubscribeTimeout,`Subscribing to ${C} failed, please try again`);this.events.removeListener(iP.created,d),T(N)}catch{}}),X=await ni(U,this.subscribeTimeout,`Subscribing to ${C} failed, please try again`);if(!X&&Q)throw Error(`Subscribing to ${C} failed, please try again`);return X?T:null}catch(C){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(i_.connection_stalled),Q)throw C}return null}async rpcBatchSubscribe(C){if(!C.length)return;let T=C[0].relay,N={method:na(T.protocol).batchSubscribe,params:{topics:C.map(C=>C.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:N});try{await await ni(new Promise(C=>{this.relayer.request(N).catch(C=>this.logger.warn(C)).then(C)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(i_.connection_stalled)}}async rpcBatchFetchMessages(C){let T;if(!C.length)return;let N=C[0].relay,U={method:na(N.protocol).batchFetchMessages,params:{topics:C.map(C=>C.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:U});try{T=await await ni(new Promise((C,T)=>{this.relayer.request(U).catch(C=>{this.logger.warn(C),T(C)}).then(C)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(i_.connection_stalled)}return T}rpcUnsubscribe(C,T,N){let U={method:na(N.protocol).unsubscribe,params:{topic:C,id:T}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:U}),this.relayer.request(U)}onSubscribe(C,T){this.setSubscription(C,index_es_He(index_es_ge({},T),{id:C})),this.pending.delete(T.topic)}onBatchSubscribe(C){C.length&&C.forEach(C=>{this.setSubscription(C.id,index_es_ge({},C)),this.pending.delete(C.topic)})}async onUnsubscribe(C,T,N){this.events.removeAllListeners(T),this.hasSubscription(T,C)&&this.deleteSubscription(T,N),await this.relayer.messages.del(C)}async setRelayerSubscriptions(C){await this.relayer.core.storage.setItem(this.storageKey,C)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(C,T){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:C,subscription:T}),this.addSubscription(C,T)}addSubscription(C,T){this.subscriptions.set(C,index_es_ge({},T)),this.topicMap.set(T.topic,C),this.events.emit(iP.created,T)}getSubscription(C){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:C});let T=this.subscriptions.get(C);if(!T){let{message:T}=Et("NO_MATCHING_KEY",`${this.name}: ${C}`);throw Error(T)}return T}deleteSubscription(C,T){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:C,reason:T});let N=this.getSubscription(C);this.subscriptions.delete(C),this.topicMap.delete(N.topic,C),this.events.emit(iP.deleted,index_es_He(index_es_ge({},N),{reason:T}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(iP.sync)}async onRestart(){if(this.cached.length){let C=[...this.cached],T=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let N=0;N<T;N++){let T=C.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(T)}}this.events.emit(iP.resubscribed)}async restore(){try{let C=await this.getRelayerSubscriptions();if(typeof C>"u"||!C.length)return;if(this.subscriptions.size){let{message:C}=Et("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(C),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(C)}this.cached=C,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(C){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(C)}}async batchSubscribe(C){C.length&&(await this.rpcBatchSubscribe(C),this.onBatchSubscribe(await Promise.all(C.map(async C=>index_es_He(index_es_ge({},C),{id:await this.getSubscriptionId(C.topic)})))))}async batchFetchMessages(C){var T;if(!C.length)return;this.logger.trace(`Fetching batch messages for ${C.length} subscriptions`);let N=await this.rpcBatchFetchMessages(C);N&&N.messages&&(await (T=(0,Y.toMiliseconds)(Y.ONE_SECOND),new Promise(C=>setTimeout(C,T))),await this.relayer.handleBatchMessageEvents(N.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}async restartToComplete(C){this.relayer.connected||this.relayer.connecting||(this.cached.push(C),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(C){return zc(C+await this.getClientId())}};var sQ=Object.defineProperty,sJ=Object.getOwnPropertySymbols,sW=Object.prototype.hasOwnProperty,sZ=Object.prototype.propertyIsEnumerable,index_es_Ye=(C,T,N)=>T in C?sQ(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Si=(C,T)=>{for(var N in T||(T={}))sW.call(T,N)&&index_es_Ye(C,N,T[N]);if(sJ)for(var N of sJ(T))sZ.call(T,N)&&index_es_Ye(C,N,T[N]);return C},index_es_y=(C,T,N)=>index_es_Ye(C,"symbol"!=typeof T?T+"":T,N);let index_es_Oi=class index_es_Oi extends d{constructor(C){super(C),index_es_y(this,"protocol","wc"),index_es_y(this,"version",2),index_es_y(this,"core"),index_es_y(this,"logger"),index_es_y(this,"events",new U.EventEmitter),index_es_y(this,"provider"),index_es_y(this,"messages"),index_es_y(this,"subscriber"),index_es_y(this,"publisher"),index_es_y(this,"name","relayer"),index_es_y(this,"transportExplicitlyClosed",!1),index_es_y(this,"initialized",!1),index_es_y(this,"connectionAttemptInProgress",!1),index_es_y(this,"relayUrl"),index_es_y(this,"projectId"),index_es_y(this,"packageName"),index_es_y(this,"bundleId"),index_es_y(this,"hasExperiencedNetworkDisruption",!1),index_es_y(this,"pingTimeout"),index_es_y(this,"heartBeatTimeout",(0,Y.toMiliseconds)(Y.THIRTY_SECONDS+Y.FIVE_SECONDS)),index_es_y(this,"reconnectTimeout"),index_es_y(this,"connectPromise"),index_es_y(this,"reconnectInProgress",!1),index_es_y(this,"requestsInFlight",[]),index_es_y(this,"connectTimeout",(0,Y.toMiliseconds)(15*Y.ONE_SECOND)),index_es_y(this,"request",async C=>{var T,N;this.logger.debug("Publishing Request Payload");let U=C.id||(0,ir.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:U,method:C.method,topic:null==(T=C.params)?void 0:T.topic},"relayer.request - publishing...");let $=`${U}:${(null==(N=C.params)?void 0:N.tag)||""}`;this.requestsInFlight.push($);let Q=await this.provider.request(C);return this.requestsInFlight=this.requestsInFlight.filter(C=>C!==$),Q}catch(C){throw this.logger.debug(`Failed to Publish Request: ${U}`),C}}),index_es_y(this,"resetPingTimeout",()=>{Ye()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var C,T,N,U;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(U=null==(N=null==(T=null==(C=this.provider)?void 0:C.connection)?void 0:T.socket)?void 0:N.terminate)||U.call(N)}catch(C){this.logger.warn(C,C?.message)}},this.heartBeatTimeout))}),index_es_y(this,"onPayloadHandler",C=>{this.onProviderPayload(C),this.resetPingTimeout()}),index_es_y(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(i_.connect)}),index_es_y(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),index_es_y(this,"onProviderErrorHandler",C=>{this.logger.fatal(`Fatal socket error: ${C.message}`),this.events.emit(i_.error,C),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),index_es_y(this,"registerProviderListeners",()=>{this.provider.on(iv.payload,this.onPayloadHandler),this.provider.on(iv.connect,this.onConnectHandler),this.provider.on(iv.disconnect,this.onDisconnectHandler),this.provider.on(iv.error,this.onProviderErrorHandler)}),this.core=C.core,this.logger="u">typeof C.logger&&"string"!=typeof C.logger?(0,r8.Ep)(C.logger,this.name):(0,r8.gw)((0,r8.jI)({level:C.logger||"error"})),this.messages=new index_es_Ei(this.logger,C.core),this.subscriber=new index_es_Ci(this,this.logger),this.publisher=new index_es_Gn(this,this.logger),this.relayUrl=C?.relayUrl||iw,this.projectId=C.projectId,Bt()&&"u">typeof N.g&&"u">typeof(null==N.g?void 0:N.g.Platform)&&(null==N.g?void 0:N.g.Platform.OS)==="android"?this.packageName=qs():Bt()&&"u">typeof N.g&&"u">typeof(null==N.g?void 0:N.g.Platform)&&(null==N.g?void 0:N.g.Platform.OS)==="ios"&&(this.bundleId=qs()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(C=>this.logger.warn(C,C?.message))}get context(){return(0,r8.Fd)(this.logger)}get connected(){var C,T,N;return(null==(N=null==(T=null==(C=this.provider)?void 0:C.connection)?void 0:T.socket)?void 0:N.readyState)===1}get connecting(){var C,T,N;return(null==(N=null==(T=null==(C=this.provider)?void 0:C.connection)?void 0:T.socket)?void 0:N.readyState)===0||void 0!==this.connectPromise}async publish(C,T,N){this.isInitialized(),await this.publisher.publish(C,T,N),await this.recordMessageEvent({topic:C,message:T,publishedAt:Date.now(),transportType:ix.relay},iA.outbound)}async subscribe(C,T){var N,U,$;this.isInitialized(),null!=T&&T.transportType&&T?.transportType!=="relay"||await this.toEstablishConnection();let Q=typeof(null==(N=T?.internal)?void 0:N.throwOnFailedPublish)>"u"||(null==(U=T?.internal)?void 0:U.throwOnFailedPublish),Y=(null==($=this.subscriber.topicMap.get(C))?void 0:$[0])||"",X,h=T=>{T.topic===C&&(this.subscriber.off(iP.created,h),X())};return await Promise.all([new Promise(C=>{X=C,this.subscriber.on(iP.created,h)}),new Promise(async(N,U)=>{Y=await this.subscriber.subscribe(C,index_es_Si({internal:{throwOnFailedPublish:Q}},T)).catch(C=>{Q&&U(C)})||Y,N()})]),Y}async unsubscribe(C,T){this.isInitialized(),await this.subscriber.unsubscribe(C,T)}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}off(C,T){this.events.off(C,T)}removeListener(C,T){this.events.removeListener(C,T)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ni(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(C){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(T,N)=>{await this.connect(C).then(T).catch(N).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(C){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=C||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ja())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(C){if(C?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let T=C.sort((C,T)=>C.publishedAt-T.publishedAt);for(let C of(this.logger.debug(`Batch of ${T.length} message events sorted`),T))try{await this.onMessageEvent(C)}catch(C){this.logger.warn(C,"Error while processing batch message event: "+C?.message)}this.logger.trace(`Batch of ${T.length} message events processed`)}async onLinkMessageEvent(C,T){let{topic:N}=C;if(!T.sessionExists){let C=ii(Y.FIVE_MINUTES);await this.core.pairing.pairings.set(N,{topic:N,expiry:C,relay:{protocol:"irn"},active:!1})}this.events.emit(i_.message,C),await this.recordMessageEvent(C,iA.inbound)}async connect(C){await this.confirmOnlineStateOrThrow(),C&&C!==this.relayUrl&&(this.relayUrl=C,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let T=1;for(;T<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${T}...`),await this.createProvider(),await new Promise(async(C,T)=>{let n=()=>{T(Error("Connection interrupted while trying to connect"))};this.provider.once(iv.disconnect,n),await ni(new Promise((C,T)=>{this.provider.connect().then(C).catch(T)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(C=>{T(C)}).finally(()=>{this.provider.off(iv.disconnect,n),clearTimeout(this.reconnectTimeout)}),await new Promise(async(C,N)=>{let c=()=>{T(Error("Connection interrupted while trying to subscribe"))};this.provider.once(iv.disconnect,c),await this.subscriber.start().then(C).catch(N).finally(()=>{this.provider.off(iv.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,C()})}catch(C){await this.subscriber.stop(),this.logger.warn({},C.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${T}`);break}await new Promise(C=>setTimeout(C,(0,Y.toMiliseconds)(1*T))),T++}}startPingTimeout(){var C,T,N,U,$;if(Ye())try{null!=(T=null==(C=this.provider)?void 0:C.connection)&&T.socket&&(null==($=null==(U=null==(N=this.provider)?void 0:N.connection)?void 0:U.socket)||$.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(C){this.logger.warn(C,C?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let C=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ie.r(new ia.Z(function({protocol:C,version:T,relayUrl:N,sdkVersion:U,auth:$,projectId:Q,useOnCloseEvent:Y,bundleId:X,packageName:ee}){let es=N.split("?"),el=cr(C,T,U),ec=function(C,T){let N=new URLSearchParams(C);for(let C of Object.keys(T).sort())if(T.hasOwnProperty(C)){let U=T[C];void 0!==U&&N.set(C,U)}return N.toString()}(es[1]||"",{auth:$,ua:el,projectId:Q,useOnCloseEvent:Y||void 0,packageName:ee||void 0,bundleId:X||void 0});return es[0]+"?"+ec}({sdkVersion:iE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:C,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(C,T){let{topic:N,message:U}=C;await this.messages.set(N,U,T)}async shouldIgnoreMessageEvent(C){let{topic:T,message:N}=C;if(!N||0===N.length)return this.logger.warn(`Ignoring invalid/empty message: ${N}`),!0;if(!await this.subscriber.isKnownTopic(T))return this.logger.warn(`Ignoring message for unknown topic ${T}`),!0;let U=this.messages.has(T,N);return U&&this.logger.warn(`Ignoring duplicate message: ${N}`),U}async onProviderPayload(C){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:C}),(0,ir.isJsonRpcRequest)(C)){if(!C.method.endsWith("_subscription"))return;let T=C.params,{topic:N,message:U,publishedAt:$,attestation:Q}=T.data,Y={topic:N,message:U,publishedAt:$,transportType:ix.relay,attestation:Q};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(index_es_Si({type:"event",event:T.id},Y)),this.events.emit(T.id,Y),await this.acknowledgePayload(C),await this.onMessageEvent(Y)}else(0,ir.isJsonRpcResponse)(C)&&this.events.emit(i_.message_ack,C)}async onMessageEvent(C){await this.shouldIgnoreMessageEvent(C)||(await this.recordMessageEvent(C,iA.inbound),this.events.emit(i_.message,C))}async acknowledgePayload(C){let T=(0,ir.formatJsonRpcResult)(C.id,!0);await this.provider.connection.send(T)}unregisterProviderListeners(){this.provider.off(iv.payload,this.onPayloadHandler),this.provider.off(iv.connect,this.onConnectHandler),this.provider.off(iv.disconnect,this.onDisconnectHandler),this.provider.off(iv.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let C=await ja();(function(C){switch(Pt()){case e5.browser:!Bt()&&zt()&&(window.addEventListener("online",()=>C(!0)),window.addEventListener("offline",()=>C(!1)));break;case e5.reactNative:Bt()&&"u">typeof N.g&&null!=N.g&&N.g.NetInfo&&N.g?.NetInfo.addEventListener(T=>C(T?.isConnected));case e5.node:}})(async T=>{C!==T&&(C=T,T?await this.transportOpen().catch(C=>this.logger.error(C,C?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(r2.Lx.pulse,async()=>{var C;if(!this.transportExplicitlyClosed&&!this.connected&&(!(zt()&&(0,X.getDocument)())||(null==(C=(0,X.getDocument)())?void 0:C.visibilityState)==="visible"))try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(C){this.logger.warn(C,C?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(i_.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(C=>this.logger.error(C,C?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,Y.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function index_es_Ri(C){return Object.getOwnPropertySymbols(C).filter(T=>Object.prototype.propertyIsEnumerable.call(C,T))}function index_es_Ai(C){return null==C?void 0===C?"[object Undefined]":"[object Null]":Object.prototype.toString.call(C)}let sY="[object Arguments]",sX="[object Object]";function index_es_Ro(){}function index_es_Ni(C){if(!C||"object"!=typeof C)return!1;let T=Object.getPrototypeOf(C);return(null===T||T===Object.prototype||null===Object.getPrototypeOf(T))&&"[object Object]"===Object.prototype.toString.call(C)}var s0=Object.defineProperty,s1=Object.getOwnPropertySymbols,s2=Object.prototype.hasOwnProperty,s3=Object.prototype.propertyIsEnumerable,index_es_Xe=(C,T,N)=>T in C?s0(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_zi=(C,T)=>{for(var N in T||(T={}))s2.call(T,N)&&index_es_Xe(C,N,T[N]);if(s1)for(var N of s1(T))s3.call(T,N)&&index_es_Xe(C,N,T[N]);return C},z=(C,T,N)=>index_es_Xe(C,"symbol"!=typeof T?T+"":T,N);let index_es_Li=class index_es_Li extends f{constructor(C,T,N,U=iu,$){super(C,T,N,U),this.core=C,this.logger=T,this.name=N,z(this,"map",new Map),z(this,"version","0.3"),z(this,"cached",[]),z(this,"initialized",!1),z(this,"getKey"),z(this,"storagePrefix",iu),z(this,"recentlyDeleted",[]),z(this,"recentlyDeletedLimit",200),z(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(C=>{var T;this.getKey&&null!==C&&!kt(C)?this.map.set(this.getKey(C),C):(null==(T=C?.proposer)?void 0:T.publicKey)?this.map.set(C.id,C):C?.topic&&this.map.set(C.topic,C)}),this.cached=[],this.initialized=!0)}),z(this,"set",async(C,T)=>{this.isInitialized(),this.map.has(C)?await this.update(C,T):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:C,value:T}),this.map.set(C,T),await this.persist())}),z(this,"get",C=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:C}),this.getData(C))),z(this,"getAll",C=>(this.isInitialized(),C?this.values.filter(T=>Object.keys(C).every(N=>(function index_es_pe(C,T,N,U,$,Q,Y){let X=Y(C,T,N,U,$,Q);if(void 0!==X)return X;if(typeof C==typeof T)switch(typeof C){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return C===T;case"number":return C===T||Object.is(C,T)}return function index_es_ye(C,T,N,U){if(Object.is(C,T))return!0;let $=index_es_Ai(C),Q=index_es_Ai(T);if($===sY&&($=sX),Q===sY&&(Q=sX),$!==Q)return!1;switch($){case"[object String]":return C.toString()===T.toString();case"[object Number]":{let N=C.valueOf(),U=T.valueOf();return N===U||Number.isNaN(N)&&Number.isNaN(U)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(C.valueOf(),T.valueOf());case"[object RegExp]":return C.source===T.source&&C.flags===T.flags;case"[object Function]":return C===T}N=N??new Map;let Y=N.get(C),X=N.get(T);if(null!=Y&&null!=X)return Y===T;N.set(C,T),N.set(T,C);try{switch($){case"[object Map]":if(C.size!==T.size)return!1;for(let[$,Q]of C.entries())if(!T.has($)||!index_es_pe(Q,T.get($),$,C,T,N,U))return!1;return!0;case"[object Set]":{if(C.size!==T.size)return!1;let $=Array.from(C.values()),Q=Array.from(T.values());for(let Y=0;Y<$.length;Y++){let X=$[Y],ee=Q.findIndex($=>index_es_pe(X,$,void 0,C,T,N,U));if(-1===ee)return!1;Q.splice(ee,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof il&&il.isBuffer(C)!==il.isBuffer(T)||C.length!==T.length)return!1;for(let $=0;$<C.length;$++)if(!index_es_pe(C[$],T[$],$,C,T,N,U))return!1;return!0;case"[object ArrayBuffer]":return C.byteLength===T.byteLength&&index_es_ye(new Uint8Array(C),new Uint8Array(T),N,U);case"[object DataView]":return C.byteLength===T.byteLength&&C.byteOffset===T.byteOffset&&index_es_ye(new Uint8Array(C),new Uint8Array(T),N,U);case"[object Error]":return C.name===T.name&&C.message===T.message;case sX:{if(!(index_es_ye(C.constructor,T.constructor,N,U)||index_es_Ni(C)&&index_es_Ni(T)))return!1;let $=[...Object.keys(C),...index_es_Ri(C)],Q=[...Object.keys(T),...index_es_Ri(T)];if($.length!==Q.length)return!1;for(let Q=0;Q<$.length;Q++){let Y=$[Q],X=C[Y];if(!Object.hasOwn(T,Y))return!1;let ee=T[Y];if(!index_es_pe(X,ee,Y,C,T,N,U))return!1}return!0}default:return!1}}finally{N.delete(C),N.delete(T)}}(C,T,Q,Y)})(T[N],C[N],void 0,void 0,void 0,void 0,index_es_Ro))):this.values)),z(this,"update",async(C,T)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:C,update:T});let N=index_es_zi(index_es_zi({},this.getData(C)),T);this.map.set(C,N),await this.persist()}),z(this,"delete",async(C,T)=>{this.isInitialized(),this.map.has(C)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:C,reason:T}),this.map.delete(C),this.addToRecentlyDeleted(C),await this.persist())}),this.logger=(0,r8.Ep)(T,this.name),this.storagePrefix=U,this.getKey=$}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(C){this.recentlyDeleted.push(C),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(C){await this.core.storage.setItem(this.storageKey,C)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(C){let T=this.map.get(C);if(!T){if(this.recentlyDeleted.includes(C)){let{message:T}=Et("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${C}`);throw this.logger.error(T),Error(T)}let{message:T}=Et("NO_MATCHING_KEY",`${this.name}: ${C}`);throw this.logger.error(T),Error(T)}return T}async persist(){await this.setDataStore(this.values)}async restore(){try{let C=await this.getDataStore();if(typeof C>"u"||!C.length)return;if(this.map.size){let{message:C}=Et("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(C),Error(C)}this.cached=C,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(C){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(C)}}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var s8=Object.defineProperty,index_es_ko=(C,T,N)=>T in C?s8(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_p=(C,T,N)=>index_es_ko(C,"symbol"!=typeof T?T+"":T,N);let index_es_ki=class index_es_ki{constructor(C,T){this.core=C,this.logger=T,index_es_p(this,"name","pairing"),index_es_p(this,"version","0.3"),index_es_p(this,"events",new($())),index_es_p(this,"pairings"),index_es_p(this,"initialized",!1),index_es_p(this,"storagePrefix",iu),index_es_p(this,"ignoredPayloadTypes",[1]),index_es_p(this,"registeredMethods",[]),index_es_p(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),index_es_p(this,"register",({methods:C})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...C])]}),index_es_p(this,"create",async C=>{this.isInitialized();let T=qc(),N=await this.core.crypto.setSymKey(T),U=ii(Y.FIVE_MINUTES),$={protocol:"irn"},Q={topic:N,expiry:U,relay:$,active:!1,methods:C?.methods},X=oa({protocol:this.core.protocol,version:this.core.version,topic:N,symKey:T,relay:$,expiryTimestamp:U,methods:C?.methods});return this.events.emit(iD.create,Q),this.core.expirer.set(N,U),await this.pairings.set(N,Q),await this.core.relayer.subscribe(N,{transportType:C?.transportType}),{topic:N,uri:X}}),index_es_p(this,"pair",async C=>{let T;this.isInitialized();let N=this.core.eventClient.createEvent({properties:{topic:C?.uri,trace:[iN.pairing_started]}});this.isValidPair(C,N);let{topic:U,symKey:$,relay:Q,expiryTimestamp:X,methods:ee}=ra(C.uri);if(N.props.properties.topic=U,N.addTrace(iN.pairing_uri_validation_success),N.addTrace(iN.pairing_uri_not_expired),this.pairings.keys.includes(U)){if(T=this.pairings.get(U),N.addTrace(iN.existing_pairing),T.active)throw N.setError(ik.active_pairing_already_exists),Error(`Pairing already exists: ${U}. Please try again with a new connection URI.`);N.addTrace(iN.pairing_not_expired)}let es=X||ii(Y.FIVE_MINUTES),el={topic:U,relay:Q,expiry:es,active:!1,methods:ee};this.core.expirer.set(U,es),await this.pairings.set(U,el),N.addTrace(iN.store_new_pairing),C.activatePairing&&await this.activate({topic:U}),this.events.emit(iD.create,el),N.addTrace(iN.emit_inactive_pairing),this.core.crypto.keychain.has(U)||await this.core.crypto.setSymKey($,U),N.addTrace(iN.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{N.setError(ik.no_internet_connection)}try{await this.core.relayer.subscribe(U,{relay:Q})}catch(C){throw N.setError(ik.subscribe_pairing_topic_failure),C}return N.addTrace(iN.subscribe_pairing_topic_success),el}),index_es_p(this,"activate",async({topic:C})=>{this.isInitialized();let T=ii(Y.FIVE_MINUTES);this.core.expirer.set(C,T),await this.pairings.update(C,{active:!0,expiry:T})}),index_es_p(this,"ping",async C=>{this.isInitialized(),await this.isValidPing(C),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:T}=C;if(this.pairings.keys.includes(T)){let C=await this.sendRequest(T,"wc_pairingPing",{}),{done:N,resolve:U,reject:$}=ei();this.events.once(ci("pairing_ping",C),({error:C})=>{C?$(C):U()}),await N()}}),index_es_p(this,"updateExpiry",async({topic:C,expiry:T})=>{this.isInitialized(),await this.pairings.update(C,{expiry:T})}),index_es_p(this,"updateMetadata",async({topic:C,metadata:T})=>{this.isInitialized(),await this.pairings.update(C,{peerMetadata:T})}),index_es_p(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),index_es_p(this,"disconnect",async C=>{this.isInitialized(),await this.isValidDisconnect(C);let{topic:T}=C;this.pairings.keys.includes(T)&&(await this.sendRequest(T,"wc_pairingDelete",Kt("USER_DISCONNECTED")),await this.deletePairing(T))}),index_es_p(this,"formatUriFromPairing",C=>{this.isInitialized();let{topic:T,relay:N,expiry:U,methods:$}=C,Q=this.core.crypto.keychain.get(T);return oa({protocol:this.core.protocol,version:this.core.version,topic:T,symKey:Q,relay:N,expiryTimestamp:U,methods:$})}),index_es_p(this,"sendRequest",async(C,T,N)=>{let U=(0,ir.formatJsonRpcRequest)(T,N),$=await this.core.crypto.encode(C,U),Q=iS[T].req;return this.core.history.set(C,U),this.core.relayer.publish(C,$,Q),U.id}),index_es_p(this,"sendResult",async(C,T,N)=>{let U=(0,ir.formatJsonRpcResult)(C,N),$=await this.core.crypto.encode(T,U),Q=(await this.core.history.get(T,C)).request.method,Y=iS[Q].res;await this.core.relayer.publish(T,$,Y),await this.core.history.resolve(U)}),index_es_p(this,"sendError",async(C,T,N)=>{let U=(0,ir.formatJsonRpcError)(C,N),$=await this.core.crypto.encode(T,U),Q=(await this.core.history.get(T,C)).request.method,Y=iS[Q]?iS[Q].res:iS.unregistered_method.res;await this.core.relayer.publish(T,$,Y),await this.core.history.resolve(U)}),index_es_p(this,"deletePairing",async(C,T)=>{await this.core.relayer.unsubscribe(C),await Promise.all([this.pairings.delete(C,Kt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(C),T?Promise.resolve():this.core.expirer.del(C)])}),index_es_p(this,"cleanup",async()=>{let C=this.pairings.getAll().filter(C=>fi(C.expiry));await Promise.all(C.map(C=>this.deletePairing(C.topic)))}),index_es_p(this,"onRelayEventRequest",async C=>{let{topic:T,payload:N}=C;switch(N.method){case"wc_pairingPing":return await this.onPairingPingRequest(T,N);case"wc_pairingDelete":return await this.onPairingDeleteRequest(T,N);default:return await this.onUnknownRpcMethodRequest(T,N)}}),index_es_p(this,"onRelayEventResponse",async C=>{let{topic:T,payload:N}=C,U=(await this.core.history.get(T,N.id)).request.method;return"wc_pairingPing"===U?this.onPairingPingResponse(T,N):this.onUnknownRpcMethodResponse(U)}),index_es_p(this,"onPairingPingRequest",async(C,T)=>{let{id:N}=T;try{this.isValidPing({topic:C}),await this.sendResult(N,C,!0),this.events.emit(iD.ping,{id:N,topic:C})}catch(T){await this.sendError(N,C,T),this.logger.error(T)}}),index_es_p(this,"onPairingPingResponse",(C,T)=>{let{id:N}=T;setTimeout(()=>{(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("pairing_ping",N),{}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("pairing_ping",N),{error:T.error})},500)}),index_es_p(this,"onPairingDeleteRequest",async(C,T)=>{let{id:N}=T;try{this.isValidDisconnect({topic:C}),await this.deletePairing(C),this.events.emit(iD.delete,{id:N,topic:C})}catch(T){await this.sendError(N,C,T),this.logger.error(T)}}),index_es_p(this,"onUnknownRpcMethodRequest",async(C,T)=>{let{id:N,method:U}=T;try{if(this.registeredMethods.includes(U))return;let T=Kt("WC_METHOD_UNSUPPORTED",U);await this.sendError(N,C,T),this.logger.error(T)}catch(T){await this.sendError(N,C,T),this.logger.error(T)}}),index_es_p(this,"onUnknownRpcMethodResponse",C=>{this.registeredMethods.includes(C)||this.logger.error(Kt("WC_METHOD_UNSUPPORTED",C))}),index_es_p(this,"isValidPair",(C,T)=>{var N;if(!Aa(C)){let{message:N}=Et("MISSING_OR_INVALID",`pair() params: ${C}`);throw T.setError(ik.malformed_pairing_uri),Error(N)}if(!function(C){function e(C){try{return"u">typeof new URL(C)}catch{return!1}}try{if(it(C,!1)){if(e(C))return!0;let T=Qe(C);return e(T)}}catch{}return!1}(C.uri)){let{message:N}=Et("MISSING_OR_INVALID",`pair() uri: ${C.uri}`);throw T.setError(ik.malformed_pairing_uri),Error(N)}let U=ra(C?.uri);if(!(null!=(N=U?.relay)&&N.protocol)){let{message:C}=Et("MISSING_OR_INVALID","pair() uri#relay-protocol");throw T.setError(ik.malformed_pairing_uri),Error(C)}if(!(null!=U&&U.symKey)){let{message:C}=Et("MISSING_OR_INVALID","pair() uri#symKey");throw T.setError(ik.malformed_pairing_uri),Error(C)}if(null!=U&&U.expiryTimestamp&&(0,Y.toMiliseconds)(U?.expiryTimestamp)<Date.now()){T.setError(ik.pairing_expired);let{message:C}=Et("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(C)}}),index_es_p(this,"isValidPing",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`ping() params: ${C}`);throw Error(T)}let{topic:T}=C;await this.isValidPairingTopic(T)}),index_es_p(this,"isValidDisconnect",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`disconnect() params: ${C}`);throw Error(T)}let{topic:T}=C;await this.isValidPairingTopic(T)}),index_es_p(this,"isValidPairingTopic",async C=>{if(!it(C,!1)){let{message:T}=Et("MISSING_OR_INVALID",`pairing topic should be a string: ${C}`);throw Error(T)}if(!this.pairings.keys.includes(C)){let{message:T}=Et("NO_MATCHING_KEY",`pairing topic doesn't exist: ${C}`);throw Error(T)}if(fi(this.pairings.get(C).expiry)){await this.deletePairing(C);let{message:T}=Et("EXPIRED",`pairing topic: ${C}`);throw Error(T)}}),this.core=C,this.logger=(0,r8.Ep)(T,this.name),this.pairings=new index_es_Li(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,r8.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}registerRelayerEvents(){this.core.relayer.on(i_.message,async C=>{let{topic:T,message:N,transportType:U}=C;if(this.pairings.keys.includes(T)&&U!==ix.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(N)))try{let C=await this.core.crypto.decode(T,N);(0,ir.isJsonRpcRequest)(C)?(this.core.history.set(T,C),await this.onRelayEventRequest({topic:T,payload:C})):(0,ir.isJsonRpcResponse)(C)&&(await this.core.history.resolve(C),await this.onRelayEventResponse({topic:T,payload:C}),this.core.history.delete(T,C.id)),await this.core.relayer.messages.ack(T,N)}catch(C){this.logger.error(C)}})}registerExpirerEvents(){this.core.expirer.on(iC.expired,async C=>{let{topic:T}=si(C.target);T&&this.pairings.keys.includes(T)&&(await this.deletePairing(T,!0),this.events.emit(iD.expire,{topic:T}))})}};var s4=Object.defineProperty,index_es_Uo=(C,T,N)=>T in C?s4(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_O=(C,T,N)=>index_es_Uo(C,"symbol"!=typeof T?T+"":T,N);let index_es_ji=class index_es_ji extends I{constructor(C,T){super(C,T),this.core=C,this.logger=T,index_es_O(this,"records",new Map),index_es_O(this,"events",new U.EventEmitter),index_es_O(this,"name","history"),index_es_O(this,"version","0.3"),index_es_O(this,"cached",[]),index_es_O(this,"initialized",!1),index_es_O(this,"storagePrefix",iu),index_es_O(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(C=>this.records.set(C.id,C)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),index_es_O(this,"set",(C,T,N)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:C,request:T,chainId:N}),this.records.has(T.id))return;let U={id:T.id,topic:C,request:{method:T.method,params:T.params||null},chainId:N,expiry:ii(Y.THIRTY_DAYS)};this.records.set(U.id,U),this.persist(),this.events.emit(iB.created,U)}),index_es_O(this,"resolve",async C=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:C}),!this.records.has(C.id))return;let T=await this.getRecord(C.id);typeof T.response>"u"&&(T.response=(0,ir.isJsonRpcError)(C)?{error:C.error}:{result:C.result},this.records.set(T.id,T),this.persist(),this.events.emit(iB.updated,T))}),index_es_O(this,"get",async(C,T)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:C,id:T}),await this.getRecord(T))),index_es_O(this,"delete",(C,T)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:T}),this.values.forEach(N=>{N.topic!==C||"u">typeof T&&N.id!==T||(this.records.delete(N.id),this.events.emit(iB.deleted,N))}),this.persist()}),index_es_O(this,"exists",async(C,T)=>(this.isInitialized(),!!this.records.has(T)&&(await this.getRecord(T)).topic===C)),index_es_O(this,"on",(C,T)=>{this.events.on(C,T)}),index_es_O(this,"once",(C,T)=>{this.events.once(C,T)}),index_es_O(this,"off",(C,T)=>{this.events.off(C,T)}),index_es_O(this,"removeListener",(C,T)=>{this.events.removeListener(C,T)}),this.logger=(0,r8.Ep)(T,this.name)}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let C=[];return this.values.forEach(T=>{if("u">typeof T.response)return;let N={topic:T.topic,request:(0,ir.formatJsonRpcRequest)(T.request.method,T.request.params,T.id),chainId:T.chainId};return C.push(N)}),C}async setJsonRpcRecords(C){await this.core.storage.setItem(this.storageKey,C)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(C){this.isInitialized();let T=this.records.get(C);if(!T){let{message:T}=Et("NO_MATCHING_KEY",`${this.name}: ${C}`);throw Error(T)}return T}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(iB.sync)}async restore(){try{let C=await this.getJsonRpcRecords();if(typeof C>"u"||!C.length)return;if(this.records.size){let{message:C}=Et("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(C),Error(C)}this.cached=C,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(C){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(C)}}registerEventListeners(){this.events.on(iB.created,C=>{let T=iB.created;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,record:C})}),this.events.on(iB.updated,C=>{let T=iB.updated;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,record:C})}),this.events.on(iB.deleted,C=>{let T=iB.deleted;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,record:C})}),this.core.heartbeat.on(r2.Lx.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let C=!1;this.records.forEach(T=>{(0,Y.toMiliseconds)(T.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${T.id}`),this.records.delete(T.id),this.events.emit(iB.deleted,T,!1),C=!0)}),C&&this.persist()}catch(C){this.logger.warn(C)}}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var s6=Object.defineProperty,index_es_Mo=(C,T,N)=>T in C?s6(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,A=(C,T,N)=>index_es_Mo(C,"symbol"!=typeof T?T+"":T,N);let index_es_Ui=class index_es_Ui extends S{constructor(C,T){super(C,T),this.core=C,this.logger=T,A(this,"expirations",new Map),A(this,"events",new U.EventEmitter),A(this,"name","expirer"),A(this,"version","0.3"),A(this,"cached",[]),A(this,"initialized",!1),A(this,"storagePrefix",iu),A(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(C=>this.expirations.set(C.target,C)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),A(this,"has",C=>{try{let T=this.formatTarget(C);return"u">typeof this.getExpiration(T)}catch{return!1}}),A(this,"set",(C,T)=>{this.isInitialized();let N=this.formatTarget(C),U={target:N,expiry:T};this.expirations.set(N,U),this.checkExpiry(N,U),this.events.emit(iC.created,{target:N,expiration:U})}),A(this,"get",C=>{this.isInitialized();let T=this.formatTarget(C);return this.getExpiration(T)}),A(this,"del",C=>{if(this.isInitialized(),this.has(C)){let T=this.formatTarget(C),N=this.getExpiration(T);this.expirations.delete(T),this.events.emit(iC.deleted,{target:T,expiration:N})}}),A(this,"on",(C,T)=>{this.events.on(C,T)}),A(this,"once",(C,T)=>{this.events.once(C,T)}),A(this,"off",(C,T)=>{this.events.off(C,T)}),A(this,"removeListener",(C,T)=>{this.events.removeListener(C,T)}),this.logger=(0,r8.Ep)(T,this.name)}get context(){return(0,r8.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(C){if("string"==typeof C)return Xe("topic",C);if("number"==typeof C)return Xe("id",C);let{message:T}=Et("UNKNOWN_TYPE",`Target type: ${typeof C}`);throw Error(T)}async setExpirations(C){await this.core.storage.setItem(this.storageKey,C)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(iC.sync)}async restore(){try{let C=await this.getExpirations();if(typeof C>"u"||!C.length)return;if(this.expirations.size){let{message:C}=Et("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(C),Error(C)}this.cached=C,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(C){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(C)}}getExpiration(C){let T=this.expirations.get(C);if(!T){let{message:T}=Et("NO_MATCHING_KEY",`${this.name}: ${C}`);throw this.logger.warn(T),Error(T)}return T}checkExpiry(C,T){let{expiry:N}=T;(0,Y.toMiliseconds)(N)-Date.now()<=0&&this.expire(C,T)}expire(C,T){this.expirations.delete(C),this.events.emit(iC.expired,{target:C,expiration:T})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((C,T)=>this.checkExpiry(T,C))}registerEventListeners(){this.core.heartbeat.on(r2.Lx.pulse,()=>this.checkExpirations()),this.events.on(iC.created,C=>{let T=iC.created;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,data:C}),this.persist()}),this.events.on(iC.expired,C=>{let T=iC.expired;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,data:C}),this.persist()}),this.events.on(iC.deleted,C=>{let T=iC.deleted;this.logger.info(`Emitting ${T}`),this.logger.debug({type:"event",event:T,data:C}),this.persist()})}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}};var s5=Object.defineProperty,index_es_Bo=(C,T,N)=>T in C?s5(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_w=(C,T,N)=>index_es_Bo(C,"symbol"!=typeof T?T+"":T,N);let index_es_Fi=class index_es_Fi extends index_es_M{constructor(C,T,N){super(C,T,N),this.core=C,this.logger=T,this.store=N,index_es_w(this,"name","verify-api"),index_es_w(this,"abortController"),index_es_w(this,"isDevEnv"),index_es_w(this,"verifyUrlV3",iR),index_es_w(this,"storagePrefix",iu),index_es_w(this,"version",2),index_es_w(this,"publicKey"),index_es_w(this,"fetchPromise"),index_es_w(this,"init",async()=>{var C;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,Y.toMiliseconds)(null==(C=this.publicKey)?void 0:C.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),index_es_w(this,"register",async C=>{if(!zt()||this.isDevEnv)return;let T=window.location.origin,{id:N,decryptedId:U}=C,$=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${T}&id=${N}&decryptedId=${U}`;try{let C=(0,X.getDocument)(),T=this.startAbortTimer(5*Y.ONE_SECOND),U=await new Promise((U,Q)=>{let u=()=>{window.removeEventListener("message",x),C.body.removeChild(Y),Q("attestation aborted")};this.abortController.signal.addEventListener("abort",u);let Y=C.createElement("iframe");Y.src=$,Y.style.display="none",Y.addEventListener("error",u,{signal:this.abortController.signal});let x=$=>{if($.data&&"string"==typeof $.data)try{let Q=JSON.parse($.data);if("verify_attestation"===Q.type){if((0,eG.xp)(Q.attestation).payload.id!==N)return;clearInterval(T),C.body.removeChild(Y),this.abortController.signal.removeEventListener("abort",u),window.removeEventListener("message",x),U(null===Q.attestation?"":Q.attestation)}}catch(C){this.logger.warn(C)}};C.body.appendChild(Y),window.addEventListener("message",x,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",U),U}catch(C){this.logger.warn(C)}return""}),index_es_w(this,"resolve",async C=>{if(this.isDevEnv)return"";let{attestationId:T,hash:N,encryptedId:U}=C;if(""===T){this.logger.debug("resolve: attestationId is empty, skipping");return}if(T){if((0,eG.xp)(T).payload.id!==U)return;let C=await this.isValidJwtAttestation(T);if(C){if(!C.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return C}}if(!N)return;let $=this.getVerifyUrl(C?.verifyUrl);return this.fetchAttestation(N,$)}),index_es_w(this,"fetchAttestation",async(C,T)=>{this.logger.debug(`resolving attestation: ${C} from url: ${T}`);let N=this.startAbortTimer(5*Y.ONE_SECOND),U=await fetch(`${T}/attestation/${C}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(N),200===U.status?await U.json():void 0}),index_es_w(this,"getVerifyUrl",C=>{let T=C||iO;return iT.includes(T)||(this.logger.info(`verify url: ${T}, not included in trusted list, assigning default: ${iO}`),T=iO),T}),index_es_w(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let C=this.startAbortTimer(Y.FIVE_SECONDS),T=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(C),await T.json()}catch(C){this.logger.warn(C)}}),index_es_w(this,"persistPublicKey",async C=>{this.logger.debug("persisting public key to local storage",C),await this.store.setItem(this.storeKey,C),this.publicKey=C}),index_es_w(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),index_es_w(this,"isValidJwtAttestation",async C=>{let T=await this.getPublicKey();try{if(T)return this.validateAttestation(C,T)}catch(C){this.logger.error(C),this.logger.warn("error validating attestation")}let N=await this.fetchAndPersistPublicKey();try{if(N)return this.validateAttestation(C,N)}catch(C){this.logger.error(C),this.logger.warn("error validating attestation")}}),index_es_w(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),index_es_w(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async C=>{let T=await this.fetchPublicKey();T&&(await this.persistPublicKey(T),C(T))});let C=await this.fetchPromise;return this.fetchPromise=void 0,C}),index_es_w(this,"validateAttestation",(C,T)=>{let N=function(C,T){let[N,U,$]=C.split("."),Q=e0.from(Po($),"base64");if(64!==Q.length)throw Error("Invalid signature length");let Y=Q.slice(0,32),X=Q.slice(32,64),ee=`${N}.${U}`,es=tU(ee),el=function(C){let T=e0.from(C.x,"base64"),N=e0.from(C.y,"base64");return concat([new Uint8Array([4]),T,N])}(T);if(!rz.verify(concat([Y,X]),es,el))throw Error("Invalid signature");return(0,eG.xp)(C).payload}(C,T.publicKey),U={hasExpired:(0,Y.toMiliseconds)(N.exp)<Date.now(),payload:N};if(U.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:U.payload.origin,isScam:U.payload.isScam,isVerified:U.payload.isVerified}}),this.logger=(0,r8.Ep)(T,this.name),this.abortController=new AbortController,this.isDevEnv=hi(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,r8.Fd)(this.logger)}startAbortTimer(C){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,Y.toMiliseconds)(C))}};var s9=Object.defineProperty,index_es_qo=(C,T,N)=>T in C?s9(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Mi=(C,T,N)=>index_es_qo(C,"symbol"!=typeof T?T+"":T,N);let index_es_Ki=class index_es_Ki extends O{constructor(C,T){super(C,T),this.projectId=C,this.logger=T,index_es_Mi(this,"context","echo"),index_es_Mi(this,"registerDeviceToken",async C=>{let{clientId:T,token:N,notificationType:U,enableEncrypted:$=!1}=C,Q=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:T,type:U,token:N,always_raw:$})})}),this.logger=(0,r8.Ep)(T,this.context)}};var s7=Object.defineProperty,nr=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,index_es_Ze=(C,T,N)=>T in C?s7(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_be=(C,T)=>{for(var N in T||(T={}))ns.call(T,N)&&index_es_Ze(C,N,T[N]);if(nr)for(var N of nr(T))nl.call(T,N)&&index_es_Ze(C,N,T[N]);return C},index_es_E=(C,T,N)=>index_es_Ze(C,"symbol"!=typeof T?T+"":T,N);let index_es_Vi=class index_es_Vi extends R{constructor(C,T,N=!0){super(C,T,N),this.core=C,this.logger=T,index_es_E(this,"context","event-client"),index_es_E(this,"storagePrefix",iu),index_es_E(this,"storageVersion",.1),index_es_E(this,"events",new Map),index_es_E(this,"shouldPersist",!1),index_es_E(this,"init",async()=>{if(!hi())try{let C={eventId:di(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:cr(this.core.relayer.protocol,this.core.relayer.version,iE)}}};await this.sendEvent([C])}catch(C){this.logger.warn(C)}}),index_es_E(this,"createEvent",C=>{let{event:T="ERROR",type:N="",properties:{topic:U,trace:$}}=C,Q=di(),Y=this.core.projectId||"",X=Date.now(),ee=index_es_be({eventId:Q,timestamp:X,props:{event:T,type:N,properties:{topic:U,trace:$}},bundleId:Y,domain:this.getAppDomain()},this.setMethods(Q));return this.telemetryEnabled&&(this.events.set(Q,ee),this.shouldPersist=!0),ee}),index_es_E(this,"getEvent",C=>{let{eventId:T,topic:N}=C;if(T)return this.events.get(T);let U=Array.from(this.events.values()).find(C=>C.props.properties.topic===N);if(U)return index_es_be(index_es_be({},U),this.setMethods(U.eventId))}),index_es_E(this,"deleteEvent",C=>{let{eventId:T}=C;this.events.delete(T),this.shouldPersist=!0}),index_es_E(this,"setEventListeners",()=>{this.core.heartbeat.on(r2.Lx.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(C=>{(0,Y.fromMiliseconds)(Date.now())-(0,Y.fromMiliseconds)(C.timestamp)>86400&&(this.events.delete(C.eventId),this.shouldPersist=!0)})})}),index_es_E(this,"setMethods",C=>({addTrace:T=>this.addTrace(C,T),setError:T=>this.setError(C,T)})),index_es_E(this,"addTrace",(C,T)=>{let N=this.events.get(C);N&&(N.props.properties.trace.push(T),this.events.set(C,N),this.shouldPersist=!0)}),index_es_E(this,"setError",(C,T)=>{let N=this.events.get(C);N&&(N.props.type=T,N.timestamp=Date.now(),this.events.set(C,N),this.shouldPersist=!0)}),index_es_E(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),index_es_E(this,"restore",async()=>{try{let C=await this.core.storage.getItem(this.storageKey)||[];if(!C.length)return;C.forEach(C=>{this.events.set(C.eventId,index_es_be(index_es_be({},C),this.setMethods(C.eventId)))})}catch(C){this.logger.warn(C)}}),index_es_E(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let C=[];for(let[T,N]of this.events)N.props.type&&C.push(N);if(0!==C.length)try{if((await this.sendEvent(C)).ok)for(let T of C)this.events.delete(T.eventId),this.shouldPersist=!0}catch(C){this.logger.warn(C)}}),index_es_E(this,"sendEvent",async C=>{let T=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${iE}${T}`,{method:"POST",body:JSON.stringify(C)})}),index_es_E(this,"getAppDomain",()=>sr().url),this.logger=(0,r8.Ep)(T,this.context),this.telemetryEnabled=N,N?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var nc=Object.defineProperty,nh=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,nd=Object.prototype.propertyIsEnumerable,index_es_Qe=(C,T,N)=>T in C?nc(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Gi=(C,T)=>{for(var N in T||(T={}))nu.call(T,N)&&index_es_Qe(C,N,T[N]);if(nh)for(var N of nh(T))nd.call(T,N)&&index_es_Qe(C,N,T[N]);return C},index_es_v=(C,T,N)=>index_es_Qe(C,"symbol"!=typeof T?T+"":T,N);let index_es_Te=class index_es_Te extends h{constructor(C){var T;super(C),index_es_v(this,"protocol","wc"),index_es_v(this,"version",2),index_es_v(this,"name",ih),index_es_v(this,"relayUrl"),index_es_v(this,"projectId"),index_es_v(this,"customStoragePrefix"),index_es_v(this,"events",new U.EventEmitter),index_es_v(this,"logger"),index_es_v(this,"heartbeat"),index_es_v(this,"relayer"),index_es_v(this,"crypto"),index_es_v(this,"storage"),index_es_v(this,"history"),index_es_v(this,"expirer"),index_es_v(this,"pairing"),index_es_v(this,"verify"),index_es_v(this,"echoClient"),index_es_v(this,"linkModeSupportedApps"),index_es_v(this,"eventClient"),index_es_v(this,"initialized",!1),index_es_v(this,"logChunkController"),index_es_v(this,"on",(C,T)=>this.events.on(C,T)),index_es_v(this,"once",(C,T)=>this.events.once(C,T)),index_es_v(this,"off",(C,T)=>this.events.off(C,T)),index_es_v(this,"removeListener",(C,T)=>this.events.removeListener(C,T)),index_es_v(this,"dispatchEnvelope",({topic:C,message:T,sessionExists:N})=>{if(!C||!T)return;let U={topic:C,message:T,publishedAt:Date.now(),transportType:ix.link_mode};this.relayer.onLinkMessageEvent(U,{sessionExists:N})});let N=this.getGlobalCore(C?.customStoragePrefix);if(N)try{return this.customStoragePrefix=N.customStoragePrefix,this.logger=N.logger,this.heartbeat=N.heartbeat,this.crypto=N.crypto,this.history=N.history,this.expirer=N.expirer,this.storage=N.storage,this.relayer=N.relayer,this.pairing=N.pairing,this.verify=N.verify,this.echoClient=N.echoClient,this.linkModeSupportedApps=N.linkModeSupportedApps,this.eventClient=N.eventClient,this.initialized=N.initialized,this.logChunkController=N.logChunkController,N}catch(C){console.warn("Failed to copy global core",C)}this.projectId=C?.projectId,this.relayUrl=C?.relayUrl||iw,this.customStoragePrefix=null!=C&&C.customStoragePrefix?`:${C.customStoragePrefix}`:"";let $=(0,r8.jI)({level:"string"==typeof C?.logger&&C.logger?C.logger:ip.logger,name:ih}),{logger:Q,chunkLoggerController:Y}=(0,r8.Rt)({opts:$,maxSizeInBytes:C?.maxLogBlobSizeInBytes,loggerOverride:C?.logger});this.logChunkController=Y,null!=(T=this.logChunkController)&&T.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var C,T;null!=(C=this.logChunkController)&&C.downloadLogsBlobInBrowser&&(null==(T=this.logChunkController)||T.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,r8.Ep)(Q,this.name),this.heartbeat=new r2.C$,this.crypto=new index_es_wi(this,this.logger,C?.keychain),this.history=new index_es_ji(this,this.logger),this.expirer=new index_es_Ui(this,this.logger),this.storage=null!=C&&C.storage?C.storage:new r3.Z(index_es_Gi(index_es_Gi({},ig),C?.storageOptions)),this.relayer=new index_es_Oi({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new index_es_ki(this,this.logger),this.verify=new index_es_Fi(this,this.logger,this.storage),this.echoClient=new index_es_Ki(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new index_es_Vi(this,this.logger,C?.telemetryEnabled),this.setGlobalCore(this)}static async init(C){let T=new index_es_Te(C);await T.initialize();let N=await T.crypto.getClientId();return await T.storage.setItem("WALLETCONNECT_CLIENT_ID",N),T}get context(){return(0,r8.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var C;return null==(C=this.logChunkController)?void 0:C.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(C){this.linkModeSupportedApps.includes(C)||(this.linkModeSupportedApps.push(C),await this.storage.setItem(iI,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(iI)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(C){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,C),this.logger.error(C.message),C}}getGlobalCore(C=""){try{if(this.isGlobalCoreDisabled())return;let T=`_walletConnectCore_${C}`,N=`${T}_count`;return globalThis[N]=(globalThis[N]||0)+1,globalThis[N]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[N]} times.`),globalThis[T]}catch(C){console.warn("Failed to get global WalletConnect core",C);return}}setGlobalCore(C){var T;try{if(this.isGlobalCoreDisabled())return;let N=`_walletConnectCore_${(null==(T=C.opts)?void 0:T.customStoragePrefix)||""}`;globalThis[N]=C}catch(C){console.warn("Failed to set global WalletConnect core",C)}}isGlobalCoreDisabled(){try{return"u">typeof ic&&"true"===ic.env.DISABLE_GLOBAL_CORE}catch{return!0}}};let nf="client",np=`wc@2:${nf}:`,ng={name:nf,logger:"error"},ny="WALLETCONNECT_DEEPLINK_CHOICE",nm="Proposal expired",nb=Y.SEVEN_DAYS,nw={wc_sessionPropose:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Y.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Y.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1119}}},n_={min:Y.FIVE_MINUTES,max:Y.SEVEN_DAYS},nv={idle:"IDLE",active:"ACTIVE"},nE={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},nx=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],nA="wc@1.5:auth:",nI=`${nA}:PUB_KEY`;var nP=Object.defineProperty,nS=Object.defineProperties,nD=Object.getOwnPropertyDescriptors,nB=Object.getOwnPropertySymbols,nC=Object.prototype.hasOwnProperty,nO=Object.prototype.propertyIsEnumerable,index_es_$e=(C,T,N)=>T in C?nP(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_I=(C,T)=>{for(var N in T||(T={}))nC.call(T,N)&&index_es_$e(C,N,T[N]);if(nB)for(var N of nB(T))nO.call(T,N)&&index_es_$e(C,N,T[N]);return C},index_es_x=(C,T)=>nS(C,nD(T)),index_es_c=(C,T,N)=>index_es_$e(C,"symbol"!=typeof T?T+"":T,N);let index_es_Cs=class index_es_Cs extends V{constructor(C){super(C),index_es_c(this,"name","engine"),index_es_c(this,"events",new($())),index_es_c(this,"initialized",!1),index_es_c(this,"requestQueue",{state:nv.idle,queue:[]}),index_es_c(this,"sessionRequestQueue",{state:nv.idle,queue:[]}),index_es_c(this,"emittedSessionRequests",new gi({limit:500})),index_es_c(this,"requestQueueDelay",Y.ONE_SECOND),index_es_c(this,"expectedPairingMethodMap",new Map),index_es_c(this,"recentlyDeletedMap",new Map),index_es_c(this,"recentlyDeletedLimit",200),index_es_c(this,"relayMessageCache",[]),index_es_c(this,"pendingSessions",new Map),index_es_c(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(nw)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,Y.toMiliseconds)(this.requestQueueDelay)))}),index_es_c(this,"connect",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let T=index_es_x(index_es_I({},C),{requiredNamespaces:C.requiredNamespaces||{},optionalNamespaces:C.optionalNamespaces||{}});await this.isValidConnect(T),T.optionalNamespaces=function(C,T){var N,U,$,Q,Y,X;let ee=ye(C),es=ye(T),el={},ec=Object.keys(ee).concat(Object.keys(es));for(let C of ec)el[C]={chains:ct(null==(N=ee[C])?void 0:N.chains,null==(U=es[C])?void 0:U.chains),methods:ct(null==($=ee[C])?void 0:$.methods,null==(Q=es[C])?void 0:Q.methods),events:ct(null==(Y=ee[C])?void 0:Y.events,null==(X=es[C])?void 0:X.events)};return el}(T.requiredNamespaces,T.optionalNamespaces),T.requiredNamespaces={};let{pairingTopic:N,requiredNamespaces:U,optionalNamespaces:$,sessionProperties:Q,scopedProperties:X,relays:ee}=T,es=N,el,ec=!1;try{if(es){let C=this.client.core.pairing.pairings.get(es);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),ec=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${es}) failed`),C}if(!es||!ec){let{topic:C,uri:T}=await this.client.core.pairing.create();es=C,el=T}if(!es){let{message:C}=Et("NO_MATCHING_KEY",`connect() pairing topic: ${es}`);throw Error(C)}let eh=await this.client.core.crypto.generateKeyPair(),eu=nw.wc_sessionPropose.req.ttl||Y.FIVE_MINUTES,ed=ii(eu),ep=index_es_x(index_es_I(index_es_I({requiredNamespaces:U,optionalNamespaces:$,relays:ee??[{protocol:"irn"}],proposer:{publicKey:eh,metadata:this.client.metadata},expiryTimestamp:ed,pairingTopic:es},Q&&{sessionProperties:Q}),X&&{scopedProperties:X}),{id:(0,ir.payloadId)()}),eg=ci("session_connect",ep.id),{reject:ey,resolve:em,done:eb}=ei(eu,nm),v=({id:C})=>{C===ep.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(ep.id),this.events.emit(eg,{error:{message:nm,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(eg,({error:C,session:T})=>{this.client.events.off("proposal_expire",v),C?ey(C):T&&em(T)}),await this.sendRequest({topic:es,method:"wc_sessionPropose",params:ep,throwOnFailedPublish:!0,clientRpcId:ep.id}),await this.setProposal(ep.id,ep),{uri:el,approval:eb}}),index_es_c(this,"pair",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(C)}catch(C){throw this.client.logger.error("pair() failed"),C}}),index_es_c(this,"approve",async C=>{var T,N,U;let $=this.client.core.eventClient.createEvent({properties:{topic:null==(T=C?.id)?void 0:T.toString(),trace:[iU.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw $.setError(iL.no_internet_connection),C}try{await this.isValidProposalId(C?.id)}catch(T){throw this.client.logger.error(`approve() -> proposal.get(${C?.id}) failed`),$.setError(iL.proposal_not_found),T}try{await this.isValidApprove(C)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),$.setError(iL.session_approve_namespace_validation_failure),C}let{id:Q,relayProtocol:Y,namespaces:X,sessionProperties:ee,scopedProperties:es,sessionConfig:el}=C,ec=this.client.proposal.get(Q);this.client.core.eventClient.deleteEvent({eventId:$.eventId});let{pairingTopic:eh,proposer:eu,requiredNamespaces:ed,optionalNamespaces:ep}=ec,eg=null==(N=this.client.core.eventClient)?void 0:N.getEvent({topic:eh});eg||(eg=null==(U=this.client.core.eventClient)?void 0:U.createEvent({type:iU.session_approve_started,properties:{topic:eh,trace:[iU.session_approve_started,iU.session_namespaces_validation_success]}}));let ey=await this.client.core.crypto.generateKeyPair(),em=eu.publicKey,eb=await this.client.core.crypto.generateSharedKey(ey,em),ew=index_es_I(index_es_I(index_es_I({relay:{protocol:Y??"irn"},namespaces:X,controller:{publicKey:ey,metadata:this.client.metadata},expiry:ii(nb)},ee&&{sessionProperties:ee}),es&&{scopedProperties:es}),el&&{sessionConfig:el}),e_=ix.relay;eg.addTrace(iU.subscribing_session_topic);try{await this.client.core.relayer.subscribe(eb,{transportType:e_})}catch(C){throw eg.setError(iL.subscribe_session_topic_failure),C}eg.addTrace(iU.subscribe_session_topic_success);let ev=index_es_x(index_es_I({},ew),{topic:eb,requiredNamespaces:ed,optionalNamespaces:ep,pairingTopic:eh,acknowledged:!1,self:ew.controller,peer:{publicKey:eu.publicKey,metadata:eu.metadata},controller:ey,transportType:ix.relay});await this.client.session.set(eb,ev),eg.addTrace(iU.store_session);try{eg.addTrace(iU.publishing_session_settle),await this.sendRequest({topic:eb,method:"wc_sessionSettle",params:ew,throwOnFailedPublish:!0}).catch(C=>{throw eg?.setError(iL.session_settle_publish_failure),C}),eg.addTrace(iU.session_settle_publish_success),eg.addTrace(iU.publishing_session_approve),await this.sendResult({id:Q,topic:eh,result:{relay:{protocol:Y??"irn"},responderPublicKey:ey},throwOnFailedPublish:!0}).catch(C=>{throw eg?.setError(iL.session_approve_publish_failure),C}),eg.addTrace(iU.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(eb,Kt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(eb),C}return this.client.core.eventClient.deleteEvent({eventId:eg.eventId}),await this.client.core.pairing.updateMetadata({topic:eh,metadata:eu.metadata}),await this.deleteProposal(Q),await this.client.core.pairing.activate({topic:eh}),await this.setExpiry(eb,ii(nb)),{topic:eb,acknowledged:()=>Promise.resolve(this.client.session.get(eb))}}),index_es_c(this,"reject",async C=>{let T;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(C)}catch(C){throw this.client.logger.error("reject() -> isValidReject() failed"),C}let{id:N,reason:U}=C;try{T=this.client.proposal.get(N).pairingTopic}catch(C){throw this.client.logger.error(`reject() -> proposal.get(${N}) failed`),C}T&&await this.sendError({id:N,topic:T,error:U,rpcOpts:nw.wc_sessionPropose.reject}),await this.deleteProposal(N)}),index_es_c(this,"update",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(C)}catch(C){throw this.client.logger.error("update() -> isValidUpdate() failed"),C}let{topic:T,namespaces:N}=C,{done:U,resolve:$,reject:Q}=ei(),Y=(0,ir.payloadId)(),X=(0,ir.getBigIntRpcId)().toString(),ee=this.client.session.get(T).namespaces;return this.events.once(ci("session_update",Y),({error:C})=>{C?Q(C):$()}),await this.client.session.update(T,{namespaces:N}),await this.sendRequest({topic:T,method:"wc_sessionUpdate",params:{namespaces:N},throwOnFailedPublish:!0,clientRpcId:Y,relayRpcId:X}).catch(C=>{this.client.logger.error(C),this.client.session.update(T,{namespaces:ee}),Q(C)}),{acknowledged:U}}),index_es_c(this,"extend",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(C)}catch(C){throw this.client.logger.error("extend() -> isValidExtend() failed"),C}let{topic:T}=C,N=(0,ir.payloadId)(),{done:U,resolve:$,reject:Q}=ei();return this.events.once(ci("session_extend",N),({error:C})=>{C?Q(C):$()}),await this.setExpiry(T,ii(nb)),this.sendRequest({topic:T,method:"wc_sessionExtend",params:{},clientRpcId:N,throwOnFailedPublish:!0}).catch(C=>{Q(C)}),{acknowledged:U}}),index_es_c(this,"request",async C=>{this.isInitialized();try{await this.isValidRequest(C)}catch(C){throw this.client.logger.error("request() -> isValidRequest() failed"),C}let{chainId:T,request:N,topic:U,expiry:$=nw.wc_sessionRequest.req.ttl}=C,Q=this.client.session.get(U);Q?.transportType===ix.relay&&await this.confirmOnlineStateOrThrow();let Y=(0,ir.payloadId)(),X=(0,ir.getBigIntRpcId)().toString(),{done:ee,resolve:es,reject:el}=ei($,"Request expired. Please try again.");this.events.once(ci("session_request",Y),({error:C,result:T})=>{C?el(C):es(T)});let ec="wc_sessionRequest",eh=this.getAppLinkIfEnabled(Q.peer.metadata,Q.transportType);if(eh)return await this.sendRequest({clientRpcId:Y,relayRpcId:X,topic:U,method:ec,params:{request:index_es_x(index_es_I({},N),{expiryTimestamp:ii($)}),chainId:T},expiry:$,throwOnFailedPublish:!0,appLink:eh}).catch(C=>el(C)),this.client.events.emit("session_request_sent",{topic:U,request:N,chainId:T,id:Y}),await ee();let eu={request:index_es_x(index_es_I({},N),{expiryTimestamp:ii($)}),chainId:T};return await Promise.all([new Promise(async C=>{await this.sendRequest({clientRpcId:Y,relayRpcId:X,topic:U,method:ec,params:eu,expiry:$,throwOnFailedPublish:!0,tvf:this.getTVFParams(Y,eu)}).catch(C=>el(C)),this.client.events.emit("session_request_sent",{topic:U,request:N,chainId:T,id:Y}),C()}),new Promise(async C=>{var T;if(!(null!=(T=Q.sessionConfig)&&T.disableDeepLink)){let C=await ui(this.client.core.storage,ny);await ai({id:Y,topic:U,wcDeepLink:C})}C()}),ee()]).then(C=>C[2])}),index_es_c(this,"respond",async C=>{this.isInitialized(),await this.isValidRespond(C);let{topic:T,response:N}=C,{id:U}=N,$=this.client.session.get(T);$.transportType===ix.relay&&await this.confirmOnlineStateOrThrow();let Q=this.getAppLinkIfEnabled($.peer.metadata,$.transportType);(0,ir.isJsonRpcResult)(N)?await this.sendResult({id:U,topic:T,result:N.result,throwOnFailedPublish:!0,appLink:Q}):(0,ir.isJsonRpcError)(N)&&await this.sendError({id:U,topic:T,error:N.error,appLink:Q}),this.cleanupAfterResponse(C)}),index_es_c(this,"ping",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(C)}catch(C){throw this.client.logger.error("ping() -> isValidPing() failed"),C}let{topic:T}=C;if(this.client.session.keys.includes(T)){let C=(0,ir.payloadId)(),N=(0,ir.getBigIntRpcId)().toString(),{done:U,resolve:$,reject:Q}=ei();this.events.once(ci("session_ping",C),({error:C})=>{C?Q(C):$()}),await Promise.all([this.sendRequest({topic:T,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:C,relayRpcId:N}),U()])}else this.client.core.pairing.pairings.keys.includes(T)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:T}))}),index_es_c(this,"emit",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(C);let{topic:T,event:N,chainId:U}=C,$=(0,ir.getBigIntRpcId)().toString(),Q=(0,ir.payloadId)();await this.sendRequest({topic:T,method:"wc_sessionEvent",params:{event:N,chainId:U},throwOnFailedPublish:!0,relayRpcId:$,clientRpcId:Q})}),index_es_c(this,"disconnect",async C=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(C);let{topic:T}=C;if(this.client.session.keys.includes(T))await this.sendRequest({topic:T,method:"wc_sessionDelete",params:Kt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:T,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(T))await this.client.core.pairing.disconnect({topic:T});else{let{message:C}=Et("MISMATCHED_TOPIC",`Session or pairing topic not found: ${T}`);throw Error(C)}}),index_es_c(this,"find",C=>(this.isInitialized(),this.client.session.getAll().filter(T=>(function(C,T){let{requiredNamespaces:N}=T,U=Object.keys(C.namespaces),$=Object.keys(N),Q=!0;return!!It($,U)&&(U.forEach(T=>{let{accounts:U,methods:$,events:Y}=C.namespaces[T],X=qt(U),ee=N[T];It(ve(T,ee),X)&&It(ee.methods,$)&&It(ee.events,Y)||(Q=!1)}),Q)})(T,C)))),index_es_c(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),index_es_c(this,"authenticate",async(C,T)=>{var N;let U;this.isInitialized(),this.isValidAuthenticate(C);let $=T&&this.client.core.linkModeSupportedApps.includes(T)&&(null==(N=this.client.metadata.redirect)?void 0:N.linkMode),Q=$?ix.link_mode:ix.relay;Q===ix.relay&&await this.confirmOnlineStateOrThrow();let{chains:Y,statement:X="",uri:ee,domain:es,nonce:el,type:ec,exp:eh,nbf:eu,methods:ed=[],expiry:ep}=C,eg=[...C.resources||[]],{topic:ey,uri:em}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:Q});this.client.logger.info({message:"Generated new pairing",pairing:{topic:ey,uri:em}});let eb=await this.client.core.crypto.generateKeyPair(),ew=Fc(eb);if(await Promise.all([this.client.auth.authKeys.set(nI,{responseTopic:ew,publicKey:eb}),this.client.auth.pairingTopics.set(ew,{topic:ew,pairingTopic:ey})]),await this.client.core.relayer.subscribe(ew,{transportType:Q}),this.client.logger.info(`sending request to new pairing topic: ${ey}`),ed.length>0){let{namespace:C}=Fe(Y[0]),T=function(C,T,N){let U=function(C,T,N,U={}){return N?.sort((C,T)=>C.localeCompare(T)),{att:{[C]:function(C,T,N={}){T=T?.sort((C,T)=>C.localeCompare(T));let U=T.map(T=>({[`${C}/${T}`]:[N]}));return Object.assign({},...U)}(T,N,U)}}}(C,T,N);return Ne(U)}(C,"request",ed);Oe(eg)&&(T=function(C,T){let N=Lt(C),U=Lt(T),$=function(C,T){bt(C),bt(T);let N=Object.keys(C.att).concat(Object.keys(T.att)).sort((C,T)=>C.localeCompare(T)),U={att:{}};return N.forEach(N=>{var $,Q;Object.keys((null==($=C.att)?void 0:$[N])||{}).concat(Object.keys((null==(Q=T.att)?void 0:Q[N])||{})).sort((C,T)=>C.localeCompare(T)).forEach($=>{var Q,Y;U.att[N]=Dr(ln({},U.att[N]),{[$]:(null==(Q=C.att[N])?void 0:Q[$])||(null==(Y=T.att[N])?void 0:Y[$])})})}),U}(N,U);return Ne($)}(T,eg.pop())),eg.push(T)}let e_=ep&&ep>nw.wc_sessionAuthenticate.req.ttl?ep:nw.wc_sessionAuthenticate.req.ttl,ev={authPayload:{type:ec??"caip122",chains:Y,statement:X,aud:ee,domain:es,version:"1",nonce:el,iat:new Date().toISOString(),exp:eh,nbf:eu,resources:eg},requester:{publicKey:eb,metadata:this.client.metadata},expiryTimestamp:ii(e_)},eE={eip155:{chains:Y,methods:[...new Set(["personal_sign",...ed])],events:["chainChanged","accountsChanged"]}},ex={requiredNamespaces:{},optionalNamespaces:eE,relays:[{protocol:"irn"}],pairingTopic:ey,proposer:{publicKey:eb,metadata:this.client.metadata},expiryTimestamp:ii(nw.wc_sessionPropose.req.ttl),id:(0,ir.payloadId)()},{done:eA,resolve:eI,reject:eP}=ei(e_,"Request expired"),eS=(0,ir.payloadId)(),eD=ci("session_connect",ex.id),eB=ci("session_request",eS),pe=async({error:C,session:T})=>{this.events.off(eB,ve),C?eP(C):T&&eI({session:T})},ve=async C=>{var N,U,$;let Y;if(await this.deletePendingAuthRequest(eS,{message:"fulfilled",code:0}),C.error){let T=Kt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===T.code?void 0:(this.events.off(eD,pe),eP(C.error.message))}await this.deleteProposal(ex.id),this.events.off(eD,pe);let{cacaos:X,responder:ee}=C.result,es=[],el=[];for(let C of X){await yf({cacao:C,projectId:this.client.core.projectId})||(this.client.logger.error(C,"Signature verification failed"),eP(Kt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:T}=C,N=Oe(T.resources),U=[Vr(T.iss)],$=dn(T.iss);if(N){let C=If(N),T=Af(N);es.push(...C),U.push(...T)}for(let C of U)el.push(`${C}:${$}`)}let ec=await this.client.core.crypto.generateSharedKey(eb,ee.publicKey);es.length>0&&(Y={topic:ec,acknowledged:!0,self:{publicKey:eb,metadata:this.client.metadata},peer:ee,controller:ee.publicKey,expiry:ii(nb),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:ey,namespaces:ga([...new Set(es)],[...new Set(el)]),transportType:Q},await this.client.core.relayer.subscribe(ec,{transportType:Q}),await this.client.session.set(ec,Y),ey&&await this.client.core.pairing.updateMetadata({topic:ey,metadata:ee.metadata}),Y=this.client.session.get(ec)),null!=(N=this.client.metadata.redirect)&&N.linkMode&&null!=(U=ee.metadata.redirect)&&U.linkMode&&null!=($=ee.metadata.redirect)&&$.universal&&T&&(this.client.core.addLinkModeSupportedApp(ee.metadata.redirect.universal),this.client.session.update(ec,{transportType:ix.link_mode})),eI({auths:X,session:Y})};this.events.once(eD,pe),this.events.once(eB,ve);try{if($){let C=(0,ir.formatJsonRpcRequest)("wc_sessionAuthenticate",ev,eS);this.client.core.history.set(ey,C);let N=await this.client.core.crypto.encode("",C,{type:2,encoding:rK});U=sa(T,ey,N)}else await Promise.all([this.sendRequest({topic:ey,method:"wc_sessionAuthenticate",params:ev,expiry:C.expiry,throwOnFailedPublish:!0,clientRpcId:eS}),this.sendRequest({topic:ey,method:"wc_sessionPropose",params:ex,expiry:nw.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:ex.id})])}catch(C){throw this.events.off(eD,pe),this.events.off(eB,ve),C}return await this.setProposal(ex.id,ex),await this.setAuthRequest(eS,{request:index_es_x(index_es_I({},ev),{verifyContext:{}}),pairingTopic:ey,transportType:Q}),{uri:U??em,response:eA}}),index_es_c(this,"approveSessionAuthenticate",async C=>{let T;let{id:N,auths:U}=C,$=this.client.core.eventClient.createEvent({properties:{topic:N.toString(),trace:[iM.authenticated_session_approve_started]}});try{this.isInitialized()}catch(C){throw $.setError(iF.no_internet_connection),C}let Q=this.getPendingAuthRequest(N);if(!Q)throw $.setError(iF.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${N}`);let Y=Q.transportType||ix.relay;Y===ix.relay&&await this.confirmOnlineStateOrThrow();let X=Q.requester.publicKey,ee=await this.client.core.crypto.generateKeyPair(),es=Fc(X),el={type:1,receiverPublicKey:X,senderPublicKey:ee},ec=[],eh=[];for(let C of U){if(!await yf({cacao:C,projectId:this.client.core.projectId})){$.setError(iF.invalid_cacao);let C=Kt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:N,topic:es,error:C,encodeOpts:el}),Error(C.message)}$.addTrace(iM.cacaos_verified);let{p:T}=C,U=Oe(T.resources),Q=[Vr(T.iss)],Y=dn(T.iss);if(U){let C=If(U),T=Af(U);ec.push(...C),Q.push(...T)}for(let C of Q)eh.push(`${C}:${Y}`)}let eu=await this.client.core.crypto.generateSharedKey(ee,X);if($.addTrace(iM.create_authenticated_session_topic),ec?.length>0){T={topic:eu,acknowledged:!0,self:{publicKey:ee,metadata:this.client.metadata},peer:{publicKey:X,metadata:Q.requester.metadata},controller:X,expiry:ii(nb),authentication:U,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:Q.pairingTopic,namespaces:ga([...new Set(ec)],[...new Set(eh)]),transportType:Y},$.addTrace(iM.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(eu,{transportType:Y})}catch(C){throw $.setError(iF.subscribe_authenticated_session_topic_failure),C}$.addTrace(iM.subscribe_authenticated_session_topic_success),await this.client.session.set(eu,T),$.addTrace(iM.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:Q.pairingTopic,metadata:Q.requester.metadata})}$.addTrace(iM.publishing_authenticated_session_approve);try{await this.sendResult({topic:es,id:N,result:{cacaos:U,responder:{publicKey:ee,metadata:this.client.metadata}},encodeOpts:el,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(Q.requester.metadata,Y)})}catch(C){throw $.setError(iF.authenticated_session_approve_publish_failure),C}return await this.client.auth.requests.delete(N,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:Q.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:$.eventId}),{session:T}}),index_es_c(this,"rejectSessionAuthenticate",async C=>{this.isInitialized();let{id:T,reason:N}=C,U=this.getPendingAuthRequest(T);if(!U)throw Error(`Could not find pending auth request with id ${T}`);U.transportType===ix.relay&&await this.confirmOnlineStateOrThrow();let $=U.requester.publicKey,Q=await this.client.core.crypto.generateKeyPair(),Y=Fc($);await this.sendError({id:T,topic:Y,error:N,encodeOpts:{type:1,receiverPublicKey:$,senderPublicKey:Q},rpcOpts:nw.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(U.requester.metadata,U.transportType)}),await this.client.auth.requests.delete(T,{message:"rejected",code:0}),await this.deleteProposal(T)}),index_es_c(this,"formatAuthMessage",C=>{this.isInitialized();let{request:T,iss:N}=C;return qr(T,N)}),index_es_c(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let C=this.relayMessageCache.shift();C&&await this.onRelayMessage(C)}catch(C){this.client.logger.error(C)}},50)}),index_es_c(this,"cleanupDuplicatePairings",async C=>{if(C.pairingTopic)try{let T=this.client.core.pairing.pairings.get(C.pairingTopic),N=this.client.core.pairing.pairings.getAll().filter(N=>{var U,$;return(null==(U=N.peerMetadata)?void 0:U.url)&&(null==($=N.peerMetadata)?void 0:$.url)===C.peer.metadata.url&&N.topic&&N.topic!==T.topic});if(0===N.length)return;this.client.logger.info(`Cleaning up ${N.length} duplicate pairing(s)`),await Promise.all(N.map(C=>this.client.core.pairing.disconnect({topic:C.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(C){this.client.logger.error(C)}}),index_es_c(this,"deleteSession",async C=>{var T;let{topic:N,expirerHasDeleted:U=!1,emitEvent:$=!0,id:Q=0}=C,{self:Y}=this.client.session.get(N);await this.client.core.relayer.unsubscribe(N),await this.client.session.delete(N,Kt("USER_DISCONNECTED")),this.addToRecentlyDeleted(N,"session"),this.client.core.crypto.keychain.has(Y.publicKey)&&await this.client.core.crypto.deleteKeyPair(Y.publicKey),this.client.core.crypto.keychain.has(N)&&await this.client.core.crypto.deleteSymKey(N),U||this.client.core.expirer.del(N),this.client.core.storage.removeItem(ny).catch(C=>this.client.logger.warn(C)),this.getPendingSessionRequests().forEach(C=>{C.topic===N&&this.deletePendingSessionRequest(C.id,Kt("USER_DISCONNECTED"))}),N===(null==(T=this.sessionRequestQueue.queue[0])?void 0:T.topic)&&(this.sessionRequestQueue.state=nv.idle),$&&this.client.events.emit("session_delete",{id:Q,topic:N})}),index_es_c(this,"deleteProposal",async(C,T)=>{if(T)try{let T=this.client.proposal.get(C),N=this.client.core.eventClient.getEvent({topic:T.pairingTopic});N?.setError(iL.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(C,Kt("USER_DISCONNECTED")),T?Promise.resolve():this.client.core.expirer.del(C)]),this.addToRecentlyDeleted(C,"proposal")}),index_es_c(this,"deletePendingSessionRequest",async(C,T,N=!1)=>{await Promise.all([this.client.pendingRequest.delete(C,T),N?Promise.resolve():this.client.core.expirer.del(C)]),this.addToRecentlyDeleted(C,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(T=>T.id!==C),N&&(this.sessionRequestQueue.state=nv.idle,this.client.events.emit("session_request_expire",{id:C}))}),index_es_c(this,"deletePendingAuthRequest",async(C,T,N=!1)=>{await Promise.all([this.client.auth.requests.delete(C,T),N?Promise.resolve():this.client.core.expirer.del(C)])}),index_es_c(this,"setExpiry",async(C,T)=>{this.client.session.keys.includes(C)&&(this.client.core.expirer.set(C,T),await this.client.session.update(C,{expiry:T}))}),index_es_c(this,"setProposal",async(C,T)=>{this.client.core.expirer.set(C,ii(nw.wc_sessionPropose.req.ttl)),await this.client.proposal.set(C,T)}),index_es_c(this,"setAuthRequest",async(C,T)=>{let{request:N,pairingTopic:U,transportType:$=ix.relay}=T;this.client.core.expirer.set(C,N.expiryTimestamp),await this.client.auth.requests.set(C,{authPayload:N.authPayload,requester:N.requester,expiryTimestamp:N.expiryTimestamp,id:C,pairingTopic:U,verifyContext:N.verifyContext,transportType:$})}),index_es_c(this,"setPendingSessionRequest",async C=>{let{id:T,topic:N,params:U,verifyContext:$}=C,Q=U.request.expiryTimestamp||ii(nw.wc_sessionRequest.req.ttl);this.client.core.expirer.set(T,Q),await this.client.pendingRequest.set(T,{id:T,topic:N,params:U,verifyContext:$})}),index_es_c(this,"sendRequest",async C=>{let T,U;let{topic:$,method:Q,params:Y,expiry:X,relayRpcId:ee,clientRpcId:es,throwOnFailedPublish:el,appLink:ec,tvf:eh}=C,eu=(0,ir.formatJsonRpcRequest)(Q,Y,es),ed=!!ec;try{let C=ed?rK:rV;T=await this.client.core.crypto.encode($,eu,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${$} failed`),C}if(nx.includes(Q)){let C=zc(JSON.stringify(eu)),N=zc(T);U=await this.client.core.verify.register({id:N,decryptedId:C})}let ep=nw[Q].req;if(ep.attestation=U,X&&(ep.ttl=X),ee&&(ep.id=ee),this.client.core.history.set($,eu),ed){let C=sa(ec,$,T);await N.g.Linking.openURL(C,this.client.name)}else{let C=nw[Q].req;X&&(C.ttl=X),ee&&(C.id=ee),C.tvf=index_es_x(index_es_I({},eh),{correlationId:eu.id}),el?(C.internal=index_es_x(index_es_I({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish($,T,C)):this.client.core.relayer.publish($,T,C).catch(C=>this.client.logger.error(C))}return eu.id}),index_es_c(this,"sendResult",async C=>{let T,U,$;let{id:Q,topic:Y,result:X,throwOnFailedPublish:ee,encodeOpts:es,appLink:el}=C,ec=(0,ir.formatJsonRpcResult)(Q,X),eh=el&&"u">typeof(null==N.g?void 0:N.g.Linking);try{let C=eh?rK:rV;T=await this.client.core.crypto.encode(Y,ec,index_es_x(index_es_I({},es||{}),{encoding:C}))}catch(C){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${Y} failed`),C}try{U=await this.client.core.history.get(Y,Q);let C=U.request;try{$=this.getTVFParams(Q,C.params,X)}catch(C){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${C?.message}`)}}catch(C){throw this.client.logger.error(`sendResult() -> history.get(${Y}, ${Q}) failed`),C}if(eh){let C=sa(el,Y,T);await N.g.Linking.openURL(C,this.client.name)}else{let C=U.request.method,N=nw[C].res;N.tvf=index_es_x(index_es_I({},$),{correlationId:Q}),ee?(N.internal=index_es_x(index_es_I({},N.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(Y,T,N)):this.client.core.relayer.publish(Y,T,N).catch(C=>this.client.logger.error(C))}await this.client.core.history.resolve(ec)}),index_es_c(this,"sendError",async C=>{let T,U;let{id:$,topic:Q,error:Y,encodeOpts:X,rpcOpts:ee,appLink:es}=C,el=(0,ir.formatJsonRpcError)($,Y),ec=es&&"u">typeof(null==N.g?void 0:N.g.Linking);try{let C=ec?rK:rV;T=await this.client.core.crypto.encode(Q,el,index_es_x(index_es_I({},X||{}),{encoding:C}))}catch(C){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${Q} failed`),C}try{U=await this.client.core.history.get(Q,$)}catch(C){throw this.client.logger.error(`sendError() -> history.get(${Q}, ${$}) failed`),C}if(ec){let C=sa(es,Q,T);await N.g.Linking.openURL(C,this.client.name)}else{let C=U.request.method,N=ee||nw[C].res;this.client.core.relayer.publish(Q,T,N)}await this.client.core.history.resolve(el)}),index_es_c(this,"cleanup",async()=>{let C=[],T=[];this.client.session.getAll().forEach(T=>{let N=!1;fi(T.expiry)&&(N=!0),this.client.core.crypto.keychain.has(T.topic)||(N=!0),N&&C.push(T.topic)}),this.client.proposal.getAll().forEach(C=>{fi(C.expiryTimestamp)&&T.push(C.id)}),await Promise.all([...C.map(C=>this.deleteSession({topic:C})),...T.map(C=>this.deleteProposal(C))])}),index_es_c(this,"onProviderMessageEvent",async C=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(C):await this.onRelayMessage(C)}),index_es_c(this,"onRelayEventRequest",async C=>{this.requestQueue.queue.push(C),await this.processRequestsQueue()}),index_es_c(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===nv.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=nv.active;let C=this.requestQueue.queue.shift();if(C)try{await this.processRequest(C)}catch(C){this.client.logger.warn(C)}}this.requestQueue.state=nv.idle}),index_es_c(this,"processRequest",async C=>{let{topic:T,payload:N,attestation:U,transportType:$,encryptedId:Q}=C,Y=N.method;if(!this.shouldIgnorePairingRequest({topic:T,requestMethod:Y}))switch(Y){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:T,payload:N,attestation:U,encryptedId:Q});case"wc_sessionSettle":return await this.onSessionSettleRequest(T,N);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(T,N);case"wc_sessionExtend":return await this.onSessionExtendRequest(T,N);case"wc_sessionPing":return await this.onSessionPingRequest(T,N);case"wc_sessionDelete":return await this.onSessionDeleteRequest(T,N);case"wc_sessionRequest":return await this.onSessionRequest({topic:T,payload:N,attestation:U,encryptedId:Q,transportType:$});case"wc_sessionEvent":return await this.onSessionEventRequest(T,N);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:T,payload:N,attestation:U,encryptedId:Q,transportType:$});default:return this.client.logger.info(`Unsupported request method ${Y}`)}}),index_es_c(this,"onRelayEventResponse",async C=>{let{topic:T,payload:N,transportType:U}=C,$=(await this.client.core.history.get(T,N.id)).request.method;switch($){case"wc_sessionPropose":return this.onSessionProposeResponse(T,N,U);case"wc_sessionSettle":return this.onSessionSettleResponse(T,N);case"wc_sessionUpdate":return this.onSessionUpdateResponse(T,N);case"wc_sessionExtend":return this.onSessionExtendResponse(T,N);case"wc_sessionPing":return this.onSessionPingResponse(T,N);case"wc_sessionRequest":return this.onSessionRequestResponse(T,N);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(T,N);default:return this.client.logger.info(`Unsupported response method ${$}`)}}),index_es_c(this,"onRelayEventUnknownPayload",C=>{let{topic:T}=C,{message:N}=Et("MISSING_OR_INVALID",`Decoded payload on topic ${T} is not identifiable as a JSON-RPC request or a response.`);throw Error(N)}),index_es_c(this,"shouldIgnorePairingRequest",C=>{let{topic:T,requestMethod:N}=C,U=this.expectedPairingMethodMap.get(T);return!(!U||U.includes(N))&&!!(U.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),index_es_c(this,"onSessionProposeRequest",async C=>{let{topic:T,payload:N,attestation:U,encryptedId:$}=C,{params:Q,id:Y}=N;try{let C=this.client.core.eventClient.getEvent({topic:T});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),C?.setError(ik.proposal_listener_not_found)),this.isValidConnect(index_es_I({},N.params));let X=Q.expiryTimestamp||ii(nw.wc_sessionPropose.req.ttl),ee=index_es_I({id:Y,pairingTopic:T,expiryTimestamp:X,attestation:U,encryptedId:$},Q);await this.setProposal(Y,ee);let es=await this.getVerifyContext({attestationId:U,hash:zc(JSON.stringify(N)),encryptedId:$,metadata:ee.proposer.metadata});C?.addTrace(iN.emit_session_proposal),this.client.events.emit("session_proposal",{id:Y,params:ee,verifyContext:es})}catch(C){await this.sendError({id:Y,topic:T,error:C,rpcOpts:nw.wc_sessionPropose.autoReject}),this.client.logger.error(C)}}),index_es_c(this,"onSessionProposeResponse",async(C,T,N)=>{let{id:U}=T;if((0,ir.isJsonRpcResult)(T)){let{result:$}=T;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:$});let Q=this.client.proposal.get(U);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:Q});let Y=Q.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:Y});let X=$.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:X});let ee=await this.client.core.crypto.generateSharedKey(Y,X);this.pendingSessions.set(U,{sessionTopic:ee,pairingTopic:C,proposalId:U,publicKey:Y});let es=await this.client.core.relayer.subscribe(ee,{transportType:N});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:es}),await this.client.core.pairing.activate({topic:C})}else if((0,ir.isJsonRpcError)(T)){await this.deleteProposal(U);let C=ci("session_connect",U);if(0===this.events.listenerCount(C))throw Error(`emitting ${C} without any listeners, 954`);this.events.emit(C,{error:T.error})}}),index_es_c(this,"onSessionSettleRequest",async(C,T)=>{let{id:N,params:U}=T;try{this.isValidSessionSettleRequest(U);let{relay:N,controller:$,expiry:Q,namespaces:Y,sessionProperties:X,scopedProperties:ee,sessionConfig:es}=T.params,el=[...this.pendingSessions.values()].find(T=>T.sessionTopic===C);if(!el)return this.client.logger.error(`Pending session not found for topic ${C}`);let ec=this.client.proposal.get(el.proposalId),eh=index_es_x(index_es_I(index_es_I(index_es_I({topic:C,relay:N,expiry:Q,namespaces:Y,acknowledged:!0,pairingTopic:el.pairingTopic,requiredNamespaces:ec.requiredNamespaces,optionalNamespaces:ec.optionalNamespaces,controller:$.publicKey,self:{publicKey:el.publicKey,metadata:this.client.metadata},peer:{publicKey:$.publicKey,metadata:$.metadata}},X&&{sessionProperties:X}),ee&&{scopedProperties:ee}),es&&{sessionConfig:es}),{transportType:ix.relay});await this.client.session.set(eh.topic,eh),await this.setExpiry(eh.topic,eh.expiry),await this.client.core.pairing.updateMetadata({topic:el.pairingTopic,metadata:eh.peer.metadata}),this.client.events.emit("session_connect",{session:eh}),this.events.emit(ci("session_connect",el.proposalId),{session:eh}),this.pendingSessions.delete(el.proposalId),this.deleteProposal(el.proposalId,!1),this.cleanupDuplicatePairings(eh),await this.sendResult({id:T.id,topic:C,result:!0})}catch(T){await this.sendError({id:N,topic:C,error:T}),this.client.logger.error(T)}}),index_es_c(this,"onSessionSettleResponse",async(C,T)=>{let{id:N}=T;(0,ir.isJsonRpcResult)(T)?(await this.client.session.update(C,{acknowledged:!0}),this.events.emit(ci("session_approve",N),{})):(0,ir.isJsonRpcError)(T)&&(await this.client.session.delete(C,Kt("USER_DISCONNECTED")),this.events.emit(ci("session_approve",N),{error:T.error}))}),index_es_c(this,"onSessionUpdateRequest",async(C,T)=>{let{params:N,id:U}=T;try{let T=`${C}_session_update`,$=Ha.get(T);if($&&this.isRequestOutOfSync($,U)){this.client.logger.warn(`Discarding out of sync request - ${U}`),this.sendError({id:U,topic:C,error:Kt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(index_es_I({topic:C},N));try{Ha.set(T,U),await this.client.session.update(C,{namespaces:N.namespaces}),await this.sendResult({id:U,topic:C,result:!0})}catch(C){throw Ha.delete(T),C}this.client.events.emit("session_update",{id:U,topic:C,params:N})}catch(T){await this.sendError({id:U,topic:C,error:T}),this.client.logger.error(T)}}),index_es_c(this,"isRequestOutOfSync",(C,T)=>T.toString().slice(0,-3)<C.toString().slice(0,-3)),index_es_c(this,"onSessionUpdateResponse",(C,T)=>{let{id:N}=T,U=ci("session_update",N);if(0===this.events.listenerCount(U))throw Error(`emitting ${U} without any listeners`);(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("session_update",N),{}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("session_update",N),{error:T.error})}),index_es_c(this,"onSessionExtendRequest",async(C,T)=>{let{id:N}=T;try{this.isValidExtend({topic:C}),await this.setExpiry(C,ii(nb)),await this.sendResult({id:N,topic:C,result:!0}),this.client.events.emit("session_extend",{id:N,topic:C})}catch(T){await this.sendError({id:N,topic:C,error:T}),this.client.logger.error(T)}}),index_es_c(this,"onSessionExtendResponse",(C,T)=>{let{id:N}=T,U=ci("session_extend",N);if(0===this.events.listenerCount(U))throw Error(`emitting ${U} without any listeners`);(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("session_extend",N),{}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("session_extend",N),{error:T.error})}),index_es_c(this,"onSessionPingRequest",async(C,T)=>{let{id:N}=T;try{this.isValidPing({topic:C}),await this.sendResult({id:N,topic:C,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:N,topic:C})}catch(T){await this.sendError({id:N,topic:C,error:T}),this.client.logger.error(T)}}),index_es_c(this,"onSessionPingResponse",(C,T)=>{let{id:N}=T,U=ci("session_ping",N);setTimeout(()=>{if(0===this.events.listenerCount(U))throw Error(`emitting ${U} without any listeners 2176`);(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("session_ping",N),{}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("session_ping",N),{error:T.error})},500)}),index_es_c(this,"onSessionDeleteRequest",async(C,T)=>{let{id:N}=T;try{this.isValidDisconnect({topic:C,reason:T.params}),Promise.all([new Promise(T=>{this.client.core.relayer.once(i_.publish,async()=>{T(await this.deleteSession({topic:C,id:N}))})}),this.sendResult({id:N,topic:C,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:C,error:Kt("USER_DISCONNECTED")})]).catch(C=>this.client.logger.error(C))}catch(C){this.client.logger.error(C)}}),index_es_c(this,"onSessionRequest",async C=>{var T,N,U;let{topic:$,payload:Q,attestation:Y,encryptedId:X,transportType:ee}=C,{id:es,params:el}=Q;try{await this.isValidRequest(index_es_I({topic:$},el));let C=this.client.session.get($),Q=await this.getVerifyContext({attestationId:Y,hash:zc(JSON.stringify((0,ir.formatJsonRpcRequest)("wc_sessionRequest",el,es))),encryptedId:X,metadata:C.peer.metadata,transportType:ee}),ec={id:es,topic:$,params:el,verifyContext:Q};await this.setPendingSessionRequest(ec),ee===ix.link_mode&&null!=(T=C.peer.metadata.redirect)&&T.universal&&this.client.core.addLinkModeSupportedApp(null==(N=C.peer.metadata.redirect)?void 0:N.universal),null!=(U=this.client.signConfig)&&U.disableRequestQueue?this.emitSessionRequest(ec):(this.addSessionRequestToSessionRequestQueue(ec),this.processSessionRequestQueue())}catch(C){await this.sendError({id:es,topic:$,error:C}),this.client.logger.error(C)}}),index_es_c(this,"onSessionRequestResponse",(C,T)=>{let{id:N}=T,U=ci("session_request",N);if(0===this.events.listenerCount(U))throw Error(`emitting ${U} without any listeners`);(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("session_request",N),{result:T.result}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("session_request",N),{error:T.error})}),index_es_c(this,"onSessionEventRequest",async(C,T)=>{let{id:N,params:U}=T;try{let T=`${C}_session_event_${U.event.name}`,$=Ha.get(T);if($&&this.isRequestOutOfSync($,N)){this.client.logger.info(`Discarding out of sync request - ${N}`);return}this.isValidEmit(index_es_I({topic:C},U)),this.client.events.emit("session_event",{id:N,topic:C,params:U}),Ha.set(T,N)}catch(T){await this.sendError({id:N,topic:C,error:T}),this.client.logger.error(T)}}),index_es_c(this,"onSessionAuthenticateResponse",(C,T)=>{let{id:N}=T;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:C,payload:T}),(0,ir.isJsonRpcResult)(T)?this.events.emit(ci("session_request",N),{result:T.result}):(0,ir.isJsonRpcError)(T)&&this.events.emit(ci("session_request",N),{error:T.error})}),index_es_c(this,"onSessionAuthenticateRequest",async C=>{var T;let{topic:N,payload:U,attestation:$,encryptedId:Q,transportType:Y}=C;try{let{requester:C,authPayload:X,expiryTimestamp:ee}=U.params,es=await this.getVerifyContext({attestationId:$,hash:zc(JSON.stringify(U)),encryptedId:Q,metadata:C.metadata,transportType:Y}),el={requester:C,pairingTopic:N,id:U.id,authPayload:X,verifyContext:es,expiryTimestamp:ee};await this.setAuthRequest(U.id,{request:el,pairingTopic:N,transportType:Y}),Y===ix.link_mode&&null!=(T=C.metadata.redirect)&&T.universal&&this.client.core.addLinkModeSupportedApp(C.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:N,params:U.params,id:U.id,verifyContext:es})}catch(Q){this.client.logger.error(Q);let C=U.params.requester.publicKey,T=await this.client.core.crypto.generateKeyPair(),$=this.getAppLinkIfEnabled(U.params.requester.metadata,Y);await this.sendError({id:U.id,topic:N,error:Q,encodeOpts:{type:1,receiverPublicKey:C,senderPublicKey:T},rpcOpts:nw.wc_sessionAuthenticate.autoReject,appLink:$})}}),index_es_c(this,"addSessionRequestToSessionRequestQueue",C=>{this.sessionRequestQueue.queue.push(C)}),index_es_c(this,"cleanupAfterResponse",C=>{this.deletePendingSessionRequest(C.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=nv.idle,this.processSessionRequestQueue()},(0,Y.toMiliseconds)(this.requestQueueDelay))}),index_es_c(this,"cleanupPendingSentRequestsForTopic",({topic:C,error:T})=>{let N=this.client.core.history.pending;N.length>0&&N.filter(T=>T.topic===C&&"wc_sessionRequest"===T.request.method).forEach(C=>{let N=C.request.id,U=ci("session_request",N);if(0===this.events.listenerCount(U))throw Error(`emitting ${U} without any listeners`);this.events.emit(ci("session_request",C.request.id),{error:T})})}),index_es_c(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===nv.active){this.client.logger.info("session request queue is already active.");return}let C=this.sessionRequestQueue.queue[0];if(!C){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(C)}catch(C){this.client.logger.error(C)}}),index_es_c(this,"emitSessionRequest",C=>{if(this.emittedSessionRequests.has(C.id)){this.client.logger.warn({id:C.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${C.id}`);return}this.sessionRequestQueue.state=nv.active,this.emittedSessionRequests.add(C.id),this.client.events.emit("session_request",C)}),index_es_c(this,"onPairingCreated",C=>{if(C.methods&&this.expectedPairingMethodMap.set(C.topic,C.methods),C.active)return;let T=this.client.proposal.getAll().find(T=>T.pairingTopic===C.topic);T&&this.onSessionProposeRequest({topic:C.topic,payload:(0,ir.formatJsonRpcRequest)("wc_sessionPropose",index_es_x(index_es_I({},T),{requiredNamespaces:T.requiredNamespaces,optionalNamespaces:T.optionalNamespaces,relays:T.relays,proposer:T.proposer,sessionProperties:T.sessionProperties,scopedProperties:T.scopedProperties}),T.id),attestation:T.attestation,encryptedId:T.encryptedId})}),index_es_c(this,"isValidConnect",async C=>{let T;if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(C)}`);throw Error(T)}let{pairingTopic:N,requiredNamespaces:U,optionalNamespaces:$,sessionProperties:Q,scopedProperties:Y,relays:X}=C;if(kt(N)||await this.isValidPairingTopic(N),T=!1,X?X&&me(X)&&X.length&&X.forEach(C=>{T=fs(C)}):T=!0,!T){let{message:C}=Et("MISSING_OR_INVALID",`connect() relays: ${X}`);throw Error(C)}if(!kt(U)&&0!==Ve(U)){let C="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(C):this.client.logger.warn(C),this.validateNamespaces(U,"requiredNamespaces")}if(kt($)||0===Ve($)||this.validateNamespaces($,"optionalNamespaces"),kt(Q)||this.validateSessionProps(Q,"sessionProperties"),!kt(Y)){this.validateSessionProps(Y,"scopedProperties");let C=Object.keys(U||{}).concat(Object.keys($||{}));if(!Object.keys(Y).every(T=>C.includes(T.split(":")[0])))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(Y)}, required/optional namespaces: ${JSON.stringify(C)}`)}}),index_es_c(this,"validateNamespaces",(C,T)=>{let N=function(C,T,N){let U=null;if(C&&Ve(C)){let $;let Q=Dn(C,T);Q&&(U=Q);let Y=($=null,Object.entries(C).forEach(([C,U])=>{var Q,Y;let X;if($)return;let ee=(Q=ve(C,U),Y=`${T} ${N}`,X=null,me(Q)&&Q.length?Q.forEach(C=>{X||we(C)||(X=Kt("UNSUPPORTED_CHAINS",`${Y}, chain ${C} should be a string and conform to "namespace:chainId" format`))}):we(C)||(X=Kt("UNSUPPORTED_CHAINS",`${Y}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),X);ee&&($=ee)}),$);Y&&(U=Y)}else U=Et("MISSING_OR_INVALID",`${T}, ${N} should be an object with data`);return U}(C,"connect()",T);if(N)throw Error(N.message)}),index_es_c(this,"isValidApprove",async C=>{if(!Aa(C))throw Error(Et("MISSING_OR_INVALID",`approve() params: ${C}`).message);let{id:T,namespaces:N,relayProtocol:U,sessionProperties:$,scopedProperties:Q}=C;this.checkRecentlyDeleted(T),await this.isValidProposalId(T);let Y=this.client.proposal.get(T),X=is(N,"approve()");if(X)throw Error(X.message);let ee=cs(Y.requiredNamespaces,N,"approve()");if(ee)throw Error(ee.message);if(!it(U,!0)){let{message:C}=Et("MISSING_OR_INVALID",`approve() relayProtocol: ${U}`);throw Error(C)}if(kt($)||this.validateSessionProps($,"sessionProperties"),!kt(Q)){this.validateSessionProps(Q,"scopedProperties");let C=new Set(Object.keys(N));if(!Object.keys(Q).every(T=>C.has(T.split(":")[0])))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(Q)}, approved namespaces: ${Array.from(C).join(", ")}`)}}),index_es_c(this,"isValidReject",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`reject() params: ${C}`);throw Error(T)}let{id:T,reason:N}=C;if(this.checkRecentlyDeleted(T),await this.isValidProposalId(T),!N||"object"!=typeof N||!N.code||!qe(N.code,!1)||!N.message||!it(N.message,!1)){let{message:C}=Et("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(N)}`);throw Error(C)}}),index_es_c(this,"isValidSessionSettleRequest",C=>{let T;if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${C}`);throw Error(T)}let{relay:N,controller:U,namespaces:$,expiry:Q}=C;if(!fs(N)){let{message:C}=Et("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(C)}let Y=(T=null,it(U?.publicKey,!1)||(T=Et("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),T);if(Y)throw Error(Y.message);let X=is($,"onSessionSettleRequest()");if(X)throw Error(X.message);if(fi(Q)){let{message:C}=Et("EXPIRED","onSessionSettleRequest()");throw Error(C)}}),index_es_c(this,"isValidUpdate",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`update() params: ${C}`);throw Error(T)}let{topic:T,namespaces:N}=C;this.checkRecentlyDeleted(T),await this.isValidSessionTopic(T);let U=this.client.session.get(T),$=is(N,"update()");if($)throw Error($.message);let Q=cs(U.requiredNamespaces,N,"update()");if(Q)throw Error(Q.message)}),index_es_c(this,"isValidExtend",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`extend() params: ${C}`);throw Error(T)}let{topic:T}=C;this.checkRecentlyDeleted(T),await this.isValidSessionTopic(T)}),index_es_c(this,"isValidRequest",async C=>{var T;if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`request() params: ${C}`);throw Error(T)}let{topic:N,request:U,chainId:$,expiry:Q}=C;this.checkRecentlyDeleted(N),await this.isValidSessionTopic(N);let{namespaces:Y}=this.client.session.get(N);if(!_a(Y,$)){let{message:C}=Et("MISSING_OR_INVALID",`request() chainId: ${$}`);throw Error(C)}if(kt(U)||!it(U.method,!1)){let{message:C}=Et("MISSING_OR_INVALID",`request() ${JSON.stringify(U)}`);throw Error(C)}if(!(it(T=U.method,!1)&&(function(C,T){let N=[];return Object.values(C).forEach(C=>{qt(C.accounts).includes(T)&&N.push(...C.methods)}),N})(Y,$).includes(T))){let{message:C}=Et("MISSING_OR_INVALID",`request() method: ${U.method}`);throw Error(C)}if(Q&&(!qe(Q,!1)||!(Q<=n_.max)||!(Q>=n_.min))){let{message:C}=Et("MISSING_OR_INVALID",`request() expiry: ${Q}. Expiry must be a number (in seconds) between ${n_.min} and ${n_.max}`);throw Error(C)}}),index_es_c(this,"isValidRespond",async C=>{var T;if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`respond() params: ${C}`);throw Error(T)}let{topic:N,response:U}=C;try{await this.isValidSessionTopic(N)}catch(N){throw null!=(T=C?.response)&&T.id&&this.cleanupAfterResponse(C),N}if(kt(U)||kt(U.result)&&kt(U.error)||!qe(U.id,!1)||!it(U.jsonrpc,!1)){let{message:C}=Et("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(U)}`);throw Error(C)}}),index_es_c(this,"isValidPing",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`ping() params: ${C}`);throw Error(T)}let{topic:T}=C;await this.isValidSessionOrPairingTopic(T)}),index_es_c(this,"isValidEmit",async C=>{var T;if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`emit() params: ${C}`);throw Error(T)}let{topic:N,event:U,chainId:$}=C;await this.isValidSessionTopic(N);let{namespaces:Q}=this.client.session.get(N);if(!_a(Q,$)){let{message:C}=Et("MISSING_OR_INVALID",`emit() chainId: ${$}`);throw Error(C)}if(kt(U)||!it(U.name,!1)){let{message:C}=Et("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(U)}`);throw Error(C)}if(!(it(T=U.name,!1)&&(function(C,T){let N=[];return Object.values(C).forEach(C=>{qt(C.accounts).includes(T)&&N.push(...C.events)}),N})(Q,$).includes(T))){let{message:C}=Et("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(U)}`);throw Error(C)}}),index_es_c(this,"isValidDisconnect",async C=>{if(!Aa(C)){let{message:T}=Et("MISSING_OR_INVALID",`disconnect() params: ${C}`);throw Error(T)}let{topic:T}=C;await this.isValidSessionOrPairingTopic(T)}),index_es_c(this,"isValidAuthenticate",C=>{let{chains:T,uri:N,domain:U,nonce:$}=C;if(!Array.isArray(T)||0===T.length)throw Error("chains is required and must be a non-empty array");if(!it(N,!1))throw Error("uri is required parameter");if(!it(U,!1))throw Error("domain is required parameter");if(!it($,!1))throw Error("nonce is required parameter");if([...new Set(T.map(C=>Fe(C).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:Q}=Fe(T[0]);if("eip155"!==Q)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),index_es_c(this,"getVerifyContext",async C=>{let{attestationId:T,hash:N,encryptedId:U,metadata:$,transportType:Q}=C,Y={verified:{verifyUrl:$.verifyUrl||iO,validation:"UNKNOWN",origin:$.url||""}};try{if(Q===ix.link_mode){let C=this.getAppLinkIfEnabled($,Q);return Y.verified.validation=C&&new URL(C).origin===new URL($.url).origin?"VALID":"INVALID",Y}let C=await this.client.core.verify.resolve({attestationId:T,hash:N,encryptedId:U,verifyUrl:$.verifyUrl});C&&(Y.verified.origin=C.origin,Y.verified.isScam=C.isScam,Y.verified.validation=C.origin===new URL($.url).origin?"VALID":"INVALID")}catch(C){this.client.logger.warn(C)}return this.client.logger.debug(`Verify context: ${JSON.stringify(Y)}`),Y}),index_es_c(this,"validateSessionProps",(C,T)=>{Object.values(C).forEach((N,U)=>{if(null==N){let{message:$}=Et("MISSING_OR_INVALID",`${T} must contain an existing value for each key. Received: ${N} for key ${Object.keys(C)[U]}`);throw Error($)}})}),index_es_c(this,"getPendingAuthRequest",C=>{let T=this.client.auth.requests.get(C);return"object"==typeof T?T:void 0}),index_es_c(this,"addToRecentlyDeleted",(C,T)=>{if(this.recentlyDeletedMap.set(C,T),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let C=0,T=this.recentlyDeletedLimit/2;for(let N of this.recentlyDeletedMap.keys()){if(C++>=T)break;this.recentlyDeletedMap.delete(N)}}}),index_es_c(this,"checkRecentlyDeleted",C=>{let T=this.recentlyDeletedMap.get(C);if(T){let{message:N}=Et("MISSING_OR_INVALID",`Record was recently deleted - ${T}: ${C}`);throw Error(N)}}),index_es_c(this,"isLinkModeEnabled",(C,T)=>{var U,$,Q,Y,X,ee,es,el,ec;return!!C&&T===ix.link_mode&&(null==($=null==(U=this.client.metadata)?void 0:U.redirect)?void 0:$.linkMode)===!0&&(null==(Y=null==(Q=this.client.metadata)?void 0:Q.redirect)?void 0:Y.universal)!==void 0&&(null==(ee=null==(X=this.client.metadata)?void 0:X.redirect)?void 0:ee.universal)!==""&&(null==(es=C?.redirect)?void 0:es.universal)!==void 0&&(null==(el=C?.redirect)?void 0:el.universal)!==""&&(null==(ec=C?.redirect)?void 0:ec.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(C.redirect.universal)&&"u">typeof(null==N.g?void 0:N.g.Linking)}),index_es_c(this,"getAppLinkIfEnabled",(C,T)=>{var N;return this.isLinkModeEnabled(C,T)?null==(N=C?.redirect)?void 0:N.universal:void 0}),index_es_c(this,"handleLinkModeMessage",({url:C})=>{if(!C||!C.includes("wc_ev")||!C.includes("topic"))return;let T=li(C,"topic")||"",N=decodeURIComponent(li(C,"wc_ev")||""),U=this.client.session.keys.includes(T);U&&this.client.session.update(T,{transportType:ix.link_mode}),this.client.core.dispatchEnvelope({topic:T,message:N,sessionExists:U})}),index_es_c(this,"registerLinkModeListeners",async()=>{var C;if(hi()||Bt()&&null!=(C=this.client.metadata.redirect)&&C.linkMode){let C=null==N.g?void 0:N.g.Linking;if("u">typeof C){C.addEventListener("url",this.handleLinkModeMessage,this.client.name);let T=await C.getInitialURL();T&&setTimeout(()=>{this.handleLinkModeMessage({url:T})},50)}}}),index_es_c(this,"getTVFParams",(C,T,N)=>{var U,$,Q;if(!(null!=(U=T.request)&&U.method))return{};let Y={correlationId:C,rpcMethods:[T.request.method],chainId:T.chainId};try{let C=this.extractTxHashesFromResult(T.request,N);Y.txHashes=C,Y.contractAddresses=this.isValidContractData(T.request.params)?[null==(Q=null==($=T.request.params)?void 0:$[0])?void 0:Q.to]:[]}catch(C){this.client.logger.warn("Error getting TVF params",C)}return Y}),index_es_c(this,"isValidContractData",C=>{var T;if(!C)return!1;try{let N=C?.data||(null==(T=C?.[0])?void 0:T.data);if(!N.startsWith("0x"))return!1;let U=N.slice(2);return!!/^[0-9a-fA-F]*$/.test(U)&&U.length%2==0}catch{}return!1}),index_es_c(this,"extractTxHashesFromResult",(C,T)=>{var N;try{if(!T)return[];let U=C.method,$=nE[U];if("sui_signTransaction"===U)return[function(C){let T=new Uint8Array(e0.from(C,"base64")),N=Array.from("TransactionData::").map(C=>C.charCodeAt(0)),U=new Uint8Array(N.length+T.length);U.set(N),U.set(T,N.length);let $=tH(U,{dkLen:32});return eO.encode($)}(T.transactionBytes)];if("near_signTransaction"===U)return[cf(T)];if("near_signTransactions"===U)return T.map(C=>cf(C));if("xrpl_signTransactionFor"===U||"xrpl_signTransaction"===U)return[null==(N=T.tx_json)?void 0:N.hash];if("polkadot_signTransaction"===U)return[function(C){let T=Uint8Array.from(e0.from(C.signature,"hex")),N=function(C){let T=eO.decode(C);if(T.length<33)throw Error("Too short to contain a public key");return T.slice(1,33)}(C.transaction.address),U=function({publicKey:C,signature:T,payload:N}){var U,$;let Q=Vn(N.method),Y=128|parseInt((null==(U=N.version)?void 0:U.toString())||"4"),X=function(C){let T=eO.decode(C)[0];return 42===T?0:60===T?2:1}(N.address),ee="00"===N.era?new Uint8Array([0]):Vn(N.era);if(1!==ee.length&&2!==ee.length)throw Error("Invalid era length");let es=parseInt(N.nonce,16),el=new Uint8Array([255&es,es>>8&255]),ec=BigInt(`0x${($=N.tip).startsWith("0x")?$.slice(2):$}`),eh=function(C){if(C<BigInt(1)<<BigInt(6))return new Uint8Array([Number(C<<BigInt(2))]);if(C<BigInt(1)<<BigInt(14)){let T=C<<BigInt(2)|BigInt(1);return new Uint8Array([Number(T&BigInt(255)),Number(T>>BigInt(8)&BigInt(255))])}if(C<BigInt(1)<<BigInt(30)){let T=C<<BigInt(2)|BigInt(2);return new Uint8Array([Number(T&BigInt(255)),Number(T>>BigInt(8)&BigInt(255)),Number(T>>BigInt(16)&BigInt(255)),Number(T>>BigInt(24)&BigInt(255))])}throw Error("BigInt compact encoding not supported > 2^30")}(ec),eu=new Uint8Array([0,...C,X,...T,...ee,...el,...eh,...Q]),ed=function(C){if(C<64)return new Uint8Array([C<<2]);if(C<16384){let T=C<<2|1;return new Uint8Array([255&T,T>>8&255])}if(C<1073741824){let T=C<<2|2;return new Uint8Array([255&T,T>>8&255,T>>16&255,T>>24&255])}throw Error("Compact encoding > 2^30 not supported")}(eu.length+1);return new Uint8Array([...ed,Y,...eu])}({publicKey:N,signature:T,payload:C.transaction}),$=e0.from(U).toString("hex");return function(C){let T=Vn(C),N=(0,eY.blake2b)(T,void 0,32);return"0x"+e0.from(N).toString("hex")}($)}({transaction:C.params.transactionPayload,signature:T.signature})];if("algo_signTxn"===U)return me(T)?T.map(C=>af(C)):[af(T)];if("cosmos_signDirect"===U)return[function(C){let T=e0.from(C.signed.bodyBytes,"base64"),N=e0.from(C.signed.authInfoBytes,"base64"),U=e0.from(C.signature.signature,"base64"),$=[];$.push(e0.from([10])),$.push(un(T.length)),$.push(T),$.push(e0.from([18])),$.push(un(N.length)),$.push(N),$.push(e0.from([26])),$.push(un(U.length)),$.push(U);let Q=e0.concat($),Y=tU(Q);return e0.from(Y).toString("hex").toUpperCase()}(T)];if("string"==typeof T)return[T];let Q=T[$.key];if(me(Q))return"solana_signAllTransactions"===U?Q.map(C=>(function(C){let T=atob(C),N=new Uint8Array(T.length);for(let C=0;C<T.length;C++)N[C]=T.charCodeAt(C);let U=N[0];if(0===U)throw Error("No signatures found");if(N.length<1+64*U)throw Error("Transaction data too short for claimed signature count");if(N.length<100)throw Error("Transaction too short");let $=e0.from(C,"base64").slice(1,65);return eO.encode($)})(C)):Q;if("string"==typeof Q)return[Q]}catch(C){this.client.logger.warn("Error extracting tx hashes from result",C)}return[]})}async processPendingMessageEvents(){try{let C=this.client.session.keys,T=this.client.core.relayer.messages.getWithoutAck(C);for(let[C,N]of Object.entries(T))for(let T of N)try{await this.onProviderMessageEvent({topic:C,message:T,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${C}, message: ${T}`)}}catch(C){this.client.logger.warn("processPendingMessageEvents failed",C)}}isInitialized(){if(!this.initialized){let{message:C}=Et("NOT_INITIALIZED",this.name);throw Error(C)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(i_.message,C=>{this.onProviderMessageEvent(C)})}async onRelayMessage(C){let{topic:T,message:N,attestation:U,transportType:$}=C,{publicKey:Q}=this.client.auth.authKeys.keys.includes(nI)?this.client.auth.authKeys.get(nI):{responseTopic:void 0,publicKey:void 0};try{let C=await this.client.core.crypto.decode(T,N,{receiverPublicKey:Q,encoding:$===ix.link_mode?rK:rV});(0,ir.isJsonRpcRequest)(C)?(this.client.core.history.set(T,C),await this.onRelayEventRequest({topic:T,payload:C,attestation:U,transportType:$,encryptedId:zc(N)})):(0,ir.isJsonRpcResponse)(C)?(await this.client.core.history.resolve(C),await this.onRelayEventResponse({topic:T,payload:C,transportType:$}),this.client.core.history.delete(T,C.id)):await this.onRelayEventUnknownPayload({topic:T,payload:C,transportType:$}),await this.client.core.relayer.messages.ack(T,N)}catch(C){this.client.logger.error(C)}}registerExpirerEvents(){this.client.core.expirer.on(iC.expired,async C=>{let{topic:T,id:N}=si(C.target);return N&&this.client.pendingRequest.keys.includes(N)?await this.deletePendingSessionRequest(N,Et("EXPIRED"),!0):N&&this.client.auth.requests.keys.includes(N)?await this.deletePendingAuthRequest(N,Et("EXPIRED"),!0):void(T?this.client.session.keys.includes(T)&&(await this.deleteSession({topic:T,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:T})):N&&(await this.deleteProposal(N,!0),this.client.events.emit("proposal_expire",{id:N})))})}registerPairingEvents(){this.client.core.pairing.events.on(iD.create,C=>this.onPairingCreated(C)),this.client.core.pairing.events.on(iD.delete,C=>{this.addToRecentlyDeleted(C.topic,"pairing")})}isValidPairingTopic(C){if(!it(C,!1)){let{message:T}=Et("MISSING_OR_INVALID",`pairing topic should be a string: ${C}`);throw Error(T)}if(!this.client.core.pairing.pairings.keys.includes(C)){let{message:T}=Et("NO_MATCHING_KEY",`pairing topic doesn't exist: ${C}`);throw Error(T)}if(fi(this.client.core.pairing.pairings.get(C).expiry)){let{message:T}=Et("EXPIRED",`pairing topic: ${C}`);throw Error(T)}}async isValidSessionTopic(C){if(!it(C,!1)){let{message:T}=Et("MISSING_OR_INVALID",`session topic should be a string: ${C}`);throw Error(T)}if(this.checkRecentlyDeleted(C),!this.client.session.keys.includes(C)){let{message:T}=Et("NO_MATCHING_KEY",`session topic doesn't exist: ${C}`);throw Error(T)}if(fi(this.client.session.get(C).expiry)){await this.deleteSession({topic:C});let{message:T}=Et("EXPIRED",`session topic: ${C}`);throw Error(T)}if(!this.client.core.crypto.keychain.has(C)){let{message:T}=Et("MISSING_OR_INVALID",`session topic does not exist in keychain: ${C}`);throw await this.deleteSession({topic:C}),Error(T)}}async isValidSessionOrPairingTopic(C){if(this.checkRecentlyDeleted(C),this.client.session.keys.includes(C))await this.isValidSessionTopic(C);else if(this.client.core.pairing.pairings.keys.includes(C))this.isValidPairingTopic(C);else if(it(C,!1)){let{message:T}=Et("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${C}`);throw Error(T)}else{let{message:T}=Et("MISSING_OR_INVALID",`session or pairing topic should be a string: ${C}`);throw Error(T)}}async isValidProposalId(C){if("number"!=typeof C){let{message:T}=Et("MISSING_OR_INVALID",`proposal id should be a number: ${C}`);throw Error(T)}if(!this.client.proposal.keys.includes(C)){let{message:T}=Et("NO_MATCHING_KEY",`proposal id doesn't exist: ${C}`);throw Error(T)}if(fi(this.client.proposal.get(C).expiryTimestamp)){await this.deleteProposal(C);let{message:T}=Et("EXPIRED",`proposal id: ${C}`);throw Error(T)}}};let index_es_ks=class index_es_ks extends index_es_Li{constructor(C,T){super(C,T,"proposal",np),this.core=C,this.logger=T}};let index_es_vt=class index_es_vt extends index_es_Li{constructor(C,T){super(C,T,"session",np),this.core=C,this.logger=T}};let index_es_Ds=class index_es_Ds extends index_es_Li{constructor(C,T){super(C,T,"request",np,C=>C.id),this.core=C,this.logger=T}};let index_es_Ls=class index_es_Ls extends index_es_Li{constructor(C,T){super(C,T,"authKeys",nA,()=>nI),this.core=C,this.logger=T}};let index_es_Ms=class index_es_Ms extends index_es_Li{constructor(C,T){super(C,T,"pairingTopics",nA),this.core=C,this.logger=T}};let index_es_$s=class index_es_$s extends index_es_Li{constructor(C,T){super(C,T,"requests",nA,C=>C.id),this.core=C,this.logger=T}};var nR=Object.defineProperty,index_es_Us=(C,T,N)=>T in C?nR(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_Ke=(C,T,N)=>index_es_Us(C,"symbol"!=typeof T?T+"":T,N);let index_es_Gs=class index_es_Gs{constructor(C,T){this.core=C,this.logger=T,index_es_Ke(this,"authKeys"),index_es_Ke(this,"pairingTopics"),index_es_Ke(this,"requests"),this.authKeys=new index_es_Ls(this.core,this.logger),this.pairingTopics=new index_es_Ms(this.core,this.logger),this.requests=new index_es_$s(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var nT=Object.defineProperty,index_es_Fs=(C,T,N)=>T in C?nT(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_f=(C,T,N)=>index_es_Fs(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_Ee=class dist_index_es_Ee extends index_es_J{constructor(C){super(C),dist_index_es_f(this,"protocol","wc"),dist_index_es_f(this,"version",2),dist_index_es_f(this,"name",ng.name),dist_index_es_f(this,"metadata"),dist_index_es_f(this,"core"),dist_index_es_f(this,"logger"),dist_index_es_f(this,"events",new U.EventEmitter),dist_index_es_f(this,"engine"),dist_index_es_f(this,"session"),dist_index_es_f(this,"proposal"),dist_index_es_f(this,"pendingRequest"),dist_index_es_f(this,"auth"),dist_index_es_f(this,"signConfig"),dist_index_es_f(this,"on",(C,T)=>this.events.on(C,T)),dist_index_es_f(this,"once",(C,T)=>this.events.once(C,T)),dist_index_es_f(this,"off",(C,T)=>this.events.off(C,T)),dist_index_es_f(this,"removeListener",(C,T)=>this.events.removeListener(C,T)),dist_index_es_f(this,"removeAllListeners",C=>this.events.removeAllListeners(C)),dist_index_es_f(this,"connect",async C=>{try{return await this.engine.connect(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"pair",async C=>{try{return await this.engine.pair(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"approve",async C=>{try{return await this.engine.approve(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"reject",async C=>{try{return await this.engine.reject(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"update",async C=>{try{return await this.engine.update(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"extend",async C=>{try{return await this.engine.extend(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"request",async C=>{try{return await this.engine.request(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"respond",async C=>{try{return await this.engine.respond(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"ping",async C=>{try{return await this.engine.ping(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"emit",async C=>{try{return await this.engine.emit(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"disconnect",async C=>{try{return await this.engine.disconnect(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"find",C=>{try{return this.engine.find(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"authenticate",async(C,T)=>{try{return await this.engine.authenticate(C,T)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"formatAuthMessage",C=>{try{return this.engine.formatAuthMessage(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"approveSessionAuthenticate",async C=>{try{return await this.engine.approveSessionAuthenticate(C)}catch(C){throw this.logger.error(C.message),C}}),dist_index_es_f(this,"rejectSessionAuthenticate",async C=>{try{return await this.engine.rejectSessionAuthenticate(C)}catch(C){throw this.logger.error(C.message),C}}),this.name=C?.name||ng.name,this.metadata=function(C){var T,N;let U=sr();try{return null!=C&&C.url&&U.url&&new URL(C.url).host!==new URL(U.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${C.url} differs from the actual page url:${U.url}. This is probably unintended and can lead to issues.`),C.url=U.url),null!=(T=C?.icons)&&T.length&&C.icons.length>0&&(C.icons=C.icons.filter(C=>""!==C)),Ps(Qn(Qn({},U),C),{url:C?.url||U.url,name:C?.name||U.name,description:C?.description||U.description,icons:null!=(N=C?.icons)&&N.length&&C.icons.length>0?C.icons:U.icons})}catch(T){return console.warn("Error populating app metadata",T),C||U}}(C?.metadata),this.signConfig=C?.signConfig;let T="u">typeof C?.logger&&"string"!=typeof C?.logger?C.logger:(0,r8.gw)((0,r8.jI)({level:C?.logger||ng.logger}));this.core=C?.core||new index_es_Te(C),this.logger=(0,r8.Ep)(T,this.name),this.session=new index_es_vt(this.core,this.logger),this.proposal=new index_es_ks(this.core,this.logger),this.pendingRequest=new index_es_Ds(this.core,this.logger),this.engine=new index_es_Cs(this),this.auth=new index_es_Gs(this.core,this.logger)}static async init(C){let T=new dist_index_es_Ee(C);return await T.initialize(),T}get context(){return(0,r8.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(C){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(C.message),C}}};var nN=N(8900),nk=N(8764).lW;let nU="error",nL="wc@2:universal_provider:",nM="https://rpc.walletconnect.org/v1/",nF="generic",nj=`${nM}bundler`,nz={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function dist_index_es_W(C){return null==C||"object"!=typeof C&&"function"!=typeof C}function index_es_at(C){return Object.getOwnPropertySymbols(C).filter(T=>Object.prototype.propertyIsEnumerable.call(C,T))}function index_es_ct(C){return null==C?void 0===C?"[object Undefined]":"[object Null]":Object.prototype.toString.call(C)}let nq="[object String]",nH="[object Number]",nV="[object Boolean]",nK="[object Arguments]";function index_es_K(C){return ArrayBuffer.isView(C)&&!(C instanceof DataView)}function universal_provider_dist_index_es_$(C,T,N,U=new Map,$){let Q=$?.(C,T,N,U);if(null!=Q)return Q;if(dist_index_es_W(C))return C;if(U.has(C))return U.get(C);if(Array.isArray(C)){let T=Array(C.length);U.set(C,T);for(let Q=0;Q<C.length;Q++)T[Q]=universal_provider_dist_index_es_$(C[Q],Q,N,U,$);return Object.hasOwn(C,"index")&&(T.index=C.index),Object.hasOwn(C,"input")&&(T.input=C.input),T}if(C instanceof Date)return new Date(C.getTime());if(C instanceof RegExp){let T=new RegExp(C.source,C.flags);return T.lastIndex=C.lastIndex,T}if(C instanceof Map){let T=new Map;for(let[Q,Y]of(U.set(C,T),C))T.set(Q,universal_provider_dist_index_es_$(Y,Q,N,U,$));return T}if(C instanceof Set){let T=new Set;for(let Q of(U.set(C,T),C))T.add(universal_provider_dist_index_es_$(Q,void 0,N,U,$));return T}if("u">typeof nk&&nk.isBuffer(C))return C.subarray();if(index_es_K(C)){let T=new(Object.getPrototypeOf(C)).constructor(C.length);U.set(C,T);for(let Q=0;Q<C.length;Q++)T[Q]=universal_provider_dist_index_es_$(C[Q],Q,N,U,$);return T}if(C instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&C instanceof SharedArrayBuffer)return C.slice(0);if(C instanceof DataView){let T=new DataView(C.buffer.slice(0),C.byteOffset,C.byteLength);return U.set(C,T),dist_index_es_y(T,C,N,U,$),T}if("u">typeof File&&C instanceof File){let T=new File([C],C.name,{type:C.type});return U.set(C,T),dist_index_es_y(T,C,N,U,$),T}if(C instanceof Blob){let T=new Blob([C],{type:C.type});return U.set(C,T),dist_index_es_y(T,C,N,U,$),T}if(C instanceof Error){let T=new C.constructor;return U.set(C,T),T.message=C.message,T.name=C.name,T.stack=C.stack,T.cause=C.cause,dist_index_es_y(T,C,N,U,$),T}if("object"==typeof C&&function(C){switch(index_es_ct(C)){case nK:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case nV:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case nH:case"[object Object]":case"[object RegExp]":case"[object Set]":case nq:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(C)){let T=Object.create(Object.getPrototypeOf(C));return U.set(C,T),dist_index_es_y(T,C,N,U,$),T}return C}function dist_index_es_y(C,T,N=C,U,$){let Q=[...Object.keys(T),...index_es_at(T)];for(let Y=0;Y<Q.length;Y++){let X=Q[Y],ee=Object.getOwnPropertyDescriptor(C,X);(null==ee||ee.writable)&&(C[X]=universal_provider_dist_index_es_$(T[X],X,N,U,$))}}function dist_index_es_ut(C){return universal_provider_dist_index_es_$(C,void 0,C,new Map,(T,N,U,$)=>{let Q=void 0;if(null!=Q)return Q;if("object"==typeof C)switch(Object.prototype.toString.call(C)){case nH:case nq:case nV:{let T=new C.constructor(C?.valueOf());return dist_index_es_y(T,C),T}case nK:{let T={};return dist_index_es_y(T,C),T.length=C.length,T[Symbol.iterator]=C[Symbol.iterator],T}default:return}})}function index_es_lt(C){return null!==C&&"object"==typeof C&&"[object Arguments]"===index_es_ct(C)}function index_es_ft(C){return"object"==typeof C&&null!==C}function dist_index_es_he(){}var nG=Object.defineProperty,n$=Object.defineProperties,nQ=Object.getOwnPropertyDescriptors,nJ=Object.getOwnPropertySymbols,nW=Object.prototype.hasOwnProperty,nZ=Object.prototype.propertyIsEnumerable,dist_index_es_vt=(C,T,N)=>T in C?nG(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_L=(C,T)=>{for(var N in T||(T={}))nW.call(T,N)&&dist_index_es_vt(C,N,T[N]);if(nJ)for(var N of nJ(T))nZ.call(T,N)&&dist_index_es_vt(C,N,T[N]);return C},dist_index_es_ye=(C,T)=>n$(C,nQ(T));function index_es_u(C,T,N){var U;let $=Fe(C);return(null==(U=T.rpcMap)?void 0:U[$.reference])||`${nM}?chainId=${$.namespace}:${$.reference}&projectId=${N}`}function index_es_b(C){return C.includes(":")?C.split(":")[1]:C}function dist_index_es_gt(C){return C.map(C=>`${C.split(":")[0]}:${C.split(":")[1]}`)}function universal_provider_dist_index_es_M(C={},T={}){let N=dist_index_es_Pt(C),U=dist_index_es_Pt(T);return function(C,...T){return function(C,...T){let N=T.slice(0,-1),U=T[T.length-1],$=C;for(let C=0;C<N.length;C++){let T=N[C];$=function dist_index_es_x(C,T,N,U){if(dist_index_es_W(C)&&(C=Object(C)),null==T||"object"!=typeof T)return C;if(U.has(T))return function(C){if(dist_index_es_W(C))return C;if(Array.isArray(C)||index_es_K(C)||C instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&C instanceof SharedArrayBuffer)return C.slice(0);let T=Object.getPrototypeOf(C),N=T.constructor;if(C instanceof Date||C instanceof Map||C instanceof Set)return new N(C);if(C instanceof RegExp){let T=new N(C);return T.lastIndex=C.lastIndex,T}if(C instanceof DataView)return new N(C.buffer.slice(0));if(C instanceof Error){let T=new N(C.message);return T.stack=C.stack,T.name=C.name,T.cause=C.cause,T}if("u">typeof File&&C instanceof File)return new N([C],C.name,{type:C.type,lastModified:C.lastModified});if("object"==typeof C){let N=Object.create(T);return Object.assign(N,C)}return C}(U.get(T));if(U.set(T,C),Array.isArray(T)){T=T.slice();for(let C=0;C<T.length;C++)T[C]=T[C]??void 0}let $=[...Object.keys(T),...index_es_at(T)];for(let Q=0;Q<$.length;Q++){let Y=$[Q],X=T[Y],ee=C[Y];if(index_es_lt(X)&&(X={...X}),index_es_lt(ee)&&(ee={...ee}),"u">typeof nk&&nk.isBuffer(X)&&(X=dist_index_es_ut(X)),Array.isArray(X)){if("object"==typeof ee&&null!=ee){let C=[],T=Reflect.ownKeys(ee);for(let N=0;N<T.length;N++){let U=T[N];C[U]=ee[U]}ee=C}else ee=[]}let es=N(ee,X,Y,C,T,U);null!=es?C[Y]=es:Array.isArray(X)||index_es_ft(ee)&&index_es_ft(X)?C[Y]=dist_index_es_x(ee,X,N,U):null==ee&&function(C){if("object"!=typeof C||null==C)return!1;if(null===Object.getPrototypeOf(C))return!0;if("[object Object]"!==Object.prototype.toString.call(C)){let T=C[Symbol.toStringTag];return!!(null!=T&&Object.getOwnPropertyDescriptor(C,Symbol.toStringTag)?.writable)&&C.toString()===`[object ${T}]`}let T=C;for(;null!==Object.getPrototypeOf(T);)T=Object.getPrototypeOf(T);return Object.getPrototypeOf(C)===T}(X)?C[Y]=dist_index_es_x({},X,N,U):null==ee&&index_es_K(X)?C[Y]=dist_index_es_ut(X):(void 0===ee||void 0!==X)&&(C[Y]=X)}return C}($,T,U,new Map)}return $}(C,...T,dist_index_es_he)}(N,U)}function dist_index_es_Pt(C){var T,N,U,$,Q;let Y={};if(!Ve(C))return Y;for(let[X,ee]of Object.entries(C)){let C=Pn(X)?[X]:ee.chains,es=ee.methods||[],el=ee.events||[],ec=ee.rpcMap||{},eh=Yo(X);Y[eh]=dist_index_es_ye(index_es_L(index_es_L({},Y[eh]),ee),{chains:ct(C,null==(T=Y[eh])?void 0:T.chains),methods:ct(es,null==(N=Y[eh])?void 0:N.methods),events:ct(el,null==(U=Y[eh])?void 0:U.events)}),(Ve(ec)||Ve((null==($=Y[eh])?void 0:$.rpcMap)||{}))&&(Y[eh].rpcMap=index_es_L(index_es_L({},ec),null==(Q=Y[eh])?void 0:Q.rpcMap))}return Y}function dist_index_es_wt(C){return C.includes(":")?C.split(":")[2]:C}function index_es_yt(C){let T={};for(let[N,U]of Object.entries(C)){let C=U.methods||[],$=U.events||[],Q=U.accounts||[],Y=Pn(N)?[N]:U.chains?U.chains:dist_index_es_gt(U.accounts);T[N]={chains:Y,methods:C,events:$,accounts:Q}}return T}function dist_index_es_V(C){return"number"==typeof C?C:C.includes("0x")?parseInt(C,16):isNaN(Number(C=C.includes(":")?C.split(":")[1]:C))?C:Number(C)}let nY={},index_es_h=C=>nY[C],dist_index_es_X=(C,T)=>{nY[C]=T};var nX=Object.defineProperty,n0=Object.getOwnPropertySymbols,n1=Object.prototype.hasOwnProperty,n2=Object.prototype.propertyIsEnumerable,dist_index_es_$t=(C,T,N)=>T in C?nX(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_Ot=(C,T)=>{for(var N in T||(T={}))n1.call(T,N)&&dist_index_es_$t(C,N,T[N]);if(n0)for(var N of n0(T))n2.call(T,N)&&dist_index_es_$t(C,N,T[N]);return C};let n3="eip155",n8=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],universal_provider_dist_index_es_Ce=C=>C&&C.startsWith("0x")?BigInt(C).toString(10):C,dist_index_es_Y=C=>C&&C.startsWith("0x")?C:`0x${BigInt(C).toString(16)}`,dist_index_es_Ct=C=>Object.keys(C).filter(C=>n8.includes(C)).reduce((T,N)=>(T[N]=C[N],T),{}),universal_provider_dist_index_es_Ee=(C,T,N)=>{let{sessionProperties:U={},scopedProperties:$={}}=C,Q={};if(!Ve($)&&!Ve(U))return;let Y=dist_index_es_Ct(U);for(let C of N){let N=universal_provider_dist_index_es_Ce(C);if(!N)continue;Q[dist_index_es_Y(N)]=Y;let U=$?.[`${n3}:${N}`];if(U){let C=U?.[`${n3}:${N}:${T}`];Q[dist_index_es_Y(N)]=dist_index_es_Ot(dist_index_es_Ot({},Q[dist_index_es_Y(N)]),dist_index_es_Ct(C||U))}}for(let[C,T]of Object.entries(Q))0===Object.keys(T).length&&delete Q[C];return Object.keys(Q).length>0?Q:void 0};var n4=Object.defineProperty,index_es_Se=(C,T,N)=>T in C?n4(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_O=(C,T,N)=>index_es_Se(C,"symbol"!=typeof T?T+"":T,N);let index_es_Ne=class index_es_Ne{constructor(C){dist_index_es_O(this,"name","polkadot"),dist_index_es_O(this,"client"),dist_index_es_O(this,"httpProviders"),dist_index_es_O(this,"events"),dist_index_es_O(this,"namespace"),dist_index_es_O(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}getAccounts(){let C=this.namespace.accounts;return C&&C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2])||[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=index_es_b(T);C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var n6=Object.defineProperty,n5=Object.defineProperties,n9=Object.getOwnPropertyDescriptors,n7=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,dist_index_es_Q=(C,T,N)=>T in C?n6(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_Ht=(C,T)=>{for(var N in T||(T={}))oe.call(T,N)&&dist_index_es_Q(C,N,T[N]);if(n7)for(var N of n7(T))ot.call(T,N)&&dist_index_es_Q(C,N,T[N]);return C},universal_provider_dist_index_es_St=(C,T)=>n5(C,n9(T)),index_es_A=(C,T,N)=>dist_index_es_Q(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_Fe=class dist_index_es_Fe{constructor(C){index_es_A(this,"name","eip155"),index_es_A(this,"client"),index_es_A(this,"chainId"),index_es_A(this,"namespace"),index_es_A(this,"httpProviders"),index_es_A(this,"events"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(C){switch(C.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(C);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(C);case"wallet_getCallsStatus":return await this.getCallStatus(C)}return this.namespace.methods.includes(C.request.method)?await this.client.request(C):this.getHttpProvider().request(C.request)}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(parseInt(C),T),this.chainId=parseInt(C),this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}createHttpProvider(C,T){let N=T||index_es_u(`${this.name}:${C}`,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.k(N,index_es_h("disableProviderPing")))}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=parseInt(index_es_b(T));C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}getHttpProvider(){let C=this.chainId,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}async handleSwitchChain(C){var T,N;let U=C.request.params?null==(T=C.request.params[0])?void 0:T.chainId:"0x0";U=U.startsWith("0x")?U:`0x${U}`;let $=parseInt(U,16);if(this.isChainApproved($))this.setDefaultChain(`${$}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:C.topic,request:{method:C.request.method,params:[{chainId:U}]},chainId:null==(N=this.namespace.chains)?void 0:N[0]}),this.setDefaultChain(`${$}`);else throw Error(`Failed to switch to chain 'eip155:${$}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(C){return this.namespace.chains.includes(`${this.name}:${C}`)}async getCapabilities(C){var T,N,U,$,Q;let Y;let X=null==(N=null==(T=C.request)?void 0:T.params)?void 0:N[0],ee=(null==($=null==(U=C.request)?void 0:U.params)?void 0:$[1])||[];if(!X)throw Error("Missing address parameter in `wallet_getCapabilities` request");let es=this.client.session.get(C.topic),el=(null==(Q=es?.sessionProperties)?void 0:Q.capabilities)||{},ec=`${X}${ee.join(",")}`,eh=el?.[ec];if(eh)return eh;try{Y=universal_provider_dist_index_es_Ee(es,X,ee)}catch(C){console.warn("Failed to extract capabilities from session",C)}if(Y)return Y;let eu=await this.client.request(C);try{await this.client.session.update(C.topic,{sessionProperties:universal_provider_dist_index_es_St(dist_index_es_Ht({},es.sessionProperties||{}),{capabilities:universal_provider_dist_index_es_St(dist_index_es_Ht({},el||{}),{[ec]:eu})})})}catch(C){console.warn("Failed to update session with capabilities",C)}return eu}async getCallStatus(C){var T,N;let U=this.client.session.get(C.topic),$=null==(T=U.sessionProperties)?void 0:T.bundler_name;if($){let T=this.getBundlerUrl(C.chainId,$);try{return await this.getUserOperationReceipt(T,C)}catch(C){console.warn("Failed to fetch call status from bundler",C,T)}}let Q=null==(N=U.sessionProperties)?void 0:N.bundler_url;if(Q)try{return await this.getUserOperationReceipt(Q,C)}catch(C){console.warn("Failed to fetch call status from custom bundler",C,Q)}if(this.namespace.methods.includes(C.request.method))return await this.client.request(C);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(C,T){var N;let U=new URL(C),$=await fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,ir.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(N=T.request.params)?void 0:N[0]]))});if(!$.ok)throw Error(`Failed to fetch user operation receipt - ${$.status}`);return await $.json()}getBundlerUrl(C,T){return`${nj}?projectId=${this.client.core.projectId}&chainId=${C}&bundler=${T}`}};var oi=Object.defineProperty,index_es_xe=(C,T,N)=>T in C?oi(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_C=(C,T,N)=>index_es_xe(C,"symbol"!=typeof T?T+"":T,N);let universal_provider_dist_index_es_Le=class universal_provider_dist_index_es_Le{constructor(C){dist_index_es_C(this,"name","solana"),dist_index_es_C(this,"client"),dist_index_es_C(this,"httpProviders"),dist_index_es_C(this,"events"),dist_index_es_C(this,"namespace"),dist_index_es_C(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=index_es_b(T);C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var os=Object.defineProperty,dist_index_es_Be=(C,T,N)=>T in C?os(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_E=(C,T,N)=>dist_index_es_Be(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_Ge=class dist_index_es_Ge{constructor(C){dist_index_es_E(this,"name","cosmos"),dist_index_es_E(this,"client"),dist_index_es_E(this,"httpProviders"),dist_index_es_E(this,"events"),dist_index_es_E(this,"namespace"),dist_index_es_E(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=index_es_b(T);C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var oo=Object.defineProperty,dist_index_es_ze=(C,T,N)=>T in C?oo(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_H=(C,T,N)=>dist_index_es_ze(C,"symbol"!=typeof T?T+"":T,N);let universal_provider_dist_index_es_ke=class universal_provider_dist_index_es_ke{constructor(C){index_es_H(this,"name","algorand"),index_es_H(this,"client"),index_es_H(this,"httpProviders"),index_es_H(this,"events"),index_es_H(this,"namespace"),index_es_H(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){if(!this.httpProviders[C]){let N=T||index_es_u(`${this.name}:${C}`,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);this.setHttpProvider(C,N)}this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;C[T]=this.createHttpProvider(T,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);return typeof N>"u"?void 0:new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var ol=Object.defineProperty,dist_index_es_Ke=(C,T,N)=>T in C?ol(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_S=(C,T,N)=>dist_index_es_Ke(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_Ve=class dist_index_es_Ve{constructor(C){dist_index_es_S(this,"name","cip34"),dist_index_es_S(this,"client"),dist_index_es_S(this,"httpProviders"),dist_index_es_S(this,"events"),dist_index_es_S(this,"namespace"),dist_index_es_S(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{let N=this.getCardanoRPCUrl(T),U=index_es_b(T);C[U]=this.createHttpProvider(U,N)}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}getCardanoRPCUrl(C){let T=this.namespace.rpcMap;if(T)return T[C]}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||this.getCardanoRPCUrl(C);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var oc=Object.defineProperty,dist_index_es_Ye=(C,T,N)=>T in C?oc(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_N=(C,T,N)=>dist_index_es_Ye(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_Qe=class dist_index_es_Qe{constructor(C){dist_index_es_N(this,"name","elrond"),dist_index_es_N(this,"client"),dist_index_es_N(this,"httpProviders"),dist_index_es_N(this,"events"),dist_index_es_N(this,"namespace"),dist_index_es_N(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=index_es_b(T);C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var oh=Object.defineProperty,dist_index_es_Te=(C,T,N)=>T in C?oh(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,D=(C,T,N)=>dist_index_es_Te(C,"symbol"!=typeof T?T+"":T,N);let index_es_ts=class index_es_ts{constructor(C){D(this,"name","multiversx"),D(this,"client"),D(this,"httpProviders"),D(this,"events"),D(this,"namespace"),D(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;let U=index_es_b(T);C[U]=this.createHttpProvider(U,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var ou=Object.defineProperty,index_es_ss=(C,T,N)=>T in C?ou(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,q=(C,T,N)=>index_es_ss(C,"symbol"!=typeof T?T+"":T,N);let index_es_is=class index_es_is{constructor(C){q(this,"name","near"),q(this,"client"),q(this,"httpProviders"),q(this,"events"),q(this,"namespace"),q(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){if(this.chainId=C,!this.httpProviders[C]){let N=T||index_es_u(`${this.name}:${C}`,this.namespace);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);this.setHttpProvider(C,N)}this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let C=this.namespace.accounts;return C&&C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2])||[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{var N;C[T]=this.createHttpProvider(T,null==(N=this.namespace.rpcMap)?void 0:N[T])}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace);return typeof N>"u"?void 0:new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var od=Object.defineProperty,index_es_ns=(C,T,N)=>T in C?od(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_j=(C,T,N)=>index_es_ns(C,"symbol"!=typeof T?T+"":T,N);let index_es_as=class index_es_as{constructor(C){index_es_j(this,"name","tezos"),index_es_j(this,"client"),index_es_j(this,"httpProviders"),index_es_j(this,"events"),index_es_j(this,"namespace"),index_es_j(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace=Object.assign(this.namespace,C)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider().request(C.request)}setDefaultChain(C,T){if(this.chainId=C,!this.httpProviders[C]){let N=T||index_es_u(`${this.name}:${C}`,this.namespace);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);this.setHttpProvider(C,N)}this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let C=this.namespace.accounts;return C&&C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2])||[]}createHttpProviders(){let C={};return this.namespace.chains.forEach(T=>{C[T]=this.createHttpProvider(T)}),C}getHttpProvider(){let C=`${this.name}:${this.chainId}`,T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace);return typeof N>"u"?void 0:new ie.r(new nN.Z(N))}};var of=Object.defineProperty,index_es_os=(C,T,N)=>T in C?of(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_R=(C,T,N)=>index_es_os(C,"symbol"!=typeof T?T+"":T,N);let index_es_hs=class index_es_hs{constructor(C){index_es_R(this,"name",nF),index_es_R(this,"client"),index_es_R(this,"httpProviders"),index_es_R(this,"events"),index_es_R(this,"namespace"),index_es_R(this,"chainId"),this.namespace=C.namespace,this.events=index_es_h("events"),this.client=index_es_h("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(C){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(C.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(C.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(C.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(C.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(C){return this.namespace.methods.includes(C.request.method)?this.client.request(C):this.getHttpProvider(C.chainId).request(C.request)}setDefaultChain(C,T){this.httpProviders[C]||this.setHttpProvider(C,T),this.chainId=C,this.events.emit(nz.DEFAULT_CHAIN_CHANGED,`${this.name}:${C}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let C=this.namespace.chains[0];if(!C)throw Error("ChainId not found");return C.split(":")[1]}getAccounts(){let C=this.namespace.accounts;return C?[...new Set(C.filter(C=>C.split(":")[1]===this.chainId.toString()).map(C=>C.split(":")[2]))]:[]}createHttpProviders(){var C,T;let N={};return null==(T=null==(C=this.namespace)?void 0:C.accounts)||T.forEach(C=>{let T=Fe(C);N[`${T.namespace}:${T.reference}`]=this.createHttpProvider(C)}),N}getHttpProvider(C){let T=this.httpProviders[C];if(typeof T>"u")throw Error(`JSON-RPC provider for ${C} not found`);return T}setHttpProvider(C,T){let N=this.createHttpProvider(C,T);N&&(this.httpProviders[C]=N)}createHttpProvider(C,T){let N=T||index_es_u(C,this.namespace,this.client.core.projectId);if(!N)throw Error(`No RPC url provided for chainId: ${C}`);return new ie.r(new nN.Z(N,index_es_h("disableProviderPing")))}};var op=Object.defineProperty,og=Object.defineProperties,oy=Object.getOwnPropertyDescriptors,om=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ow=Object.prototype.propertyIsEnumerable,Z=(C,T,N)=>T in C?op(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,index_es_B=(C,T)=>{for(var N in T||(T={}))ob.call(T,N)&&Z(C,N,T[N]);if(om)for(var N of om(T))ow.call(T,N)&&Z(C,N,T[N]);return C},index_es_T=(C,T)=>og(C,oy(T)),universal_provider_dist_index_es_f=(C,T,N)=>Z(C,"symbol"!=typeof T?T+"":T,N);let dist_index_es_G=class dist_index_es_G{constructor(C){universal_provider_dist_index_es_f(this,"client"),universal_provider_dist_index_es_f(this,"namespaces"),universal_provider_dist_index_es_f(this,"optionalNamespaces"),universal_provider_dist_index_es_f(this,"sessionProperties"),universal_provider_dist_index_es_f(this,"scopedProperties"),universal_provider_dist_index_es_f(this,"events",new($())),universal_provider_dist_index_es_f(this,"rpcProviders",{}),universal_provider_dist_index_es_f(this,"session"),universal_provider_dist_index_es_f(this,"providerOpts"),universal_provider_dist_index_es_f(this,"logger"),universal_provider_dist_index_es_f(this,"uri"),universal_provider_dist_index_es_f(this,"disableProviderPing",!1),this.providerOpts=C,this.logger="u">typeof C?.logger&&"string"!=typeof C?.logger?C.logger:(0,r8.gw)((0,r8.jI)({level:C?.logger||nU})),this.disableProviderPing=C?.disableProviderPing||!1}static async init(C){let T=new dist_index_es_G(C);return await T.initialize(),T}async request(C,T,N){let[U,$]=this.validateChain(T);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(U).request({request:index_es_B({},C),chainId:`${U}:${$}`,topic:this.session.topic,expiry:N})}sendAsync(C,T,N,U){let $=new Date().getTime();this.request(C,N,U).then(C=>T(null,(0,ir.formatJsonRpcResult)($,C))).catch(C=>T(C,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var C;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(C=this.session)?void 0:C.topic,reason:Kt("USER_DISCONNECTED")}),await this.cleanup()}async connect(C){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(C),await this.cleanupPendingPairings(),!C.skipPairing)return await this.pair(C.pairingTopic)}async authenticate(C,T){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(C),await this.cleanupPendingPairings();let{uri:N,response:U}=await this.client.authenticate(C,T);N&&(this.uri=N,this.events.emit("display_uri",N));let $=await U();if(this.session=$.session,this.session){let C=index_es_yt(this.session.namespaces);this.namespaces=universal_provider_dist_index_es_M(this.namespaces,C),await this.persist("namespaces",this.namespaces),this.onConnect()}return $}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}removeListener(C,T){this.events.removeListener(C,T)}off(C,T){this.events.off(C,T)}get isWalletConnect(){return!0}async pair(C){let{uri:T,approval:N}=await this.client.connect({pairingTopic:C,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});T&&(this.uri=T,this.events.emit("display_uri",T));let U=await N();this.session=U;let $=index_es_yt(U.namespaces);return this.namespaces=universal_provider_dist_index_es_M(this.namespaces,$),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(C,T){try{if(!this.session)return;let[N,U]=this.validateChain(C),$=this.getProvider(N);$.name===nF?$.setDefaultChain(`${N}:${U}`,T):$.setDefaultChain(U,T)}catch(C){if(!/Please call connect/.test(C.message))throw C}}async cleanupPendingPairings(C={}){this.logger.info("Cleaning up inactive pairings...");let T=this.client.pairing.getAll();if(me(T)){for(let N of T)C.deletePairings?this.client.core.expirer.set(N.topic,0):await this.client.core.relayer.subscriber.unsubscribe(N.topic);this.logger.info(`Inactive pairings cleared: ${T.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var C,T;if(this.client=this.providerOpts.client||await dist_index_es_Ee.init({core:this.providerOpts.core,logger:this.providerOpts.logger||nU,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(N){throw this.logger.error("Failed to get session",N),Error(`The provided session: ${null==(T=null==(C=this.providerOpts)?void 0:C.session)?void 0:T.topic} doesn't exist in the Sign client`)}else{let C=this.client.session.getAll();this.session=C[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let C=[...new Set(Object.keys(this.session.namespaces).map(C=>Yo(C)))];dist_index_es_X("client",this.client),dist_index_es_X("events",this.events),dist_index_es_X("disableProviderPing",this.disableProviderPing),C.forEach(C=>{if(!this.session)return;let T=function(C,T){let N=Object.keys(T.namespaces).filter(T=>T.includes(C));if(!N.length)return[];let U=[];return N.forEach(C=>{let N=T.namespaces[C].accounts;U.push(...N)}),U}(C,this.session),N=dist_index_es_gt(T),U=universal_provider_dist_index_es_M(this.namespaces,this.optionalNamespaces),$=index_es_T(index_es_B({},U[C]),{accounts:T,chains:N});switch(C){case"eip155":this.rpcProviders[C]=new dist_index_es_Fe({namespace:$});break;case"algorand":this.rpcProviders[C]=new universal_provider_dist_index_es_ke({namespace:$});break;case"solana":this.rpcProviders[C]=new universal_provider_dist_index_es_Le({namespace:$});break;case"cosmos":this.rpcProviders[C]=new dist_index_es_Ge({namespace:$});break;case"polkadot":this.rpcProviders[C]=new index_es_Ne({namespace:$});break;case"cip34":this.rpcProviders[C]=new dist_index_es_Ve({namespace:$});break;case"elrond":this.rpcProviders[C]=new dist_index_es_Qe({namespace:$});break;case"multiversx":this.rpcProviders[C]=new index_es_ts({namespace:$});break;case"near":this.rpcProviders[C]=new index_es_is({namespace:$});break;case"tezos":this.rpcProviders[C]=new index_es_as({namespace:$});break;default:this.rpcProviders[nF]?this.rpcProviders[nF].updateNamespace($):this.rpcProviders[nF]=new index_es_hs({namespace:$})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",C=>{var T;let{topic:N}=C;N===(null==(T=this.session)?void 0:T.topic)&&this.events.emit("session_ping",C)}),this.client.on("session_event",C=>{var T;let{params:N,topic:U}=C;if(U!==(null==(T=this.session)?void 0:T.topic))return;let{event:$}=N;if("accountsChanged"===$.name){let C=$.data;C&&me(C)&&this.events.emit("accountsChanged",C.map(dist_index_es_wt))}else if("chainChanged"===$.name){let C=N.chainId,T=N.event.data,U=Yo(C),$=dist_index_es_V(C)!==dist_index_es_V(T)?`${U}:${dist_index_es_V(T)}`:C;this.onChainChanged($)}else this.events.emit($.name,$.data);this.events.emit("session_event",C)}),this.client.on("session_update",({topic:C,params:T})=>{var N,U;if(C!==(null==(N=this.session)?void 0:N.topic))return;let{namespaces:$}=T,Q=null==(U=this.client)?void 0:U.session.get(C);this.session=index_es_T(index_es_B({},Q),{namespaces:$}),this.onSessionUpdate(),this.events.emit("session_update",{topic:C,params:T})}),this.client.on("session_delete",async C=>{var T;C.topic===(null==(T=this.session)?void 0:T.topic)&&(await this.cleanup(),this.events.emit("session_delete",C),this.events.emit("disconnect",index_es_T(index_es_B({},Kt("USER_DISCONNECTED")),{data:C.topic})))}),this.on(nz.DEFAULT_CHAIN_CHANGED,C=>{this.onChainChanged(C,!0)})}getProvider(C){return this.rpcProviders[C]||this.rpcProviders[nF]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(C=>{var T;this.getProvider(C).updateNamespace(null==(T=this.session)?void 0:T.namespaces[C])})}setNamespaces(C){let{namespaces:T={},optionalNamespaces:N={},sessionProperties:U,scopedProperties:$}=C;this.optionalNamespaces=universal_provider_dist_index_es_M(T,N),this.sessionProperties=U,this.scopedProperties=$}validateChain(C){let[T,N]=C?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[T,N];if(T&&!Object.keys(this.namespaces||{}).map(C=>Yo(C)).includes(T))throw Error(`Namespace '${T}' is not configured. Please call connect() first with namespace config.`);if(T&&N)return[T,N];let U=Yo(Object.keys(this.namespaces)[0]),$=this.rpcProviders[U].getDefaultChain();return[U,$]}async requestAccounts(){let[C]=this.validateChain();return await this.getProvider(C).requestAccounts()}async onChainChanged(C,T=!1){if(!this.namespaces)return;let[N,U]=this.validateChain(C);if(!U)return;this.updateNamespaceChain(N,U),this.events.emit("chainChanged",U);let $=this.getProvider(N).getDefaultChain();T||this.getProvider(N).setDefaultChain(U),this.emitAccountsChangedOnChainChange({namespace:N,previousChainId:$,newChainId:C}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:C,previousChainId:T,newChainId:N}){var U,$;try{if(T===N)return;let Q=null==($=null==(U=this.session)?void 0:U.namespaces[C])?void 0:$.accounts;if(!Q)return;let Y=Q.filter(C=>C.includes(`${N}:`)).map(dist_index_es_wt);if(!me(Y))return;this.events.emit("accountsChanged",Y)}catch(C){this.logger.warn("Failed to emit accountsChanged on chain change",C)}}updateNamespaceChain(C,T){if(!this.namespaces)return;let N=this.namespaces[C]?C:`${C}:${T}`;this.namespaces[N]?this.namespaces[N]&&(this.namespaces[N].defaultChain=T):this.namespaces[N]={chains:[],methods:[],events:[],defaultChain:T}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(C,T){var N;let U=(null==(N=this.session)?void 0:N.topic)||"";await this.client.core.storage.setItem(`${nL}/${C}${U}`,T)}async getFromStore(C){var T;let N=(null==(T=this.session)?void 0:T.topic)||"";return await this.client.core.storage.getItem(`${nL}/${C}${N}`)}async deleteFromStore(C){var T;let N=(null==(T=this.session)?void 0:T.topic)||"";await this.client.core.storage.removeItem(`${nL}/${C}${N}`)}async cleanupStorage(){var C;try{if((null==(C=this.client)?void 0:C.session.length)>0)return;let T=await this.client.core.storage.getKeys();for(let C of T)C.startsWith(nL)&&await this.client.core.storage.removeItem(C)}catch(C){this.logger.warn("Failed to cleanup storage",C)}}};let o_=["eth_sendTransaction","personal_sign"],ov=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],oE=["chainChanged","accountsChanged"],ox=["chainChanged","accountsChanged","message","disconnect","connect"],index_es_D=async()=>{let{createAppKit:C}=await N.e(8935).then(N.bind(N,8935));return C};var oA=Object.defineProperty,oI=Object.defineProperties,oP=Object.getOwnPropertyDescriptors,oS=Object.getOwnPropertySymbols,oD=Object.prototype.hasOwnProperty,oB=Object.prototype.propertyIsEnumerable,_=(C,T,N)=>T in C?oA(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_v=(C,T)=>{for(var N in T||(T={}))oD.call(T,N)&&_(C,N,T[N]);if(oS)for(var N of oS(T))oB.call(T,N)&&_(C,N,T[N]);return C},dist_index_es_w=(C,T)=>oI(C,oP(T)),dist_index_es_p=(C,T,N)=>_(C,"symbol"!=typeof T?T+"":T,N);function ethereum_provider_dist_index_es_I(C){return Number(C[0].split(":")[1])}function ethereum_provider_dist_index_es_E(C){return`0x${C.toString(16)}`}let dist_index_es_b=class dist_index_es_b{constructor(){dist_index_es_p(this,"events",new U.EventEmitter),dist_index_es_p(this,"namespace","eip155"),dist_index_es_p(this,"accounts",[]),dist_index_es_p(this,"signer"),dist_index_es_p(this,"chainId",1),dist_index_es_p(this,"modal"),dist_index_es_p(this,"rpc"),dist_index_es_p(this,"STORAGE_KEY","wc@2:ethereum_provider:"),dist_index_es_p(this,"on",(C,T)=>(this.events.on(C,T),this)),dist_index_es_p(this,"once",(C,T)=>(this.events.once(C,T),this)),dist_index_es_p(this,"removeListener",(C,T)=>(this.events.removeListener(C,T),this)),dist_index_es_p(this,"off",(C,T)=>(this.events.off(C,T),this)),dist_index_es_p(this,"parseAccount",C=>this.isCompatibleChainId(C)?this.parseAccountId(C).address:C),this.signer={},this.rpc={}}static async init(C){let T=new dist_index_es_b;return await T.initialize(C),T}async request(C,T){return await this.signer.request(C,this.formatChainId(this.chainId),T)}sendAsync(C,T,N){this.signer.sendAsync(C,T,this.formatChainId(this.chainId),N)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(C){var T;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(C);let{required:N,optional:U}=function(C){let{chains:T,optionalChains:N,methods:U,optionalMethods:$,events:Q,optionalEvents:Y,rpcMap:X}=C;if(!me(T))throw Error("Invalid chains");let ee={chains:T,methods:U||o_,events:Q||oE,rpcMap:dist_index_es_v({},T.length?{[ethereum_provider_dist_index_es_I(T)]:X[ethereum_provider_dist_index_es_I(T)]}:{})},es=Q?.filter(C=>!oE.includes(C)),el=U?.filter(C=>!o_.includes(C));if(!N&&!Y&&!$&&!(null!=es&&es.length)&&!(null!=el&&el.length))return{required:T.length?ee:void 0};let ec=es?.length&&el?.length||!N,eh={chains:[...new Set(ec?ee.chains.concat(N||[]):N)],methods:[...new Set(ee.methods.concat(null!=$&&$.length?$:ov))],events:[...new Set(ee.events.concat(null!=Y&&Y.length?Y:ox))],rpcMap:X};return{required:T.length?ee:void 0,optional:N.length?eh:void 0}}(this.rpc);try{let T=await new Promise(async(T,$)=>{var Q,Y;this.rpc.showQrModal&&(null==(Q=this.modal)||Q.open(),null==(Y=this.modal)||Y.subscribeState(C=>{C.open||this.signer.session||(this.signer.abortPairingAttempt(),$(Error("Connection request reset. Please try again.")))}));let X=null!=C&&C.scopedProperties?{[this.namespace]:C.scopedProperties}:void 0;await this.signer.connect(dist_index_es_w(dist_index_es_v({namespaces:dist_index_es_v({},N&&{[this.namespace]:N})},U&&{optionalNamespaces:{[this.namespace]:U}}),{pairingTopic:C?.pairingTopic,scopedProperties:X})).then(C=>{T(C)}).catch(C=>{var T;null==(T=this.modal)||T.showErrorMessage("Unable to connect"),$(Error(C.message))})});if(!T)return;let $=_s(T.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:$),this.setAccounts($),this.events.emit("connect",{chainId:ethereum_provider_dist_index_es_E(this.chainId)})}catch(C){throw this.signer.logger.error(C),C}finally{null==(T=this.modal)||T.close()}}async authenticate(C,T){var N;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:C?.chains});try{let N=await new Promise(async(N,U)=>{var $,Q;this.rpc.showQrModal&&(null==($=this.modal)||$.open(),null==(Q=this.modal)||Q.subscribeState(C=>{C.open||this.signer.session||(this.signer.abortPairingAttempt(),U(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(dist_index_es_w(dist_index_es_v({},C),{chains:this.rpc.chains}),T).then(C=>{N(C)}).catch(C=>{var T;null==(T=this.modal)||T.showErrorMessage("Unable to connect"),U(Error(C.message))})}),U=N.session;if(U){let C=_s(U.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:C),this.setAccounts(C),this.events.emit("connect",{chainId:ethereum_provider_dist_index_es_E(this.chainId)})}return N}catch(C){throw this.signer.logger.error(C),C}finally{null==(N=this.modal)||N.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",C=>{let{params:T}=C,{event:N}=T;"accountsChanged"===N.name?(this.accounts=this.parseAccounts(N.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===N.name?this.setChainId(this.formatChainId(N.data)):this.events.emit(N.name,N.data),this.events.emit("session_event",C)}),this.signer.on("accountsChanged",C=>{this.accounts=this.parseAccounts(C),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",C=>{let T=parseInt(C);this.chainId=T,this.events.emit("chainChanged",ethereum_provider_dist_index_es_E(this.chainId)),this.persist()}),this.signer.on("session_update",C=>{this.events.emit("session_update",C)}),this.signer.on("session_delete",C=>{this.reset(),this.events.emit("session_delete",C),this.events.emit("disconnect",dist_index_es_w(dist_index_es_v({},Kt("USER_DISCONNECTED")),{data:C.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",C=>{this.events.emit("display_uri",C)})}switchEthereumChain(C){this.request({method:"wallet_switchEthereumChain",params:[{chainId:C.toString(16)}]})}isCompatibleChainId(C){return"string"==typeof C&&C.startsWith(`${this.namespace}:`)}formatChainId(C){return`${this.namespace}:${C}`}parseChainId(C){return Number(C.split(":")[1])}setChainIds(C){let T=C.filter(C=>this.isCompatibleChainId(C)).map(C=>this.parseChainId(C));T.length&&(this.chainId=T[0],this.events.emit("chainChanged",ethereum_provider_dist_index_es_E(this.chainId)),this.persist())}setChainId(C){if(this.isCompatibleChainId(C)){let T=this.parseChainId(C);this.chainId=T,this.switchEthereumChain(T)}}parseAccountId(C){let[T,N,U]=C.split(":");return{chainId:`${T}:${N}`,address:U}}setAccounts(C){this.accounts=C.filter(C=>this.parseChainId(this.parseAccountId(C).chainId)===this.chainId).map(C=>this.parseAccountId(C).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(C){var T,N;let U=null!=(T=C?.chains)?T:[],$=null!=(N=C?.optionalChains)?N:[],Q=U.concat($);if(!Q.length)throw Error("No chains specified in either `chains` or `optionalChains`");let Y=U.length?C?.methods||o_:[],X=U.length?C?.events||oE:[],ee=C?.optionalMethods||[],es=C?.optionalEvents||[],el=C?.rpcMap||this.buildRpcMap(Q,C.projectId),ec=C?.qrModalOptions||void 0;return{chains:U?.map(C=>this.formatChainId(C)),optionalChains:$.map(C=>this.formatChainId(C)),methods:Y,events:X,optionalMethods:ee,optionalEvents:es,rpcMap:el,showQrModal:!!(null!=C&&C.showQrModal),qrModalOptions:ec,projectId:C.projectId,metadata:C.metadata}}buildRpcMap(C,T){let N={};return C.forEach(C=>{N[C]=this.getRpcUrl(C,T)}),N}async initialize(C){if(this.rpc=this.getRpcConfig(C),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_I(this.rpc.chains):ethereum_provider_dist_index_es_I(this.rpc.optionalChains),this.signer=await dist_index_es_G.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:C.disableProviderPing,relayUrl:C.relayUrl,storage:C.storage,storageOptions:C.storageOptions,customStoragePrefix:C.customStoragePrefix,telemetryEnabled:C.telemetryEnabled,logger:C.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let C;try{let T=await index_es_D(),{convertWCMToAppKitOptions:N}=await Promise.resolve().then(function(){return oL}),U=N(dist_index_es_w(dist_index_es_v({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!U.networks.length)throw Error("No networks found for WalletConnect\xb7");C=T(dist_index_es_w(dist_index_es_v({},U),{universalProvider:this.signer,manualWCControl:!0}))}catch(C){throw console.warn(C),Error("To use QR modal, please install @reown/appkit package")}if(C)try{this.modal=C}catch(C){throw this.signer.logger.error(C),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(C){if(!C)return;let{chains:T,optionalChains:N,rpcMap:U}=C;T&&me(T)&&(this.rpc.chains=T.map(C=>this.formatChainId(C)),T.forEach(C=>{this.rpc.rpcMap[C]=U?.[C]||this.getRpcUrl(C)})),N&&me(N)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=N?.map(C=>this.formatChainId(C)),N.forEach(C=>{this.rpc.rpcMap[C]=U?.[C]||this.getRpcUrl(C)}))}getRpcUrl(C,T){var N;return(null==(N=this.rpc.rpcMap)?void 0:N[C])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${C}&projectId=${T||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{let C=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),T=this.session.namespaces[`${this.namespace}:${C}`]?this.session.namespaces[`${this.namespace}:${C}`]:this.session.namespaces[this.namespace];this.setChainIds(C?[this.formatChainId(C)]:T?.accounts),this.setAccounts(T?.accounts)}catch(C){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(C),await this.disconnect().catch(C=>this.signer.logger.warn(C))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(C){return"string"==typeof C||C instanceof String?[this.parseAccount(C)]:C.map(C=>this.parseAccount(C))}};let oC=dist_index_es_b;var oO=Object.defineProperty,oR=Object.defineProperties,oT=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,ok=Object.prototype.hasOwnProperty,oU=Object.prototype.propertyIsEnumerable,dist_index_es_T=(C,T,N)=>T in C?oO(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,dist_index_es_R=(C,T)=>{for(var N in T||(T={}))ok.call(T,N)&&dist_index_es_T(C,N,T[N]);if(oN)for(var N of oN(T))oU.call(T,N)&&dist_index_es_T(C,N,T[N]);return C},index_es_Z=(C,T)=>oR(C,oT(T));let et=C=>{let[T,N]=C.split(":");return ethereum_provider_dist_index_es_W({id:N,caipNetworkId:C,chainNamespace:T,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function ethereum_provider_dist_index_es_W(C){return dist_index_es_R({formatters:void 0,fees:void 0,serializers:void 0},C)}var oL=Object.freeze({__proto__:null,convertWCMToAppKitOptions:function(C){var T,N,U,$,Q,Y,X;let ee=null==(T=C.chains)?void 0:T.map(et).filter(Boolean);if(0===ee.length)throw Error("At least one chain must be specified");let es=ee.find(T=>{var N;return T.id===(null==(N=C.defaultChain)?void 0:N.id)}),el={projectId:C.projectId,networks:ee,themeMode:C.themeMode,themeVariables:function(C){if(C)return{"--w3m-font-family":C["--wcm-font-family"],"--w3m-accent":C["--wcm-accent-color"],"--w3m-color-mix":C["--wcm-background-color"],"--w3m-z-index":C["--wcm-z-index"]?Number(C["--wcm-z-index"]):void 0,"--w3m-qr-color":C["--wcm-accent-color"],"--w3m-font-size-master":C["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":C["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}(C.themeVariables),chainImages:C.chainImages,connectorImages:C.walletImages,defaultNetwork:es,metadata:index_es_Z(dist_index_es_R({},C.metadata),{name:(null==(N=C.metadata)?void 0:N.name)||"WalletConnect",description:(null==(U=C.metadata)?void 0:U.description)||"Connect to WalletConnect-compatible wallets",url:(null==($=C.metadata)?void 0:$.url)||"https://walletconnect.org",icons:(null==(Q=C.metadata)?void 0:Q.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:"NONE"===C.explorerRecommendedWalletIds?[]:Array.isArray(C.explorerRecommendedWalletIds)?C.explorerRecommendedWalletIds:[],excludeWalletIds:"ALL"===C.explorerExcludedWalletIds?[]:Array.isArray(C.explorerExcludedWalletIds)?C.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if(null!=(Y=C.mobileWallets)&&Y.length||null!=(X=C.desktopWallets)&&X.length){let T=[...(C.mobileWallets||[]).map(C=>({id:C.id,name:C.name,links:C.links})),...(C.desktopWallets||[]).map(C=>({id:C.id,name:C.name,links:{native:C.links.native,universal:C.links.universal}}))],N=[...el.featuredWalletIds||[],...el.excludeWalletIds||[]],U=T.filter(C=>!N.includes(C.id));U.length&&(el.customWallets=U)}return el},defineChain:ethereum_provider_dist_index_es_W})},8200:function(C,T,N){"use strict";N.d(T,{q:function(){return IEvents}});let IEvents=class IEvents{}},9490:function(C,T,N){"use strict";N.d(T,{C$:function(){return i},Lx:function(){return X}});var U=N(7187),$=N(6736),Q=N(8200);let n=class n extends Q.q{constructor(C){super()}};let Y=$.FIVE_SECONDS,X={pulse:"heartbeat_pulse"};let i=class i extends n{constructor(C){super(C),this.events=new U.EventEmitter,this.interval=Y,this.interval=C?.interval||Y}static async init(C){let T=new i(C);return await T.init(),T}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}off(C,T){this.events.off(C,T)}removeListener(C,T){this.events.removeListener(C,T)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,$.toMiliseconds)(this.interval))}pulse(){this.events.emit(X.pulse)}}},8900:function(C,T,N){"use strict";N.d(T,{Z:function(){return f},k:function(){return f}});var U=N(7187),$=N(4098),Q=N.n($),Y=N(5094),X=N(6186),ee=Object.defineProperty,es=Object.defineProperties,el=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,eh=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable,l=(C,T,N)=>T in C?ee(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,p=(C,T)=>{for(var N in T||(T={}))eh.call(T,N)&&l(C,N,T[N]);if(ec)for(var N of ec(T))eu.call(T,N)&&l(C,N,T[N]);return C},v=(C,T)=>es(C,el(T));let ed={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};let f=class f{constructor(C,T=!1){if(this.url=C,this.disableProviderPing=T,this.events=new U.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,X.isHttpUrl)(C))throw Error(`Provided URL is not compatible with HTTP connection: ${C}`);this.url=C,this.disableProviderPing=T}get connected(){return this.isAvailable}get connecting(){return this.registering}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}off(C,T){this.events.off(C,T)}removeListener(C,T){this.events.removeListener(C,T)}async open(C=this.url){await this.register(C)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(C){this.isAvailable||await this.register();try{let T=(0,Y.u)(C),N=await (await Q()(this.url,v(p({},ed),{body:T}))).json();this.onPayload({data:N})}catch(T){this.onError(C.id,T)}}async register(C=this.url){if(!(0,X.isHttpUrl)(C))throw Error(`Provided URL is not compatible with HTTP connection: ${C}`);if(this.registering){let C=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=C||this.events.listenerCount("open")>=C)&&this.events.setMaxListeners(C+1),new Promise((C,T)=>{this.events.once("register_error",C=>{this.resetMaxListeners(),T(C)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return T(Error("HTTP connection is missing or invalid"));C()})})}this.url=C,this.registering=!0;try{if(!this.disableProviderPing){let T=(0,Y.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await Q()(C,v(p({},ed),{body:T}))}this.onOpen()}catch(T){let C=this.parseError(T);throw this.events.emit("register_error",C),this.onClose(),C}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(C){if(typeof C.data>"u")return;let T="string"==typeof C.data?(0,Y.D)(C.data):C.data;this.events.emit("payload",T)}onError(C,T){let N=this.parseError(T),U=N.message||N.toString(),$=(0,X.formatJsonRpcError)(C,U);this.events.emit("payload",$)}parseError(C,T=this.url){return(0,X.parseConnectionError)(C,T,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}},4534:function(C,T,N){"use strict";N.d(T,{r:function(){return o}});var U=N(7187),$=N(6186);let o=class o extends $.IJsonRpcProvider{constructor(C){super(C),this.events=new U.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(C),this.connection.connected&&this.registerEventListeners()}async connect(C=this.connection){await this.open(C)}async disconnect(){await this.close()}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}off(C,T){this.events.off(C,T)}removeListener(C,T){this.events.removeListener(C,T)}async request(C,T){return this.requestStrict((0,$.formatJsonRpcRequest)(C.method,C.params||[],C.id||(0,$.getBigIntRpcId)().toString()),T)}async requestStrict(C,T){return new Promise(async(N,U)=>{if(!this.connection.connected)try{await this.open()}catch(C){U(C)}this.events.on(`${C.id}`,C=>{(0,$.isJsonRpcError)(C)?U(C.error):N(C.result)});try{await this.connection.send(C,T)}catch(C){U(C)}})}setConnection(C=this.connection){return C}onPayload(C){this.events.emit("payload",C),(0,$.isJsonRpcResponse)(C)?this.events.emit(`${C.id}`,C):this.events.emit("message",{type:C.method,data:C.params})}onClose(C){C&&3e3===C.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${C.code} ${C.reason?`(${C.reason})`:""}`)),this.events.emit("disconnect")}async open(C=this.connection){this.connection===C&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof C&&(await this.connection.open(C),C=this.connection),this.connection=this.setConnection(C),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",C=>this.onPayload(C)),this.connection.on("close",C=>this.onClose(C)),this.connection.on("error",C=>this.events.emit("error",C)),this.connection.on("register_error",C=>this.onClose()),this.hasRegisteredEventListeners=!0)}}},9806:function(C,T,N){"use strict";N.d(T,{CA:function(){return $},JV:function(){return X},O4:function(){return U},dQ:function(){return Q},xK:function(){return Y}});let U="INTERNAL_ERROR",$="SERVER_ERROR",Q=[-32700,-32600,-32601,-32602,-32603],Y={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[U]:{code:-32603,message:"Internal error"},[$]:{code:-32e3,message:"Server error"}},X=$},9698:function(C,T,N){"use strict";var U=N(1468);N.o(U,"IJsonRpcProvider")&&N.d(T,{IJsonRpcProvider:function(){return U.IJsonRpcProvider}}),N.o(U,"formatJsonRpcError")&&N.d(T,{formatJsonRpcError:function(){return U.formatJsonRpcError}}),N.o(U,"formatJsonRpcRequest")&&N.d(T,{formatJsonRpcRequest:function(){return U.formatJsonRpcRequest}}),N.o(U,"formatJsonRpcResult")&&N.d(T,{formatJsonRpcResult:function(){return U.formatJsonRpcResult}}),N.o(U,"getBigIntRpcId")&&N.d(T,{getBigIntRpcId:function(){return U.getBigIntRpcId}}),N.o(U,"isHttpUrl")&&N.d(T,{isHttpUrl:function(){return U.isHttpUrl}}),N.o(U,"isJsonRpcError")&&N.d(T,{isJsonRpcError:function(){return U.isJsonRpcError}}),N.o(U,"isJsonRpcRequest")&&N.d(T,{isJsonRpcRequest:function(){return U.isJsonRpcRequest}}),N.o(U,"isJsonRpcResponse")&&N.d(T,{isJsonRpcResponse:function(){return U.isJsonRpcResponse}}),N.o(U,"isJsonRpcResult")&&N.d(T,{isJsonRpcResult:function(){return U.isJsonRpcResult}}),N.o(U,"isLocalhostUrl")&&N.d(T,{isLocalhostUrl:function(){return U.isLocalhostUrl}}),N.o(U,"isReactNative")&&N.d(T,{isReactNative:function(){return U.isReactNative}}),N.o(U,"isWsUrl")&&N.d(T,{isWsUrl:function(){return U.isWsUrl}}),N.o(U,"payloadId")&&N.d(T,{payloadId:function(){return U.payloadId}})},110:function(C,T,N){"use strict";N.d(T,{CX:function(){return parseConnectionError},L2:function(){return getErrorByCode},by:function(){return getError},i5:function(){return isReservedErrorCode}});var U=N(9806);function isReservedErrorCode(C){return U.dQ.includes(C)}function getError(C){return Object.keys(U.xK).includes(C)?U.xK[C]:U.xK[U.JV]}function getErrorByCode(C){let T=Object.values(U.xK).find(T=>T.code===C);return T||U.xK[U.JV]}function parseConnectionError(C,T,N){return C.message.includes("getaddrinfo ENOTFOUND")||C.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${N} RPC url at ${T}`):C}},1937:function(C,T,N){"use strict";N.d(T,{CS:function(){return getBigIntRpcId},RI:function(){return formatJsonRpcError},o0:function(){return payloadId},sT:function(){return formatJsonRpcRequest},tm:function(){return formatJsonRpcResult}});var U=N(110),$=N(9806);function payloadId(C=3){let T=Date.now()*Math.pow(10,C),N=Math.floor(Math.random()*Math.pow(10,C));return T+N}function getBigIntRpcId(C=6){return BigInt(payloadId(C))}function formatJsonRpcRequest(C,T,N){return{id:N||payloadId(),jsonrpc:"2.0",method:C,params:T}}function formatJsonRpcResult(C,T){return{id:C,jsonrpc:"2.0",result:T}}function formatJsonRpcError(C,T,N){var Q;return{id:C,jsonrpc:"2.0",error:void 0===(Q=T)?(0,U.by)($.O4):("string"==typeof Q&&(Q=Object.assign(Object.assign({},(0,U.by)($.CA)),{message:Q})),void 0!==N&&(Q.data=N),(0,U.i5)(Q.code)&&(Q=(0,U.L2)(Q.code)),Q)}}},6186:function(C,T,N){"use strict";N.d(T,{IJsonRpcProvider:function(){return Y.x0},formatJsonRpcError:function(){return Q.RI},formatJsonRpcRequest:function(){return Q.sT},formatJsonRpcResult:function(){return Q.tm},getBigIntRpcId:function(){return Q.CS},isHttpUrl:function(){return X.jK},isJsonRpcError:function(){return ee.jg},isJsonRpcRequest:function(){return ee.DW},isJsonRpcResponse:function(){return ee.u},isJsonRpcResult:function(){return ee.k4},isLocalhostUrl:function(){return X.JF},isWsUrl:function(){return X.UZ},parseConnectionError:function(){return U.CX},payloadId:function(){return Q.o0}}),N(9806);var U=N(110),$=N(9698);N.o($,"IJsonRpcProvider")&&N.d(T,{IJsonRpcProvider:function(){return $.IJsonRpcProvider}}),N.o($,"formatJsonRpcError")&&N.d(T,{formatJsonRpcError:function(){return $.formatJsonRpcError}}),N.o($,"formatJsonRpcRequest")&&N.d(T,{formatJsonRpcRequest:function(){return $.formatJsonRpcRequest}}),N.o($,"formatJsonRpcResult")&&N.d(T,{formatJsonRpcResult:function(){return $.formatJsonRpcResult}}),N.o($,"getBigIntRpcId")&&N.d(T,{getBigIntRpcId:function(){return $.getBigIntRpcId}}),N.o($,"isHttpUrl")&&N.d(T,{isHttpUrl:function(){return $.isHttpUrl}}),N.o($,"isJsonRpcError")&&N.d(T,{isJsonRpcError:function(){return $.isJsonRpcError}}),N.o($,"isJsonRpcRequest")&&N.d(T,{isJsonRpcRequest:function(){return $.isJsonRpcRequest}}),N.o($,"isJsonRpcResponse")&&N.d(T,{isJsonRpcResponse:function(){return $.isJsonRpcResponse}}),N.o($,"isJsonRpcResult")&&N.d(T,{isJsonRpcResult:function(){return $.isJsonRpcResult}}),N.o($,"isLocalhostUrl")&&N.d(T,{isLocalhostUrl:function(){return $.isLocalhostUrl}}),N.o($,"isReactNative")&&N.d(T,{isReactNative:function(){return $.isReactNative}}),N.o($,"isWsUrl")&&N.d(T,{isWsUrl:function(){return $.isWsUrl}}),N.o($,"payloadId")&&N.d(T,{payloadId:function(){return $.payloadId}});var Q=N(1937),Y=N(4085),X=N(6119),ee=N(4733)},4085:function(C,T,N){"use strict";N.d(T,{x0:function(){return r}});let e=class e{};let n=class n extends e{constructor(){super()}};let r=class r extends n{constructor(C){super()}}},6119:function(C,T,N){"use strict";function matchRegexProtocol(C,T){let N=function(C){let T=C.match(RegExp(/^\w+:/,"gi"));if(T&&T.length)return T[0]}(C);return void 0!==N&&new RegExp(T).test(N)}function isHttpUrl(C){return matchRegexProtocol(C,"^https?:")}function isWsUrl(C){return matchRegexProtocol(C,"^wss?:")}function isLocalhostUrl(C){return RegExp("wss?://localhost(:d{2,5})?").test(C)}N.d(T,{JF:function(){return isLocalhostUrl},UZ:function(){return isWsUrl},jK:function(){return isHttpUrl}})},4733:function(C,T,N){"use strict";function isJsonRpcPayload(C){return"object"==typeof C&&"id"in C&&"jsonrpc"in C&&"2.0"===C.jsonrpc}function isJsonRpcRequest(C){return isJsonRpcPayload(C)&&"method"in C}function isJsonRpcResponse(C){return isJsonRpcPayload(C)&&(isJsonRpcResult(C)||isJsonRpcError(C))}function isJsonRpcResult(C){return"result"in C}function isJsonRpcError(C){return"error"in C}N.d(T,{DW:function(){return isJsonRpcRequest},jg:function(){return isJsonRpcError},k4:function(){return isJsonRpcResult},u:function(){return isJsonRpcResponse}})},8939:function(C,T,N){"use strict";N.d(T,{Z:function(){return f}});var U=N(7187),$=N(5094),Q=N(6186);let w=()=>"u">typeof WebSocket||"u">typeof N.g&&"u">typeof N.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,d=C=>C.split("?")[0],Y="u">typeof WebSocket?WebSocket:"u">typeof N.g&&"u">typeof N.g.WebSocket?N.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:N(2030);let f=class f{constructor(C){if(this.url=C,this.events=new U.EventEmitter,this.registering=!1,!(0,Q.isWsUrl)(C))throw Error(`Provided URL is not compatible with WebSocket connection: ${C}`);this.url=C}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(C,T){this.events.on(C,T)}once(C,T){this.events.once(C,T)}off(C,T){this.events.off(C,T)}removeListener(C,T){this.events.removeListener(C,T)}async open(C=this.url){await this.register(C)}async close(){return new Promise((C,T)=>{if(typeof this.socket>"u"){T(Error("Connection already closed"));return}this.socket.onclose=T=>{this.onClose(T),C()},this.socket.close()})}async send(C){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,$.u)(C))}catch(T){this.onError(C.id,T)}}register(C=this.url){if(!(0,Q.isWsUrl)(C))throw Error(`Provided URL is not compatible with WebSocket connection: ${C}`);if(this.registering){let C=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=C||this.events.listenerCount("open")>=C)&&this.events.setMaxListeners(C+1),new Promise((C,T)=>{this.events.once("register_error",C=>{this.resetMaxListeners(),T(C)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return T(Error("WebSocket connection is missing or invalid"));C(this.socket)})})}return this.url=C,this.registering=!0,new Promise((T,N)=>{let U=(0,Q.isReactNative)()?void 0:{rejectUnauthorized:!(0,Q.isLocalhostUrl)(C)},$=new Y(C,[],U);w()?$.onerror=C=>{N(this.emitError(C.error))}:$.on("error",C=>{N(this.emitError(C))}),$.onopen=()=>{this.onOpen($),T($)}})}onOpen(C){C.onmessage=C=>this.onPayload(C),C.onclose=C=>this.onClose(C),this.socket=C,this.registering=!1,this.events.emit("open")}onClose(C){this.socket=void 0,this.registering=!1,this.events.emit("close",C)}onPayload(C){if(typeof C.data>"u")return;let T="string"==typeof C.data?(0,$.D)(C.data):C.data;this.events.emit("payload",T)}onError(C,T){let N=this.parseError(T),U=N.message||N.toString(),$=(0,Q.formatJsonRpcError)(C,U);this.events.emit("payload",$)}parseError(C,T=this.url){return(0,Q.parseConnectionError)(C,d(T),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(C){let T=this.parseError(Error(C?.message||`WebSocket connection failed for host: ${d(this.url)}`));return this.events.emit("register_error",T),T}}},2030:function(C){"use strict";C.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1873:function(C,T,N){"use strict";let U;N.d(T,{Z:function(){return h}});let $=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Q=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Y=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(C,T){if("__proto__"===C||"constructor"===C&&T&&"object"==typeof T&&"prototype"in T){console.warn(`[destr] Dropping "${C}" key to prevent prototype pollution.`);return}return T}function destr(C,T={}){if("string"!=typeof C)return C;if('"'===C[0]&&'"'===C[C.length-1]&&-1===C.indexOf("\\"))return C.slice(1,-1);let N=C.trim();if(N.length<=9)switch(N.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Y.test(C)){if(T.strict)throw SyntaxError("[destr] Invalid JSON");return C}try{if($.test(C)||Q.test(C)){if(T.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(C,jsonParseTransform)}return JSON.parse(C)}catch(N){if(T.strict)throw N;return C}}var X=N(8764).lW;function asyncCall(C,...T){try{var N;return(N=C(...T))&&"function"==typeof N.then?N:Promise.resolve(N)}catch(C){return Promise.reject(C)}}function stringify(C){if(function(C){let T=typeof C;return null===C||"object"!==T&&"function"!==T}(C))return String(C);if(function(C){let T=Object.getPrototypeOf(C);return!T||T.isPrototypeOf(Object)}(C)||Array.isArray(C))return JSON.stringify(C);if("function"==typeof C.toJSON)return stringify(C.toJSON());throw Error("[unstorage] Cannot stringify value!")}let ee="base64:";function normalizeKey(C){return C&&C.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function unstorage_CoCt7NXC_normalizeBaseKey(C){return(C=normalizeKey(C))?C+":":""}let memory=()=>{let C=new Map;return{name:"memory",getInstance:()=>C,hasItem:T=>C.has(T),getItem:T=>C.get(T)??null,getItemRaw:T=>C.get(T)??null,setItem(T,N){C.set(T,N)},setItemRaw(T,N){C.set(T,N)},removeItem(T){C.delete(T)},getKeys:()=>[...C.keys()],clear(){C.clear()},dispose(){C.clear()}}};function watch(C,T,N){return C.watch?C.watch((C,U)=>T(C,N+U)):()=>{}}async function dispose(C){"function"==typeof C.dispose&&await asyncCall(C.dispose)}function promisifyRequest(C){return new Promise((T,N)=>{C.oncomplete=C.onsuccess=()=>T(C.result),C.onabort=C.onerror=()=>N(C.error)})}function createStore(C,T){let N;let getDB=()=>{if(N)return N;let U=indexedDB.open(C);return U.onupgradeneeded=()=>U.result.createObjectStore(T),(N=promisifyRequest(U)).then(C=>{C.onclose=()=>N=void 0},()=>{}),N};return(C,N)=>getDB().then(U=>N(U.transaction(T,C).objectStore(T)))}function defaultGetStore(){return U||(U=createStore("keyval-store","keyval")),U}function get(C,T=defaultGetStore()){return T("readonly",T=>promisifyRequest(T.get(C)))}var es=N(5094),z=(C={})=>{let T;let N=C.base&&C.base.length>0?`${C.base}:`:"",e=C=>N+C;return C.dbName&&C.storeName&&(T=createStore(C.dbName,C.storeName)),{name:"idb-keyval",options:C,hasItem:async C=>!(typeof await get(e(C),T)>"u"),getItem:async C=>await get(e(C),T)??null,setItem:(C,N)=>(function(C,T,N=defaultGetStore()){return N("readwrite",N=>(N.put(T,C),promisifyRequest(N.transaction)))})(e(C),N,T),removeItem:C=>(function(C,T=defaultGetStore()){return T("readwrite",T=>(T.delete(C),promisifyRequest(T.transaction)))})(e(C),T),getKeys:()=>(function(C=defaultGetStore()){return C("readonly",C=>{var T;if(C.getAllKeys)return promisifyRequest(C.getAllKeys());let N=[];return(T=C=>N.push(C.key),C.openCursor().onsuccess=function(){this.result&&(T(this.result),this.result.continue())},promisifyRequest(C.transaction)).then(()=>N)})})(T),clear:()=>(function(C=defaultGetStore()){return C("readwrite",C=>(C.clear(),promisifyRequest(C.transaction)))})(T)}};let _=class _{constructor(){this.indexedDb=function(C={}){let T={mounts:{"":C.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=C=>{for(let N of T.mountpoints)if(C.startsWith(N))return{base:N,relativeKey:C.slice(N.length),driver:T.mounts[N]};return{base:"",relativeKey:C,driver:T.mounts[""]}},getMounts=(C,N)=>T.mountpoints.filter(T=>T.startsWith(C)||N&&C.startsWith(T)).map(N=>({relativeBase:C.length>N.length?C.slice(N.length):void 0,mountpoint:N,driver:T.mounts[N]})),onChange=(C,N)=>{if(T.watching)for(let U of(N=normalizeKey(N),T.watchListeners))U(C,N)},startWatch=async()=>{if(!T.watching)for(let C in T.watching=!0,T.mounts)T.unwatch[C]=await watch(T.mounts[C],onChange,C)},stopWatch=async()=>{if(T.watching){for(let C in T.unwatch)await T.unwatch[C]();T.unwatch={},T.watching=!1}},runBatch=(C,T,N)=>{let U=new Map,getBatch=C=>{let T=U.get(C.base);return T||(T={driver:C.driver,base:C.base,items:[]},U.set(C.base,T)),T};for(let N of C){let C="string"==typeof N,U=normalizeKey(C?N:N.key),$=C?void 0:N.value,Q=C||!N.options?T:{...T,...N.options},Y=getMount(U);getBatch(Y).items.push({key:U,value:$,relativeKey:Y.relativeKey,options:Q})}return Promise.all([...U.values()].map(C=>N(C))).then(C=>C.flat())},N={hasItem(C,T={}){C=normalizeKey(C);let{relativeKey:N,driver:U}=getMount(C);return asyncCall(U.hasItem,N,T)},getItem(C,T={}){C=normalizeKey(C);let{relativeKey:N,driver:U}=getMount(C);return asyncCall(U.getItem,N,T).then(C=>destr(C))},getItems:(C,T={})=>runBatch(C,T,C=>C.driver.getItems?asyncCall(C.driver.getItems,C.items.map(C=>({key:C.relativeKey,options:C.options})),T).then(T=>T.map(T=>({key:function(...C){return normalizeKey(C.join(":"))}(C.base,T.key),value:destr(T.value)}))):Promise.all(C.items.map(T=>asyncCall(C.driver.getItem,T.relativeKey,T.options).then(C=>({key:T.key,value:destr(C)}))))),getItemRaw(C,T={}){C=normalizeKey(C);let{relativeKey:N,driver:U}=getMount(C);return U.getItemRaw?asyncCall(U.getItemRaw,N,T):asyncCall(U.getItem,N,T).then(C=>{var T;return"string"==typeof C&&C.startsWith(ee)?(T=C.slice(ee.length),globalThis.Buffer?X.from(T,"base64"):Uint8Array.from(globalThis.atob(T),C=>C.codePointAt(0))):C})},async setItem(C,T,U={}){if(void 0===T)return N.removeItem(C);C=normalizeKey(C);let{relativeKey:$,driver:Q}=getMount(C);Q.setItem&&(await asyncCall(Q.setItem,$,stringify(T),U),Q.watch||onChange("update",C))},async setItems(C,T){await runBatch(C,T,async C=>{if(C.driver.setItems)return asyncCall(C.driver.setItems,C.items.map(C=>({key:C.relativeKey,value:stringify(C.value),options:C.options})),T);C.driver.setItem&&await Promise.all(C.items.map(T=>asyncCall(C.driver.setItem,T.relativeKey,stringify(T.value),T.options)))})},async setItemRaw(C,T,U={}){if(void 0===T)return N.removeItem(C,U);C=normalizeKey(C);let{relativeKey:$,driver:Q}=getMount(C);if(Q.setItemRaw)await asyncCall(Q.setItemRaw,$,T,U);else{if(!Q.setItem)return;await asyncCall(Q.setItem,$,"string"==typeof T?T:ee+(globalThis.Buffer?X.from(T).toString("base64"):globalThis.btoa(String.fromCodePoint(...T))),U)}Q.watch||onChange("update",C)},async removeItem(C,T={}){"boolean"==typeof T&&(T={removeMeta:T}),C=normalizeKey(C);let{relativeKey:N,driver:U}=getMount(C);U.removeItem&&(await asyncCall(U.removeItem,N,T),(T.removeMeta||T.removeMata)&&await asyncCall(U.removeItem,N+"$",T),U.watch||onChange("remove",C))},async getMeta(C,T={}){"boolean"==typeof T&&(T={nativeOnly:T}),C=normalizeKey(C);let{relativeKey:N,driver:U}=getMount(C),$=Object.create(null);if(U.getMeta&&Object.assign($,await asyncCall(U.getMeta,N,T)),!T.nativeOnly){let C=await asyncCall(U.getItem,N+"$",T).then(C=>destr(C));C&&"object"==typeof C&&("string"==typeof C.atime&&(C.atime=new Date(C.atime)),"string"==typeof C.mtime&&(C.mtime=new Date(C.mtime)),Object.assign($,C))}return $},setMeta(C,T,N={}){return this.setItem(C+"$",T,N)},removeMeta(C,T={}){return this.removeItem(C+"$",T)},async getKeys(C,T={}){C=unstorage_CoCt7NXC_normalizeBaseKey(C);let N=getMounts(C,!0),U=[],$=[],Q=!0;for(let C of N){C.driver.flags?.maxDepth||(Q=!1);let N=await asyncCall(C.driver.getKeys,C.relativeBase,T);for(let T of N){let N=C.mountpoint+normalizeKey(T);U.some(C=>N.startsWith(C))||$.push(N)}U=[C.mountpoint,...U.filter(T=>!T.startsWith(C.mountpoint))]}let Y=void 0!==T.maxDepth&&!Q;return $.filter(N=>{var U;return(!Y||function(C,T){if(void 0===T)return!0;let N=0,U=C.indexOf(":");for(;U>-1;)N++,U=C.indexOf(":",U+1);return N<=T}(N,T.maxDepth))&&((U=C)?N.startsWith(U)&&"$"!==N[N.length-1]:"$"!==N[N.length-1])})},async clear(C,T={}){C=unstorage_CoCt7NXC_normalizeBaseKey(C),await Promise.all(getMounts(C,!1).map(async C=>{if(C.driver.clear)return asyncCall(C.driver.clear,C.relativeBase,T);if(C.driver.removeItem){let N=await C.driver.getKeys(C.relativeBase||"",T);return Promise.all(N.map(N=>C.driver.removeItem(N,T)))}}))},async dispose(){await Promise.all(Object.values(T.mounts).map(C=>dispose(C)))},watch:async C=>(await startWatch(),T.watchListeners.push(C),async()=>{T.watchListeners=T.watchListeners.filter(T=>T!==C),0===T.watchListeners.length&&await stopWatch()}),async unwatch(){T.watchListeners=[],await stopWatch()},mount(C,U){if((C=unstorage_CoCt7NXC_normalizeBaseKey(C))&&T.mounts[C])throw Error(`already mounted at ${C}`);return C&&(T.mountpoints.push(C),T.mountpoints.sort((C,T)=>T.length-C.length)),T.mounts[C]=U,T.watching&&Promise.resolve(watch(U,onChange,C)).then(N=>{T.unwatch[C]=N}).catch(console.error),N},async unmount(C,N=!0){(C=unstorage_CoCt7NXC_normalizeBaseKey(C))&&T.mounts[C]&&(T.watching&&C in T.unwatch&&(T.unwatch[C]?.(),delete T.unwatch[C]),N&&await dispose(T.mounts[C]),T.mountpoints=T.mountpoints.filter(T=>T!==C),delete T.mounts[C])},getMount(C=""){C=normalizeKey(C)+":";let T=getMount(C);return{driver:T.driver,base:T.base}},getMounts(C="",T={}){C=normalizeKey(C);let N=getMounts(C,T.parents);return N.map(C=>({driver:C.driver,base:C.mountpoint}))},keys:(C,T={})=>N.getKeys(C,T),get:(C,T={})=>N.getItem(C,T),set:(C,T,U={})=>N.setItem(C,T,U),has:(C,T={})=>N.hasItem(C,T),del:(C,T={})=>N.removeItem(C,T),remove:(C,T={})=>N.removeItem(C,T)};return N}({driver:z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(C=>[C.key,C.value])}async getItem(C){let T=await this.indexedDb.getItem(C);if(null!==T)return T}async setItem(C,T){await this.indexedDb.setItem(C,(0,es.u)(T))}async removeItem(C){await this.indexedDb.removeItem(C)}};var el="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof N.g?N.g:"u">typeof self?self:{},ec={exports:{}};function k(C){var T;return[C[0],(0,es.D)(null!=(T=C[1])?T:"")]}!function(){function t(){}t.prototype.getItem=function(C){return this.hasOwnProperty(C)?String(this[C]):null},t.prototype.setItem=function(C,T){this[C]=String(T)},t.prototype.removeItem=function(C){delete this[C]},t.prototype.clear=function(){let C=this;Object.keys(C).forEach(function(T){C[T]=void 0,delete C[T]})},t.prototype.key=function(C){return C=C||0,Object.keys(this)[C]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof el&&el.localStorage?ec.exports=el.localStorage:"u">typeof window&&window.localStorage?ec.exports=window.localStorage:ec.exports=new t}();let K=class K{constructor(){this.localStorage=ec.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(C){let T=this.localStorage.getItem(C);if(null!==T)return(0,es.D)(T)}async setItem(C,T){this.localStorage.setItem(C,(0,es.u)(T))}async removeItem(C){this.localStorage.removeItem(C)}};let O=async(C,T,N)=>{let U="wc_storage_version",$=await T.getItem(U);if($&&$>=1){N(T);return}let Q=await C.getKeys();if(!Q.length){N(T);return}let Y=[];for(;Q.length;){let N=Q.shift();if(!N)continue;let U=N.toLowerCase();if(U.includes("wc@")||U.includes("walletconnect")||U.includes("wc_")||U.includes("wallet_connect")){let U=await C.getItem(N);await T.setItem(N,U),Y.push(N)}}await T.setItem(U,1),N(T),j(C,Y)},j=async(C,T)=>{T.length&&T.forEach(async T=>{await C.removeItem(T)})};let h=class h{constructor(){this.initialized=!1,this.setInitialized=C=>{this.storage=C,this.initialized=!0};let C=new K;this.storage=C;try{let T=new _;O(C,T,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(C){return await this.initialize(),this.storage.getItem(C)}async setItem(C,T){return await this.initialize(),this.storage.setItem(C,T)}async removeItem(C){return await this.initialize(),this.storage.removeItem(C)}async initialize(){this.initialized||await new Promise(C=>{let T=setInterval(()=>{this.initialized&&(clearInterval(T),C())},20)})}}},2044:function(C,T,N){"use strict";N.d(T,{Ep:function(){return E},Fd:function(){return y},Rt:function(){return A},gw:function(){return $.a},jI:function(){return k}});var U=N(6559),$=N.n(U),Q=N(5094);let Y={level:"info"},X="custom_context";let O=class O{constructor(C){this.nodeValue=C,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}};let d=class d{constructor(C){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=C,this.sizeInBytes=0}append(C){let T=new O(C);if(T.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${C} with size ${T.size}`);for(;this.size+T.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=T):this.head=T,this.tail=T,this.lengthInNodes++,this.sizeInBytes+=T.size}shift(){if(!this.head)return;let C=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=C.size}toArray(){let C=[],T=this.head;for(;null!==T;)C.push(T.value),T=T.next;return C}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let C=this.head;return{next:()=>{if(!C)return{done:!0,value:null};let T=C.value;return C=C.next,{done:!1,value:T}}}}};let L=class L{constructor(C,T=1024e3){this.level=C??"error",this.levelValue=U.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=T,this.logs=new d(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(C,T){T===U.levels.values.error?console.error(C):T===U.levels.values.warn?console.warn(C):T===U.levels.values.debug?console.debug(C):T===U.levels.values.trace?console.trace(C):console.log(C)}appendToLogs(C){this.logs.append((0,Q.u)({timestamp:new Date().toISOString(),log:C}));let T="string"==typeof C?JSON.parse(C).level:C.level;T>=this.levelValue&&this.forwardToConsole(C,T)}getLogs(){return this.logs}clearLogs(){this.logs=new d(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(C){let T=this.getLogArray();return T.push((0,Q.u)({extraMetadata:C})),new Blob(T,{type:"application/json"})}};let m=class m{constructor(C,T=1024e3){this.baseChunkLogger=new L(C,T)}write(C){this.baseChunkLogger.appendToLogs(C)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(C){return this.baseChunkLogger.logsToBlob(C)}downloadLogsBlobInBrowser(C){let T=URL.createObjectURL(this.logsToBlob(C)),N=document.createElement("a");N.href=T,N.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(T)}};let B=class B{constructor(C,T=1024e3){this.baseChunkLogger=new L(C,T)}write(C){this.baseChunkLogger.appendToLogs(C)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(C){return this.baseChunkLogger.logsToBlob(C)}};var ee=Object.defineProperty,es=Object.defineProperties,el=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,eh=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable,f=(C,T,N)=>T in C?ee(C,T,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[T]=N,i=(C,T)=>{for(var N in T||(T={}))eh.call(T,N)&&f(C,N,T[N]);if(ec)for(var N of ec(T))eu.call(T,N)&&f(C,N,T[N]);return C},g=(C,T)=>es(C,el(T));function k(C){return g(i({},C),{level:C?.level||Y.level})}function y(C,T=X){return typeof C.bindings>"u"?function(C,T=X){return C[T]||""}(C,T):C.bindings().context||""}function E(C,T,N=X){let U=function(C,T,N=X){let U=y(C,N);return U.trim()?`${U}/${T}`:T}(C,T,N),$=C.child({context:U});return function(C,T,N=X){return C[N]=T,C}($,U,N)}function A(C){return"u">typeof C.loggerOverride&&"string"!=typeof C.loggerOverride?{logger:C.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(C){var T,N;let U=new m(null==(T=C.opts)?void 0:T.level,C.maxSizeInBytes);return{logger:$()(g(i({},C.opts),{level:"trace",browser:g(i({},null==(N=C.opts)?void 0:N.browser),{write:C=>U.write(C)})})),chunkLoggerController:U}}(C):function(C){var T;let N=new B(null==(T=C.opts)?void 0:T.level,C.maxSizeInBytes);return{logger:$()(g(i({},C.opts),{level:"trace"}),N),chunkLoggerController:N}}(C)}},7968:function(C,T,N){"use strict";N.d(T,{iO:function(){return U}});let U={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}},9392:function(C,T,N){"use strict";N.d(T,{Au:function(){return Po},bG:function(){return Qe},vf:function(){return Qo},xp:function(){return sn}});var U=N(6736),$=N(5094);function fe(C,...T){if(!(C instanceof Uint8Array||ArrayBuffer.isView(C)&&"Uint8Array"===C.constructor.name))throw Error("Uint8Array expected");if(T.length>0&&!T.includes(C.length))throw Error("Uint8Array expected of length "+T+", got length="+C.length)}function De(C,T=!0){if(C.destroyed)throw Error("Hash instance has been destroyed");if(T&&C.finished)throw Error("Hash#digest() has already been called")}let Q="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,_t=C=>new DataView(C.buffer,C.byteOffset,C.byteLength);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function de(C){return"string"==typeof C&&(C=function(C){if("string"!=typeof C)throw Error("utf8ToBytes expected string, got "+typeof C);return new Uint8Array(new TextEncoder().encode(C))}(C)),fe(C),C}let xn=class xn{clone(){return this._cloneInto()}};function he(C=32){if(Q&&"function"==typeof Q.getRandomValues)return Q.getRandomValues(new Uint8Array(C));if(Q&&"function"==typeof Q.randomBytes)return Q.randomBytes(C);throw Error("crypto.getRandomValues must be defined")}let An=class An extends xn{constructor(C,T,N,U){super(),this.blockLen=C,this.outputLen=T,this.padOffset=N,this.isLE=U,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(C),this.view=_t(this.buffer)}update(C){De(this);let{view:T,buffer:N,blockLen:U}=this;C=de(C);let $=C.length;for(let Q=0;Q<$;){let Y=Math.min(U-this.pos,$-Q);if(Y===U){let T=_t(C);for(;U<=$-Q;Q+=U)this.process(T,Q);continue}N.set(C.subarray(Q,Q+Y),this.pos),this.pos+=Y,Q+=Y,this.pos===U&&(this.process(T,0),this.pos=0)}return this.length+=C.length,this.roundClean(),this}digestInto(C){De(this),function(C,T){fe(C);let N=T.outputLen;if(C.length<N)throw Error("digestInto() expects output buffer of length at least "+N)}(C,this),this.finished=!0;let{buffer:T,view:N,blockLen:U,isLE:$}=this,{pos:Q}=this;T[Q++]=128,this.buffer.subarray(Q).fill(0),this.padOffset>U-Q&&(this.process(N,0),Q=0);for(let C=Q;C<U;C++)T[C]=0;(function(C,T,N,U){if("function"==typeof C.setBigUint64)return C.setBigUint64(T,N,U);let $=BigInt(32),Q=BigInt(4294967295),Y=Number(N>>$&Q),X=Number(N&Q),ee=U?4:0,es=U?0:4;C.setUint32(T+ee,Y,U),C.setUint32(T+es,X,U)})(N,U-8,BigInt(8*this.length),$),this.process(N,0);let Y=_t(C),X=this.outputLen;if(X%4)throw Error("_sha2: outputLen should be aligned to 32bit");let ee=X/4,es=this.get();if(ee>es.length)throw Error("_sha2: outputLen bigger than state");for(let C=0;C<ee;C++)Y.setUint32(4*C,es[C],$)}digest(){let{buffer:C,outputLen:T}=this;this.digestInto(C);let N=C.slice(0,T);return this.destroy(),N}_cloneInto(C){C||(C=new this.constructor),C.set(...this.get());let{blockLen:T,buffer:N,length:U,finished:$,destroyed:Q,pos:Y}=this;return C.length=U,C.pos=Y,C.finished=$,C.destroyed=Q,U%T&&C.buffer.set(N),C}};let Y=BigInt(4294967296-1),X=BigInt(32);function le(C,T=!1){return T?{h:Number(C&Y),l:Number(C>>X&Y)}:{h:0|Number(C>>X&Y),l:0|Number(C&Y)}}let ee={fromBig:le,split:function(C,T=!1){let N=new Uint32Array(C.length),U=new Uint32Array(C.length);for(let $=0;$<C.length;$++){let{h:Q,l:Y}=le(C[$],T);[N[$],U[$]]=[Q,Y]}return[N,U]},toBig:(C,T)=>BigInt(C>>>0)<<X|BigInt(T>>>0),shrSH:(C,T,N)=>C>>>N,shrSL:(C,T,N)=>C<<32-N|T>>>N,rotrSH:(C,T,N)=>C>>>N|T<<32-N,rotrSL:(C,T,N)=>C<<32-N|T>>>N,rotrBH:(C,T,N)=>C<<64-N|T>>>N-32,rotrBL:(C,T,N)=>C>>>N-32|T<<64-N,rotr32H:(C,T)=>T,rotr32L:(C,T)=>C,rotlSH:(C,T,N)=>C<<N|T>>>32-N,rotlSL:(C,T,N)=>T<<N|C>>>32-N,rotlBH:(C,T,N)=>T<<N-32|C>>>64-N,rotlBL:(C,T,N)=>C<<N-32|T>>>64-N,add:function(C,T,N,U){let $=(T>>>0)+(U>>>0);return{h:C+N+($/4294967296|0)|0,l:0|$}},add3L:(C,T,N)=>(C>>>0)+(T>>>0)+(N>>>0),add3H:(C,T,N,U)=>T+N+U+(C/4294967296|0)|0,add4L:(C,T,N,U)=>(C>>>0)+(T>>>0)+(N>>>0)+(U>>>0),add4H:(C,T,N,U,$)=>T+N+U+$+(C/4294967296|0)|0,add5H:(C,T,N,U,$,Q)=>T+N+U+$+Q+(C/4294967296|0)|0,add5L:(C,T,N,U,$)=>(C>>>0)+(T>>>0)+(N>>>0)+(U>>>0)+($>>>0)},[es,el]=ee.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(C=>BigInt(C))),ec=new Uint32Array(80),eh=new Uint32Array(80);let Jn=class Jn extends An{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:C,Al:T,Bh:N,Bl:U,Ch:$,Cl:Q,Dh:Y,Dl:X,Eh:ee,El:es,Fh:el,Fl:ec,Gh:eh,Gl:eu,Hh:ed,Hl:ep}=this;return[C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep]}set(C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep){this.Ah=0|C,this.Al=0|T,this.Bh=0|N,this.Bl=0|U,this.Ch=0|$,this.Cl=0|Q,this.Dh=0|Y,this.Dl=0|X,this.Eh=0|ee,this.El=0|es,this.Fh=0|el,this.Fl=0|ec,this.Gh=0|eh,this.Gl=0|eu,this.Hh=0|ed,this.Hl=0|ep}process(C,T){for(let N=0;N<16;N++,T+=4)ec[N]=C.getUint32(T),eh[N]=C.getUint32(T+=4);for(let C=16;C<80;C++){let T=0|ec[C-15],N=0|eh[C-15],U=ee.rotrSH(T,N,1)^ee.rotrSH(T,N,8)^ee.shrSH(T,N,7),$=ee.rotrSL(T,N,1)^ee.rotrSL(T,N,8)^ee.shrSL(T,N,7),Q=0|ec[C-2],Y=0|eh[C-2],X=ee.rotrSH(Q,Y,19)^ee.rotrBH(Q,Y,61)^ee.shrSH(Q,Y,6),es=ee.rotrSL(Q,Y,19)^ee.rotrBL(Q,Y,61)^ee.shrSL(Q,Y,6),el=ee.add4L($,es,eh[C-7],eh[C-16]),eu=ee.add4H(el,U,X,ec[C-7],ec[C-16]);ec[C]=0|eu,eh[C]=0|el}let{Ah:N,Al:U,Bh:$,Bl:Q,Ch:Y,Cl:X,Dh:eu,Dl:ed,Eh:ep,El:eg,Fh:ey,Fl:em,Gh:eb,Gl:ew,Hh:e_,Hl:ev}=this;for(let C=0;C<80;C++){let T=ee.rotrSH(ep,eg,14)^ee.rotrSH(ep,eg,18)^ee.rotrBH(ep,eg,41),eE=ee.rotrSL(ep,eg,14)^ee.rotrSL(ep,eg,18)^ee.rotrBL(ep,eg,41),ex=ep&ey^~ep&eb,eA=eg&em^~eg&ew,eI=ee.add5L(ev,eE,eA,el[C],eh[C]),eP=ee.add5H(eI,e_,T,ex,es[C],ec[C]),eS=0|eI,eD=ee.rotrSH(N,U,28)^ee.rotrBH(N,U,34)^ee.rotrBH(N,U,39),eB=ee.rotrSL(N,U,28)^ee.rotrBL(N,U,34)^ee.rotrBL(N,U,39),eC=N&$^N&Y^$&Y,eO=U&Q^U&X^Q&X;e_=0|eb,ev=0|ew,eb=0|ey,ew=0|em,ey=0|ep,em=0|eg,({h:ep,l:eg}=ee.add(0|eu,0|ed,0|eP,0|eS)),eu=0|Y,ed=0|X,Y=0|$,X=0|Q,$=0|N,Q=0|U;let eR=ee.add3L(eS,eB,eO);N=ee.add3H(eR,eP,eD,eC),U=0|eR}({h:N,l:U}=ee.add(0|this.Ah,0|this.Al,0|N,0|U)),({h:$,l:Q}=ee.add(0|this.Bh,0|this.Bl,0|$,0|Q)),({h:Y,l:X}=ee.add(0|this.Ch,0|this.Cl,0|Y,0|X)),({h:eu,l:ed}=ee.add(0|this.Dh,0|this.Dl,0|eu,0|ed)),({h:ep,l:eg}=ee.add(0|this.Eh,0|this.El,0|ep,0|eg)),({h:ey,l:em}=ee.add(0|this.Fh,0|this.Fl,0|ey,0|em)),({h:eb,l:ew}=ee.add(0|this.Gh,0|this.Gl,0|eb,0|ew)),({h:e_,l:ev}=ee.add(0|this.Hh,0|this.Hl,0|e_,0|ev)),this.set(N,U,$,Q,Y,X,eu,ed,ep,eg,ey,em,eb,ew,e_,ev)}roundClean(){ec.fill(0),eh.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};let eu=function(C){let e=T=>C().update(de(T)).digest(),T=C();return e.outputLen=T.outputLen,e.blockLen=T.blockLen,e.create=()=>C(),e}(()=>new Jn),ed=BigInt(0),ep=BigInt(1),eg=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function It(C){return C instanceof Uint8Array||ArrayBuffer.isView(C)&&"Uint8Array"===C.constructor.name}function Ut(C){if(!It(C))throw Error("Uint8Array expected")}function Tt(C,T){if("boolean"!=typeof T)throw Error(C+" boolean expected, got "+T)}let ey=Array.from({length:256},(C,T)=>T.toString(16).padStart(2,"0"));function Ft(C){Ut(C);let T="";for(let N=0;N<C.length;N++)T+=ey[C[N]];return T}function pe(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);return""===C?ed:BigInt("0x"+C)}let em={_0:48,_9:57,A:65,F:70,a:97,f:102};function we(C){return C>=em._0&&C<=em._9?C-em._0:C>=em.A&&C<=em.F?C-(em.A-10):C>=em.a&&C<=em.f?C-(em.a-10):void 0}function Ee(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);let T=C.length,N=T/2;if(T%2)throw Error("hex string expected, got unpadded hex of length "+T);let U=new Uint8Array(N);for(let T=0,$=0;T<N;T++,$+=2){let N=we(C.charCodeAt($)),Q=we(C.charCodeAt($+1));if(void 0===N||void 0===Q){let T=C[$]+C[$+1];throw Error('hex string expected, got non-hex character "'+T+'" at index '+$)}U[T]=16*N+Q}return U}function Et(C){return Ut(C),pe(Ft(Uint8Array.from(C).reverse()))}function ge(C,T){return Ee(C.toString(16).padStart(2*T,"0"))}function Nt(C,T){return ge(C,T).reverse()}function W(C,T,N){let U;if("string"==typeof T)try{U=Ee(T)}catch(T){throw Error(C+" must be hex string or Uint8Array, cause: "+T)}else if(It(T))U=Uint8Array.from(T);else throw Error(C+" must be hex string or Uint8Array");let $=U.length;if("number"==typeof N&&$!==N)throw Error(C+" of length "+N+" expected, got "+$);return U}function ye(...C){let T=0;for(let N=0;N<C.length;N++){let U=C[N];Ut(U),T+=U.length}let N=new Uint8Array(T);for(let T=0,U=0;T<C.length;T++){let $=C[T];N.set($,U),U+=$.length}return N}let Lt=C=>"bigint"==typeof C&&ed<=C;function ft(C,T,N,U){if(!(Lt(T)&&Lt(N)&&Lt(U))||!(N<=T)||!(T<U))throw Error("expected valid "+C+": "+N+" <= n < "+U+", got "+T)}let er=C=>(eg<<BigInt(C-1))-ep,eb={bigint:C=>"bigint"==typeof C,function:C=>"function"==typeof C,boolean:C=>"boolean"==typeof C,string:C=>"string"==typeof C,stringOrUint8Array:C=>"string"==typeof C||It(C),isSafeInteger:C=>Number.isSafeInteger(C),array:C=>Array.isArray(C),field:(C,T)=>T.Fp.isValid(C),hash:C=>"function"==typeof C&&Number.isSafeInteger(C.outputLen)};function Ot(C,T,N={}){let r=(T,N,U)=>{let $=eb[N];if("function"!=typeof $)throw Error("invalid validator function");let Q=C[T];if(!(U&&void 0===Q)&&!$(Q,C))throw Error("param "+String(T)+" is invalid. Expected "+N+", got "+Q)};for(let[C,N]of Object.entries(T))r(C,N,!1);for(let[C,T]of Object.entries(N))r(C,T,!0);return C}function xe(C){let T=new WeakMap;return(N,...U)=>{let $=T.get(N);if(void 0!==$)return $;let Q=C(N,...U);return T.set(N,Q),Q}}let ew=BigInt(0),e_=BigInt(1),ev=BigInt(2),eE=BigInt(3),ex=BigInt(4),eA=BigInt(5),eI=BigInt(8);function H(C,T){let N=C%T;return N>=ew?N:T+N}function J(C,T,N){let U=C;for(;T-- >ew;)U*=U,U%=N;return U}function Ae(C,T){if(C===ew)throw Error("invert: expected non-zero number");if(T<=ew)throw Error("invert: expected positive modulus, got "+T);let N=H(C,T),U=T,$=ew,Q=e_;for(;N!==ew;){let C=U/N,T=U%N,Y=$-Q*C;U=N,N=T,$=Q,Q=Y}if(U!==e_)throw Error("invert: does not exist");return H($,T)}let ur=(C,T)=>(H(C,T)&e_)===e_,eP=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function me(C,T){let N=void 0!==T?T:C.toString(2).length,U=Math.ceil(N/8);return{nBitLength:N,nByteLength:U}}function _e(C,T,N=!1,U={}){let $;if(C<=ew)throw Error("invalid field: expected ORDER > 0, got "+C);let{nBitLength:Q,nByteLength:Y}=me(C,T);if(Y>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let X=Object.freeze({ORDER:C,isLE:N,BITS:Q,BYTES:Y,MASK:er(Q),ZERO:ew,ONE:e_,create:T=>H(T,C),isValid:T=>{if("bigint"!=typeof T)throw Error("invalid field element: expected bigint, got "+typeof T);return ew<=T&&T<C},is0:C=>C===ew,isOdd:C=>(C&e_)===e_,neg:T=>H(-T,C),eql:(C,T)=>C===T,sqr:T=>H(T*T,C),add:(T,N)=>H(T+N,C),sub:(T,N)=>H(T-N,C),mul:(T,N)=>H(T*N,C),pow:(C,T)=>(function(C,T,N){if(N<ew)throw Error("invalid exponent, negatives unsupported");if(N===ew)return C.ONE;if(N===e_)return T;let U=C.ONE,$=T;for(;N>ew;)N&e_&&(U=C.mul(U,$)),$=C.sqr($),N>>=e_;return U})(X,C,T),div:(T,N)=>H(T*Ae(N,C),C),sqrN:C=>C*C,addN:(C,T)=>C+T,subN:(C,T)=>C-T,mulN:(C,T)=>C*T,inv:T=>Ae(T,C),sqrt:U.sqrt||(T=>($||($=function(C){if(C%ex===eE){let T=(C+e_)/ex;return function(C,N){let U=C.pow(N,T);if(!C.eql(C.sqr(U),N))throw Error("Cannot find square root");return U}}if(C%eI===eA){let T=(C-eA)/eI;return function(C,N){let U=C.mul(N,ev),$=C.pow(U,T),Q=C.mul(N,$),Y=C.mul(C.mul(Q,ev),$),X=C.mul(Q,C.sub(Y,C.ONE));if(!C.eql(C.sqr(X),N))throw Error("Cannot find square root");return X}}return function(C){let T,N,U;let $=(C-e_)/ev;for(T=C-e_,N=0;T%ev===ew;T/=ev,N++);for(U=ev;U<C&&function(C,T,N){if(T<ew)throw Error("invalid exponent, negatives unsupported");if(N<=ew)throw Error("invalid modulus");if(N===e_)return ew;let U=e_;for(;T>ew;)T&e_&&(U=U*C%N),C=C*C%N,T>>=e_;return U}(U,$,C)!==C-e_;U++)if(U>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===N){let T=(C+e_)/ex;return function(C,N){let U=C.pow(N,T);if(!C.eql(C.sqr(U),N))throw Error("Cannot find square root");return U}}let Q=(T+e_)/ev;return function(C,Y){if(C.pow(Y,$)===C.neg(C.ONE))throw Error("Cannot find square root");let X=N,ee=C.pow(C.mul(C.ONE,U),T),es=C.pow(Y,Q),el=C.pow(Y,T);for(;!C.eql(el,C.ONE);){if(C.eql(el,C.ZERO))return C.ZERO;let T=1;for(let N=C.sqr(el);T<X&&!C.eql(N,C.ONE);T++)N=C.sqr(N);let N=C.pow(ee,e_<<BigInt(X-T-1));ee=C.sqr(N),es=C.mul(es,N),el=C.mul(el,ee),X=T}return es}}(C)}(C)),$(X,T))),invertBatch:C=>(function(C,T){let N=Array(T.length),U=T.reduce((T,U,$)=>C.is0(U)?T:(N[$]=T,C.mul(T,U)),C.ONE),$=C.inv(U);return T.reduceRight((T,U,$)=>C.is0(U)?T:(N[$]=C.mul(T,N[$]),C.mul(T,U)),$),N})(X,C),cmov:(C,T,N)=>N?T:C,toBytes:C=>N?Nt(C,Y):ge(C,Y),fromBytes:C=>{if(C.length!==Y)throw Error("Field.fromBytes: expected "+Y+" bytes, got "+C.length);return N?Et(C):pe(Ft(C))}});return Object.freeze(X)}let eS=BigInt(0),eD=BigInt(1);function zt(C,T){let N=T.negate();return C?N:T}function ve(C,T){if(!Number.isSafeInteger(C)||C<=0||C>T)throw Error("invalid window size, expected [1.."+T+"], got W="+C)}function Mt(C,T){ve(C,T);let N=Math.ceil(T/C)+1,U=2**(C-1);return{windows:N,windowSize:U}}let eB=new WeakMap,eC=new WeakMap;function $t(C){return eC.get(C)||1}let eO=BigInt(0),eR=BigInt(1),eT=BigInt(2),eN=BigInt(8),ek={zip215:!0};BigInt(0),BigInt(1);let eU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),eL=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let eM=BigInt(1),eF=BigInt(2);BigInt(3);let ej=BigInt(5),ez=BigInt(8),eq=_e(eU,void 0,!0),eH={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:eq,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ez,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:eu,randomBytes:he,adjustScalarBytes:function(C){return C[0]&=248,C[31]&=127,C[31]|=64,C},uvRatio:function(C,T){let N=H(T*T*T,eU),U=H(N*N*T,eU),$=function(C){let T=BigInt(10),N=BigInt(20),U=BigInt(40),$=BigInt(80),Q=C*C%eU*C%eU,Y=J(Q,eF,eU)*Q%eU,X=J(Y,eM,eU)*C%eU,ee=J(X,ej,eU)*X%eU,es=J(ee,T,eU)*ee%eU,el=J(es,N,eU)*es%eU,ec=J(el,U,eU)*el%eU,eh=J(ec,$,eU)*ec%eU,eu=J(eh,$,eU)*ec%eU,ed=J(eu,T,eU)*ee%eU;return{pow_p_5_8:J(ed,eF,eU)*C%eU,b2:Q}}(C*U).pow_p_5_8,Q=H(C*N*$,eU),Y=H(T*Q*Q,eU),X=Q,ee=H(Q*eL,eU),es=Y===C,el=Y===H(-C,eU),ec=Y===H(-C*eL,eU);return es&&(Q=X),(el||ec)&&(Q=ee),ur(Q,eU)&&(Q=H(-Q,eU)),{isValid:es||el,value:Q}}},eV=function(C){var T;let N=function(C){let T=(function(C){let T=eP.reduce((C,T)=>(C[T]="function",C),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Ot(C,T)}(C.Fp),Ot(C,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...me(C.n,C.nBitLength),...C,p:C.Fp.ORDER}));return Ot(C,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...T})}(C),{Fp:U,n:$,prehash:Q,hash:Y,randomBytes:X,nByteLength:ee,h:es}=N,el=eT<<BigInt(8*ee)-eR,ec=U.create,eh=_e(N.n,N.nBitLength),eu=N.uvRatio||((C,T)=>{try{return{isValid:!0,value:U.sqrt(C*U.inv(T))}}catch{return{isValid:!1,value:eO}}}),eg=N.adjustScalarBytes||(C=>C),ey=N.domain||((C,T,N)=>{if(Tt("phflag",N),T.length||N)throw Error("Contexts/pre-hash are not supported");return C});function g(C,T){ft("coordinate "+C,T,eO,el)}function S(C){if(!(C instanceof d))throw Error("ExtendedPoint expected")}let em=xe((C,T)=>{let{ex:N,ey:$,ez:Q}=C,Y=C.is0();null==T&&(T=Y?eN:U.inv(Q));let X=ec(N*T),ee=ec($*T),es=ec(Q*T);if(Y)return{x:eO,y:eR};if(es!==eR)throw Error("invZ was invalid");return{x:X,y:ee}}),eb=xe(C=>{let{a:T,d:U}=N;if(C.is0())throw Error("bad point: ZERO");let{ex:$,ey:Q,ez:Y,et:X}=C,ee=ec($*$),es=ec(Q*Q),el=ec(Y*Y),eh=ec(el*el),eu=ec(ee*T),ed=ec(el*ec(eu+es)),ep=ec(eh+ec(U*ec(ee*es)));if(ed!==ep)throw Error("bad point: equation left != right (1)");let eg=ec($*Q),ey=ec(Y*X);if(eg!==ey)throw Error("bad point: equation left != right (2)");return!0});let d=class d{constructor(C,T,N,U){this.ex=C,this.ey=T,this.ez=N,this.et=U,g("x",C),g("y",T),g("z",N),g("t",U),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof d)throw Error("extended point not allowed");let{x:T,y:N}=C||{};return g("x",T),g("y",N),new d(T,N,eR,ec(T*N))}static normalizeZ(C){let T=U.invertBatch(C.map(C=>C.ez));return C.map((C,N)=>C.toAffine(T[N])).map(d.fromAffine)}static msm(C,T){return function(C,T,N,U){if(function(C,T){if(!Array.isArray(C))throw Error("array expected");C.forEach((C,N)=>{if(!(C instanceof T))throw Error("invalid point at index "+N)})}(N,C),function(C,T){if(!Array.isArray(C))throw Error("array of scalars expected");C.forEach((C,N)=>{if(!T.isValid(C))throw Error("invalid scalar at index "+N)})}(U,T),N.length!==U.length)throw Error("arrays of points and scalars must have equal length");let $=C.ZERO,Q=function(C){let T;for(T=0;C>ed;C>>=ep,T+=1);return T}(BigInt(N.length)),Y=Q>12?Q-3:Q>4?Q-2:Q?2:1,X=(1<<Y)-1,ee=Array(X+1).fill($),es=Math.floor((T.BITS-1)/Y)*Y,el=$;for(let C=es;C>=0;C-=Y){ee.fill($);for(let T=0;T<U.length;T++){let $=U[T],Q=Number($>>BigInt(C)&BigInt(X));ee[Q]=ee[Q].add(N[T])}let T=$;for(let C=ee.length-1,N=$;C>0;C--)N=N.add(ee[C]),T=T.add(N);if(el=el.add(T),0!==C)for(let C=0;C<Y;C++)el=el.double()}return el}(d,eh,C,T)}_setWindowSize(C){ev.setWindowSize(this,C)}assertValidity(){eb(this)}equals(C){S(C);let{ex:T,ey:N,ez:U}=this,{ex:$,ey:Q,ez:Y}=C,X=ec(T*Y),ee=ec($*U),es=ec(N*Y),el=ec(Q*U);return X===ee&&es===el}is0(){return this.equals(d.ZERO)}negate(){return new d(ec(-this.ex),this.ey,this.ez,ec(-this.et))}double(){let{a:C}=N,{ex:T,ey:U,ez:$}=this,Q=ec(T*T),Y=ec(U*U),X=ec(eT*ec($*$)),ee=ec(C*Q),es=T+U,el=ec(ec(es*es)-Q-Y),eh=ee+Y,eu=eh-X,ed=ee-Y,ep=ec(el*eu),eg=ec(eh*ed),ey=ec(el*ed),em=ec(eu*eh);return new d(ep,eg,em,ey)}add(C){S(C);let{a:T,d:U}=N,{ex:$,ey:Q,ez:Y,et:X}=this,{ex:ee,ey:es,ez:el,et:eh}=C;if(T===BigInt(-1)){let C=ec((Q-$)*(es+ee)),T=ec((Q+$)*(es-ee)),N=ec(T-C);if(N===eO)return this.double();let U=ec(Y*eT*eh),eu=ec(X*eT*el),ed=eu+U,ep=T+C,eg=eu-U,ey=ec(ed*N),em=ec(ep*eg),eb=ec(ed*eg),ew=ec(N*ep);return new d(ey,em,ew,eb)}let eu=ec($*ee),ed=ec(Q*es),ep=ec(X*U*eh),eg=ec(Y*el),ey=ec(($+Q)*(ee+es)-eu-ed),em=eg-ep,eb=eg+ep,ew=ec(ed-T*eu),e_=ec(ey*em),ev=ec(eb*ew),eE=ec(ey*ew),ex=ec(em*eb);return new d(e_,ev,ex,eE)}subtract(C){return this.add(C.negate())}wNAF(C){return ev.wNAFCached(this,C,d.normalizeZ)}multiply(C){ft("scalar",C,eR,$);let{p:T,f:N}=this.wNAF(C);return d.normalizeZ([T,N])[0]}multiplyUnsafe(C,T=d.ZERO){return ft("scalar",C,eO,$),C===eO?e_:this.is0()||C===eR?this:ev.wNAFCachedUnsafe(this,C,d.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(es).is0()}isTorsionFree(){return ev.unsafeLadder(this,$).is0()}toAffine(C){return em(this,C)}clearCofactor(){let{h:C}=N;return C===eR?this:this.multiplyUnsafe(C)}static fromHex(C,T=!1){let{d:$,a:Q}=N,Y=U.BYTES;C=W("pointHex",C,Y),Tt("zip215",T);let X=C.slice(),ee=C[Y-1];X[Y-1]=-129&ee;let es=Et(X),eh=T?el:U.ORDER;ft("pointHex.y",es,eO,eh);let ed=ec(es*es),ep=ec(ed-eR),eg=ec($*ed-Q),{isValid:ey,value:em}=eu(ep,eg);if(!ey)throw Error("Point.fromHex: invalid y coordinate");let eb=(em&eR)===eR,ew=(128&ee)!=0;if(!T&&em===eO&&ew)throw Error("Point.fromHex: x=0 and x_0=1");return ew!==eb&&(em=ec(-em)),d.fromAffine({x:em,y:es})}static fromPrivateKey(C){return O(C).point}toRawBytes(){let{x:C,y:T}=this.toAffine(),N=Nt(T,U.BYTES);return N[N.length-1]|=C&eR?128:0,N}toHex(){return Ft(this.toRawBytes())}};d.BASE=new d(N.Gx,N.Gy,eR,ec(N.Gx*N.Gy)),d.ZERO=new d(eO,eR,eR,eO);let{BASE:ew,ZERO:e_}=d,ev=(T=8*ee,{constTimeNegate:zt,hasPrecomputes:C=>1!==$t(C),unsafeLadder(C,T,N=d.ZERO){let U=C;for(;T>eS;)T&eD&&(N=N.add(U)),U=U.double(),T>>=eD;return N},precomputeWindow(C,N){let{windows:U,windowSize:$}=Mt(N,T),Q=[],Y=C,X=Y;for(let C=0;C<U;C++){X=Y,Q.push(X);for(let C=1;C<$;C++)X=X.add(Y),Q.push(X);Y=X.double()}return Q},wNAF(C,N,U){let{windows:$,windowSize:Q}=Mt(C,T),Y=d.ZERO,X=d.BASE,ee=BigInt(2**C-1),es=2**C,el=BigInt(C);for(let C=0;C<$;C++){let T=C*Q,$=Number(U&ee);U>>=el,$>Q&&($-=es,U+=eD);let ec=T+Math.abs($)-1,eh=C%2!=0,eu=$<0;0===$?X=X.add(zt(eh,N[T])):Y=Y.add(zt(eu,N[ec]))}return{p:Y,f:X}},wNAFUnsafe(C,N,U,$=d.ZERO){let{windows:Q,windowSize:Y}=Mt(C,T),X=BigInt(2**C-1),ee=2**C,es=BigInt(C);for(let C=0;C<Q;C++){let T=C*Y;if(U===eS)break;let Q=Number(U&X);if(U>>=es,Q>Y&&(Q-=ee,U+=eD),0===Q)continue;let el=N[T+Math.abs(Q)-1];Q<0&&(el=el.negate()),$=$.add(el)}return $},getPrecomputes(C,T,N){let U=eB.get(T);return U||(U=this.precomputeWindow(T,C),1!==C&&eB.set(T,N(U))),U},wNAFCached(C,T,N){let U=$t(C);return this.wNAF(U,this.getPrecomputes(U,C,N),T)},wNAFCachedUnsafe(C,T,N,U){let $=$t(C);return 1===$?this.unsafeLadder(C,T,U):this.wNAFUnsafe($,this.getPrecomputes($,C,N),T,U)},setWindowSize(C,N){ve(N,T),eC.set(C,N),eB.delete(C)}});function O(C){let T=U.BYTES;C=W("private key",C,T);let N=W("hashed private key",Y(C),2*T),Q=eg(N.slice(0,T)),X=N.slice(T,2*T),ee=H(Et(Q),$),es=ew.multiply(ee),el=es.toRawBytes();return{head:Q,prefix:X,scalar:ee,point:es,pointBytes:el}}function tt(C=new Uint8Array,...T){let N=ye(...T);return H(Et(Y(ey(N,W("context",C),!!Q))),$)}return ew._setWindowSize(8),{CURVE:N,getPublicKey:function(C){return O(C).pointBytes},sign:function(C,T,N={}){C=W("message",C),Q&&(C=Q(C));let{prefix:Y,scalar:X,pointBytes:ee}=O(T),es=tt(N.context,Y,C),el=ew.multiply(es).toRawBytes(),ec=tt(N.context,el,ee,C),eh=H(es+ec*X,$);ft("signature.s",eh,eO,$);let eu=ye(el,Nt(eh,U.BYTES));return W("result",eu,2*U.BYTES)},verify:function(C,T,N,$=ek){let Y,X,ee;let{context:es,zip215:el}=$,ec=U.BYTES;C=W("signature",C,2*ec),T=W("message",T),N=W("publicKey",N,ec),void 0!==el&&Tt("zip215",el),Q&&(T=Q(T));let eh=Et(C.slice(ec,2*ec));try{Y=d.fromHex(N,el),X=d.fromHex(C.slice(0,ec),el),ee=ew.multiplyUnsafe(eh)}catch{return!1}if(!el&&Y.isSmallOrder())return!1;let eu=tt(es,X.toRawBytes(),Y.toRawBytes(),T);return X.add(Y.multiplyUnsafe(eu)).subtract(ee).clearCofactor().equals(d.ZERO)},ExtendedPoint:d,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>X(U.BYTES),precompute:(C=8,T=d.BASE)=>(T._setWindowSize(C),T.multiply(BigInt(3)),T)}}}(eH),eK="base64url",eG="utf8",e$="utf8",eQ="base58btc";function Xt(C){return null!=globalThis.Buffer?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):C}function Le(C=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Xt(globalThis.Buffer.allocUnsafe(C)):new Uint8Array(C)}function Oe(C,T){T||(T=C.reduce((C,T)=>C+T.length,0));let N=Le(T),U=0;for(let T of C)N.set(T,U),U+=T.length;return Xt(N)}var Tr=function(C,T){if(C.length>=255)throw TypeError("Alphabet too long");for(var N=new Uint8Array(256),U=0;U<N.length;U++)N[U]=255;for(var $=0;$<C.length;$++){var Q=C.charAt($),Y=Q.charCodeAt(0);if(255!==N[Y])throw TypeError(Q+" is ambiguous");N[Y]=$}var X=C.length,ee=C.charAt(0),es=Math.log(X)/Math.log(256),el=Math.log(256)/Math.log(X);function p(C){if("string"!=typeof C)throw TypeError("Expected String");if(0===C.length)return new Uint8Array;var T=0;if(" "!==C[0]){for(var U=0,$=0;C[T]===ee;)U++,T++;for(var Q=(C.length-T)*es+1>>>0,Y=new Uint8Array(Q);C[T];){var el=N[C.charCodeAt(T)];if(255===el)return;for(var ec=0,eh=Q-1;(0!==el||ec<$)&&-1!==eh;eh--,ec++)el+=X*Y[eh]>>>0,Y[eh]=el%256>>>0,el=el/256>>>0;if(0!==el)throw Error("Non-zero carry");$=ec,T++}if(" "!==C[T]){for(var eu=Q-$;eu!==Q&&0===Y[eu];)eu++;for(var ed=new Uint8Array(U+(Q-eu)),ep=U;eu!==Q;)ed[ep++]=Y[eu++];return ed}}}return{encode:function(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===T.length)return"";for(var N=0,U=0,$=0,Q=T.length;$!==Q&&0===T[$];)$++,N++;for(var Y=(Q-$)*el+1>>>0,es=new Uint8Array(Y);$!==Q;){for(var ec=T[$],eh=0,eu=Y-1;(0!==ec||eh<U)&&-1!==eu;eu--,eh++)ec+=256*es[eu]>>>0,es[eu]=ec%X>>>0,ec=ec/X>>>0;if(0!==ec)throw Error("Non-zero carry");U=eh,$++}for(var ed=Y-U;ed!==Y&&0===es[ed];)ed++;for(var ep=ee.repeat(N);ed<Y;++ed)ep+=C.charAt(es[ed]);return ep},decodeUnsafe:p,decode:function(C){var N=p(C);if(N)return N;throw Error(`Non-${T} character`)}}};let He=C=>{if(C instanceof Uint8Array&&"Uint8Array"===C.constructor.name)return C;if(C instanceof ArrayBuffer)return new Uint8Array(C);if(ArrayBuffer.isView(C))return new Uint8Array(C.buffer,C.byteOffset,C.byteLength);throw Error("Unknown type, must be binary type")},Fr=C=>new TextEncoder().encode(C),Nr=C=>new TextDecoder().decode(C);let Lr=class Lr{constructor(C,T,N){this.name=C,this.prefix=T,this.baseEncode=N}encode(C){if(C instanceof Uint8Array)return`${this.prefix}${this.baseEncode(C)}`;throw Error("Unknown type, must be binary type")}};let Or=class Or{constructor(C,T,N){if(this.name=C,this.prefix=T,void 0===T.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=T.codePointAt(0),this.baseDecode=N}decode(C){if("string"==typeof C){if(C.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(C)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(C.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(C){return ze(this,C)}};let Hr=class Hr{constructor(C){this.decoders=C}or(C){return ze(this,C)}decode(C){let T=C[0],N=this.decoders[T];if(N)return N.decode(C);throw RangeError(`Unable to decode multibase string ${JSON.stringify(C)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let ze=(C,T)=>new Hr({...C.decoders||{[C.prefix]:C},...T.decoders||{[T.prefix]:T}});let zr=class zr{constructor(C,T,N,U){this.name=C,this.prefix=T,this.baseEncode=N,this.baseDecode=U,this.encoder=new Lr(C,T,N),this.decoder=new Or(C,T,U)}encode(C){return this.encoder.encode(C)}decode(C){return this.decoder.decode(C)}};let Bt=({name:C,prefix:T,encode:N,decode:U})=>new zr(C,T,N,U),ht=({prefix:C,name:T,alphabet:N})=>{let{encode:U,decode:$}=Tr(N,T);return Bt({prefix:C,name:T,encode:U,decode:C=>He($(C))})},Mr=(C,T,N,U)=>{let $={};for(let C=0;C<T.length;++C)$[T[C]]=C;let Q=C.length;for(;"="===C[Q-1];)--Q;let Y=new Uint8Array(Q*N/8|0),X=0,ee=0,es=0;for(let T=0;T<Q;++T){let Q=$[C[T]];if(void 0===Q)throw SyntaxError(`Non-${U} character`);ee=ee<<N|Q,(X+=N)>=8&&(X-=8,Y[es++]=255&ee>>X)}if(X>=N||255&ee<<8-X)throw SyntaxError("Unexpected end of data");return Y},qr=(C,T,N)=>{let U="="===T[T.length-1],$=(1<<N)-1,Q="",Y=0,X=0;for(let U=0;U<C.length;++U)for(X=X<<8|C[U],Y+=8;Y>N;)Y-=N,Q+=T[$&X>>Y];if(Y&&(Q+=T[$&X<<N-Y]),U)for(;Q.length*N&7;)Q+="=";return Q},k=({name:C,prefix:T,bitsPerChar:N,alphabet:U})=>Bt({prefix:T,name:C,encode:C=>qr(C,U,N),decode:T=>Mr(T,U,N,C)}),eJ=Bt({prefix:"\x00",name:"identity",encode:C=>Nr(C),decode:C=>Fr(C)});var eW=Object.freeze({__proto__:null,identity:eJ});let eZ=k({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var eY=Object.freeze({__proto__:null,base2:eZ});let eX=k({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e0=Object.freeze({__proto__:null,base8:eX});let e1=ht({prefix:"9",name:"base10",alphabet:"0123456789"});var e2=Object.freeze({__proto__:null,base10:e1});let e3=k({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e8=k({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var e4=Object.freeze({__proto__:null,base16:e3,base16upper:e8});let e6=k({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),e5=k({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e9=k({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e7=k({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),te=k({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ti=k({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ts=k({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ta=k({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tl=k({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var tc=Object.freeze({__proto__:null,base32:e6,base32upper:e5,base32pad:e9,base32padupper:e7,base32hex:te,base32hexupper:ti,base32hexpad:ts,base32hexpadupper:ta,base32z:tl});let th=ht({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tu=ht({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var td=Object.freeze({__proto__:null,base36:th,base36upper:tu});let tp=ht({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tg=ht({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ty=Object.freeze({__proto__:null,base58btc:tp,base58flickr:tg});let tm=k({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tb=k({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tw=k({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),t_=k({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tv=Object.freeze({__proto__:null,base64:tm,base64pad:tb,base64url:tw,base64urlpad:t_});let tE=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),tx=tE.reduce((C,T,N)=>(C[N]=T,C),[]),tA=tE.reduce((C,T,N)=>(C[T.codePointAt(0)]=N,C),[]),tI=Bt({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(C){return C.reduce((C,T)=>C+=tx[T],"")},decode:function(C){let T=[];for(let N of C){let C=tA[N.codePointAt(0)];if(void 0===C)throw Error(`Non-base256emoji character: ${N}`);T.push(C)}return new Uint8Array(T)}});var tP=Object.freeze({__proto__:null,base256emoji:tI});function $e(C,T,N){T=T||[],N=N||0;for(var U=N;C>=2147483648;)T[N++]=255&C|128,C/=128;for(;-128&C;)T[N++]=255&C|128,C>>>=7;return T[N]=0|C,$e.bytes=N-U+1,T}function Pt(C,T){var N,U=0,T=T||0,$=0,Q=T,Y=C.length;do{if(Q>=Y)throw Pt.bytes=0,RangeError("Could not decode varint");N=C[Q++],U+=$<28?(127&N)<<$:(127&N)*Math.pow(2,$),$+=7}while(N>=128);return Pt.bytes=Q-T,U}var tS={encode:$e,decode:Pt,encodingLength:function(C){return C<128?1:C<16384?2:C<2097152?3:C<268435456?4:C<34359738368?5:C<4398046511104?6:C<562949953421312?7:C<72057594037927940?8:C<0x7fffffffffffffff?9:10}};let je=(C,T,N=0)=>(tS.encode(C,T,N),T),Ze=C=>tS.encodingLength(C),Qt=(C,T)=>{let N=T.byteLength,U=Ze(C),$=U+Ze(N),Q=new Uint8Array($+N);return je(C,Q,0),je(N,Q,U),Q.set(T,$),new Ro(C,N,T,Q)};let Ro=class Ro{constructor(C,T,N,U){this.code=C,this.size=T,this.digest=N,this.bytes=U}};let Ge=({name:C,code:T,encode:N})=>new jo(C,T,N);let jo=class jo{constructor(C,T,N){this.name=C,this.code=T,this.encode=N}digest(C){if(C instanceof Uint8Array){let T=this.encode(C);return T instanceof Uint8Array?Qt(this.code,T):T.then(C=>Qt(this.code,C))}throw Error("Unknown type, must be binary type")}};let Ve=C=>async T=>new Uint8Array(await crypto.subtle.digest(C,T)),tD=Ge({name:"sha2-256",code:18,encode:Ve("SHA-256")}),tB=Ge({name:"sha2-512",code:19,encode:Ve("SHA-512")});var tC=Object.freeze({__proto__:null,sha256:tD,sha512:tB}),tO=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:He,digest:C=>Qt(0,He(C))}});new TextEncoder,new TextDecoder;let tR={...eW,...eY,...e0,...e2,...e4,...tc,...td,...ty,...tv,...tP};function We(C,T,N,U){return{name:C,prefix:T,encoder:{name:C,prefix:T,encode:N},decoder:{decode:U}}}({...tC,...tO});let tT=We("utf8","u",C=>"u"+new TextDecoder("utf8").decode(C),C=>new TextEncoder().encode(C.substring(1))),tN=We("ascii","a",C=>{let T="a";for(let N=0;N<C.length;N++)T+=String.fromCharCode(C[N]);return T},C=>{C=C.substring(1);let T=Le(C.length);for(let N=0;N<C.length;N++)T[N]=C.charCodeAt(N);return T}),tk={utf8:tT,"utf-8":tT,hex:tR.base16,latin1:tN,ascii:tN,binary:tN,...tR};function ct(C,T="utf8"){let N=tk[T];if(!N)throw Error(`Unsupported encoding "${T}"`);return("utf8"===T||"utf-8"===T)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(C.buffer,C.byteOffset,C.byteLength).toString("utf8"):N.encoder.encode(C).substring(1)}function rt(C,T="utf8"){let N=tk[T];if(!N)throw Error(`Unsupported encoding "${T}"`);return("utf8"===T||"utf-8"===T)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?Xt(globalThis.Buffer.from(C,"utf-8")):N.decoder.decode(`${N.prefix}${C}`)}function lt(C){return(0,$.D)(ct(rt(C,eK),eG))}function bt(C){return ct(rt((0,$.u)(C),eG),eK)}function Qe(C){let T=rt("K36",eQ),N="z"+ct(Oe([T,C]),eQ);return["did","key",N].join(":")}function sn(C){let T=C.split("."),N=lt(T[0]),U=lt(T[1]),$=rt(T[2],eK),Q=rt(T.slice(0,2).join("."),e$);return{header:N,payload:U,signature:$,data:Q}}function Po(C=he(32)){let T=eV.getPublicKey(C);return{secretKey:Oe([C,T]),publicKey:T}}async function Qo(C,T,N,$,Q=(0,U.fromMiliseconds)(Date.now())){var Y,X;let ee={alg:"EdDSA",typ:"JWT"},es=Qe($.publicKey),el={iss:es,sub:C,aud:T,iat:Q,exp:Q+N},ec=rt([bt((Y={header:ee,payload:el}).header),bt(Y.payload)].join("."),e$),eh=eV.sign(ec,$.secretKey.slice(0,32));return[bt((X={header:ee,payload:el,signature:eh}).header),bt(X.payload),ct(X.signature,eK)].join(".")}},5094:function(C,T,N){"use strict";N.d(T,{D:function(){return safeJsonParse},u:function(){return safeJsonStringify}});let JSONStringify=C=>JSON.stringify(C,(C,T)=>"bigint"==typeof T?T.toString()+"n":T),JSONParse=C=>{let T=C.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(T,(C,T)=>{let N="string"==typeof T&&T.match(/^\d+n$/);return N?BigInt(T.substring(0,T.length-1)):T})};function safeJsonParse(C){if("string"!=typeof C)throw Error(`Cannot safe json parse value of type ${typeof C}`);try{return JSONParse(C)}catch(T){return C}}function safeJsonStringify(C){return"string"==typeof C?C:JSONStringify(C)||""}},6900:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});let U=N(655);U.__exportStar(N(6869),T),U.__exportStar(N(8033),T)},6869:function(C,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ONE_THOUSAND=T.ONE_HUNDRED=void 0,T.ONE_HUNDRED=100,T.ONE_THOUSAND=1e3},8033:function(C,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ONE_YEAR=T.FOUR_WEEKS=T.THREE_WEEKS=T.TWO_WEEKS=T.ONE_WEEK=T.THIRTY_DAYS=T.SEVEN_DAYS=T.FIVE_DAYS=T.THREE_DAYS=T.ONE_DAY=T.TWENTY_FOUR_HOURS=T.TWELVE_HOURS=T.SIX_HOURS=T.THREE_HOURS=T.ONE_HOUR=T.SIXTY_MINUTES=T.THIRTY_MINUTES=T.TEN_MINUTES=T.FIVE_MINUTES=T.ONE_MINUTE=T.SIXTY_SECONDS=T.THIRTY_SECONDS=T.TEN_SECONDS=T.FIVE_SECONDS=T.ONE_SECOND=void 0,T.ONE_SECOND=1,T.FIVE_SECONDS=5,T.TEN_SECONDS=10,T.THIRTY_SECONDS=30,T.SIXTY_SECONDS=60,T.ONE_MINUTE=T.SIXTY_SECONDS,T.FIVE_MINUTES=5*T.ONE_MINUTE,T.TEN_MINUTES=10*T.ONE_MINUTE,T.THIRTY_MINUTES=30*T.ONE_MINUTE,T.SIXTY_MINUTES=60*T.ONE_MINUTE,T.ONE_HOUR=T.SIXTY_MINUTES,T.THREE_HOURS=3*T.ONE_HOUR,T.SIX_HOURS=6*T.ONE_HOUR,T.TWELVE_HOURS=12*T.ONE_HOUR,T.TWENTY_FOUR_HOURS=24*T.ONE_HOUR,T.ONE_DAY=T.TWENTY_FOUR_HOURS,T.THREE_DAYS=3*T.ONE_DAY,T.FIVE_DAYS=5*T.ONE_DAY,T.SEVEN_DAYS=7*T.ONE_DAY,T.THIRTY_DAYS=30*T.ONE_DAY,T.ONE_WEEK=T.SEVEN_DAYS,T.TWO_WEEKS=2*T.ONE_WEEK,T.THREE_WEEKS=3*T.ONE_WEEK,T.FOUR_WEEKS=4*T.ONE_WEEK,T.ONE_YEAR=365*T.ONE_DAY},6736:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});let U=N(655);U.__exportStar(N(4273),T),U.__exportStar(N(7001),T),U.__exportStar(N(2939),T),U.__exportStar(N(6900),T)},2939:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});let U=N(655);U.__exportStar(N(8766),T)},8766:function(C,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IWatch=void 0,T.IWatch=class{}},3207:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.fromMiliseconds=T.toMiliseconds=void 0;let U=N(6900);T.toMiliseconds=function(C){return C*U.ONE_THOUSAND},T.fromMiliseconds=function(C){return Math.floor(C/U.ONE_THOUSAND)}},3873:function(C,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.delay=void 0,T.delay=function(C){return new Promise(T=>{setTimeout(()=>{T(!0)},C)})}},4273:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});let U=N(655);U.__exportStar(N(3873),T),U.__exportStar(N(3207),T)},7001:function(C,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Watch=void 0;let Watch=class Watch{constructor(){this.timestamps=new Map}start(C){if(this.timestamps.has(C))throw Error(`Watch already started for label: ${C}`);this.timestamps.set(C,{started:Date.now()})}stop(C){let T=this.get(C);if(void 0!==T.elapsed)throw Error(`Watch already stopped for label: ${C}`);let N=Date.now()-T.started;this.timestamps.set(C,{started:T.started,elapsed:N})}get(C){let T=this.timestamps.get(C);if(void 0===T)throw Error(`No timestamp found for label: ${C}`);return T}elapsed(C){let T=this.get(C),N=T.elapsed||Date.now()-T.started;return N}};T.Watch=Watch,T.default=Watch},2873:function(C,T){"use strict";function getFromWindow(C){let T;return"undefined"!=typeof window&&void 0!==window[C]&&(T=window[C]),T}function getFromWindowOrThrow(C){let T=getFromWindow(C);if(!T)throw Error(`${C} is not defined in Window`);return T}Object.defineProperty(T,"__esModule",{value:!0}),T.getLocalStorage=T.getLocalStorageOrThrow=T.getCrypto=T.getCryptoOrThrow=T.getLocation=T.getLocationOrThrow=T.getNavigator=T.getNavigatorOrThrow=T.getDocument=T.getDocumentOrThrow=T.getFromWindowOrThrow=T.getFromWindow=void 0,T.getFromWindow=getFromWindow,T.getFromWindowOrThrow=getFromWindowOrThrow,T.getDocumentOrThrow=function(){return getFromWindowOrThrow("document")},T.getDocument=function(){return getFromWindow("document")},T.getNavigatorOrThrow=function(){return getFromWindowOrThrow("navigator")},T.getNavigator=function(){return getFromWindow("navigator")},T.getLocationOrThrow=function(){return getFromWindowOrThrow("location")},T.getLocation=function(){return getFromWindow("location")},T.getCryptoOrThrow=function(){return getFromWindowOrThrow("crypto")},T.getCrypto=function(){return getFromWindow("crypto")},T.getLocalStorageOrThrow=function(){return getFromWindowOrThrow("localStorage")},T.getLocalStorage=function(){return getFromWindow("localStorage")}},5755:function(C,T,N){"use strict";T.D=void 0;let U=N(2873);T.D=function(){let C,T,N;try{C=U.getDocumentOrThrow(),T=U.getLocationOrThrow()}catch(C){return null}function getWindowMetadataOfAny(...T){let N=C.getElementsByTagName("meta");for(let C=0;C<N.length;C++){let U=N[C],$=["itemprop","property","name"].map(C=>U.getAttribute(C)).filter(C=>!!C&&T.includes(C));if($.length&&$){let C=U.getAttribute("content");if(C)return C}}return""}let $=((N=getWindowMetadataOfAny("name","og:site_name","og:title","twitter:title"))||(N=C.title),N),Q=function(){let C=getWindowMetadataOfAny("description","og:description","twitter:description","keywords");return C}(),Y=T.origin,X=function(){let N=C.getElementsByTagName("link"),U=[];for(let C=0;C<N.length;C++){let $=N[C],Q=$.getAttribute("rel");if(Q&&Q.toLowerCase().indexOf("icon")>-1){let C=$.getAttribute("href");if(C){if(-1===C.toLowerCase().indexOf("https:")&&-1===C.toLowerCase().indexOf("http:")&&0!==C.indexOf("//")){let N=T.protocol+"//"+T.host;if(0===C.indexOf("/"))N+=C;else{let U=T.pathname.split("/");U.pop();let $=U.join("/");N+=$+"/"+C}U.push(N)}else if(0===C.indexOf("//")){let N=T.protocol+C;U.push(N)}else U.push(C)}}}return U}();return{description:Q,url:Y,icons:X,name:$}}},9742:function(C,T){"use strict";T.byteLength=function(C){var T=getLens(C),N=T[0],U=T[1];return(N+U)*3/4-U},T.toByteArray=function(C){var T,N,Q=getLens(C),Y=Q[0],X=Q[1],ee=new $((Y+X)*3/4-X),es=0,el=X>0?Y-4:Y;for(N=0;N<el;N+=4)T=U[C.charCodeAt(N)]<<18|U[C.charCodeAt(N+1)]<<12|U[C.charCodeAt(N+2)]<<6|U[C.charCodeAt(N+3)],ee[es++]=T>>16&255,ee[es++]=T>>8&255,ee[es++]=255&T;return 2===X&&(T=U[C.charCodeAt(N)]<<2|U[C.charCodeAt(N+1)]>>4,ee[es++]=255&T),1===X&&(T=U[C.charCodeAt(N)]<<10|U[C.charCodeAt(N+1)]<<4|U[C.charCodeAt(N+2)]>>2,ee[es++]=T>>8&255,ee[es++]=255&T),ee},T.fromByteArray=function(C){for(var T,U=C.length,$=U%3,Q=[],Y=0,X=U-$;Y<X;Y+=16383)Q.push(function(C,T,U){for(var $,Q=[],Y=T;Y<U;Y+=3)Q.push(N[($=(C[Y]<<16&16711680)+(C[Y+1]<<8&65280)+(255&C[Y+2]))>>18&63]+N[$>>12&63]+N[$>>6&63]+N[63&$]);return Q.join("")}(C,Y,Y+16383>X?X:Y+16383));return 1===$?Q.push(N[(T=C[U-1])>>2]+N[T<<4&63]+"=="):2===$&&Q.push(N[(T=(C[U-2]<<8)+C[U-1])>>10]+N[T>>4&63]+N[T<<2&63]+"="),Q.join("")};for(var N=[],U=[],$="undefined"!=typeof Uint8Array?Uint8Array:Array,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y=0,X=Q.length;Y<X;++Y)N[Y]=Q[Y],U[Q.charCodeAt(Y)]=Y;function getLens(C){var T=C.length;if(T%4>0)throw Error("Invalid string. Length must be a multiple of 4");var N=C.indexOf("=");-1===N&&(N=T);var U=N===T?0:4-N%4;return[N,U]}U["-".charCodeAt(0)]=62,U["_".charCodeAt(0)]=63},8442:function(C,T,N){let U=N(9488);function ADD64AA(C,T,N){let U=C[T]+C[N],$=C[T+1]+C[N+1];U>=4294967296&&$++,C[T]=U,C[T+1]=$}function ADD64AC(C,T,N,U){let $=C[T]+N;N<0&&($+=4294967296);let Q=C[T+1]+U;$>=4294967296&&Q++,C[T]=$,C[T+1]=Q}function B2B_GET32(C,T){return C[T]^C[T+1]<<8^C[T+2]<<16^C[T+3]<<24}function B2B_G(C,T,N,U,$,Q){let ee=X[$],es=X[$+1],el=X[Q],ec=X[Q+1];ADD64AA(Y,C,T),ADD64AC(Y,C,ee,es);let eh=Y[U]^Y[C],eu=Y[U+1]^Y[C+1];Y[U]=eu,Y[U+1]=eh,ADD64AA(Y,N,U),eh=Y[T]^Y[N],eu=Y[T+1]^Y[N+1],Y[T]=eh>>>24^eu<<8,Y[T+1]=eu>>>24^eh<<8,ADD64AA(Y,C,T),ADD64AC(Y,C,el,ec),eh=Y[U]^Y[C],eu=Y[U+1]^Y[C+1],Y[U]=eh>>>16^eu<<16,Y[U+1]=eu>>>16^eh<<16,ADD64AA(Y,N,U),eh=Y[T]^Y[N],eu=Y[T+1]^Y[N+1],Y[T]=eu>>>31^eh<<1,Y[T+1]=eh>>>31^eu<<1}let $=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Q=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(C){return 2*C})),Y=new Uint32Array(32),X=new Uint32Array(32);function blake2bCompress(C,T){let N=0;for(N=0;N<16;N++)Y[N]=C.h[N],Y[N+16]=$[N];for(Y[24]=Y[24]^C.t,Y[25]=Y[25]^C.t/4294967296,T&&(Y[28]=~Y[28],Y[29]=~Y[29]),N=0;N<32;N++)X[N]=B2B_GET32(C.b,4*N);for(N=0;N<12;N++)B2B_G(0,8,16,24,Q[16*N+0],Q[16*N+1]),B2B_G(2,10,18,26,Q[16*N+2],Q[16*N+3]),B2B_G(4,12,20,28,Q[16*N+4],Q[16*N+5]),B2B_G(6,14,22,30,Q[16*N+6],Q[16*N+7]),B2B_G(0,10,20,30,Q[16*N+8],Q[16*N+9]),B2B_G(2,12,22,24,Q[16*N+10],Q[16*N+11]),B2B_G(4,14,16,26,Q[16*N+12],Q[16*N+13]),B2B_G(6,8,18,28,Q[16*N+14],Q[16*N+15]);for(N=0;N<16;N++)C.h[N]=C.h[N]^Y[N]^Y[N+16]}let ee=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function blake2bInit(C,T,N,U){if(0===C||C>64)throw Error("Illegal output length, expected 0 < length <= 64");if(T&&T.length>64)throw Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(N&&16!==N.length)throw Error("Illegal salt, expected Uint8Array with length is 16");if(U&&16!==U.length)throw Error("Illegal personal, expected Uint8Array with length is 16");let Q={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:C};ee.fill(0),ee[0]=C,T&&(ee[1]=T.length),ee[2]=1,ee[3]=1,N&&ee.set(N,32),U&&ee.set(U,48);for(let C=0;C<16;C++)Q.h[C]=$[C]^B2B_GET32(ee,4*C);return T&&(blake2bUpdate(Q,T),Q.c=128),Q}function blake2bUpdate(C,T){for(let N=0;N<T.length;N++)128===C.c&&(C.t+=C.c,blake2bCompress(C,!1),C.c=0),C.b[C.c++]=T[N]}function blake2bFinal(C){for(C.t+=C.c;C.c<128;)C.b[C.c++]=0;blake2bCompress(C,!0);let T=new Uint8Array(C.outlen);for(let N=0;N<C.outlen;N++)T[N]=C.h[N>>2]>>8*(3&N);return T}function blake2b(C,T,N,$,Q){N=N||64,C=U.normalizeInput(C),$&&($=U.normalizeInput($)),Q&&(Q=U.normalizeInput(Q));let Y=blake2bInit(N,T,$,Q);return blake2bUpdate(Y,C),blake2bFinal(Y)}C.exports={blake2b:blake2b,blake2bHex:function(C,T,N,$,Q){let Y=blake2b(C,T,N,$,Q);return U.toHex(Y)},blake2bInit:blake2bInit,blake2bUpdate:blake2bUpdate,blake2bFinal:blake2bFinal}},5297:function(C,T,N){let U=N(9488);function B2S_G(C,T,N,U,$,Q){Y[C]=Y[C]+Y[T]+$,Y[U]=ROTR32(Y[U]^Y[C],16),Y[N]=Y[N]+Y[U],Y[T]=ROTR32(Y[T]^Y[N],12),Y[C]=Y[C]+Y[T]+Q,Y[U]=ROTR32(Y[U]^Y[C],8),Y[N]=Y[N]+Y[U],Y[T]=ROTR32(Y[T]^Y[N],7)}function ROTR32(C,T){return C>>>T^C<<32-T}let $=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Q=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Y=new Uint32Array(16),X=new Uint32Array(16);function blake2sCompress(C,T){let N=0;for(N=0;N<8;N++)Y[N]=C.h[N],Y[N+8]=$[N];for(Y[12]^=C.t,Y[13]^=C.t/4294967296,T&&(Y[14]=~Y[14]),N=0;N<16;N++){var U,ee;X[N]=(U=C.b)[ee=4*N]^U[ee+1]<<8^U[ee+2]<<16^U[ee+3]<<24}for(N=0;N<10;N++)B2S_G(0,4,8,12,X[Q[16*N+0]],X[Q[16*N+1]]),B2S_G(1,5,9,13,X[Q[16*N+2]],X[Q[16*N+3]]),B2S_G(2,6,10,14,X[Q[16*N+4]],X[Q[16*N+5]]),B2S_G(3,7,11,15,X[Q[16*N+6]],X[Q[16*N+7]]),B2S_G(0,5,10,15,X[Q[16*N+8]],X[Q[16*N+9]]),B2S_G(1,6,11,12,X[Q[16*N+10]],X[Q[16*N+11]]),B2S_G(2,7,8,13,X[Q[16*N+12]],X[Q[16*N+13]]),B2S_G(3,4,9,14,X[Q[16*N+14]],X[Q[16*N+15]]);for(N=0;N<8;N++)C.h[N]^=Y[N]^Y[N+8]}function blake2sInit(C,T){if(!(C>0&&C<=32))throw Error("Incorrect output length, should be in [1, 32]");let N=T?T.length:0;if(T&&!(N>0&&N<=32))throw Error("Incorrect key length, should be in [1, 32]");let U={h:new Uint32Array($),b:new Uint8Array(64),c:0,t:0,outlen:C};return U.h[0]^=16842752^N<<8^C,N>0&&(blake2sUpdate(U,T),U.c=64),U}function blake2sUpdate(C,T){for(let N=0;N<T.length;N++)64===C.c&&(C.t+=C.c,blake2sCompress(C,!1),C.c=0),C.b[C.c++]=T[N]}function blake2sFinal(C){for(C.t+=C.c;C.c<64;)C.b[C.c++]=0;blake2sCompress(C,!0);let T=new Uint8Array(C.outlen);for(let N=0;N<C.outlen;N++)T[N]=C.h[N>>2]>>8*(3&N)&255;return T}function blake2s(C,T,N){N=N||32,C=U.normalizeInput(C);let $=blake2sInit(N,T);return blake2sUpdate($,C),blake2sFinal($)}C.exports={blake2s:blake2s,blake2sHex:function(C,T,N){let $=blake2s(C,T,N);return U.toHex($)},blake2sInit:blake2sInit,blake2sUpdate:blake2sUpdate,blake2sFinal:blake2sFinal}},1191:function(C,T,N){let U=N(8442),$=N(5297);C.exports={blake2b:U.blake2b,blake2bHex:U.blake2bHex,blake2bInit:U.blake2bInit,blake2bUpdate:U.blake2bUpdate,blake2bFinal:U.blake2bFinal,blake2s:$.blake2s,blake2sHex:$.blake2sHex,blake2sInit:$.blake2sInit,blake2sUpdate:$.blake2sUpdate,blake2sFinal:$.blake2sFinal}},9488:function(C){function uint32ToHex(C){return(4294967296+C).toString(16).substring(1)}C.exports={normalizeInput:function(C){let T;if(C instanceof Uint8Array)T=C;else if("string"==typeof C){let N=new TextEncoder;T=N.encode(C)}else throw Error("Input must be an string, Buffer or Uint8Array");return T},toHex:function(C){return Array.prototype.map.call(C,function(C){return(C<16?"0":"")+C.toString(16)}).join("")},debugPrint:function(C,T,N){let U="\n"+C+" = ";for(let $=0;$<T.length;$+=2){if(32===N)U+=uint32ToHex(T[$]).toUpperCase()+" "+uint32ToHex(T[$+1]).toUpperCase();else if(64===N)U+=uint32ToHex(T[$+1]).toUpperCase()+uint32ToHex(T[$]).toUpperCase();else throw Error("Invalid size "+N);$%6==4?U+="\n"+Array(C.length+4).join(" "):$<T.length-2&&(U+=" ")}console.log(U)},testSpeed:function(C,T,N){let U=new Date().getTime(),$=new Uint8Array(T);for(let C=0;C<T;C++)$[C]=C%256;let Q=new Date().getTime();console.log("Generated random input in "+(Q-U)+"ms"),U=Q;for(let Q=0;Q<N;Q++){let N=C($),Q=new Date().getTime(),Y=Q-U;U=Q,console.log("Hashed in "+Y+"ms: "+N.substring(0,20)+"..."),console.log(Math.round(T/1048576/(Y/1e3)*100)/100+" MB PER SECOND")}}}},8764:function(C,T,N){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */let U=N(9742),$=N(645),Q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function createBuffer(C){if(C>2147483647)throw RangeError('The value "'+C+'" is invalid for option "size"');let T=new Uint8Array(C);return Object.setPrototypeOf(T,Buffer.prototype),T}function Buffer(C,T,N){if("number"==typeof C){if("string"==typeof T)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(C)}return from(C,T,N)}function from(C,T,N){if("string"==typeof C)return function(C,T){if(("string"!=typeof T||""===T)&&(T="utf8"),!Buffer.isEncoding(T))throw TypeError("Unknown encoding: "+T);let N=0|byteLength(C,T),U=createBuffer(N),$=U.write(C,T);return $!==N&&(U=U.slice(0,$)),U}(C,T);if(ArrayBuffer.isView(C))return function(C){if(isInstance(C,Uint8Array)){let T=new Uint8Array(C);return fromArrayBuffer(T.buffer,T.byteOffset,T.byteLength)}return fromArrayLike(C)}(C);if(null==C)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(isInstance(C,ArrayBuffer)||C&&isInstance(C.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(C,SharedArrayBuffer)||C&&isInstance(C.buffer,SharedArrayBuffer)))return fromArrayBuffer(C,T,N);if("number"==typeof C)throw TypeError('The "value" argument must not be of type number. Received type number');let U=C.valueOf&&C.valueOf();if(null!=U&&U!==C)return Buffer.from(U,T,N);let $=function(C){var T;if(Buffer.isBuffer(C)){let T=0|checked(C.length),N=createBuffer(T);return 0===N.length||C.copy(N,0,0,T),N}return void 0!==C.length?"number"!=typeof C.length||(T=C.length)!=T?createBuffer(0):fromArrayLike(C):"Buffer"===C.type&&Array.isArray(C.data)?fromArrayLike(C.data):void 0}(C);if($)return $;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof C[Symbol.toPrimitive])return Buffer.from(C[Symbol.toPrimitive]("string"),T,N);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}function assertSize(C){if("number"!=typeof C)throw TypeError('"size" argument must be of type number');if(C<0)throw RangeError('The value "'+C+'" is invalid for option "size"')}function allocUnsafe(C){return assertSize(C),createBuffer(C<0?0:0|checked(C))}function fromArrayLike(C){let T=C.length<0?0:0|checked(C.length),N=createBuffer(T);for(let U=0;U<T;U+=1)N[U]=255&C[U];return N}function fromArrayBuffer(C,T,N){let U;if(T<0||C.byteLength<T)throw RangeError('"offset" is outside of buffer bounds');if(C.byteLength<T+(N||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(U=void 0===T&&void 0===N?new Uint8Array(C):void 0===N?new Uint8Array(C,T):new Uint8Array(C,T,N),Buffer.prototype),U}function checked(C){if(C>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|C}function byteLength(C,T){if(Buffer.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||isInstance(C,ArrayBuffer))return C.byteLength;if("string"!=typeof C)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);let N=C.length,U=arguments.length>2&&!0===arguments[2];if(!U&&0===N)return 0;let $=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return utf8ToBytes(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*N;case"hex":return N>>>1;case"base64":return base64ToBytes(C).length;default:if($)return U?-1:utf8ToBytes(C).length;T=(""+T).toLowerCase(),$=!0}}function slowToString(C,T,N){let $=!1;if((void 0===T||T<0)&&(T=0),T>this.length||((void 0===N||N>this.length)&&(N=this.length),N<=0||(N>>>=0)<=(T>>>=0)))return"";for(C||(C="utf8");;)switch(C){case"hex":return function(C,T,N){let U=C.length;(!T||T<0)&&(T=0),(!N||N<0||N>U)&&(N=U);let $="";for(let U=T;U<N;++U)$+=ee[C[U]];return $}(this,T,N);case"utf8":case"utf-8":return utf8Slice(this,T,N);case"ascii":return function(C,T,N){let U="";N=Math.min(C.length,N);for(let $=T;$<N;++$)U+=String.fromCharCode(127&C[$]);return U}(this,T,N);case"latin1":case"binary":return function(C,T,N){let U="";N=Math.min(C.length,N);for(let $=T;$<N;++$)U+=String.fromCharCode(C[$]);return U}(this,T,N);case"base64":var Q,Y;return Q=T,Y=N,0===Q&&Y===this.length?U.fromByteArray(this):U.fromByteArray(this.slice(Q,Y));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(C,T,N){let U=C.slice(T,N),$="";for(let C=0;C<U.length-1;C+=2)$+=String.fromCharCode(U[C]+256*U[C+1]);return $}(this,T,N);default:if($)throw TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),$=!0}}function swap(C,T,N){let U=C[T];C[T]=C[N],C[N]=U}function bidirectionalIndexOf(C,T,N,U,$){var Q;if(0===C.length)return -1;if("string"==typeof N?(U=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),(Q=N=+N)!=Q&&(N=$?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if($)return -1;N=C.length-1}else if(N<0){if(!$)return -1;N=0}if("string"==typeof T&&(T=Buffer.from(T,U)),Buffer.isBuffer(T))return 0===T.length?-1:arrayIndexOf(C,T,N,U,$);if("number"==typeof T)return(T&=255,"function"==typeof Uint8Array.prototype.indexOf)?$?Uint8Array.prototype.indexOf.call(C,T,N):Uint8Array.prototype.lastIndexOf.call(C,T,N):arrayIndexOf(C,[T],N,U,$);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(C,T,N,U,$){let Q,Y=1,X=C.length,ee=T.length;if(void 0!==U&&("ucs2"===(U=String(U).toLowerCase())||"ucs-2"===U||"utf16le"===U||"utf-16le"===U)){if(C.length<2||T.length<2)return -1;Y=2,X/=2,ee/=2,N/=2}function read(C,T){return 1===Y?C[T]:C.readUInt16BE(T*Y)}if($){let U=-1;for(Q=N;Q<X;Q++)if(read(C,Q)===read(T,-1===U?0:Q-U)){if(-1===U&&(U=Q),Q-U+1===ee)return U*Y}else -1!==U&&(Q-=Q-U),U=-1}else for(N+ee>X&&(N=X-ee),Q=N;Q>=0;Q--){let N=!0;for(let U=0;U<ee;U++)if(read(C,Q+U)!==read(T,U)){N=!1;break}if(N)return Q}return -1}function utf8Slice(C,T,N){N=Math.min(C.length,N);let U=[],$=T;for(;$<N;){let T=C[$],Q=null,Y=T>239?4:T>223?3:T>191?2:1;if($+Y<=N){let N,U,X,ee;switch(Y){case 1:T<128&&(Q=T);break;case 2:(192&(N=C[$+1]))==128&&(ee=(31&T)<<6|63&N)>127&&(Q=ee);break;case 3:N=C[$+1],U=C[$+2],(192&N)==128&&(192&U)==128&&(ee=(15&T)<<12|(63&N)<<6|63&U)>2047&&(ee<55296||ee>57343)&&(Q=ee);break;case 4:N=C[$+1],U=C[$+2],X=C[$+3],(192&N)==128&&(192&U)==128&&(192&X)==128&&(ee=(15&T)<<18|(63&N)<<12|(63&U)<<6|63&X)>65535&&ee<1114112&&(Q=ee)}}null===Q?(Q=65533,Y=1):Q>65535&&(Q-=65536,U.push(Q>>>10&1023|55296),Q=56320|1023&Q),U.push(Q),$+=Y}return function(C){let T=C.length;if(T<=4096)return String.fromCharCode.apply(String,C);let N="",U=0;for(;U<T;)N+=String.fromCharCode.apply(String,C.slice(U,U+=4096));return N}(U)}function checkOffset(C,T,N){if(C%1!=0||C<0)throw RangeError("offset is not uint");if(C+T>N)throw RangeError("Trying to access beyond buffer length")}function checkInt(C,T,N,U,$,Q){if(!Buffer.isBuffer(C))throw TypeError('"buffer" argument must be a Buffer instance');if(T>$||T<Q)throw RangeError('"value" argument is out of bounds');if(N+U>C.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(C,T,N,U,$){checkIntBI(T,U,$,C,N,7);let Q=Number(T&BigInt(4294967295));C[N++]=Q,Q>>=8,C[N++]=Q,Q>>=8,C[N++]=Q,Q>>=8,C[N++]=Q;let Y=Number(T>>BigInt(32)&BigInt(4294967295));return C[N++]=Y,Y>>=8,C[N++]=Y,Y>>=8,C[N++]=Y,Y>>=8,C[N++]=Y,N}function wrtBigUInt64BE(C,T,N,U,$){checkIntBI(T,U,$,C,N,7);let Q=Number(T&BigInt(4294967295));C[N+7]=Q,Q>>=8,C[N+6]=Q,Q>>=8,C[N+5]=Q,Q>>=8,C[N+4]=Q;let Y=Number(T>>BigInt(32)&BigInt(4294967295));return C[N+3]=Y,Y>>=8,C[N+2]=Y,Y>>=8,C[N+1]=Y,Y>>=8,C[N]=Y,N+8}function checkIEEE754(C,T,N,U,$,Q){if(N+U>C.length||N<0)throw RangeError("Index out of range")}function writeFloat(C,T,N,U,Q){return T=+T,N>>>=0,Q||checkIEEE754(C,T,N,4,34028234663852886e22,-34028234663852886e22),$.write(C,T,N,U,23,4),N+4}function writeDouble(C,T,N,U,Q){return T=+T,N>>>=0,Q||checkIEEE754(C,T,N,8,17976931348623157e292,-17976931348623157e292),$.write(C,T,N,U,52,8),N+8}T.lW=Buffer,T.h2=50,Buffer.TYPED_ARRAY_SUPPORT=function(){try{let C=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(C,T),42===C.foo()}catch(C){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(C,T,N){return from(C,T,N)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(C,T,N){return(assertSize(C),C<=0)?createBuffer(C):void 0!==T?"string"==typeof N?createBuffer(C).fill(T,N):createBuffer(C).fill(T):createBuffer(C)},Buffer.allocUnsafe=function(C){return allocUnsafe(C)},Buffer.allocUnsafeSlow=function(C){return allocUnsafe(C)},Buffer.isBuffer=function(C){return null!=C&&!0===C._isBuffer&&C!==Buffer.prototype},Buffer.compare=function(C,T){if(isInstance(C,Uint8Array)&&(C=Buffer.from(C,C.offset,C.byteLength)),isInstance(T,Uint8Array)&&(T=Buffer.from(T,T.offset,T.byteLength)),!Buffer.isBuffer(C)||!Buffer.isBuffer(T))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===T)return 0;let N=C.length,U=T.length;for(let $=0,Q=Math.min(N,U);$<Q;++$)if(C[$]!==T[$]){N=C[$],U=T[$];break}return N<U?-1:U<N?1:0},Buffer.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(C,T){let N;if(!Array.isArray(C))throw TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return Buffer.alloc(0);if(void 0===T)for(N=0,T=0;N<C.length;++N)T+=C[N].length;let U=Buffer.allocUnsafe(T),$=0;for(N=0;N<C.length;++N){let T=C[N];if(isInstance(T,Uint8Array))$+T.length>U.length?(Buffer.isBuffer(T)||(T=Buffer.from(T)),T.copy(U,$)):Uint8Array.prototype.set.call(U,T,$);else if(Buffer.isBuffer(T))T.copy(U,$);else throw TypeError('"list" argument must be an Array of Buffers');$+=T.length}return U},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){let C=this.length;if(C%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<C;T+=2)swap(this,T,T+1);return this},Buffer.prototype.swap32=function(){let C=this.length;if(C%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<C;T+=4)swap(this,T,T+3),swap(this,T+1,T+2);return this},Buffer.prototype.swap64=function(){let C=this.length;if(C%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<C;T+=8)swap(this,T,T+7),swap(this,T+1,T+6),swap(this,T+2,T+5),swap(this,T+3,T+4);return this},Buffer.prototype.toString=function(){let C=this.length;return 0===C?"":0==arguments.length?utf8Slice(this,0,C):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(C){if(!Buffer.isBuffer(C))throw TypeError("Argument must be a Buffer");return this===C||0===Buffer.compare(this,C)},Buffer.prototype.inspect=function(){let C="",N=T.h2;return C=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(C+=" ... "),"<Buffer "+C+">"},Q&&(Buffer.prototype[Q]=Buffer.prototype.inspect),Buffer.prototype.compare=function(C,T,N,U,$){if(isInstance(C,Uint8Array)&&(C=Buffer.from(C,C.offset,C.byteLength)),!Buffer.isBuffer(C))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(void 0===T&&(T=0),void 0===N&&(N=C?C.length:0),void 0===U&&(U=0),void 0===$&&($=this.length),T<0||N>C.length||U<0||$>this.length)throw RangeError("out of range index");if(U>=$&&T>=N)return 0;if(U>=$)return -1;if(T>=N)return 1;if(T>>>=0,N>>>=0,U>>>=0,$>>>=0,this===C)return 0;let Q=$-U,Y=N-T,X=Math.min(Q,Y),ee=this.slice(U,$),es=C.slice(T,N);for(let C=0;C<X;++C)if(ee[C]!==es[C]){Q=ee[C],Y=es[C];break}return Q<Y?-1:Y<Q?1:0},Buffer.prototype.includes=function(C,T,N){return -1!==this.indexOf(C,T,N)},Buffer.prototype.indexOf=function(C,T,N){return bidirectionalIndexOf(this,C,T,N,!0)},Buffer.prototype.lastIndexOf=function(C,T,N){return bidirectionalIndexOf(this,C,T,N,!1)},Buffer.prototype.write=function(C,T,N,U){var $,Q,Y,X,ee,es,el,ec;if(void 0===T)U="utf8",N=this.length,T=0;else if(void 0===N&&"string"==typeof T)U=T,N=this.length,T=0;else if(isFinite(T))T>>>=0,isFinite(N)?(N>>>=0,void 0===U&&(U="utf8")):(U=N,N=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let eh=this.length-T;if((void 0===N||N>eh)&&(N=eh),C.length>0&&(N<0||T<0)||T>this.length)throw RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let eu=!1;for(;;)switch(U){case"hex":return function(C,T,N,U){let $;N=Number(N)||0;let Q=C.length-N;U?(U=Number(U))>Q&&(U=Q):U=Q;let Y=T.length;for(U>Y/2&&(U=Y/2),$=0;$<U;++$){let U=parseInt(T.substr(2*$,2),16);if(U!=U)break;C[N+$]=U}return $}(this,C,T,N);case"utf8":case"utf-8":return $=T,Q=N,blitBuffer(utf8ToBytes(C,this.length-$),this,$,Q);case"ascii":case"latin1":case"binary":return Y=T,X=N,blitBuffer(function(C){let T=[];for(let N=0;N<C.length;++N)T.push(255&C.charCodeAt(N));return T}(C),this,Y,X);case"base64":return ee=T,es=N,blitBuffer(base64ToBytes(C),this,ee,es);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return el=T,ec=N,blitBuffer(function(C,T){let N,U;let $=[];for(let Q=0;Q<C.length&&!((T-=2)<0);++Q)U=(N=C.charCodeAt(Q))>>8,$.push(N%256),$.push(U);return $}(C,this.length-el),this,el,ec);default:if(eu)throw TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),eu=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(C,T){let N=this.length;C=~~C,T=void 0===T?N:~~T,C<0?(C+=N)<0&&(C=0):C>N&&(C=N),T<0?(T+=N)<0&&(T=0):T>N&&(T=N),T<C&&(T=C);let U=this.subarray(C,T);return Object.setPrototypeOf(U,Buffer.prototype),U},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(C,T,N){C>>>=0,T>>>=0,N||checkOffset(C,T,this.length);let U=this[C],$=1,Q=0;for(;++Q<T&&($*=256);)U+=this[C+Q]*$;return U},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(C,T,N){C>>>=0,T>>>=0,N||checkOffset(C,T,this.length);let U=this[C+--T],$=1;for(;T>0&&($*=256);)U+=this[C+--T]*$;return U},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(C,T){return C>>>=0,T||checkOffset(C,1,this.length),this[C]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(C,T){return C>>>=0,T||checkOffset(C,2,this.length),this[C]|this[C+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(C,T){return C>>>=0,T||checkOffset(C,2,this.length),this[C]<<8|this[C+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(C){validateNumber(C>>>=0,"offset");let T=this[C],N=this[C+7];(void 0===T||void 0===N)&&boundsError(C,this.length-8);let U=T+256*this[++C]+65536*this[++C]+16777216*this[++C],$=this[++C]+256*this[++C]+65536*this[++C]+16777216*N;return BigInt(U)+(BigInt($)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(C){validateNumber(C>>>=0,"offset");let T=this[C],N=this[C+7];(void 0===T||void 0===N)&&boundsError(C,this.length-8);let U=16777216*T+65536*this[++C]+256*this[++C]+this[++C],$=16777216*this[++C]+65536*this[++C]+256*this[++C]+N;return(BigInt(U)<<BigInt(32))+BigInt($)}),Buffer.prototype.readIntLE=function(C,T,N){C>>>=0,T>>>=0,N||checkOffset(C,T,this.length);let U=this[C],$=1,Q=0;for(;++Q<T&&($*=256);)U+=this[C+Q]*$;return U>=($*=128)&&(U-=Math.pow(2,8*T)),U},Buffer.prototype.readIntBE=function(C,T,N){C>>>=0,T>>>=0,N||checkOffset(C,T,this.length);let U=T,$=1,Q=this[C+--U];for(;U>0&&($*=256);)Q+=this[C+--U]*$;return Q>=($*=128)&&(Q-=Math.pow(2,8*T)),Q},Buffer.prototype.readInt8=function(C,T){return(C>>>=0,T||checkOffset(C,1,this.length),128&this[C])?-((255-this[C]+1)*1):this[C]},Buffer.prototype.readInt16LE=function(C,T){C>>>=0,T||checkOffset(C,2,this.length);let N=this[C]|this[C+1]<<8;return 32768&N?4294901760|N:N},Buffer.prototype.readInt16BE=function(C,T){C>>>=0,T||checkOffset(C,2,this.length);let N=this[C+1]|this[C]<<8;return 32768&N?4294901760|N:N},Buffer.prototype.readInt32LE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},Buffer.prototype.readInt32BE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(C){validateNumber(C>>>=0,"offset");let T=this[C],N=this[C+7];(void 0===T||void 0===N)&&boundsError(C,this.length-8);let U=this[C+4]+256*this[C+5]+65536*this[C+6]+(N<<24);return(BigInt(U)<<BigInt(32))+BigInt(T+256*this[++C]+65536*this[++C]+16777216*this[++C])}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(C){validateNumber(C>>>=0,"offset");let T=this[C],N=this[C+7];(void 0===T||void 0===N)&&boundsError(C,this.length-8);let U=(T<<24)+65536*this[++C]+256*this[++C]+this[++C];return(BigInt(U)<<BigInt(32))+BigInt(16777216*this[++C]+65536*this[++C]+256*this[++C]+N)}),Buffer.prototype.readFloatLE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),$.read(this,C,!0,23,4)},Buffer.prototype.readFloatBE=function(C,T){return C>>>=0,T||checkOffset(C,4,this.length),$.read(this,C,!1,23,4)},Buffer.prototype.readDoubleLE=function(C,T){return C>>>=0,T||checkOffset(C,8,this.length),$.read(this,C,!0,52,8)},Buffer.prototype.readDoubleBE=function(C,T){return C>>>=0,T||checkOffset(C,8,this.length),$.read(this,C,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(C,T,N,U){if(C=+C,T>>>=0,N>>>=0,!U){let U=Math.pow(2,8*N)-1;checkInt(this,C,T,N,U,0)}let $=1,Q=0;for(this[T]=255&C;++Q<N&&($*=256);)this[T+Q]=C/$&255;return T+N},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(C,T,N,U){if(C=+C,T>>>=0,N>>>=0,!U){let U=Math.pow(2,8*N)-1;checkInt(this,C,T,N,U,0)}let $=N-1,Q=1;for(this[T+$]=255&C;--$>=0&&(Q*=256);)this[T+$]=C/Q&255;return T+N},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,1,255,0),this[T]=255&C,T+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,2,65535,0),this[T]=255&C,this[T+1]=C>>>8,T+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,2,65535,0),this[T]=C>>>8,this[T+1]=255&C,T+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,4,4294967295,0),this[T+3]=C>>>24,this[T+2]=C>>>16,this[T+1]=C>>>8,this[T]=255&C,T+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,4,4294967295,0),this[T]=C>>>24,this[T+1]=C>>>16,this[T+2]=C>>>8,this[T+3]=255&C,T+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(C,T=0){return wrtBigUInt64LE(this,C,T,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(C,T=0){return wrtBigUInt64BE(this,C,T,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(C,T,N,U){if(C=+C,T>>>=0,!U){let U=Math.pow(2,8*N-1);checkInt(this,C,T,N,U-1,-U)}let $=0,Q=1,Y=0;for(this[T]=255&C;++$<N&&(Q*=256);)C<0&&0===Y&&0!==this[T+$-1]&&(Y=1),this[T+$]=(C/Q>>0)-Y&255;return T+N},Buffer.prototype.writeIntBE=function(C,T,N,U){if(C=+C,T>>>=0,!U){let U=Math.pow(2,8*N-1);checkInt(this,C,T,N,U-1,-U)}let $=N-1,Q=1,Y=0;for(this[T+$]=255&C;--$>=0&&(Q*=256);)C<0&&0===Y&&0!==this[T+$+1]&&(Y=1),this[T+$]=(C/Q>>0)-Y&255;return T+N},Buffer.prototype.writeInt8=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,1,127,-128),C<0&&(C=255+C+1),this[T]=255&C,T+1},Buffer.prototype.writeInt16LE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,2,32767,-32768),this[T]=255&C,this[T+1]=C>>>8,T+2},Buffer.prototype.writeInt16BE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,2,32767,-32768),this[T]=C>>>8,this[T+1]=255&C,T+2},Buffer.prototype.writeInt32LE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,4,2147483647,-2147483648),this[T]=255&C,this[T+1]=C>>>8,this[T+2]=C>>>16,this[T+3]=C>>>24,T+4},Buffer.prototype.writeInt32BE=function(C,T,N){return C=+C,T>>>=0,N||checkInt(this,C,T,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[T]=C>>>24,this[T+1]=C>>>16,this[T+2]=C>>>8,this[T+3]=255&C,T+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(C,T=0){return wrtBigUInt64LE(this,C,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(C,T=0){return wrtBigUInt64BE(this,C,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(C,T,N){return writeFloat(this,C,T,!0,N)},Buffer.prototype.writeFloatBE=function(C,T,N){return writeFloat(this,C,T,!1,N)},Buffer.prototype.writeDoubleLE=function(C,T,N){return writeDouble(this,C,T,!0,N)},Buffer.prototype.writeDoubleBE=function(C,T,N){return writeDouble(this,C,T,!1,N)},Buffer.prototype.copy=function(C,T,N,U){if(!Buffer.isBuffer(C))throw TypeError("argument should be a Buffer");if(N||(N=0),U||0===U||(U=this.length),T>=C.length&&(T=C.length),T||(T=0),U>0&&U<N&&(U=N),U===N||0===C.length||0===this.length)return 0;if(T<0)throw RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw RangeError("Index out of range");if(U<0)throw RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),C.length-T<U-N&&(U=C.length-T+N);let $=U-N;return this===C&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(T,N,U):Uint8Array.prototype.set.call(C,this.subarray(N,U),T),$},Buffer.prototype.fill=function(C,T,N,U){let $;if("string"==typeof C){if("string"==typeof T?(U=T,T=0,N=this.length):"string"==typeof N&&(U=N,N=this.length),void 0!==U&&"string"!=typeof U)throw TypeError("encoding must be a string");if("string"==typeof U&&!Buffer.isEncoding(U))throw TypeError("Unknown encoding: "+U);if(1===C.length){let T=C.charCodeAt(0);("utf8"===U&&T<128||"latin1"===U)&&(C=T)}}else"number"==typeof C?C&=255:"boolean"==typeof C&&(C=Number(C));if(T<0||this.length<T||this.length<N)throw RangeError("Out of range index");if(N<=T)return this;if(T>>>=0,N=void 0===N?this.length:N>>>0,C||(C=0),"number"==typeof C)for($=T;$<N;++$)this[$]=C;else{let Q=Buffer.isBuffer(C)?C:Buffer.from(C,U),Y=Q.length;if(0===Y)throw TypeError('The value "'+C+'" is invalid for argument "value"');for($=0;$<N-T;++$)this[$+T]=Q[$%Y]}return this};let Y={};function E(C,T,N){Y[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}function addNumericalSeparator(C){let T="",N=C.length,U="-"===C[0]?1:0;for(;N>=U+4;N-=3)T=`_${C.slice(N-3,N)}${T}`;return`${C.slice(0,N)}${T}`}function checkIntBI(C,T,N,U,$,Q){if(C>N||C<T){let U;let $="bigint"==typeof T?"n":"";throw U=Q>3?0===T||T===BigInt(0)?`>= 0${$} and < 2${$} ** ${(Q+1)*8}${$}`:`>= -(2${$} ** ${(Q+1)*8-1}${$}) and < 2 ** ${(Q+1)*8-1}${$}`:`>= ${T}${$} and <= ${N}${$}`,new Y.ERR_OUT_OF_RANGE("value",U,C)}validateNumber($,"offset"),(void 0===U[$]||void 0===U[$+Q])&&boundsError($,U.length-(Q+1))}function validateNumber(C,T){if("number"!=typeof C)throw new Y.ERR_INVALID_ARG_TYPE(T,"number",C)}function boundsError(C,T,N){if(Math.floor(C)!==C)throw validateNumber(C,N),new Y.ERR_OUT_OF_RANGE(N||"offset","an integer",C);if(T<0)throw new Y.ERR_BUFFER_OUT_OF_BOUNDS;throw new Y.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${T}`,C)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(C,T){return`The "${C}" argument must be of type number. Received type ${typeof T}`},TypeError),E("ERR_OUT_OF_RANGE",function(C,T,N){let U=`The value of "${C}" is out of range.`,$=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?$=addNumericalSeparator(String(N)):"bigint"==typeof N&&($=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&($=addNumericalSeparator($)),$+="n"),U+=` It must be ${T}. Received ${$}`},RangeError);let X=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(C,T){let N;T=T||1/0;let U=C.length,$=null,Q=[];for(let Y=0;Y<U;++Y){if((N=C.charCodeAt(Y))>55295&&N<57344){if(!$){if(N>56319||Y+1===U){(T-=3)>-1&&Q.push(239,191,189);continue}$=N;continue}if(N<56320){(T-=3)>-1&&Q.push(239,191,189),$=N;continue}N=($-55296<<10|N-56320)+65536}else $&&(T-=3)>-1&&Q.push(239,191,189);if($=null,N<128){if((T-=1)<0)break;Q.push(N)}else if(N<2048){if((T-=2)<0)break;Q.push(N>>6|192,63&N|128)}else if(N<65536){if((T-=3)<0)break;Q.push(N>>12|224,N>>6&63|128,63&N|128)}else if(N<1114112){if((T-=4)<0)break;Q.push(N>>18|240,N>>12&63|128,N>>6&63|128,63&N|128)}else throw Error("Invalid code point")}return Q}function base64ToBytes(C){return U.toByteArray(function(C){if((C=(C=C.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;C.length%4!=0;)C+="=";return C}(C))}function blitBuffer(C,T,N,U){let $;for($=0;$<U&&!($+N>=T.length)&&!($>=C.length);++$)T[$+N]=C[$];return $}function isInstance(C,T){return C instanceof T||null!=C&&null!=C.constructor&&null!=C.constructor.name&&C.constructor.name===T.name}let ee=function(){let C="0123456789abcdef",T=Array(256);for(let N=0;N<16;++N){let U=16*N;for(let $=0;$<16;++$)T[U+$]=C[N]+C[$]}return T}();function defineBigIntMethod(C){return"undefined"==typeof BigInt?BufferBigIntNotDefined:C}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}},4098:function(C,T,N){var U="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==N.g&&N.g,$=function(){function F(){this.fetch=!1,this.DOMException=U.DOMException}return F.prototype=U,new F}();(function(C){var T=void 0!==$&&$||"undefined"!=typeof self&&self||void 0!==N.g&&N.g||{},U={searchParams:"URLSearchParams"in T,iterable:"Symbol"in T&&"iterator"in Symbol,blob:"FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch(C){return!1}}(),formData:"FormData"in T,arrayBuffer:"ArrayBuffer"in T};if(U.arrayBuffer)var Q=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Y=ArrayBuffer.isView||function(C){return C&&Q.indexOf(Object.prototype.toString.call(C))>-1};function normalizeName(C){if("string"!=typeof C&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||""===C)throw TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function normalizeValue(C){return"string"!=typeof C&&(C=String(C)),C}function iteratorFor(C){var T={next:function(){var T=C.shift();return{done:void 0===T,value:T}}};return U.iterable&&(T[Symbol.iterator]=function(){return T}),T}function Headers(C){this.map={},C instanceof Headers?C.forEach(function(C,T){this.append(T,C)},this):Array.isArray(C)?C.forEach(function(C){if(2!=C.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+C.length);this.append(C[0],C[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(T){this.append(T,C[T])},this)}function consumed(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(TypeError("Already read"));C.bodyUsed=!0}}function fileReaderReady(C){return new Promise(function(T,N){C.onload=function(){T(C.result)},C.onerror=function(){N(C.error)}})}function readBlobAsArrayBuffer(C){var T=new FileReader,N=fileReaderReady(T);return T.readAsArrayBuffer(C),N}function bufferClone(C){if(C.slice)return C.slice(0);var T=new Uint8Array(C.byteLength);return T.set(new Uint8Array(C)),T.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(C){if(this.bodyUsed=this.bodyUsed,this._bodyInit=C,C){if("string"==typeof C)this._bodyText=C;else if(U.blob&&Blob.prototype.isPrototypeOf(C))this._bodyBlob=C;else if(U.formData&&FormData.prototype.isPrototypeOf(C))this._bodyFormData=C;else if(U.searchParams&&URLSearchParams.prototype.isPrototypeOf(C))this._bodyText=C.toString();else{var T;U.arrayBuffer&&U.blob&&(T=C)&&DataView.prototype.isPrototypeOf(T)?(this._bodyArrayBuffer=bufferClone(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):U.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||Y(C))?this._bodyArrayBuffer=bufferClone(C):this._bodyText=C=Object.prototype.toString.call(C)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof C?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):U.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},U.blob&&(this.blob=function(){var C=consumed(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return consumed(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(U.blob)return this.blob().then(readBlobAsArrayBuffer);throw Error("could not read as ArrayBuffer")},this.text=function(){var C,T,N,U,$,Q=consumed(this);if(Q)return Q;if(this._bodyBlob)return C=this._bodyBlob,N=fileReaderReady(T=new FileReader),$=(U=/charset=([A-Za-z0-9_-]+)/.exec(C.type))?U[1]:"utf-8",T.readAsText(C,$),N;if(this._bodyArrayBuffer)return Promise.resolve(function(C){for(var T=new Uint8Array(C),N=Array(T.length),U=0;U<T.length;U++)N[U]=String.fromCharCode(T[U]);return N.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},U.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(C,T){C=normalizeName(C),T=normalizeValue(T);var N=this.map[C];this.map[C]=N?N+", "+T:T},Headers.prototype.delete=function(C){delete this.map[normalizeName(C)]},Headers.prototype.get=function(C){return C=normalizeName(C),this.has(C)?this.map[C]:null},Headers.prototype.has=function(C){return this.map.hasOwnProperty(normalizeName(C))},Headers.prototype.set=function(C,T){this.map[normalizeName(C)]=normalizeValue(T)},Headers.prototype.forEach=function(C,T){for(var N in this.map)this.map.hasOwnProperty(N)&&C.call(T,this.map[N],N,this)},Headers.prototype.keys=function(){var C=[];return this.forEach(function(T,N){C.push(N)}),iteratorFor(C)},Headers.prototype.values=function(){var C=[];return this.forEach(function(T){C.push(T)}),iteratorFor(C)},Headers.prototype.entries=function(){var C=[];return this.forEach(function(T,N){C.push([N,T])}),iteratorFor(C)},U.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var X=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Request(C,N){if(!(this instanceof Request))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var U,$,Q=(N=N||{}).body;if(C instanceof Request){if(C.bodyUsed)throw TypeError("Already read");this.url=C.url,this.credentials=C.credentials,N.headers||(this.headers=new Headers(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,Q||null==C._bodyInit||(Q=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new Headers(N.headers)),this.method=($=(U=N.method||this.method||"GET").toUpperCase(),X.indexOf($)>-1?$:U),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in T)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Q)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Q),("GET"===this.method||"HEAD"===this.method)&&("no-store"===N.cache||"no-cache"===N.cache)){var Y=/([?&])_=[^&]*/;Y.test(this.url)?this.url=this.url.replace(Y,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function decode(C){var T=new FormData;return C.trim().split("&").forEach(function(C){if(C){var N=C.split("="),U=N.shift().replace(/\+/g," "),$=N.join("=").replace(/\+/g," ");T.append(decodeURIComponent(U),decodeURIComponent($))}}),T}function Response(C,T){if(!(this instanceof Response))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=void 0===T.status?200:T.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===T.statusText?"":""+T.statusText,this.headers=new Headers(T.headers),this.url=T.url||"",this._initBody(C)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var C=new Response(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var ee=[301,302,303,307,308];Response.redirect=function(C,T){if(-1===ee.indexOf(T))throw RangeError("Invalid status code");return new Response(null,{status:T,headers:{location:C}})},C.DOMException=T.DOMException;try{new C.DOMException}catch(T){C.DOMException=function(C,T){this.message=C,this.name=T;var N=Error(C);this.stack=N.stack},C.DOMException.prototype=Object.create(Error.prototype),C.DOMException.prototype.constructor=C.DOMException}function fetch(N,$){return new Promise(function(Q,Y){var X=new Request(N,$);if(X.signal&&X.signal.aborted)return Y(new C.DOMException("Aborted","AbortError"));var ee=new XMLHttpRequest;function abortXhr(){ee.abort()}if(ee.onload=function(){var C,T,N={statusText:ee.statusText,headers:(C=ee.getAllResponseHeaders()||"",T=new Headers,C.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(C){return 0===C.indexOf("\n")?C.substr(1,C.length):C}).forEach(function(C){var N=C.split(":"),U=N.shift().trim();if(U){var $=N.join(":").trim();try{T.append(U,$)}catch(C){console.warn("Response "+C.message)}}}),T)};0===X.url.indexOf("file://")&&(ee.status<200||ee.status>599)?N.status=200:N.status=ee.status,N.url="responseURL"in ee?ee.responseURL:N.headers.get("X-Request-URL");var U="response"in ee?ee.response:ee.responseText;setTimeout(function(){Q(new Response(U,N))},0)},ee.onerror=function(){setTimeout(function(){Y(TypeError("Network request failed"))},0)},ee.ontimeout=function(){setTimeout(function(){Y(TypeError("Network request timed out"))},0)},ee.onabort=function(){setTimeout(function(){Y(new C.DOMException("Aborted","AbortError"))},0)},ee.open(X.method,function(C){try{return""===C&&T.location.href?T.location.href:C}catch(T){return C}}(X.url),!0),"include"===X.credentials?ee.withCredentials=!0:"omit"===X.credentials&&(ee.withCredentials=!1),"responseType"in ee&&(U.blob?ee.responseType="blob":U.arrayBuffer&&(ee.responseType="arraybuffer")),$&&"object"==typeof $.headers&&!($.headers instanceof Headers||T.Headers&&$.headers instanceof T.Headers)){var es=[];Object.getOwnPropertyNames($.headers).forEach(function(C){es.push(normalizeName(C)),ee.setRequestHeader(C,normalizeValue($.headers[C]))}),X.headers.forEach(function(C,T){-1===es.indexOf(T)&&ee.setRequestHeader(T,C)})}else X.headers.forEach(function(C,T){ee.setRequestHeader(T,C)});X.signal&&(X.signal.addEventListener("abort",abortXhr),ee.onreadystatechange=function(){4===ee.readyState&&X.signal.removeEventListener("abort",abortXhr)}),ee.send(void 0===X._bodyInit?null:X._bodyInit)})}fetch.polyfill=!0,T.fetch||(T.fetch=fetch,T.Headers=Headers,T.Request=Request,T.Response=Response),C.Headers=Headers,C.Request=Request,C.Response=Response,C.fetch=fetch,Object.defineProperty(C,"__esModule",{value:!0})})({}),$.fetch.ponyfill=!0,delete $.fetch.polyfill;var Q=U.fetch?U:$;(T=Q.fetch).default=Q.fetch,T.fetch=Q.fetch,T.Headers=Q.Headers,T.Request=Q.Request,T.Response=Q.Response,C.exports=T},3631:function(C,T,N){"use strict";N.d(T,{qY:function(){return detect}});var U=N(3454),__spreadArray=function(C,T,N){if(N||2==arguments.length)for(var U,$=0,Q=T.length;$<Q;$++)!U&&$ in T||(U||(U=Array.prototype.slice.call(T,0,$)),U[$]=T[$]);return C.concat(U||Array.prototype.slice.call(T))},BrowserInfo=function(C,T,N){this.name=C,this.version=T,this.os=N,this.type="browser"},NodeInfo=function(C){this.version=C,this.type="node",this.name="node",this.os=U.platform},SearchBotDeviceInfo=function(C,T,N,U){this.name=C,this.version=T,this.os=N,this.bot=U,this.type="bot-device"},BotInfo=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ReactNativeInfo=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},$=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Q=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(C){return C?parseUserAgent(C):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ReactNativeInfo:"undefined"!=typeof navigator?parseUserAgent(navigator.userAgent):void 0!==U&&U.version?new NodeInfo(U.version.slice(1)):null}function parseUserAgent(C){var T=""!==C&&Q.reduce(function(T,N){var U=N[0],$=N[1];if(T)return T;var Q=$.exec(C);return!!Q&&[U,Q]},!1);if(!T)return null;var N=T[0],U=T[1];if("searchbot"===N)return new BotInfo;var X=U[1]&&U[1].split(".").join("_").split("_").slice(0,3);X?X.length<3&&(X=__spreadArray(__spreadArray([],X,!0),function(C){for(var T=[],N=0;N<C;N++)T.push("0");return T}(3-X.length),!0)):X=[];var ee=X.join("."),es=function(C){for(var T=0,N=Y.length;T<N;T++){var U=Y[T],$=U[0];if(U[1].exec(C))return $}return null}(C),el=$.exec(C);return el&&el[1]?new SearchBotDeviceInfo(N,ee,es,el[1]):new BrowserInfo(N,ee,es)}},7187:function(C){"use strict";var T,N="object"==typeof Reflect?Reflect:null,U=N&&"function"==typeof N.apply?N.apply:function(C,T,N){return Function.prototype.apply.call(C,T,N)};T=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var $=Number.isNaN||function(C){return C!=C};function EventEmitter(){EventEmitter.init.call(this)}C.exports=EventEmitter,C.exports.once=function(C,T){return new Promise(function(N,U){function errorListener(N){C.removeListener(T,resolver),U(N)}function resolver(){"function"==typeof C.removeListener&&C.removeListener("error",errorListener),N([].slice.call(arguments))}eventTargetAgnosticAddListener(C,T,resolver,{once:!0}),"error"!==T&&"function"==typeof C.on&&eventTargetAgnosticAddListener(C,"error",errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var Q=10;function checkListener(C){if("function"!=typeof C)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function _getMaxListeners(C){return void 0===C._maxListeners?EventEmitter.defaultMaxListeners:C._maxListeners}function _addListener(C,T,N,U){if(checkListener(N),void 0===(Q=C._events)?(Q=C._events=Object.create(null),C._eventsCount=0):(void 0!==Q.newListener&&(C.emit("newListener",T,N.listener?N.listener:N),Q=C._events),Y=Q[T]),void 0===Y)Y=Q[T]=N,++C._eventsCount;else if("function"==typeof Y?Y=Q[T]=U?[N,Y]:[Y,N]:U?Y.unshift(N):Y.push(N),($=_getMaxListeners(C))>0&&Y.length>$&&!Y.warned){Y.warned=!0;var $,Q,Y,X=Error("Possible EventEmitter memory leak detected. "+Y.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=C,X.type=T,X.count=Y.length,console&&console.warn&&console.warn(X)}return C}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(C,T,N){var U={fired:!1,wrapFn:void 0,target:C,type:T,listener:N},$=onceWrapper.bind(U);return $.listener=N,U.wrapFn=$,$}function _listeners(C,T,N){var U=C._events;if(void 0===U)return[];var $=U[T];return void 0===$?[]:"function"==typeof $?N?[$.listener||$]:[$]:N?function(C){for(var T=Array(C.length),N=0;N<T.length;++N)T[N]=C[N].listener||C[N];return T}($):arrayClone($,$.length)}function listenerCount(C){var T=this._events;if(void 0!==T){var N=T[C];if("function"==typeof N)return 1;if(void 0!==N)return N.length}return 0}function arrayClone(C,T){for(var N=Array(T),U=0;U<T;++U)N[U]=C[U];return N}function eventTargetAgnosticAddListener(C,T,N,U){if("function"==typeof C.on)U.once?C.once(T,N):C.on(T,N);else if("function"==typeof C.addEventListener)C.addEventListener(T,function wrapListener($){U.once&&C.removeEventListener(T,wrapListener),N($)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return Q},set:function(C){if("number"!=typeof C||C<0||$(C))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");Q=C}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(C){if("number"!=typeof C||C<0||$(C))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(C){for(var T=[],N=1;N<arguments.length;N++)T.push(arguments[N]);var $="error"===C,Q=this._events;if(void 0!==Q)$=$&&void 0===Q.error;else if(!$)return!1;if($){if(T.length>0&&(Y=T[0]),Y instanceof Error)throw Y;var Y,X=Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw X.context=Y,X}var ee=Q[C];if(void 0===ee)return!1;if("function"==typeof ee)U(ee,this,T);else for(var es=ee.length,el=arrayClone(ee,es),N=0;N<es;++N)U(el[N],this,T);return!0},EventEmitter.prototype.addListener=function(C,T){return _addListener(this,C,T,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(C,T){return _addListener(this,C,T,!0)},EventEmitter.prototype.once=function(C,T){return checkListener(T),this.on(C,_onceWrap(this,C,T)),this},EventEmitter.prototype.prependOnceListener=function(C,T){return checkListener(T),this.prependListener(C,_onceWrap(this,C,T)),this},EventEmitter.prototype.removeListener=function(C,T){var N,U,$,Q,Y;if(checkListener(T),void 0===(U=this._events)||void 0===(N=U[C]))return this;if(N===T||N.listener===T)0==--this._eventsCount?this._events=Object.create(null):(delete U[C],U.removeListener&&this.emit("removeListener",C,N.listener||T));else if("function"!=typeof N){for($=-1,Q=N.length-1;Q>=0;Q--)if(N[Q]===T||N[Q].listener===T){Y=N[Q].listener,$=Q;break}if($<0)return this;0===$?N.shift():function(C,T){for(;T+1<C.length;T++)C[T]=C[T+1];C.pop()}(N,$),1===N.length&&(U[C]=N[0]),void 0!==U.removeListener&&this.emit("removeListener",C,Y||T)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(C){var T,N,U;if(void 0===(N=this._events))return this;if(void 0===N.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==N[C]&&(0==--this._eventsCount?this._events=Object.create(null):delete N[C]),this;if(0==arguments.length){var $,Q=Object.keys(N);for(U=0;U<Q.length;++U)"removeListener"!==($=Q[U])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(T=N[C]))this.removeListener(C,T);else if(void 0!==T)for(U=T.length-1;U>=0;U--)this.removeListener(C,T[U]);return this},EventEmitter.prototype.listeners=function(C){return _listeners(this,C,!0)},EventEmitter.prototype.rawListeners=function(C){return _listeners(this,C,!1)},EventEmitter.listenerCount=function(C,T){return"function"==typeof C.listenerCount?C.listenerCount(T):listenerCount.call(C,T)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?T(this._events):[]}},645:function(C,T){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */T.read=function(C,T,N,U,$){var Q,Y,X=8*$-U-1,ee=(1<<X)-1,es=ee>>1,el=-7,ec=N?$-1:0,eh=N?-1:1,eu=C[T+ec];for(ec+=eh,Q=eu&(1<<-el)-1,eu>>=-el,el+=X;el>0;Q=256*Q+C[T+ec],ec+=eh,el-=8);for(Y=Q&(1<<-el)-1,Q>>=-el,el+=U;el>0;Y=256*Y+C[T+ec],ec+=eh,el-=8);if(0===Q)Q=1-es;else{if(Q===ee)return Y?NaN:(eu?-1:1)*(1/0);Y+=Math.pow(2,U),Q-=es}return(eu?-1:1)*Y*Math.pow(2,Q-U)},T.write=function(C,T,N,U,$,Q){var Y,X,ee,es=8*Q-$-1,el=(1<<es)-1,ec=el>>1,eh=23===$?5960464477539062e-23:0,eu=U?0:Q-1,ed=U?1:-1,ep=T<0||0===T&&1/T<0?1:0;for(isNaN(T=Math.abs(T))||T===1/0?(X=isNaN(T)?1:0,Y=el):(Y=Math.floor(Math.log(T)/Math.LN2),T*(ee=Math.pow(2,-Y))<1&&(Y--,ee*=2),Y+ec>=1?T+=eh/ee:T+=eh*Math.pow(2,1-ec),T*ee>=2&&(Y++,ee/=2),Y+ec>=el?(X=0,Y=el):Y+ec>=1?(X=(T*ee-1)*Math.pow(2,$),Y+=ec):(X=T*Math.pow(2,ec-1)*Math.pow(2,$),Y=0));$>=8;C[N+eu]=255&X,eu+=ed,X/=256,$-=8);for(Y=Y<<$|X,es+=$;es>0;C[N+eu]=255&Y,eu+=ed,Y/=256,es-=8);C[N+eu-ed]|=128*ep}},3454:function(C,T,N){"use strict";var U,$;C.exports=(null==(U=N.g.process)?void 0:U.env)&&"object"==typeof(null==($=N.g.process)?void 0:$.env)?N.g.process:N(7663)},7663:function(C){!function(){var T={229:function(C){var T,N,U,$=C.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(C){if(T===setTimeout)return setTimeout(C,0);if((T===defaultSetTimout||!T)&&setTimeout)return T=setTimeout,setTimeout(C,0);try{return T(C,0)}catch(N){try{return T.call(null,C,0)}catch(N){return T.call(this,C,0)}}}!function(){try{T="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(C){T=defaultSetTimout}try{N="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(C){N=defaultClearTimeout}}();var Q=[],Y=!1,X=-1;function cleanUpNextTick(){Y&&U&&(Y=!1,U.length?Q=U.concat(Q):X=-1,Q.length&&drainQueue())}function drainQueue(){if(!Y){var C=runTimeout(cleanUpNextTick);Y=!0;for(var T=Q.length;T;){for(U=Q,Q=[];++X<T;)U&&U[X].run();X=-1,T=Q.length}U=null,Y=!1,function(C){if(N===clearTimeout)return clearTimeout(C);if((N===defaultClearTimeout||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(C);try{N(C)}catch(T){try{return N.call(null,C)}catch(T){return N.call(this,C)}}}(C)}}function Item(C,T){this.fun=C,this.array=T}function noop(){}$.nextTick=function(C){var T=Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)T[N-1]=arguments[N];Q.push(new Item(C,T)),1!==Q.length||Y||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=noop,$.addListener=noop,$.once=noop,$.off=noop,$.removeListener=noop,$.removeAllListeners=noop,$.emit=noop,$.prependListener=noop,$.prependOnceListener=noop,$.listeners=function(C){return[]},$.binding=function(C){throw Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(C){throw Error("process.chdir is not supported")},$.umask=function(){return 0}}},N={};function __nccwpck_require__(C){var U=N[C];if(void 0!==U)return U.exports;var $=N[C]={exports:{}},Q=!0;try{T[C]($,$.exports,__nccwpck_require__),Q=!1}finally{Q&&delete N[C]}return $.exports}__nccwpck_require__.ab="//";var U=__nccwpck_require__(229);C.exports=U}()},9008:function(C,T,N){C.exports=N(9201)},1163:function(C,T,N){C.exports=N(9974)},2703:function(C,T,N){"use strict";var U=N(414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,C.exports=function(){function shim(C,T,N,$,Q,Y){if(Y!==U){var X=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw X.name="Invariant Violation",X}}function getShim(){return shim}shim.isRequired=shim;var C={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return C.PropTypes=C,C}},5697:function(C,T,N){C.exports=N(2703)()},414:function(C){"use strict";C.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3655:function(C,T,N){var U=N(2792);function QR8bitByte(C){this.mode=U.MODE_8BIT_BYTE,this.data=C}QR8bitByte.prototype={getLength:function(C){return this.data.length},write:function(C){for(var T=0;T<this.data.length;T++)C.put(this.data.charCodeAt(T),8)}},C.exports=QR8bitByte},7321:function(C){function QRBitBuffer(){this.buffer=[],this.length=0}QRBitBuffer.prototype={get:function(C){var T=Math.floor(C/8);return(this.buffer[T]>>>7-C%8&1)==1},put:function(C,T){for(var N=0;N<T;N++)this.putBit((C>>>T-N-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(C){var T=Math.floor(this.length/8);this.buffer.length<=T&&this.buffer.push(0),C&&(this.buffer[T]|=128>>>this.length%8),this.length++}},C.exports=QRBitBuffer},9381:function(C){C.exports={L:1,M:0,Q:3,H:2}},2832:function(C,T,N){var U=N(1518);function QRPolynomial(C,T){if(void 0==C.length)throw Error(C.length+"/"+T);for(var N=0;N<C.length&&0==C[N];)N++;this.num=Array(C.length-N+T);for(var U=0;U<C.length-N;U++)this.num[U]=C[U+N]}QRPolynomial.prototype={get:function(C){return this.num[C]},getLength:function(){return this.num.length},multiply:function(C){for(var T=Array(this.getLength()+C.getLength()-1),N=0;N<this.getLength();N++)for(var $=0;$<C.getLength();$++)T[N+$]^=U.gexp(U.glog(this.get(N))+U.glog(C.get($)));return new QRPolynomial(T,0)},mod:function(C){if(this.getLength()-C.getLength()<0)return this;for(var T=U.glog(this.get(0))-U.glog(C.get(0)),N=Array(this.getLength()),$=0;$<this.getLength();$++)N[$]=this.get($);for(var $=0;$<C.getLength();$++)N[$]^=U.gexp(U.glog(C.get($))+T);return new QRPolynomial(N,0).mod(C)}},C.exports=QRPolynomial},3735:function(C,T,N){var U=N(3655),$=N(7611),Q=N(7321),Y=N(3160),X=N(2832);function QRCode(C,T){this.typeNumber=C,this.errorCorrectLevel=T,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var ee=QRCode.prototype;ee.addData=function(C){var T=new U(C);this.dataList.push(T),this.dataCache=null},ee.isDark=function(C,T){if(C<0||this.moduleCount<=C||T<0||this.moduleCount<=T)throw Error(C+","+T);return this.modules[C][T]},ee.getModuleCount=function(){return this.moduleCount},ee.make=function(){if(this.typeNumber<1){var C=1;for(C=1;C<40;C++){for(var T=$.getRSBlocks(C,this.errorCorrectLevel),N=new Q,U=0,X=0;X<T.length;X++)U+=T[X].dataCount;for(var X=0;X<this.dataList.length;X++){var ee=this.dataList[X];N.put(ee.mode,4),N.put(ee.getLength(),Y.getLengthInBits(ee.mode,C)),ee.write(N)}if(N.getLengthInBits()<=8*U)break}this.typeNumber=C}this.makeImpl(!1,this.getBestMaskPattern())},ee.makeImpl=function(C,T){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var N=0;N<this.moduleCount;N++){this.modules[N]=Array(this.moduleCount);for(var U=0;U<this.moduleCount;U++)this.modules[N][U]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(C,T),this.typeNumber>=7&&this.setupTypeNumber(C),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,T)},ee.setupPositionProbePattern=function(C,T){for(var N=-1;N<=7;N++)if(!(C+N<=-1)&&!(this.moduleCount<=C+N))for(var U=-1;U<=7;U++)T+U<=-1||this.moduleCount<=T+U||(0<=N&&N<=6&&(0==U||6==U)||0<=U&&U<=6&&(0==N||6==N)||2<=N&&N<=4&&2<=U&&U<=4?this.modules[C+N][T+U]=!0:this.modules[C+N][T+U]=!1)},ee.getBestMaskPattern=function(){for(var C=0,T=0,N=0;N<8;N++){this.makeImpl(!0,N);var U=Y.getLostPoint(this);(0==N||C>U)&&(C=U,T=N)}return T},ee.createMovieClip=function(C,T,N){var U=C.createEmptyMovieClip(T,N);this.make();for(var $=0;$<this.modules.length;$++)for(var Q=1*$,Y=0;Y<this.modules[$].length;Y++){var X=1*Y;this.modules[$][Y]&&(U.beginFill(0,100),U.moveTo(X,Q),U.lineTo(X+1,Q),U.lineTo(X+1,Q+1),U.lineTo(X,Q+1),U.endFill())}return U},ee.setupTimingPattern=function(){for(var C=8;C<this.moduleCount-8;C++)null==this.modules[C][6]&&(this.modules[C][6]=C%2==0);for(var T=8;T<this.moduleCount-8;T++)null==this.modules[6][T]&&(this.modules[6][T]=T%2==0)},ee.setupPositionAdjustPattern=function(){for(var C=Y.getPatternPosition(this.typeNumber),T=0;T<C.length;T++)for(var N=0;N<C.length;N++){var U=C[T],$=C[N];if(null==this.modules[U][$])for(var Q=-2;Q<=2;Q++)for(var X=-2;X<=2;X++)-2==Q||2==Q||-2==X||2==X||0==Q&&0==X?this.modules[U+Q][$+X]=!0:this.modules[U+Q][$+X]=!1}},ee.setupTypeNumber=function(C){for(var T=Y.getBCHTypeNumber(this.typeNumber),N=0;N<18;N++){var U=!C&&(T>>N&1)==1;this.modules[Math.floor(N/3)][N%3+this.moduleCount-8-3]=U}for(var N=0;N<18;N++){var U=!C&&(T>>N&1)==1;this.modules[N%3+this.moduleCount-8-3][Math.floor(N/3)]=U}},ee.setupTypeInfo=function(C,T){for(var N=this.errorCorrectLevel<<3|T,U=Y.getBCHTypeInfo(N),$=0;$<15;$++){var Q=!C&&(U>>$&1)==1;$<6?this.modules[$][8]=Q:$<8?this.modules[$+1][8]=Q:this.modules[this.moduleCount-15+$][8]=Q}for(var $=0;$<15;$++){var Q=!C&&(U>>$&1)==1;$<8?this.modules[8][this.moduleCount-$-1]=Q:$<9?this.modules[8][15-$-1+1]=Q:this.modules[8][15-$-1]=Q}this.modules[this.moduleCount-8][8]=!C},ee.mapData=function(C,T){for(var N=-1,U=this.moduleCount-1,$=7,Q=0,X=this.moduleCount-1;X>0;X-=2)for(6==X&&X--;;){for(var ee=0;ee<2;ee++)if(null==this.modules[U][X-ee]){var es=!1;Q<C.length&&(es=(C[Q]>>>$&1)==1),Y.getMask(T,U,X-ee)&&(es=!es),this.modules[U][X-ee]=es,-1==--$&&(Q++,$=7)}if((U+=N)<0||this.moduleCount<=U){U-=N,N=-N;break}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(C,T,N){for(var U=$.getRSBlocks(C,T),X=new Q,ee=0;ee<N.length;ee++){var es=N[ee];X.put(es.mode,4),X.put(es.getLength(),Y.getLengthInBits(es.mode,C)),es.write(X)}for(var el=0,ee=0;ee<U.length;ee++)el+=U[ee].dataCount;if(X.getLengthInBits()>8*el)throw Error("code length overflow. ("+X.getLengthInBits()+">"+8*el+")");for(X.getLengthInBits()+4<=8*el&&X.put(0,4);X.getLengthInBits()%8!=0;)X.putBit(!1);for(;!(X.getLengthInBits()>=8*el)&&(X.put(QRCode.PAD0,8),!(X.getLengthInBits()>=8*el));)X.put(QRCode.PAD1,8);return QRCode.createBytes(X,U)},QRCode.createBytes=function(C,T){for(var N=0,U=0,$=0,Q=Array(T.length),ee=Array(T.length),es=0;es<T.length;es++){var el=T[es].dataCount,ec=T[es].totalCount-el;U=Math.max(U,el),$=Math.max($,ec),Q[es]=Array(el);for(var eh=0;eh<Q[es].length;eh++)Q[es][eh]=255&C.buffer[eh+N];N+=el;var eu=Y.getErrorCorrectPolynomial(ec),ed=new X(Q[es],eu.getLength()-1).mod(eu);ee[es]=Array(eu.getLength()-1);for(var eh=0;eh<ee[es].length;eh++){var ep=eh+ed.getLength()-ee[es].length;ee[es][eh]=ep>=0?ed.get(ep):0}}for(var eg=0,eh=0;eh<T.length;eh++)eg+=T[eh].totalCount;for(var ey=Array(eg),em=0,eh=0;eh<U;eh++)for(var es=0;es<T.length;es++)eh<Q[es].length&&(ey[em++]=Q[es][eh]);for(var eh=0;eh<$;eh++)for(var es=0;es<T.length;es++)eh<ee[es].length&&(ey[em++]=ee[es][eh]);return ey},C.exports=QRCode},7611:function(C,T,N){var U=N(9381);function QRRSBlock(C,T){this.totalCount=C,this.dataCount=T}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(C,T){var N=QRRSBlock.getRsBlockTable(C,T);if(void 0==N)throw Error("bad rs block @ typeNumber:"+C+"/errorCorrectLevel:"+T);for(var U=N.length/3,$=[],Q=0;Q<U;Q++)for(var Y=N[3*Q+0],X=N[3*Q+1],ee=N[3*Q+2],es=0;es<Y;es++)$.push(new QRRSBlock(X,ee));return $},QRRSBlock.getRsBlockTable=function(C,T){switch(T){case U.L:return QRRSBlock.RS_BLOCK_TABLE[(C-1)*4+0];case U.M:return QRRSBlock.RS_BLOCK_TABLE[(C-1)*4+1];case U.Q:return QRRSBlock.RS_BLOCK_TABLE[(C-1)*4+2];case U.H:return QRRSBlock.RS_BLOCK_TABLE[(C-1)*4+3];default:return}},C.exports=QRRSBlock},1518:function(C){for(var T={glog:function(C){if(C<1)throw Error("glog("+C+")");return T.LOG_TABLE[C]},gexp:function(C){for(;C<0;)C+=255;for(;C>=256;)C-=255;return T.EXP_TABLE[C]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},N=0;N<8;N++)T.EXP_TABLE[N]=1<<N;for(var N=8;N<256;N++)T.EXP_TABLE[N]=T.EXP_TABLE[N-4]^T.EXP_TABLE[N-5]^T.EXP_TABLE[N-6]^T.EXP_TABLE[N-8];for(var N=0;N<255;N++)T.LOG_TABLE[T.EXP_TABLE[N]]=N;C.exports=T},2792:function(C){C.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},3160:function(C,T,N){var U=N(2792),$=N(2832),Q=N(1518),Y={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},X={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(C){for(var T=C<<10;X.getBCHDigit(T)-X.getBCHDigit(X.G15)>=0;)T^=X.G15<<X.getBCHDigit(T)-X.getBCHDigit(X.G15);return(C<<10|T)^X.G15_MASK},getBCHTypeNumber:function(C){for(var T=C<<12;X.getBCHDigit(T)-X.getBCHDigit(X.G18)>=0;)T^=X.G18<<X.getBCHDigit(T)-X.getBCHDigit(X.G18);return C<<12|T},getBCHDigit:function(C){for(var T=0;0!=C;)T++,C>>>=1;return T},getPatternPosition:function(C){return X.PATTERN_POSITION_TABLE[C-1]},getMask:function(C,T,N){switch(C){case Y.PATTERN000:return(T+N)%2==0;case Y.PATTERN001:return T%2==0;case Y.PATTERN010:return N%3==0;case Y.PATTERN011:return(T+N)%3==0;case Y.PATTERN100:return(Math.floor(T/2)+Math.floor(N/3))%2==0;case Y.PATTERN101:return T*N%2+T*N%3==0;case Y.PATTERN110:return(T*N%2+T*N%3)%2==0;case Y.PATTERN111:return(T*N%3+(T+N)%2)%2==0;default:throw Error("bad maskPattern:"+C)}},getErrorCorrectPolynomial:function(C){for(var T=new $([1],0),N=0;N<C;N++)T=T.multiply(new $([1,Q.gexp(N)],0));return T},getLengthInBits:function(C,T){if(1<=T&&T<10)switch(C){case U.MODE_NUMBER:return 10;case U.MODE_ALPHA_NUM:return 9;case U.MODE_8BIT_BYTE:case U.MODE_KANJI:return 8;default:throw Error("mode:"+C)}else if(T<27)switch(C){case U.MODE_NUMBER:return 12;case U.MODE_ALPHA_NUM:return 11;case U.MODE_8BIT_BYTE:return 16;case U.MODE_KANJI:return 10;default:throw Error("mode:"+C)}else if(T<41)switch(C){case U.MODE_NUMBER:return 14;case U.MODE_ALPHA_NUM:return 13;case U.MODE_8BIT_BYTE:return 16;case U.MODE_KANJI:return 12;default:throw Error("mode:"+C)}else throw Error("type:"+T)},getLostPoint:function(C){for(var T=C.getModuleCount(),N=0,U=0;U<T;U++)for(var $=0;$<T;$++){for(var Q=0,Y=C.isDark(U,$),X=-1;X<=1;X++)if(!(U+X<0)&&!(T<=U+X))for(var ee=-1;ee<=1;ee++)!($+ee<0)&&!(T<=$+ee)&&(0!=X||0!=ee)&&Y==C.isDark(U+X,$+ee)&&Q++;Q>5&&(N+=3+Q-5)}for(var U=0;U<T-1;U++)for(var $=0;$<T-1;$++){var es=0;C.isDark(U,$)&&es++,C.isDark(U+1,$)&&es++,C.isDark(U,$+1)&&es++,C.isDark(U+1,$+1)&&es++,(0==es||4==es)&&(N+=3)}for(var U=0;U<T;U++)for(var $=0;$<T-6;$++)C.isDark(U,$)&&!C.isDark(U,$+1)&&C.isDark(U,$+2)&&C.isDark(U,$+3)&&C.isDark(U,$+4)&&!C.isDark(U,$+5)&&C.isDark(U,$+6)&&(N+=40);for(var $=0;$<T;$++)for(var U=0;U<T-6;U++)C.isDark(U,$)&&!C.isDark(U+1,$)&&C.isDark(U+2,$)&&C.isDark(U+3,$)&&C.isDark(U+4,$)&&!C.isDark(U+5,$)&&C.isDark(U+6,$)&&(N+=40);for(var el=0,$=0;$<T;$++)for(var U=0;U<T;U++)C.isDark(U,$)&&el++;return N+10*(Math.abs(100*el/T/T-50)/5)}};C.exports=X},5346:function(C){"use strict";function tryStringify(C){try{return JSON.stringify(C)}catch(C){return'"[Circular]"'}}C.exports=function(C,T,N){var U=N&&N.stringify||tryStringify;if("object"==typeof C&&null!==C){var $=T.length+1;if(1===$)return C;var Q=Array($);Q[0]=U(C);for(var Y=1;Y<$;Y++)Q[Y]=U(T[Y]);return Q.join(" ")}if("string"!=typeof C)return C;var X=T.length;if(0===X)return C;for(var ee="",es=0,el=-1,ec=C&&C.length||0,eh=0;eh<ec;){if(37===C.charCodeAt(eh)&&eh+1<ec){switch(el=el>-1?el:0,C.charCodeAt(eh+1)){case 100:case 102:if(es>=X||null==T[es])break;el<eh&&(ee+=C.slice(el,eh)),ee+=Number(T[es]),el=eh+2,eh++;break;case 105:if(es>=X||null==T[es])break;el<eh&&(ee+=C.slice(el,eh)),ee+=Math.floor(Number(T[es])),el=eh+2,eh++;break;case 79:case 111:case 106:if(es>=X||void 0===T[es])break;el<eh&&(ee+=C.slice(el,eh));var eu=typeof T[es];if("string"===eu){ee+="'"+T[es]+"'",el=eh+2,eh++;break}if("function"===eu){ee+=T[es].name||"<anonymous>",el=eh+2,eh++;break}ee+=U(T[es]),el=eh+2,eh++;break;case 115:if(es>=X)break;el<eh&&(ee+=C.slice(el,eh)),ee+=String(T[es]),el=eh+2,eh++;break;case 37:el<eh&&(ee+=C.slice(el,eh)),ee+="%",el=eh+2,eh++,es--}++es}++eh}return -1===el?C:(el<ec&&(ee+=C.slice(el)),ee)}},8632:function(C,T,N){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var U=Object.assign||function(C){for(var T=1;T<arguments.length;T++){var N=arguments[T];for(var U in N)Object.prototype.hasOwnProperty.call(N,U)&&(C[U]=N[U])}return C},$=_interopRequireDefault(N(5697)),Q=N(7294),Y=_interopRequireDefault(Q);function _interopRequireDefault(C){return C&&C.__esModule?C:{default:C}}var X={bgColor:$.default.oneOfType([$.default.object,$.default.string]).isRequired,bgD:$.default.string.isRequired,fgColor:$.default.oneOfType([$.default.object,$.default.string]).isRequired,fgD:$.default.string.isRequired,size:$.default.number.isRequired,title:$.default.string,viewBoxSize:$.default.number.isRequired,xmlns:$.default.string},ee=(0,Q.forwardRef)(function(C,T){var N=C.bgColor,$=C.bgD,Q=C.fgD,X=C.fgColor,ee=C.size,es=C.title,el=C.viewBoxSize,ec=C.xmlns,eh=function(C,T){var N={};for(var U in C)!(T.indexOf(U)>=0)&&Object.prototype.hasOwnProperty.call(C,U)&&(N[U]=C[U]);return N}(C,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Y.default.createElement("svg",U({},eh,{height:ee,ref:T,viewBox:"0 0 "+el+" "+el,width:ee,xmlns:void 0===ec?"http://www.w3.org/2000/svg":ec}),es?Y.default.createElement("title",null,es):null,Y.default.createElement("path",{d:$,fill:N}),Y.default.createElement("path",{d:Q,fill:X}))});ee.displayName="QRCodeSvg",ee.propTypes=X,T.default=ee},1653:function(C,T,N){"use strict";var U=Object.assign||function(C){for(var T=1;T<arguments.length;T++){var N=arguments[T];for(var U in N)Object.prototype.hasOwnProperty.call(N,U)&&(C[U]=N[U])}return C},$=_interopRequireDefault(N(5697)),Q=_interopRequireDefault(N(9381)),Y=_interopRequireDefault(N(3735)),X=N(7294),ee=_interopRequireDefault(X),es=_interopRequireDefault(N(8632));function _interopRequireDefault(C){return C&&C.__esModule?C:{default:C}}var el={bgColor:$.default.oneOfType([$.default.object,$.default.string]),fgColor:$.default.oneOfType([$.default.object,$.default.string]),level:$.default.string,size:$.default.number,value:$.default.string.isRequired},ec=(0,X.forwardRef)(function(C,T){var N=C.bgColor,$=C.fgColor,X=C.level,el=C.size,ec=C.value,eh=function(C,T){var N={};for(var U in C)!(T.indexOf(U)>=0)&&Object.prototype.hasOwnProperty.call(C,U)&&(N[U]=C[U]);return N}(C,["bgColor","fgColor","level","size","value"]),eu=new Y.default(-1,Q.default[void 0===X?"L":X]);eu.addData(ec),eu.make();var ed=eu.modules;return ee.default.createElement(es.default,U({},eh,{bgColor:void 0===N?"#FFFFFF":N,bgD:ed.map(function(C,T){return C.map(function(C,N){return C?"":"M "+N+" "+T+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:void 0===$?"#000000":$,fgD:ed.map(function(C,T){return C.map(function(C,N){return C?"M "+N+" "+T+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:T,size:void 0===el?256:el,viewBoxSize:ed.length}))});ec.displayName="QRCode",ec.propTypes=el,T.ZP=ec},655:function(C,T,N){"use strict";N.r(T),N.d(T,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(C,T){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var N in T)T.hasOwnProperty(N)&&(C[N]=T[N])})(C,T)};function __extends(C,T){function __(){this.constructor=C}extendStatics(C,T),C.prototype=null===T?Object.create(T):(__.prototype=T.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(C){for(var T,N=1,U=arguments.length;N<U;N++)for(var $ in T=arguments[N])Object.prototype.hasOwnProperty.call(T,$)&&(C[$]=T[$]);return C}).apply(this,arguments)};function __rest(C,T){var N={};for(var U in C)Object.prototype.hasOwnProperty.call(C,U)&&0>T.indexOf(U)&&(N[U]=C[U]);if(null!=C&&"function"==typeof Object.getOwnPropertySymbols)for(var $=0,U=Object.getOwnPropertySymbols(C);$<U.length;$++)0>T.indexOf(U[$])&&Object.prototype.propertyIsEnumerable.call(C,U[$])&&(N[U[$]]=C[U[$]]);return N}function __decorate(C,T,N,U){var $,Q=arguments.length,Y=Q<3?T:null===U?U=Object.getOwnPropertyDescriptor(T,N):U;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Y=Reflect.decorate(C,T,N,U);else for(var X=C.length-1;X>=0;X--)($=C[X])&&(Y=(Q<3?$(Y):Q>3?$(T,N,Y):$(T,N))||Y);return Q>3&&Y&&Object.defineProperty(T,N,Y),Y}function __param(C,T){return function(N,U){T(N,U,C)}}function __metadata(C,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C,T)}function __awaiter(C,T,N,U){return new(N||(N=Promise))(function($,Q){function fulfilled(C){try{step(U.next(C))}catch(C){Q(C)}}function rejected(C){try{step(U.throw(C))}catch(C){Q(C)}}function step(C){var T;C.done?$(C.value):((T=C.value)instanceof N?T:new N(function(C){C(T)})).then(fulfilled,rejected)}step((U=U.apply(C,T||[])).next())})}function __generator(C,T){var N,U,$,Q,Y={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return Q={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function verb(Q){return function(X){return function(Q){if(N)throw TypeError("Generator is already executing.");for(;Y;)try{if(N=1,U&&($=2&Q[0]?U.return:Q[0]?U.throw||(($=U.return)&&$.call(U),0):U.next)&&!($=$.call(U,Q[1])).done)return $;switch(U=0,$&&(Q=[2&Q[0],$.value]),Q[0]){case 0:case 1:$=Q;break;case 4:return Y.label++,{value:Q[1],done:!1};case 5:Y.label++,U=Q[1],Q=[0];continue;case 7:Q=Y.ops.pop(),Y.trys.pop();continue;default:if(!($=($=Y.trys).length>0&&$[$.length-1])&&(6===Q[0]||2===Q[0])){Y=0;continue}if(3===Q[0]&&(!$||Q[1]>$[0]&&Q[1]<$[3])){Y.label=Q[1];break}if(6===Q[0]&&Y.label<$[1]){Y.label=$[1],$=Q;break}if($&&Y.label<$[2]){Y.label=$[2],Y.ops.push(Q);break}$[2]&&Y.ops.pop(),Y.trys.pop();continue}Q=T.call(C,Y)}catch(C){Q=[6,C],U=0}finally{N=$=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([Q,X])}}}function __createBinding(C,T,N,U){void 0===U&&(U=N),C[U]=T[N]}function __exportStar(C,T){for(var N in C)"default"===N||T.hasOwnProperty(N)||(T[N]=C[N])}function __values(C){var T="function"==typeof Symbol&&Symbol.iterator,N=T&&C[T],U=0;if(N)return N.call(C);if(C&&"number"==typeof C.length)return{next:function(){return C&&U>=C.length&&(C=void 0),{value:C&&C[U++],done:!C}}};throw TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(C,T){var N="function"==typeof Symbol&&C[Symbol.iterator];if(!N)return C;var U,$,Q=N.call(C),Y=[];try{for(;(void 0===T||T-- >0)&&!(U=Q.next()).done;)Y.push(U.value)}catch(C){$={error:C}}finally{try{U&&!U.done&&(N=Q.return)&&N.call(Q)}finally{if($)throw $.error}}return Y}function __spread(){for(var C=[],T=0;T<arguments.length;T++)C=C.concat(__read(arguments[T]));return C}function __spreadArrays(){for(var C=0,T=0,N=arguments.length;T<N;T++)C+=arguments[T].length;for(var U=Array(C),$=0,T=0;T<N;T++)for(var Q=arguments[T],Y=0,X=Q.length;Y<X;Y++,$++)U[$]=Q[Y];return U}function __await(C){return this instanceof __await?(this.v=C,this):new __await(C)}function __asyncGenerator(C,T,N){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var U,$=N.apply(C,T||[]),Q=[];return U={},verb("next"),verb("throw"),verb("return"),U[Symbol.asyncIterator]=function(){return this},U;function verb(C){$[C]&&(U[C]=function(T){return new Promise(function(N,U){Q.push([C,T,N,U])>1||resume(C,T)})})}function resume(C,T){try{var N;(N=$[C](T)).value instanceof __await?Promise.resolve(N.value.v).then(fulfill,reject):settle(Q[0][2],N)}catch(C){settle(Q[0][3],C)}}function fulfill(C){resume("next",C)}function reject(C){resume("throw",C)}function settle(C,T){C(T),Q.shift(),Q.length&&resume(Q[0][0],Q[0][1])}}function __asyncDelegator(C){var T,N;return T={},verb("next"),verb("throw",function(C){throw C}),verb("return"),T[Symbol.iterator]=function(){return this},T;function verb(U,$){T[U]=C[U]?function(T){return(N=!N)?{value:__await(C[U](T)),done:"return"===U}:$?$(T):T}:$}}function __asyncValues(C){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var T,N=C[Symbol.asyncIterator];return N?N.call(C):(C=__values(C),T={},verb("next"),verb("throw"),verb("return"),T[Symbol.asyncIterator]=function(){return this},T);function verb(N){T[N]=C[N]&&function(T){return new Promise(function(U,$){!function(C,T,N,U){Promise.resolve(U).then(function(T){C({value:T,done:N})},T)}(U,$,(T=C[N](T)).done,T.value)})}}}function __makeTemplateObject(C,T){return Object.defineProperty?Object.defineProperty(C,"raw",{value:T}):C.raw=T,C}function __importStar(C){if(C&&C.__esModule)return C;var T={};if(null!=C)for(var N in C)Object.hasOwnProperty.call(C,N)&&(T[N]=C[N]);return T.default=C,T}function __importDefault(C){return C&&C.__esModule?C:{default:C}}function __classPrivateFieldGet(C,T){if(!T.has(C))throw TypeError("attempted to get private field on non-instance");return T.get(C)}function __classPrivateFieldSet(C,T,N){if(!T.has(C))throw TypeError("attempted to set private field on non-instance");return T.set(C,N),N}},6559:function(C,T,N){"use strict";let U=N(5346);C.exports=pino;let $=function(){function defd(C){return void 0!==C&&C}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(C){return defd(self)||defd(window)||defd(this)||{}}}().console||{};function pino(C){var T;(C=C||{}).browser=C.browser||{};let N=C.browser.transmit;if(N&&"function"!=typeof N.send)throw Error("pino: transmit option must have a send function");let U=C.browser.write||$;C.browser.write&&(C.browser.asObject=!0);let Q=C.serializers||{},Y=function(C,T){if(Array.isArray(C)){let T=C.filter(function(C){return"!stdSerializers.err"!==C});return T}return!0===C&&Object.keys(T)}(C.browser.serialize,Q),X=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(X=!1),"function"==typeof U&&(U.error=U.fatal=U.warn=U.info=U.debug=U.trace=U),!1===C.enabled&&(C.level="silent");let ee=C.level||"info",es=Object.create(U);es.log||(es.log=noop),Object.defineProperty(es,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(es,"level",{get:function(){return this._level},set:function(C){if("silent"!==C&&!this.levels.values[C])throw Error("unknown level "+C);this._level=C,set(el,es,"error","log"),set(el,es,"fatal","error"),set(el,es,"warn","error"),set(el,es,"info","log"),set(el,es,"debug","log"),set(el,es,"trace","log")}});let el={transmit:N,serialize:Y,asObject:C.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(T=C).timestamp?T.timestamp:!1===T.timestamp?nullTime:epochTime};return es.levels=pino.levels,es.level=ee,es.setMaxListeners=es.getMaxListeners=es.emit=es.addListener=es.on=es.prependListener=es.once=es.prependOnceListener=es.removeListener=es.removeAllListeners=es.listeners=es.listenerCount=es.eventNames=es.write=es.flush=noop,es.serializers=Q,es._serialize=Y,es._stdErrSerialize=X,es.child=function(T,U){if(!T)throw Error("missing bindings for child Pino");U=U||{},Y&&T.serializers&&(U.serializers=T.serializers);let $=U.serializers;if(Y&&$){var X=Object.assign({},Q,$),ee=!0===C.browser.serialize?Object.keys(X):Y;delete T.serializers,applySerializers([T],ee,X,this._stdErrSerialize)}function Child(C){this._childLevel=(0|C._childLevel)+1,this.error=bind(C,T,"error"),this.fatal=bind(C,T,"fatal"),this.warn=bind(C,T,"warn"),this.info=bind(C,T,"info"),this.debug=bind(C,T,"debug"),this.trace=bind(C,T,"trace"),X&&(this.serializers=X,this._serialize=ee),N&&(this._logEvent=createLogEventShape([].concat(C._logEvent.bindings,T)))}return Child.prototype=this,new Child(this)},N&&(es._logEvent=createLogEventShape()),es}function set(C,T,N,Q){let Y=Object.getPrototypeOf(T);T[N]=T.levelVal>T.levels.values[N]?noop:Y[N]?Y[N]:$[N]||$[Q]||noop,function(C,T,N){if(C.transmit||T[N]!==noop){var Q;T[N]=(Q=T[N],function(){let Y=C.timestamp(),X=Array(arguments.length),ee=Object.getPrototypeOf&&Object.getPrototypeOf(this)===$?$:this;for(var es=0;es<X.length;es++)X[es]=arguments[es];if(C.serialize&&!C.asObject&&applySerializers(X,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?Q.call(ee,function(C,T,N,$){C._serialize&&applySerializers(N,C._serialize,C.serializers,C._stdErrSerialize);let Q=N.slice(),Y=Q[0],X={};$&&(X.time=$),X.level=pino.levels.values[T];let ee=(0|C._childLevel)+1;if(ee<1&&(ee=1),null!==Y&&"object"==typeof Y){for(;ee--&&"object"==typeof Q[0];)Object.assign(X,Q.shift());Y=Q.length?U(Q.shift(),Q):void 0}else"string"==typeof Y&&(Y=U(Q.shift(),Q));return void 0!==Y&&(X.msg=Y),X}(this,N,X,Y)):Q.apply(ee,X),C.transmit){let U=C.transmit.level||T.level,$=pino.levels.values[U],Q=pino.levels.values[N];if(Q<$)return;(function(C,T,N){let U=T.send,$=T.ts,Q=T.methodLevel,Y=T.methodValue,X=T.val,ee=C._logEvent.bindings;applySerializers(N,C._serialize||Object.keys(C.serializers),C.serializers,void 0===C._stdErrSerialize||C._stdErrSerialize),C._logEvent.ts=$,C._logEvent.messages=N.filter(function(C){return -1===ee.indexOf(C)}),C._logEvent.level.label=Q,C._logEvent.level.value=Y,U(Q,C._logEvent,X),C._logEvent=createLogEventShape(ee)})(this,{ts:Y,methodLevel:N,methodValue:Q,transmitLevel:U,transmitValue:pino.levels.values[C.transmit.level||T.level],send:C.transmit.send,val:T.levelVal},X)}})}}(C,T,N)}function applySerializers(C,T,N,U){for(let $ in C)if(U&&C[$]instanceof Error)C[$]=pino.stdSerializers.err(C[$]);else if("object"==typeof C[$]&&!Array.isArray(C[$]))for(let U in C[$])T&&T.indexOf(U)>-1&&U in N&&(C[$][U]=N[U](C[$][U]))}function bind(C,T,N){return function(){let U=Array(1+arguments.length);U[0]=T;for(var $=1;$<U.length;$++)U[$]=arguments[$-1];return C[N].apply(this,U)}}function createLogEventShape(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function mock(){return{}}function passthrough(C){return C}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function(C){let T={type:C.constructor.name,msg:C.message,stack:C.stack};for(let N in C)void 0===T[N]&&(T[N]=C[N]);return T}},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},1220:function(C,T,N){"use strict";N.d(T,{kb:function(){return Hash},gk:function(){return abytes},$h:function(){return aexists},z3:function(){return ahash},k8:function(){return anumber},eB:function(){return aoutput},ru:function(){return clean},eV:function(){return concatBytes},V1:function(){return createHasher},GL:function(){return createView},O6:function(){return randomBytes},np:function(){return rotr},Ux:function(){return Q},O0:function(){return toBytes},Jq:function(){return u32}});let U="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function anumber(C){if(!Number.isSafeInteger(C)||C<0)throw Error("positive integer expected, got "+C)}function abytes(C,...T){if(!(C instanceof Uint8Array||ArrayBuffer.isView(C)&&"Uint8Array"===C.constructor.name))throw Error("Uint8Array expected");if(T.length>0&&!T.includes(C.length))throw Error("Uint8Array expected of length "+T+", got length="+C.length)}function ahash(C){if("function"!=typeof C||"function"!=typeof C.create)throw Error("Hash should be wrapped by utils.createHasher");anumber(C.outputLen),anumber(C.blockLen)}function aexists(C,T=!0){if(C.destroyed)throw Error("Hash instance has been destroyed");if(T&&C.finished)throw Error("Hash#digest() has already been called")}function aoutput(C,T){abytes(C);let N=T.outputLen;if(C.length<N)throw Error("digestInto() expects output buffer of length at least "+N)}function u32(C){return new Uint32Array(C.buffer,C.byteOffset,Math.floor(C.byteLength/4))}function clean(...C){for(let T=0;T<C.length;T++)C[T].fill(0)}function createView(C){return new DataView(C.buffer,C.byteOffset,C.byteLength)}function rotr(C,T){return C<<32-T|C>>>T}let $=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],Q=$?C=>C:function(C){for(let N=0;N<C.length;N++){var T;C[N]=(T=C[N])<<24&4278190080|T<<8&16711680|T>>>8&65280|T>>>24&255}return C};function toBytes(C){return"string"==typeof C&&(C=function(C){if("string"!=typeof C)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(C))}(C)),abytes(C),C}function concatBytes(...C){let T=0;for(let N=0;N<C.length;N++){let U=C[N];abytes(U),T+=U.length}let N=new Uint8Array(T);for(let T=0,U=0;T<C.length;T++){let $=C[T];N.set($,U),U+=$.length}return N}let Hash=class Hash{};function createHasher(C){let hashC=T=>C().update(toBytes(T)).digest(),T=C();return hashC.outputLen=T.outputLen,hashC.blockLen=T.blockLen,hashC.create=()=>C(),hashC}function randomBytes(C=32){if(U&&"function"==typeof U.getRandomValues)return U.getRandomValues(new Uint8Array(C));if(U&&"function"==typeof U.randomBytes)return Uint8Array.from(U.randomBytes(C));throw Error("crypto.getRandomValues must be defined")}},1476:function(C,T,N){"use strict";let U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep,eg,ey;N.d(T,{Q:function(){return BrowserProvider}});var em={};N.r(em),N.d(em,{dQ:function(){return bitMask},ci:function(){return bytesToHex},bytesToNumberBE:function(){return utils_bytesToNumberBE},ty:function(){return utils_bytesToNumberLE},eV:function(){return utils_concatBytes},n$:function(){return createHmacDrbg},ql:function(){return utils_ensureBytes},hexToBytes:function(){return hexToBytes},tL:function(){return utils_numberToBytesBE},S5:function(){return numberToBytesLE},FF:function(){return validateObject}});var eb=N(2423),ew=N(9613),e_=N(5556),ev=N(9554),eE=N(2314),ex=N(455),eA=N(2229),eI=N(5857),eP=N(2186);let eS=new Uint8Array(32);eS.fill(0);let eD=BigInt(-1),eB=BigInt(0),eC=BigInt(1),eO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),eR=(0,eA.m9)(eC,32),eT=(0,eA.m9)(eB,32),eN={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ek=["name","version","chainId","verifyingContract","salt"];function checkString(C){return function(T){return(0,eb.en)("string"==typeof T,`invalid domain value for ${JSON.stringify(C)}`,`domain.${C}`,T),T}}let eU={name:checkString("name"),version:checkString("version"),chainId:function(C){let T=(0,eA.yT)(C,"domain.chainId");return((0,eb.en)(T>=0,"invalid chain ID","domain.chainId",C),Number.isSafeInteger(T))?Number(T):(0,eA.B4)(T)},verifyingContract:function(C){try{return(0,e_.K)(C).toLowerCase()}catch(C){}(0,eb.en)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",C)},salt:function(C){let T=(0,ex.Pw)(C,"domain.salt");return(0,eb.en)(32===T.length,'invalid domain value "salt"',"domain.salt",C),(0,ex.Dv)(T)}};function getBaseEncoder(C){{let T=C.match(/^(u?)int(\d+)$/);if(T){let N=""===T[1],U=parseInt(T[2]);(0,eb.en)(U%8==0&&0!==U&&U<=256&&T[2]===String(U),"invalid numeric width","type",C);let $=(0,eA.sS)(eO,N?U-1:U),Q=N?($+eC)*eD:eB;return function(T){let U=(0,eA.yT)(T,"value");return(0,eb.en)(U>=Q&&U<=$,`value out-of-bounds for ${C}`,"value",U),(0,eA.m9)(N?(0,eA.$j)(U,256):U,32)}}}{let T=C.match(/^bytes(\d+)$/);if(T){let N=parseInt(T[1]);return(0,eb.en)(0!==N&&N<=32&&T[1]===String(N),"invalid bytes width","type",C),function(T){let U=(0,ex.Pw)(T);return(0,eb.en)(U.length===N,`invalid length for ${C}`,"value",T),function(C){let T=(0,ex.Pw)(C),N=T.length%32;return N?(0,ex.zo)([T,eS.slice(N)]):(0,ex.Dv)(T)}(T)}}}switch(C){case"address":return function(C){return(0,ex.U3)((0,e_.K)(C),32)};case"bool":return function(C){return C?eR:eT};case"bytes":return function(C){return(0,eE.w)(C)};case"string":return function(C){return(0,eP.id)(C)}}return null}function encodeType(C,T){return`${C}(${T.map(({name:C,type:T})=>T+" "+C).join(",")})`}function splitArray(C){let T=C.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return T?{base:T[1],index:T[2]+T[4],array:{base:T[1],prefix:T[1]+T[2],count:T[5]?parseInt(T[5]):-1}}:{base:C}}let TypedDataEncoder=class TypedDataEncoder{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(C){this.#t=new Map,this.#r=new Map;let T=new Map,N=new Map,U=new Map,$={};for(let Q in Object.keys(C).forEach(Q=>{$[Q]=C[Q].map(({name:T,type:N})=>{let{base:U,index:$}=splitArray(N);return"int"!==U||C.int||(U="int256"),"uint"!==U||C.uint||(U="uint256"),{name:T,type:U+($||"")}}),T.set(Q,new Set),N.set(Q,[]),U.set(Q,new Set)}),this.#e=JSON.stringify($),$){let U=new Set;for(let Y of $[Q]){(0,eb.en)(!U.has(Y.name),`duplicate variable name ${JSON.stringify(Y.name)} in ${JSON.stringify(Q)}`,"types",C),U.add(Y.name);let $=splitArray(Y.type).base;(0,eb.en)($!==Q,`circular type reference to ${JSON.stringify($)}`,"types",C);let X=getBaseEncoder($);X||((0,eb.en)(N.has($),`unknown type ${JSON.stringify($)}`,"types",C),N.get($).push(Q),T.get(Q).add($))}}let Q=Array.from(N.keys()).filter(C=>0===N.get(C).length);for(let[Y,X]of((0,eb.en)(0!==Q.length,"missing primary type","types",C),(0,eb.en)(1===Q.length,`ambiguous primary types or unused types: ${Q.map(C=>JSON.stringify(C)).join(", ")}`,"types",C),(0,eI.h)(this,{primaryType:Q[0]}),!function checkCircular($,Q){for(let Y of((0,eb.en)(!Q.has($),`circular type reference to ${JSON.stringify($)}`,"types",C),Q.add($),T.get($)))if(N.has(Y))for(let C of(checkCircular(Y,Q),Q))U.get(C).add(Y);Q.delete($)}(this.primaryType,new Set),U)){let C=Array.from(X);C.sort(),this.#t.set(Y,encodeType(Y,$[Y])+C.map(C=>encodeType(C,$[C])).join(""))}}getEncoder(C){let T=this.#r.get(C);return T||(T=this.#i(C),this.#r.set(C,T)),T}#i(C){{let T=getBaseEncoder(C);if(T)return T}let T=splitArray(C).array;if(T){let C=T.prefix,N=this.getEncoder(C);return U=>{(0,eb.en)(-1===T.count||T.count===U.length,`array length mismatch; expected length ${T.count}`,"value",U);let $=U.map(N);return this.#t.has(C)&&($=$.map(eE.w)),(0,eE.w)((0,ex.zo)($))}}let N=this.types[C];if(N){let T=(0,eP.id)(this.#t.get(C));return C=>{let U=N.map(({name:T,type:N})=>{let U=this.getEncoder(N)(C[T]);return this.#t.has(N)?(0,eE.w)(U):U});return U.unshift(T),(0,ex.zo)(U)}}(0,eb.en)(!1,`unknown type: ${C}`,"type",C)}encodeType(C){let T=this.#t.get(C);return(0,eb.en)(T,`unknown type: ${JSON.stringify(C)}`,"name",C),T}encodeData(C,T){return this.getEncoder(C)(T)}hashStruct(C,T){return(0,eE.w)(this.encodeData(C,T))}encode(C){return this.encodeData(this.primaryType,C)}hash(C){return this.hashStruct(this.primaryType,C)}_visit(C,T,N){{let U=getBaseEncoder(C);if(U)return N(C,T)}let U=splitArray(C).array;if(U)return(0,eb.en)(-1===U.count||U.count===T.length,`array length mismatch; expected length ${U.count}`,"value",T),T.map(C=>this._visit(U.prefix,C,N));let $=this.types[C];if($)return $.reduce((C,{name:U,type:$})=>(C[U]=this._visit($,T[U],N),C),{});(0,eb.en)(!1,`unknown type: ${C}`,"type",C)}visit(C,T){return this._visit(this.primaryType,C,T)}static from(C){return new TypedDataEncoder(C)}static getPrimaryType(C){return TypedDataEncoder.from(C).primaryType}static hashStruct(C,T,N){return TypedDataEncoder.from(T).hashStruct(C,N)}static hashDomain(C){let T=[];for(let N in C){if(null==C[N])continue;let U=eN[N];(0,eb.en)(U,`invalid typed-data domain key: ${JSON.stringify(N)}`,"domain",C),T.push({name:N,type:U})}return T.sort((C,T)=>ek.indexOf(C.name)-ek.indexOf(T.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:T},C)}static encode(C,T,N){return(0,ex.zo)(["0x1901",TypedDataEncoder.hashDomain(C),TypedDataEncoder.from(T).hash(N)])}static hash(C,T,N){return(0,eE.w)(TypedDataEncoder.encode(C,T,N))}static async resolveNames(C,T,N,U){for(let T in C=Object.assign({},C))null==C[T]&&delete C[T];let $={};C.verifyingContract&&!(0,ex.A7)(C.verifyingContract,20)&&($[C.verifyingContract]="0x");let Q=TypedDataEncoder.from(T);for(let C in Q.visit(N,(C,T)=>("address"!==C||(0,ex.A7)(T,20)||($[T]="0x"),T)),$)$[C]=await U(C);return C.verifyingContract&&$[C.verifyingContract]&&(C.verifyingContract=$[C.verifyingContract]),{domain:C,value:N=Q.visit(N,(C,T)=>"address"===C&&$[T]?$[T]:T)}}static getPayload(C,T,N){TypedDataEncoder.hashDomain(C);let U={},$=[];ek.forEach(T=>{let N=C[T];null!=N&&(U[T]=eU[T](N),$.push({name:T,type:eN[T]}))});let Q=TypedDataEncoder.from(T);T=Q.types;let Y=Object.assign({},T);return(0,eb.en)(null==Y.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",T),Y.EIP712Domain=$,Q.encode(N),{types:Y,domain:U,primaryType:Q.primaryType,message:Q.visit(N,(C,T)=>{if(C.match(/^bytes(\d*)/))return(0,ex.Dv)((0,ex.Pw)(T));if(C.match(/^u?int/))return(0,eA.yT)(T).toString();switch(C){case"address":return T.toLowerCase();case"bool":return!!T;case"string":return(0,eb.en)("string"==typeof T,"invalid string","value",T),T}(0,eb.en)(!1,"unsupported type","type",C)})}}};var eL=N(1891);let eM="0x0000000000000000000000000000000000000000000000000000000000000000",eF=BigInt(0),ej=BigInt(1),ez=BigInt(2),eq=BigInt(27),eH=BigInt(28),eV=BigInt(35),eK={};function toUint256(C){return(0,ex.U3)((0,eA.ot)(C),32)}let Signature=class Signature{#s;#n;#o;#a;get r(){return this.#s}set r(C){(0,eb.en)(32===(0,ex.M5)(C),"invalid r","value",C),this.#s=(0,ex.Dv)(C)}get s(){return(0,eb.en)(8>parseInt(this.#n.substring(0,3)),"non-canonical s; use ._s","s",this.#n),this.#n}set s(C){(0,eb.en)(32===(0,ex.M5)(C),"invalid s","value",C),this.#n=(0,ex.Dv)(C)}get _s(){return this.#n}isValid(){return 8>parseInt(this.#n.substring(0,3))}get v(){return this.#o}set v(C){let T=(0,eA.Dx)(C,"value");(0,eb.en)(27===T||28===T,"invalid v","v",C),this.#o=T}get networkV(){return this.#a}get legacyChainId(){let C=this.networkV;return null==C?null:Signature.getChainId(C)}get yParity(){return 27===this.v?0:1}get yParityAndS(){let C=(0,ex.Pw)(this.s);return this.yParity&&(C[0]|=128),(0,ex.Dv)(C)}get compactSerialized(){return(0,ex.zo)([this.r,this.yParityAndS])}get serialized(){return(0,ex.zo)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(C,T,N,U){(0,eb.NK)(C,eK,"Signature"),this.#s=T,this.#n=N,this.#o=U,this.#a=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let C=new Signature(eK,this.r,this._s,this.v);return this.networkV&&(C.#a=this.networkV),C}toJSON(){let C=this.networkV;return{_type:"signature",networkV:null!=C?C.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(C){let T=(0,eA.yT)(C,"v");return T==eq||T==eH?eF:((0,eb.en)(T>=eV,"invalid EIP-155 v","v",C),(T-eV)/ez)}static getChainIdV(C,T){return(0,eA.yT)(C)*ez+BigInt(35+T-27)}static getNormalizedV(C){let T=(0,eA.yT)(C);return T===eF||T===eq?27:T===ej||T===eH?28:((0,eb.en)(T>=eV,"invalid v","v",C),T&ej?27:28)}static from(C){function assertError(T,N){(0,eb.en)(T,N,"signature",C)}if(null==C)return new Signature(eK,eM,eM,27);if("string"==typeof C){let T=(0,ex.Pw)(C,"signature");if(64===T.length){let C=(0,ex.Dv)(T.slice(0,32)),N=T.slice(32,64),U=128&N[0]?28:27;return N[0]&=127,new Signature(eK,C,(0,ex.Dv)(N),U)}if(65===T.length){let C=(0,ex.Dv)(T.slice(0,32)),N=(0,ex.Dv)(T.slice(32,64)),U=Signature.getNormalizedV(T[64]);return new Signature(eK,C,N,U)}assertError(!1,"invalid raw signature length")}if(C instanceof Signature)return C.clone();let T=C.r;assertError(null!=T,"missing r");let N=toUint256(T),U=function(C,T){if(null!=C)return toUint256(C);if(null!=T){assertError((0,ex.A7)(T,32),"invalid yParityAndS");let C=(0,ex.Pw)(T);return C[0]&=127,(0,ex.Dv)(C)}assertError(!1,"missing s")}(C.s,C.yParityAndS),{networkV:$,v:Q}=function(C,T,N){if(null!=C){let T=(0,eA.yT)(C);return{networkV:T>=eV?T:void 0,v:Signature.getNormalizedV(T)}}if(null!=T)return assertError((0,ex.A7)(T,32),"invalid yParityAndS"),{v:128&(0,ex.Pw)(T)[0]?28:27};if(null!=N){switch((0,eA.Dx)(N,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}assertError(!1,"invalid yParity")}assertError(!1,"missing v")}(C.v,C.yParityAndS,C.yParity),Y=new Signature(eK,N,U,Q);return $&&(Y.#a=$),assertError(null==C.yParity||(0,eA.Dx)(C.yParity,"sig.yParity")===Y.yParity,"yParity mismatch"),assertError(null==C.yParityAndS||C.yParityAndS===Y.yParityAndS,"yParityAndS mismatch"),Y}};function authorizationify(C){return{address:(0,e_.K)(C.address),nonce:(0,eA.yT)(null!=C.nonce?C.nonce:0),chainId:(0,eA.yT)(null!=C.chainId?C.chainId:0),signature:Signature.from(C.signature)}}var eG=N(7155);let e$="0x0000000000000000000000000000000000000000";var eQ=N(7583);let eJ=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function read_compressed_payload(C){var T;let N;return T=function(C){let T=0;function u16(){return C[T++]<<8|C[T++]}let N=u16(),U=1,$=[0,1];for(let C=1;C<N;C++)$.push(U+=u16());let Q=u16(),Y=T;T+=Q;let X=0,ee=0;function read_bit(){return 0==X&&(ee=ee<<8|C[T++],X=8),ee>>--X&1}let es=2147483648-1,el=0;for(let C=0;C<31;C++)el=el<<1|read_bit();let ec=[],eh=0,eu=2147483648;for(;;){let C=Math.floor(((el-eh+1)*U-1)/eu),T=0,Q=N;for(;Q-T>1;){let N=T+Q>>>1;C<$[N]?Q=N:T=N}if(0==T)break;ec.push(T);let Y=eh+Math.floor(eu*$[T]/U),X=eh+Math.floor(eu*$[T+1]/U)-1;for(;((Y^X)&1073741824)==0;)el=el<<1&es|read_bit(),Y=Y<<1&es,X=X<<1&es|1;for(;Y&~X&536870912;)el=1073741824&el|el<<1&es>>>1|read_bit(),Y=Y<<1^1073741824,X=(1073741824^X)<<1|1073741825;eh=Y,eu=1+X-Y}let ed=N-4;return ec.map(T=>{switch(T-ed){case 3:return ed+65792+(C[Y++]<<16|C[Y++]<<8|C[Y++]);case 2:return ed+256+(C[Y++]<<8|C[Y++]);case 1:return ed+C[Y++];default:return T-1}})}(function(C){let T=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((C,N)=>T[C.charCodeAt(0)]=N);let N=C.length,U=new Uint8Array(6*N>>3);for(let $=0,Q=0,Y=0,X=0;$<N;$++)X=X<<6|T[C.charCodeAt($)],(Y+=6)>=8&&(U[Q++]=X>>(Y-=8));return U}(C)),N=0,()=>T[N++]}function read_sorted(C,T=0){let N=[];for(;;){let U=C(),$=C();if(!$)break;T+=U;for(let C=0;C<$;C++)N.push(T+C);T+=$+1}return N}function read_sorted_arrays(C){return read_array_while(()=>{let T=read_sorted(C);if(T.length)return T})}function read_mapped(C){let T=[];for(;;){let N=C();if(0==N)break;T.push(function(C,T){let N=1+T(),U=T(),$=read_array_while(T);return read_transposed($.length,1+C,T).flatMap((C,T)=>{let[Q,...Y]=C;return Array($[T]).fill().map((C,T)=>{let $=T*U;return[Q+T*N,Y.map(C=>C+$)]})})}(N,C))}for(;;){let N=C()-1;if(N<0)break;T.push(read_transposed(1+C(),1+N,C).map(C=>[C[0],C.slice(1)]))}return T.flat()}function read_array_while(C){let T=[];for(;;){let N=C(T.length);if(!N)break;T.push(N)}return T}function read_transposed(C,T,N){let U=Array(C).fill().map(()=>[]);for(let $=0;$<T;$++)(function(C,T){let N=Array(C);for(let $=0,Q=0;$<C;$++){var U;N[$]=Q+=1&(U=T())?~U>>1:U>>1}return N})(C,N).forEach((C,T)=>U[T].push(C));return U}function quote_cp(C){return`{${C.toString(16).toUpperCase().padStart(2,"0")}}`}function str_from_cps(C){let T=C.length;if(T<4096)return String.fromCodePoint(...C);let N=[];for(let U=0;U<T;)N.push(String.fromCodePoint(...C.slice(U,U+=4096)));return N.join("")}function compare_arrays(C,T){let N=C.length,U=N-T.length;for(let $=0;0==U&&$<N;$++)U=C[$]-T[$];return U}function unpack_cc(C){return C>>24&255}function unpack_cp(C){return 16777215&C}function is_hangul(C){return C>=44032&&C<55204}function decomposed(C){U||function(){let C=read_compressed_payload("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[T,N]of(U=new Map(read_sorted_arrays(C).flatMap((C,T)=>C.map(C=>[C,T+1<<24]))),$=new Set(read_sorted(C)),Q=new Map,Y=new Map,read_mapped(C))){if(!$.has(T)&&2==N.length){let[C,U]=N,$=Y.get(C);$||($=new Map,Y.set(C,$)),$.set(U,T)}Q.set(T,N.reverse())}}();let T=[],N=[],X=!1;function add(C){let N=U.get(C);N&&(X=!0,C|=N),T.push(C)}for(let U of C)for(;;){if(U<128)T.push(U);else if(is_hangul(U)){let C=U-44032,T=C/588|0,N=C%588/28|0,$=C%28;add(4352+T),add(4449+N),$>0&&add(4519+$)}else{let C=Q.get(U);C?N.push(...C):add(U)}if(!N.length)break;U=N.pop()}if(X&&T.length>1){let C=unpack_cc(T[0]);for(let N=1;N<T.length;N++){let U=unpack_cc(T[N]);if(0==U||C<=U){C=U;continue}let $=N-1;for(;;){let N=T[$+1];if(T[$+1]=T[$],T[$]=N,!$||(C=unpack_cc(T[--$]))<=U)break}C=unpack_cc(T[N])}}return T}function nfc(C){return function(C){let T=[],N=[],U=-1,$=0;for(let Q of C){let C=unpack_cc(Q),X=unpack_cp(Q);if(-1==U)0==C?U=X:T.push(X);else if($>0&&$>=C)0==C?(T.push(U,...N),N.length=0,U=X):N.push(X),$=C;else{let Q=function(C,T){if(C>=4352&&C<4371&&T>=4449&&T<4470)return 44032+(C-4352)*588+(T-4449)*28;if(is_hangul(C)&&T>4519&&T<4547&&(C-44032)%28==0)return C+(T-4519);{let N=Y.get(C);return N&&(N=N.get(T))?N:-1}}(U,X);Q>=0?U=Q:0==$&&0==C?(T.push(U),U=X):(N.push(X),$=C)}}return U>=0&&T.push(U,...N),T}(decomposed(C))}let Array_from=C=>Array.from(C);function group_has_cp(C,T){return C.P.has(T)||C.Q.has(T)}let Emoji=class Emoji extends Array{get is_emoji(){return!0}};function init(){let C,T;if(X)return;let N=read_compressed_payload("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),read_sorted_array=()=>read_sorted(N),read_sorted_set=()=>new Set(read_sorted_array()),set_add_many=(C,T)=>T.forEach(T=>C.add(T));X=new Map(read_mapped(N)),ee=read_sorted_set(),es=read_sorted_array(),el=new Set(read_sorted_array().map(C=>es[C])),es=new Set(es),ec=read_sorted_set(),read_sorted_set();let U=read_sorted_arrays(N),$=N(),read_chunked=()=>{let C=new Set;return read_sorted_array().forEach(T=>set_add_many(C,U[T])),set_add_many(C,read_sorted_array()),C};eh=read_array_while(C=>{let T=read_array_while(N).map(C=>C+96);if(T.length){let U=C>=$;return T[0]-=32,T=str_from_cps(T),U&&(T=`Restricted[${T}]`),{N:T,P:read_chunked(),Q:read_chunked(),M:!N(),R:U}}}),eu=read_sorted_set(),ed=new Map;let Q=read_sorted_array().concat(Array_from(eu)).sort((C,T)=>C-T);for(let{V:C,M:T}of(Q.forEach((C,T)=>{let U=N(),$=Q[T]=U?Q[T-U]:{V:[],M:new Map};$.V.push(C),eu.has(C)||ed.set(C,$)}),new Set(ed.values()))){let N=[];for(let T of C){let C=eh.filter(C=>group_has_cp(C,T)),U=N.find(({G:T})=>C.some(C=>T.has(C)));U||(U={G:new Set,V:[]},N.push(U)),U.V.push(T),set_add_many(U.G,C)}let U=N.flatMap(C=>Array_from(C.G));for(let{G:C,V:$}of N){let N=new Set(U.filter(T=>!C.has(T)));for(let C of $)T.set(C,N)}}ep=new Set;let Y=new Set,add_to_union=C=>ep.has(C)?Y.add(C):ep.add(C);for(let C of eh){for(let T of C.P)add_to_union(T);for(let T of C.Q)add_to_union(T)}for(let C of ep)ed.has(C)||Y.has(C)||ed.set(C,1);for(let U of(set_add_many(ep,decomposed(ep).map(unpack_cp)),eg=(C=[],T=read_sorted(N),function expand({S:T,B:N},U,$){if(!(4&T)||$!==U[U.length-1])for(let Q of(2&T&&($=U[U.length-1]),1&T&&C.push(U),N))for(let C of Q.Q)expand(Q,[...U,C],$)}(function decode(C){return{S:N(),B:read_array_while(()=>{let C=read_sorted(N).map(C=>T[C]);if(C.length)return decode(C)}),Q:C}}([]),[]),C).map(C=>Emoji.from(C)).sort(compare_arrays),ey=new Map,eg)){let C=[ey];for(let T of U){let N=C.map(C=>{let N=C.get(T);return N||(N=new Map,C.set(T,N)),N});65039===T?C.push(...N):C=N}for(let T of C)T.V=U}}function quoted_cp(C){return(should_escape(C)?"":`${bidi_qq(safe_str_from_cps([C]))} `)+quote_cp(C)}function bidi_qq(C){return`"${C}"\u200E`}function safe_str_from_cps(C,T=1/0,N=quote_cp){var U;let $=[];U=C[0],init(),es.has(U)&&$.push(""),C.length>T&&(T>>=1,C=[...C.slice(0,T),8230,...C.slice(-T)]);let Q=0,Y=C.length;for(let T=0;T<Y;T++){let U=C[T];should_escape(U)&&($.push(str_from_cps(C.slice(Q,T))),$.push(N(U)),Q=T+1)}return $.push(str_from_cps(C.slice(Q,Y))),$.join("")}function should_escape(C){return init(),ec.has(C)}function error_disallowed(C){return Error(`disallowed character: ${quoted_cp(C)}`)}function error_group_member(C,T){let N=quoted_cp(T),U=eh.find(C=>C.P.has(T));return U&&(N=`${U.N} ${N}`),Error(`illegal mixture: ${C.N} + ${N}`)}function error_placement(C){return Error(`illegal placement: ${C}`)}function filter_fe0f(C){return C.filter(C=>65039!=C)}let eW=new Uint8Array(32);function checkComponent(C){return(0,eb.en)(0!==C.length,"invalid ENS name; empty component","comp",C),C}function ensNameSplit(C){let T=(0,eG.Y0)(function(C){try{var T;if(0===C.length)throw Error("empty label");return(T=function(C,T,N){if(!C)return[];init();let U=0;return C.split(".").map(C=>{let $=function(C){let T=[];for(let N=0,U=C.length;N<U;){let U=C.codePointAt(N);N+=U<65536?1:2,T.push(U)}return T}(C),Q={input:$,offset:U};U+=$.length+1;try{let C,U=Q.tokens=function(C,T,N){let U=[],$=[];for(C=C.slice().reverse();C.length;){let Q=function(C,T){let N,U=ey,$=C.length;for(;$&&(U=U.get(C[--$]));){let{V:Q}=U;Q&&(N=Q,T&&T.push(...C.slice($).reverse()),C.length=$)}return N}(C);if(Q)$.length&&(U.push(T($)),$=[]),U.push(N(Q));else{let T=C.pop();if(ep.has(T))$.push(T);else{let C=X.get(T);if(C)$.push(...C);else if(!ee.has(T))throw error_disallowed(T)}}}return $.length&&U.push(T($)),U}($,T,N),Y=U.length;if(!Y)throw Error("empty label");let ec=Q.output=U.flat();if(function(C){for(let T=C.lastIndexOf(95);T>0;)if(95!==C[--T])throw Error("underscore allowed only at start")}(ec),!(Q.emoji=Y>1||U[0].is_emoji)&&ec.every(C=>C<128))(function(C){if(C.length>=4&&45==C[2]&&45==C[3])throw Error(`invalid label extension: "${str_from_cps(C.slice(0,4))}"`)})(ec),C="ASCII";else{let T=U.flatMap(C=>C.is_emoji?[]:C);if(T.length){if(es.has(ec[0]))throw error_placement("leading combining mark");for(let C=1;C<Y;C++){let T=U[C];if(!T.is_emoji&&es.has(T[0]))throw error_placement(`emoji + combining mark: "${str_from_cps(U[C-1])} + ${safe_str_from_cps([T[0]])}"`)}!function(C){let T=C[0],N=eJ.get(T);if(N)throw error_placement(`leading ${N}`);let U=C.length,$=-1;for(let Q=1;Q<U;Q++){T=C[Q];let U=eJ.get(T);if(U){if($==Q)throw error_placement(`${N} + ${U}`);$=Q+1,N=U}}if($==U)throw error_placement(`trailing ${N}`)}(ec);let N=Array_from(new Set(T)),[$]=function(C){let T=eh;for(let N of C){let C=T.filter(C=>group_has_cp(C,N));if(!C.length){if(eh.some(C=>group_has_cp(C,N)))throw error_group_member(T[0],N);throw error_disallowed(N)}if(T=C,1==C.length)break}return T}(N);(function(C,T){for(let N of T)if(!group_has_cp(C,N))throw error_group_member(C,N);if(C.M){let C=decomposed(T).map(unpack_cp);for(let T=1,N=C.length;T<N;T++)if(el.has(C[T])){let U=T+1;for(let $;U<N&&el.has($=C[U]);U++)for(let N=T;N<U;N++)if(C[N]==$)throw Error(`duplicate non-spacing marks: ${quoted_cp($)}`);if(U-T>4)throw Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(C.slice(T-1,U)))} (${U-T}/4)`);T=U}}})($,T),function(C,T){let N;let U=[];for(let C of T){let T=ed.get(C);if(1===T)return;if(T){let U=T.M.get(C);if(!(N=N?N.filter(C=>U.has(C)):Array_from(U)).length)return}else U.push(C)}if(N){for(let T of N)if(U.every(C=>group_has_cp(T,C)))throw Error(`whole-script confusable: ${C.N}/${T.N}`)}}($,N),C=$.N}else C="Emoji"}Q.type=C}catch(C){Q.error=C}return Q})}(C,nfc,filter_fe0f)).map(({input:C,error:N,output:U})=>{if(N){let U=N.message;throw Error(1==T.length?U:`Invalid label ${bidi_qq(safe_str_from_cps(C,63))}: ${U}`)}return str_from_cps(U)}).join(".")}catch(T){(0,eb.en)(!1,`invalid ENS name (${T.message})`,"name",C)}}(C)),N=[];if(0===C.length)return N;let U=0;for(let C=0;C<T.length;C++){let $=T[C];46===$&&(N.push(checkComponent(T.slice(U,C))),U=C+1)}return(0,eb.en)(U<T.length,"invalid ENS name; empty component","name",C),N.push(checkComponent(T.slice(U))),N}function namehash(C){(0,eb.en)("string"==typeof C,"invalid ENS name; not a string","name",C),(0,eb.en)(C.length,"invalid ENS name (empty label)","name",C);let T=eW,N=ensNameSplit(C);for(;N.length;)T=(0,eE.w)((0,ex.zo)([T,(0,eE.w)(N.pop())]));return(0,ex.Dv)(T)}eW.fill(0);var eZ=N(6678),eY=N(3775);let SHA2=class SHA2 extends eY.kb{constructor(C,T,N,U){super(),this.blockLen=C,this.outputLen=T,this.padOffset=N,this.isLE=U,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(C),this.view=(0,eY.GL)(this.buffer)}update(C){(0,eZ.Gg)(this);let{view:T,buffer:N,blockLen:U}=this;C=(0,eY.O0)(C);let $=C.length;for(let Q=0;Q<$;){let Y=Math.min(U-this.pos,$-Q);if(Y===U){let T=(0,eY.GL)(C);for(;U<=$-Q;Q+=U)this.process(T,Q);continue}N.set(C.subarray(Q,Q+Y),this.pos),this.pos+=Y,Q+=Y,this.pos===U&&(this.process(T,0),this.pos=0)}return this.length+=C.length,this.roundClean(),this}digestInto(C){(0,eZ.Gg)(this),(0,eZ.J8)(C,this),this.finished=!0;let{buffer:T,view:N,blockLen:U,isLE:$}=this,{pos:Q}=this;T[Q++]=128,this.buffer.subarray(Q).fill(0),this.padOffset>U-Q&&(this.process(N,0),Q=0);for(let C=Q;C<U;C++)T[C]=0;!function(C,T,N,U){if("function"==typeof C.setBigUint64)return C.setBigUint64(T,N,U);let $=BigInt(32),Q=BigInt(4294967295),Y=Number(N>>$&Q),X=Number(N&Q),ee=U?4:0,es=U?0:4;C.setUint32(T+ee,Y,U),C.setUint32(T+es,X,U)}(N,U-8,BigInt(8*this.length),$),this.process(N,0);let Y=(0,eY.GL)(C),X=this.outputLen;if(X%4)throw Error("_sha2: outputLen should be aligned to 32bit");let ee=X/4,es=this.get();if(ee>es.length)throw Error("_sha2: outputLen bigger than state");for(let C=0;C<ee;C++)Y.setUint32(4*C,es[C],$)}digest(){let{buffer:C,outputLen:T}=this;this.digestInto(C);let N=C.slice(0,T);return this.destroy(),N}_cloneInto(C){C||(C=new this.constructor),C.set(...this.get());let{blockLen:T,buffer:N,length:U,finished:$,destroyed:Q,pos:Y}=this;return C.length=U,C.pos=Y,C.finished=$,C.destroyed=Q,U%T&&C.buffer.set(N),C}};let Chi=(C,T,N)=>C&T^~C&N,Maj=(C,T,N)=>C&T^C&N^T&N,eX=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),e0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e1=new Uint32Array(64);let SHA256=class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=0|e0[0],this.B=0|e0[1],this.C=0|e0[2],this.D=0|e0[3],this.E=0|e0[4],this.F=0|e0[5],this.G=0|e0[6],this.H=0|e0[7]}get(){let{A:C,B:T,C:N,D:U,E:$,F:Q,G:Y,H:X}=this;return[C,T,N,U,$,Q,Y,X]}set(C,T,N,U,$,Q,Y,X){this.A=0|C,this.B=0|T,this.C=0|N,this.D=0|U,this.E=0|$,this.F=0|Q,this.G=0|Y,this.H=0|X}process(C,T){for(let N=0;N<16;N++,T+=4)e1[N]=C.getUint32(T,!1);for(let C=16;C<64;C++){let T=e1[C-15],N=e1[C-2],U=(0,eY.np)(T,7)^(0,eY.np)(T,18)^T>>>3,$=(0,eY.np)(N,17)^(0,eY.np)(N,19)^N>>>10;e1[C]=$+e1[C-7]+U+e1[C-16]|0}let{A:N,B:U,C:$,D:Q,E:Y,F:X,G:ee,H:es}=this;for(let C=0;C<64;C++){let T=(0,eY.np)(Y,6)^(0,eY.np)(Y,11)^(0,eY.np)(Y,25),el=es+T+Chi(Y,X,ee)+eX[C]+e1[C]|0,ec=(0,eY.np)(N,2)^(0,eY.np)(N,13)^(0,eY.np)(N,22),eh=ec+Maj(N,U,$)|0;es=ee,ee=X,X=Y,Y=Q+el|0,Q=$,$=U,U=N,N=el+eh|0}N=N+this.A|0,U=U+this.B|0,$=$+this.C|0,Q=Q+this.D|0,Y=Y+this.E|0,X=X+this.F|0,ee=ee+this.G|0,es=es+this.H|0,this.set(N,U,$,Q,Y,X,ee,es)}roundClean(){e1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};let e2=(0,eY.hE)(()=>new SHA256);var e3=N(9903);let[e8,e4]=e3.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(C=>BigInt(C))),e6=new Uint32Array(80),e5=new Uint32Array(80);let SHA512=class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:C,Al:T,Bh:N,Bl:U,Ch:$,Cl:Q,Dh:Y,Dl:X,Eh:ee,El:es,Fh:el,Fl:ec,Gh:eh,Gl:eu,Hh:ed,Hl:ep}=this;return[C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep]}set(C,T,N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep){this.Ah=0|C,this.Al=0|T,this.Bh=0|N,this.Bl=0|U,this.Ch=0|$,this.Cl=0|Q,this.Dh=0|Y,this.Dl=0|X,this.Eh=0|ee,this.El=0|es,this.Fh=0|el,this.Fl=0|ec,this.Gh=0|eh,this.Gl=0|eu,this.Hh=0|ed,this.Hl=0|ep}process(C,T){for(let N=0;N<16;N++,T+=4)e6[N]=C.getUint32(T),e5[N]=C.getUint32(T+=4);for(let C=16;C<80;C++){let T=0|e6[C-15],N=0|e5[C-15],U=e3.ZP.rotrSH(T,N,1)^e3.ZP.rotrSH(T,N,8)^e3.ZP.shrSH(T,N,7),$=e3.ZP.rotrSL(T,N,1)^e3.ZP.rotrSL(T,N,8)^e3.ZP.shrSL(T,N,7),Q=0|e6[C-2],Y=0|e5[C-2],X=e3.ZP.rotrSH(Q,Y,19)^e3.ZP.rotrBH(Q,Y,61)^e3.ZP.shrSH(Q,Y,6),ee=e3.ZP.rotrSL(Q,Y,19)^e3.ZP.rotrBL(Q,Y,61)^e3.ZP.shrSL(Q,Y,6),es=e3.ZP.add4L($,ee,e5[C-7],e5[C-16]),el=e3.ZP.add4H(es,U,X,e6[C-7],e6[C-16]);e6[C]=0|el,e5[C]=0|es}let{Ah:N,Al:U,Bh:$,Bl:Q,Ch:Y,Cl:X,Dh:ee,Dl:es,Eh:el,El:ec,Fh:eh,Fl:eu,Gh:ed,Gl:ep,Hh:eg,Hl:ey}=this;for(let C=0;C<80;C++){let T=e3.ZP.rotrSH(el,ec,14)^e3.ZP.rotrSH(el,ec,18)^e3.ZP.rotrBH(el,ec,41),em=e3.ZP.rotrSL(el,ec,14)^e3.ZP.rotrSL(el,ec,18)^e3.ZP.rotrBL(el,ec,41),eb=el&eh^~el&ed,ew=ec&eu^~ec&ep,e_=e3.ZP.add5L(ey,em,ew,e4[C],e5[C]),ev=e3.ZP.add5H(e_,eg,T,eb,e8[C],e6[C]),eE=0|e_,ex=e3.ZP.rotrSH(N,U,28)^e3.ZP.rotrBH(N,U,34)^e3.ZP.rotrBH(N,U,39),eA=e3.ZP.rotrSL(N,U,28)^e3.ZP.rotrBL(N,U,34)^e3.ZP.rotrBL(N,U,39),eI=N&$^N&Y^$&Y,eP=U&Q^U&X^Q&X;eg=0|ed,ey=0|ep,ed=0|eh,ep=0|eu,eh=0|el,eu=0|ec,({h:el,l:ec}=e3.ZP.add(0|ee,0|es,0|ev,0|eE)),ee=0|Y,es=0|X,Y=0|$,X=0|Q,$=0|N,Q=0|U;let eS=e3.ZP.add3L(eE,eA,eP);N=e3.ZP.add3H(eS,ev,ex,eI),U=0|eS}({h:N,l:U}=e3.ZP.add(0|this.Ah,0|this.Al,0|N,0|U)),({h:$,l:Q}=e3.ZP.add(0|this.Bh,0|this.Bl,0|$,0|Q)),({h:Y,l:X}=e3.ZP.add(0|this.Ch,0|this.Cl,0|Y,0|X)),({h:ee,l:es}=e3.ZP.add(0|this.Dh,0|this.Dl,0|ee,0|es)),({h:el,l:ec}=e3.ZP.add(0|this.Eh,0|this.El,0|el,0|ec)),({h:eh,l:eu}=e3.ZP.add(0|this.Fh,0|this.Fl,0|eh,0|eu)),({h:ed,l:ep}=e3.ZP.add(0|this.Gh,0|this.Gl,0|ed,0|ep)),({h:eg,l:ey}=e3.ZP.add(0|this.Hh,0|this.Hl,0|eg,0|ey)),this.set(N,U,$,Q,Y,X,ee,es,el,ec,eh,eu,ed,ep,eg,ey)}roundClean(){e6.fill(0),e5.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};let e9=(0,eY.hE)(()=>new SHA512),e7=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();function createHash(C){switch(C){case"sha256":return e2.create();case"sha512":return e9.create()}(0,eb.en)(!1,"invalid hashing algorithm name","algorithm",C)}e7.crypto||e7.msCrypto;let _sha256=function(C){return createHash("sha256").update(C).digest()},_sha512=function(C){return createHash("sha512").update(C).digest()},te=_sha256,ti=_sha512,ts=!1,ta=!1;function sha2_sha256(C){let T=(0,ex.Pw)(C,"data");return(0,ex.Dv)(te(T))}function sha2_sha512(C){let T=(0,ex.Pw)(C,"data");return(0,ex.Dv)(ti(T))}sha2_sha256._=_sha256,sha2_sha256.lock=function(){ts=!0},sha2_sha256.register=function(C){if(ts)throw Error("sha256 is locked");te=C},Object.freeze(sha2_sha256),sha2_sha512._=_sha512,sha2_sha512.lock=function(){ta=!0},sha2_sha512.register=function(C){if(ta)throw Error("sha512 is locked");ti=C},Object.freeze(sha2_sha256),BigInt(0);let tl=BigInt(1),tc=BigInt(2),u8a=C=>C instanceof Uint8Array,th=Array.from({length:256},(C,T)=>T.toString(16).padStart(2,"0"));function bytesToHex(C){if(!u8a(C))throw Error("Uint8Array expected");let T="";for(let N=0;N<C.length;N++)T+=th[C[N]];return T}function hexToNumber(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);return BigInt(""===C?"0":`0x${C}`)}function hexToBytes(C){if("string"!=typeof C)throw Error("hex string expected, got "+typeof C);let T=C.length;if(T%2)throw Error("padded hex string expected, got unpadded hex of length "+T);let N=new Uint8Array(T/2);for(let T=0;T<N.length;T++){let U=2*T,$=C.slice(U,U+2),Q=Number.parseInt($,16);if(Number.isNaN(Q)||Q<0)throw Error("Invalid byte sequence");N[T]=Q}return N}function utils_bytesToNumberBE(C){return hexToNumber(bytesToHex(C))}function utils_bytesToNumberLE(C){if(!u8a(C))throw Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(C).reverse()))}function utils_numberToBytesBE(C,T){return hexToBytes(C.toString(16).padStart(2*T,"0"))}function numberToBytesLE(C,T){return utils_numberToBytesBE(C,T).reverse()}function utils_ensureBytes(C,T,N){let U;if("string"==typeof T)try{U=hexToBytes(T)}catch(N){throw Error(`${C} must be valid hex string, got "${T}". Cause: ${N}`)}else if(u8a(T))U=Uint8Array.from(T);else throw Error(`${C} must be hex string or Uint8Array`);let $=U.length;if("number"==typeof N&&$!==N)throw Error(`${C} expected ${N} bytes, got ${$}`);return U}function utils_concatBytes(...C){let T=new Uint8Array(C.reduce((C,T)=>C+T.length,0)),N=0;return C.forEach(C=>{if(!u8a(C))throw Error("Uint8Array expected");T.set(C,N),N+=C.length}),T}let bitMask=C=>(tc<<BigInt(C-1))-tl,u8n=C=>new Uint8Array(C),u8fr=C=>Uint8Array.from(C);function createHmacDrbg(C,T,N){if("number"!=typeof C||C<2)throw Error("hashLen must be a number");if("number"!=typeof T||T<2)throw Error("qByteLen must be a number");if("function"!=typeof N)throw Error("hmacFn must be a function");let U=u8n(C),$=u8n(C),Q=0,reset=()=>{U.fill(1),$.fill(0),Q=0},h=(...C)=>N($,U,...C),reseed=(C=u8n())=>{$=h(u8fr([0]),C),U=h(),0!==C.length&&($=h(u8fr([1]),C),U=h())},gen=()=>{if(Q++>=1e3)throw Error("drbg: tried 1000 values");let C=0,N=[];for(;C<T;){U=h();let T=U.slice();N.push(T),C+=U.length}return utils_concatBytes(...N)};return(C,T)=>{let N;for(reset(),reseed(C);!(N=T(gen()));)reseed();return reset(),N}}let tu={bigint:C=>"bigint"==typeof C,function:C=>"function"==typeof C,boolean:C=>"boolean"==typeof C,string:C=>"string"==typeof C,stringOrUint8Array:C=>"string"==typeof C||C instanceof Uint8Array,isSafeInteger:C=>Number.isSafeInteger(C),array:C=>Array.isArray(C),field:(C,T)=>T.Fp.isValid(C),hash:C=>"function"==typeof C&&Number.isSafeInteger(C.outputLen)};function validateObject(C,T,N={}){let checkField=(T,N,U)=>{let $=tu[N];if("function"!=typeof $)throw Error(`Invalid validator "${N}", expected function`);let Q=C[T];if((!U||void 0!==Q)&&!$(Q,C))throw Error(`Invalid param ${String(T)}=${Q} (${typeof Q}), expected ${N}`)};for(let[C,N]of Object.entries(T))checkField(C,N,!1);for(let[C,T]of Object.entries(N))checkField(C,T,!0);return C}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let td=BigInt(0),tp=BigInt(1),tg=BigInt(2),ty=BigInt(3),tm=BigInt(4),tb=BigInt(5),tw=BigInt(8);function modular_mod(C,T){let N=C%T;return N>=td?N:T+N}function pow2(C,T,N){let U=C;for(;T-- >td;)U*=U,U%=N;return U}function invert(C,T){if(C===td||T<=td)throw Error(`invert: expected positive integers, got n=${C} mod=${T}`);let N=modular_mod(C,T),U=T,$=td,Q=tp,Y=tp,X=td;for(;N!==td;){let C=U/N,T=U%N,ee=$-Y*C,es=Q-X*C;U=N,N=T,$=Y,Q=X,Y=ee,X=es}let ee=U;if(ee!==tp)throw Error("invert: does not exist");return modular_mod($,T)}BigInt(9),BigInt(16);let t_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nLength(C,T){let N=void 0!==T?T:C.toString(2).length,U=Math.ceil(N/8);return{nBitLength:N,nByteLength:U}}function getFieldBytesLength(C){if("bigint"!=typeof C)throw Error("field order must be bigint");let T=C.toString(2).length;return Math.ceil(T/8)}function getMinHashLength(C){let T=getFieldBytesLength(C);return T+Math.ceil(T/2)}let HMAC=class HMAC extends eY.kb{constructor(C,T){super(),this.finished=!1,this.destroyed=!1,(0,eZ.vp)(C);let N=(0,eY.O0)(T);if(this.iHash=C.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let U=this.blockLen,$=new Uint8Array(U);$.set(N.length>U?C.create().update(N).digest():N);for(let C=0;C<$.length;C++)$[C]^=54;this.iHash.update($),this.oHash=C.create();for(let C=0;C<$.length;C++)$[C]^=106;this.oHash.update($),$.fill(0)}update(C){return(0,eZ.Gg)(this),this.iHash.update(C),this}digestInto(C){(0,eZ.Gg)(this),(0,eZ.aI)(C,this.outputLen),this.finished=!0,this.iHash.digestInto(C),this.oHash.update(C),this.oHash.digestInto(C),this.destroy()}digest(){let C=new Uint8Array(this.oHash.outputLen);return this.digestInto(C),C}_cloneInto(C){C||(C=Object.create(Object.getPrototypeOf(this),{}));let{oHash:T,iHash:N,finished:U,destroyed:$,blockLen:Q,outputLen:Y}=this;return C.finished=U,C.destroyed=$,C.blockLen=Q,C.outputLen=Y,C.oHash=T._cloneInto(C.oHash),C.iHash=N._cloneInto(C.iHash),C}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};let hmac_hmac=(C,T,N)=>new HMAC(C,T).update(N).digest();hmac_hmac.create=(C,T)=>new HMAC(C,T);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tv=BigInt(0),tE=BigInt(1);function validateBasic(C){return!function(C){let T=t_.reduce((C,T)=>(C[T]="function",C),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});validateObject(C,T)}(C.Fp),validateObject(C,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(C.n,C.nBitLength),...C,p:C.Fp.ORDER})}let{bytesToNumberBE:tx,hexToBytes:tA}=em,tI={Err:class extends Error{constructor(C=""){super(C)}},_parseInt(C){let{Err:T}=tI;if(C.length<2||2!==C[0])throw new T("Invalid signature integer tag");let N=C[1],U=C.subarray(2,N+2);if(!N||U.length!==N)throw new T("Invalid signature integer: wrong length");if(128&U[0])throw new T("Invalid signature integer: negative");if(0===U[0]&&!(128&U[1]))throw new T("Invalid signature integer: unnecessary leading zero");return{d:tx(U),l:C.subarray(N+2)}},toSig(C){let{Err:T}=tI,N="string"==typeof C?tA(C):C;if(!(N instanceof Uint8Array))throw Error("ui8a expected");let U=N.length;if(U<2||48!=N[0])throw new T("Invalid signature tag");if(N[1]!==U-2)throw new T("Invalid signature: incorrect length");let{d:$,l:Q}=tI._parseInt(N.subarray(2)),{d:Y,l:X}=tI._parseInt(Q);if(X.length)throw new T("Invalid signature: left bytes after parsing");return{r:$,s:Y}},hexFromSig(C){let slice=C=>8&Number.parseInt(C[0],16)?"00"+C:C,h=C=>{let T=C.toString(16);return 1&T.length?`0${T}`:T},T=slice(h(C.s)),N=slice(h(C.r)),U=T.length/2,$=N.length/2,Q=h(U),Y=h($);return`30${h($+U+4)}02${Y}${N}02${Q}${T}`}},tP=BigInt(0),tS=BigInt(1),tD=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tB=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tC=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tO=BigInt(1),tR=BigInt(2),divNearest=(C,T)=>(C+T/tR)/T,tT=function(C,T,N=!1,U={}){if(C<=td)throw Error(`Expected Field ORDER > 0, got ${C}`);let{nBitLength:$,nByteLength:Q}=nLength(C,T);if(Q>2048)throw Error("Field lengths over 2048 bytes are not supported");let Y=function(C){if(C%tm===ty){let T=(C+tp)/tm;return function(C,N){let U=C.pow(N,T);if(!C.eql(C.sqr(U),N))throw Error("Cannot find square root");return U}}if(C%tw===tb){let T=(C-tb)/tw;return function(C,N){let U=C.mul(N,tg),$=C.pow(U,T),Q=C.mul(N,$),Y=C.mul(C.mul(Q,tg),$),X=C.mul(Q,C.sub(Y,C.ONE));if(!C.eql(C.sqr(X),N))throw Error("Cannot find square root");return X}}return function(C){let T,N,U;let $=(C-tp)/tg;for(T=C-tp,N=0;T%tg===td;T/=tg,N++);for(U=tg;U<C&&function(C,T,N){if(N<=td||T<td)throw Error("Expected power/modulo > 0");if(N===tp)return td;let U=tp;for(;T>td;)T&tp&&(U=U*C%N),C=C*C%N,T>>=tp;return U}(U,$,C)!==C-tp;U++);if(1===N){let T=(C+tp)/tm;return function(C,N){let U=C.pow(N,T);if(!C.eql(C.sqr(U),N))throw Error("Cannot find square root");return U}}let Q=(T+tp)/tg;return function(C,Y){if(C.pow(Y,$)===C.neg(C.ONE))throw Error("Cannot find square root");let X=N,ee=C.pow(C.mul(C.ONE,U),T),es=C.pow(Y,Q),el=C.pow(Y,T);for(;!C.eql(el,C.ONE);){if(C.eql(el,C.ZERO))return C.ZERO;let T=1;for(let N=C.sqr(el);T<X&&!C.eql(N,C.ONE);T++)N=C.sqr(N);let N=C.pow(ee,tp<<BigInt(X-T-1));ee=C.sqr(N),es=C.mul(es,N),el=C.mul(el,ee),X=T}return es}}(C)}(C),X=Object.freeze({ORDER:C,BITS:$,BYTES:Q,MASK:bitMask($),ZERO:td,ONE:tp,create:T=>modular_mod(T,C),isValid:T=>{if("bigint"!=typeof T)throw Error(`Invalid field element: expected bigint, got ${typeof T}`);return td<=T&&T<C},is0:C=>C===td,isOdd:C=>(C&tp)===tp,neg:T=>modular_mod(-T,C),eql:(C,T)=>C===T,sqr:T=>modular_mod(T*T,C),add:(T,N)=>modular_mod(T+N,C),sub:(T,N)=>modular_mod(T-N,C),mul:(T,N)=>modular_mod(T*N,C),pow:(C,T)=>(function(C,T,N){if(N<td)throw Error("Expected power > 0");if(N===td)return C.ONE;if(N===tp)return T;let U=C.ONE,$=T;for(;N>td;)N&tp&&(U=C.mul(U,$)),$=C.sqr($),N>>=tp;return U})(X,C,T),div:(T,N)=>modular_mod(T*invert(N,C),C),sqrN:C=>C*C,addN:(C,T)=>C+T,subN:(C,T)=>C-T,mulN:(C,T)=>C*T,inv:T=>invert(T,C),sqrt:U.sqrt||(C=>Y(X,C)),invertBatch:C=>(function(C,T){let N=Array(T.length),U=T.reduce((T,U,$)=>C.is0(U)?T:(N[$]=T,C.mul(T,U)),C.ONE),$=C.inv(U);return T.reduceRight((T,U,$)=>C.is0(U)?T:(N[$]=C.mul(T,N[$]),C.mul(T,U)),$),N})(X,C),cmov:(C,T,N)=>N?T:C,toBytes:C=>N?numberToBytesLE(C,Q):utils_numberToBytesBE(C,Q),fromBytes:C=>{if(C.length!==Q)throw Error(`Fp.fromBytes: expected ${Q}, got ${C.length}`);return N?utils_bytesToNumberLE(C):utils_bytesToNumberBE(C)}});return Object.freeze(X)}(tB,void 0,void 0,{sqrt:function(C){let T=BigInt(3),N=BigInt(6),U=BigInt(11),$=BigInt(22),Q=BigInt(23),Y=BigInt(44),X=BigInt(88),ee=C*C*C%tB,es=ee*ee*C%tB,el=pow2(es,T,tB)*es%tB,ec=pow2(el,T,tB)*es%tB,eh=pow2(ec,tR,tB)*ee%tB,eu=pow2(eh,U,tB)*eh%tB,ed=pow2(eu,$,tB)*eu%tB,ep=pow2(ed,Y,tB)*ed%tB,eg=pow2(ep,X,tB)*ep%tB,ey=pow2(eg,Y,tB)*ed%tB,em=pow2(ey,T,tB)*es%tB,eb=pow2(em,Q,tB)*eu%tB,ew=pow2(eb,N,tB)*ee%tB,e_=pow2(ew,tR,tB);if(!tT.eql(tT.sqr(e_),C))throw Error("Cannot find square root");return e_}}),tN=function(C,T){let create=T=>(function(C){let T=function(C){let T=validateBasic(C);return validateObject(T,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...T})}(C),{Fp:N,n:U}=T,$=N.BYTES+1,Q=2*N.BYTES+1;function modN(C){return modular_mod(C,U)}let{ProjectivePoint:Y,normPrivateKeyToScalar:X,weierstrassEquation:ee,isWithinCurveOrder:es}=function(C){let T=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(C){let T=validateBasic(C);validateObject(T,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:N,Fp:U,a:$}=T;if(N){if(!U.eql($,U.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof N||"bigint"!=typeof N.beta||"function"!=typeof N.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...T})}(C),{Fp:N}=T,U=T.toBytes||((C,T,U)=>{let $=T.toAffine();return utils_concatBytes(Uint8Array.from([4]),N.toBytes($.x),N.toBytes($.y))}),$=T.fromBytes||(C=>{let T=C.subarray(1),U=N.fromBytes(T.subarray(0,N.BYTES)),$=N.fromBytes(T.subarray(N.BYTES,2*N.BYTES));return{x:U,y:$}});function weierstrassEquation(C){let{a:U,b:$}=T,Q=N.sqr(C),Y=N.mul(Q,C);return N.add(N.add(Y,N.mul(C,U)),$)}if(!N.eql(N.sqr(T.Gy),weierstrassEquation(T.Gx)))throw Error("bad generator point: equation left != right");function isWithinCurveOrder(C){return"bigint"==typeof C&&tP<C&&C<T.n}function assertGE(C){if(!isWithinCurveOrder(C))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function normPrivateKeyToScalar(C){let N;let{allowedPrivateKeyLengths:U,nByteLength:$,wrapPrivateKey:Q,n:Y}=T;if(U&&"bigint"!=typeof C){if(C instanceof Uint8Array&&(C=bytesToHex(C)),"string"!=typeof C||!U.includes(C.length))throw Error("Invalid key");C=C.padStart(2*$,"0")}try{N="bigint"==typeof C?C:utils_bytesToNumberBE(utils_ensureBytes("private key",C,$))}catch(T){throw Error(`private key must be ${$} bytes, hex or bigint, not ${typeof C}`)}return Q&&(N=modular_mod(N,Y)),assertGE(N),N}let Q=new Map;function assertPrjPoint(C){if(!(C instanceof Point))throw Error("ProjectivePoint expected")}let Point=class Point{constructor(C,T,U){if(this.px=C,this.py=T,this.pz=U,null==C||!N.isValid(C))throw Error("x required");if(null==T||!N.isValid(T))throw Error("y required");if(null==U||!N.isValid(U))throw Error("z required")}static fromAffine(C){let{x:T,y:U}=C||{};if(!C||!N.isValid(T)||!N.isValid(U))throw Error("invalid affine point");if(C instanceof Point)throw Error("projective point not allowed");let is0=C=>N.eql(C,N.ZERO);return is0(T)&&is0(U)?Point.ZERO:new Point(T,U,N.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){let T=N.invertBatch(C.map(C=>C.pz));return C.map((C,N)=>C.toAffine(T[N])).map(Point.fromAffine)}static fromHex(C){let T=Point.fromAffine($(utils_ensureBytes("pointHex",C)));return T.assertValidity(),T}static fromPrivateKey(C){return Point.BASE.multiply(normPrivateKeyToScalar(C))}_setWindowSize(C){this._WINDOW_SIZE=C,Q.delete(this)}assertValidity(){if(this.is0()){if(T.allowInfinityPoint&&!N.is0(this.py))return;throw Error("bad point: ZERO")}let{x:C,y:U}=this.toAffine();if(!N.isValid(C)||!N.isValid(U))throw Error("bad point: x or y not FE");let $=N.sqr(U),Q=weierstrassEquation(C);if(!N.eql($,Q))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:C}=this.toAffine();if(N.isOdd)return!N.isOdd(C);throw Error("Field doesn't support isOdd")}equals(C){assertPrjPoint(C);let{px:T,py:U,pz:$}=this,{px:Q,py:Y,pz:X}=C,ee=N.eql(N.mul(T,X),N.mul(Q,$)),es=N.eql(N.mul(U,X),N.mul(Y,$));return ee&&es}negate(){return new Point(this.px,N.neg(this.py),this.pz)}double(){let{a:C,b:U}=T,$=N.mul(U,tD),{px:Q,py:Y,pz:X}=this,ee=N.ZERO,es=N.ZERO,el=N.ZERO,ec=N.mul(Q,Q),eh=N.mul(Y,Y),eu=N.mul(X,X),ed=N.mul(Q,Y);return ed=N.add(ed,ed),el=N.mul(Q,X),el=N.add(el,el),ee=N.mul(C,el),es=N.mul($,eu),es=N.add(ee,es),ee=N.sub(eh,es),es=N.add(eh,es),es=N.mul(ee,es),ee=N.mul(ed,ee),el=N.mul($,el),eu=N.mul(C,eu),ed=N.sub(ec,eu),ed=N.mul(C,ed),ed=N.add(ed,el),el=N.add(ec,ec),ec=N.add(el,ec),ec=N.add(ec,eu),ec=N.mul(ec,ed),es=N.add(es,ec),eu=N.mul(Y,X),eu=N.add(eu,eu),ec=N.mul(eu,ed),ee=N.sub(ee,ec),el=N.mul(eu,eh),el=N.add(el,el),el=N.add(el,el),new Point(ee,es,el)}add(C){assertPrjPoint(C);let{px:U,py:$,pz:Q}=this,{px:Y,py:X,pz:ee}=C,es=N.ZERO,el=N.ZERO,ec=N.ZERO,eh=T.a,eu=N.mul(T.b,tD),ed=N.mul(U,Y),ep=N.mul($,X),eg=N.mul(Q,ee),ey=N.add(U,$),em=N.add(Y,X);ey=N.mul(ey,em),em=N.add(ed,ep),ey=N.sub(ey,em),em=N.add(U,Q);let eb=N.add(Y,ee);return em=N.mul(em,eb),eb=N.add(ed,eg),em=N.sub(em,eb),eb=N.add($,Q),es=N.add(X,ee),eb=N.mul(eb,es),es=N.add(ep,eg),eb=N.sub(eb,es),ec=N.mul(eh,em),es=N.mul(eu,eg),ec=N.add(es,ec),es=N.sub(ep,ec),ec=N.add(ep,ec),el=N.mul(es,ec),ep=N.add(ed,ed),ep=N.add(ep,ed),eg=N.mul(eh,eg),em=N.mul(eu,em),ep=N.add(ep,eg),eg=N.sub(ed,eg),eg=N.mul(eh,eg),em=N.add(em,eg),ed=N.mul(ep,em),el=N.add(el,ed),ed=N.mul(eb,em),es=N.mul(ey,es),es=N.sub(es,ed),ed=N.mul(ey,ep),ec=N.mul(eb,ec),ec=N.add(ec,ed),new Point(es,el,ec)}subtract(C){return this.add(C.negate())}is0(){return this.equals(Point.ZERO)}wNAF(C){return X.wNAFCached(this,Q,C,C=>{let T=N.invertBatch(C.map(C=>C.pz));return C.map((C,N)=>C.toAffine(T[N])).map(Point.fromAffine)})}multiplyUnsafe(C){let U=Point.ZERO;if(C===tP)return U;if(assertGE(C),C===tS)return this;let{endo:$}=T;if(!$)return X.unsafeLadder(this,C);let{k1neg:Q,k1:Y,k2neg:ee,k2:es}=$.splitScalar(C),el=U,ec=U,eh=this;for(;Y>tP||es>tP;)Y&tS&&(el=el.add(eh)),es&tS&&(ec=ec.add(eh)),eh=eh.double(),Y>>=tS,es>>=tS;return Q&&(el=el.negate()),ee&&(ec=ec.negate()),ec=new Point(N.mul(ec.px,$.beta),ec.py,ec.pz),el.add(ec)}multiply(C){let U,$;assertGE(C);let{endo:Q}=T;if(Q){let{k1neg:T,k1:Y,k2neg:ee,k2:es}=Q.splitScalar(C),{p:el,f:ec}=this.wNAF(Y),{p:eh,f:eu}=this.wNAF(es);el=X.constTimeNegate(T,el),eh=X.constTimeNegate(ee,eh),eh=new Point(N.mul(eh.px,Q.beta),eh.py,eh.pz),U=el.add(eh),$=ec.add(eu)}else{let{p:T,f:N}=this.wNAF(C);U=T,$=N}return Point.normalizeZ([U,$])[0]}multiplyAndAddUnsafe(C,T,N){let U=Point.BASE,mul=(C,T)=>T!==tP&&T!==tS&&C.equals(U)?C.multiply(T):C.multiplyUnsafe(T),$=mul(this,T).add(mul(C,N));return $.is0()?void 0:$}toAffine(C){let{px:T,py:U,pz:$}=this,Q=this.is0();null==C&&(C=Q?N.ONE:N.inv($));let Y=N.mul(T,C),X=N.mul(U,C),ee=N.mul($,C);if(Q)return{x:N.ZERO,y:N.ZERO};if(!N.eql(ee,N.ONE))throw Error("invZ was invalid");return{x:Y,y:X}}isTorsionFree(){let{h:C,isTorsionFree:N}=T;if(C===tS)return!0;if(N)return N(Point,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:C,clearCofactor:N}=T;return C===tS?this:N?N(Point,this):this.multiplyUnsafe(T.h)}toRawBytes(C=!0){return this.assertValidity(),U(Point,this,C)}toHex(C=!0){return bytesToHex(this.toRawBytes(C))}};Point.BASE=new Point(T.Gx,T.Gy,N.ONE),Point.ZERO=new Point(N.ZERO,N.ONE,N.ZERO);let Y=T.nBitLength,X=function(C,T){let constTimeNegate=(C,T)=>{let N=T.negate();return C?N:T},opts=C=>{let N=Math.ceil(T/C)+1;return{windows:N,windowSize:2**(C-1)}};return{constTimeNegate,unsafeLadder(T,N){let U=C.ZERO,$=T;for(;N>tv;)N&tE&&(U=U.add($)),$=$.double(),N>>=tE;return U},precomputeWindow(C,T){let{windows:N,windowSize:U}=opts(T),$=[],Q=C,Y=Q;for(let C=0;C<N;C++){Y=Q,$.push(Y);for(let C=1;C<U;C++)Y=Y.add(Q),$.push(Y);Q=Y.double()}return $},wNAF(T,N,U){let{windows:$,windowSize:Q}=opts(T),Y=C.ZERO,X=C.BASE,ee=BigInt(2**T-1),es=2**T,el=BigInt(T);for(let C=0;C<$;C++){let T=C*Q,$=Number(U&ee);U>>=el,$>Q&&($-=es,U+=tE);let ec=T+Math.abs($)-1,eh=C%2!=0,eu=$<0;0===$?X=X.add(constTimeNegate(eh,N[T])):Y=Y.add(constTimeNegate(eu,N[ec]))}return{p:Y,f:X}},wNAFCached(C,T,N,U){let $=C._WINDOW_SIZE||1,Q=T.get(C);return Q||(Q=this.precomputeWindow(C,$),1!==$&&T.set(C,U(Q))),this.wNAF($,Q,N)}}}(Point,T.endo?Math.ceil(Y/2):Y);return{CURVE:T,ProjectivePoint:Point,normPrivateKeyToScalar,weierstrassEquation,isWithinCurveOrder}}({...T,toBytes(C,T,U){let $=T.toAffine(),Q=N.toBytes($.x),Y=utils_concatBytes;return U?Y(Uint8Array.from([T.hasEvenY()?2:3]),Q):Y(Uint8Array.from([4]),Q,N.toBytes($.y))},fromBytes(C){let T=C.length,U=C[0],Y=C.subarray(1);if(T===$&&(2===U||3===U)){let C=utils_bytesToNumberBE(Y);if(!(tP<C&&C<N.ORDER))throw Error("Point is not on curve");let T=ee(C),$=N.sqrt(T),Q=($&tS)===tS;return(1&U)==1!==Q&&($=N.neg($)),{x:C,y:$}}if(T===Q&&4===U){let C=N.fromBytes(Y.subarray(0,N.BYTES)),T=N.fromBytes(Y.subarray(N.BYTES,2*N.BYTES));return{x:C,y:T}}throw Error(`Point of length ${T} was invalid. Expected ${$} compressed bytes or ${Q} uncompressed bytes`)}}),numToNByteStr=C=>bytesToHex(utils_numberToBytesBE(C,T.nByteLength));function isBiggerThanHalfOrder(C){let T=U>>tS;return C>T}let slcNum=(C,T,N)=>utils_bytesToNumberBE(C.slice(T,N));let Signature=class Signature{constructor(C,T,N){this.r=C,this.s=T,this.recovery=N,this.assertValidity()}static fromCompact(C){let N=T.nByteLength;return C=utils_ensureBytes("compactSignature",C,2*N),new Signature(slcNum(C,0,N),slcNum(C,N,2*N))}static fromDER(C){let{r:T,s:N}=tI.toSig(utils_ensureBytes("DER",C));return new Signature(T,N)}assertValidity(){if(!es(this.r))throw Error("r must be 0 < r < CURVE.n");if(!es(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(C){return new Signature(this.r,this.s,C)}recoverPublicKey(C){let{r:$,s:Q,recovery:X}=this,ee=ec(utils_ensureBytes("msgHash",C));if(null==X||![0,1,2,3].includes(X))throw Error("recovery id invalid");let es=2===X||3===X?$+T.n:$;if(es>=N.ORDER)throw Error("recovery id 2 or 3 invalid");let el=(1&X)==0?"02":"03",eh=Y.fromHex(el+numToNByteStr(es)),eu=invert(es,U),ed=modN(-ee*eu),ep=modN(Q*eu),eg=Y.BASE.multiplyAndAddUnsafe(eh,ed,ep);if(!eg)throw Error("point at infinify");return eg.assertValidity(),eg}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new Signature(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return tI.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}};function isProbPub(C){let T=C instanceof Uint8Array,N="string"==typeof C,U=(T||N)&&C.length;return T?U===$||U===Q:N?U===2*$||U===2*Q:C instanceof Y}let el=T.bits2int||function(C){let N=utils_bytesToNumberBE(C),U=8*C.length-T.nBitLength;return U>0?N>>BigInt(U):N},ec=T.bits2int_modN||function(C){return modN(el(C))},eh=bitMask(T.nBitLength);function int2octets(C){if("bigint"!=typeof C)throw Error("bigint expected");if(!(tP<=C&&C<eh))throw Error(`bigint expected < 2^${T.nBitLength}`);return utils_numberToBytesBE(C,T.nByteLength)}let eu={lowS:T.lowS,prehash:!1},ed={lowS:T.lowS,prehash:!1};return Y.BASE._setWindowSize(8),{CURVE:T,getPublicKey:function(C,T=!0){return Y.fromPrivateKey(C).toRawBytes(T)},getSharedSecret:function(C,T,N=!0){if(isProbPub(C))throw Error("first arg must be private key");if(!isProbPub(T))throw Error("second arg must be public key");let U=Y.fromHex(T);return U.multiply(X(C)).toRawBytes(N)},sign:function(C,$,Q=eu){let{seed:ee,k2sig:eh}=function(C,$,Q=eu){if(["recovered","canonical"].some(C=>C in Q))throw Error("sign() legacy options not supported");let{hash:ee,randomBytes:eh}=T,{lowS:ed,prehash:ep,extraEntropy:eg}=Q;null==ed&&(ed=!0),C=utils_ensureBytes("msgHash",C),ep&&(C=utils_ensureBytes("prehashed msgHash",ee(C)));let ey=ec(C),em=X($),eb=[int2octets(em),int2octets(ey)];if(null!=eg){let C=!0===eg?eh(N.BYTES):eg;eb.push(utils_ensureBytes("extraEntropy",C))}let ew=utils_concatBytes(...eb);return{seed:ew,k2sig:function(C){let T=el(C);if(!es(T))return;let N=invert(T,U),$=Y.BASE.multiply(T).toAffine(),Q=modN($.x);if(Q===tP)return;let X=modN(N*modN(ey+Q*em));if(X===tP)return;let ee=($.x===Q?0:2)|Number($.y&tS),ec=X;return ed&&isBiggerThanHalfOrder(X)&&(ec=isBiggerThanHalfOrder(X)?modN(-X):X,ee^=1),new Signature(Q,ec,ee)}}}(C,$,Q),ed=createHmacDrbg(T.hash.outputLen,T.nByteLength,T.hmac);return ed(ee,eh)},verify:function(C,N,$,Q=ed){let X,ee;if(N=utils_ensureBytes("msgHash",N),$=utils_ensureBytes("publicKey",$),"strict"in Q)throw Error("options.strict was renamed to lowS");let{lowS:es,prehash:el}=Q;try{if("string"==typeof C||C instanceof Uint8Array)try{ee=Signature.fromDER(C)}catch(T){if(!(T instanceof tI.Err))throw T;ee=Signature.fromCompact(C)}else if("object"==typeof C&&"bigint"==typeof C.r&&"bigint"==typeof C.s){let{r:T,s:N}=C;ee=new Signature(T,N)}else throw Error("PARSE");X=Y.fromHex($)}catch(C){if("PARSE"===C.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(es&&ee.hasHighS())return!1;el&&(N=T.hash(N));let{r:eh,s:eu}=ee,ep=ec(N),eg=invert(eu,U),ey=modN(ep*eg),em=modN(eh*eg),eb=Y.BASE.multiplyAndAddUnsafe(X,ey,em)?.toAffine();if(!eb)return!1;let ew=modN(eb.x);return ew===eh},ProjectivePoint:Y,Signature,utils:{isValidPrivateKey(C){try{return X(C),!0}catch(C){return!1}},normPrivateKeyToScalar:X,randomPrivateKey:()=>{let C=getMinHashLength(T.n);return function(C,T,N=!1){let U=C.length,$=getFieldBytesLength(T),Q=getMinHashLength(T);if(U<16||U<Q||U>1024)throw Error(`expected ${Q}-1024 bytes of input, got ${U}`);let Y=N?utils_bytesToNumberBE(C):utils_bytesToNumberLE(C),X=modular_mod(Y,T-tp)+tp;return N?numberToBytesLE(X,$):utils_numberToBytesBE(X,$)}(T.randomBytes(C),T.n)},precompute:(C=8,T=Y.BASE)=>(T._setWindowSize(C),T.multiply(BigInt(3)),T)}}})({...C,hash:T,hmac:(C,...N)=>hmac_hmac(T,C,(0,eY.eV)(...N)),randomBytes:eY.O6});return Object.freeze({...create(T),create})}({a:BigInt(0),b:BigInt(7),Fp:tT,n:tC,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:C=>{let T=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),N=-tO*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),U=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),$=BigInt("0x100000000000000000000000000000000"),Q=divNearest(T*C,tC),Y=divNearest(-N*C,tC),X=modular_mod(C-Q*T-Y*U,tC),ee=modular_mod(-Q*N-Y*T,tC),es=X>$,el=ee>$;if(es&&(X=tC-X),el&&(ee=tC-ee),X>$||ee>$)throw Error("splitScalar: Endomorphism failed, k="+C);return{k1neg:es,k1:X,k2neg:el,k2:ee}}}},e2);BigInt(0),tN.ProjectivePoint;let SigningKey=class SigningKey{#l;constructor(C){(0,eb.en)(32===(0,ex.M5)(C),"invalid private key","privateKey","[REDACTED]"),this.#l=(0,ex.Dv)(C)}get privateKey(){return this.#l}get publicKey(){return SigningKey.computePublicKey(this.#l)}get compressedPublicKey(){return SigningKey.computePublicKey(this.#l,!0)}sign(C){(0,eb.en)(32===(0,ex.M5)(C),"invalid digest length","digest",C);let T=tN.sign((0,ex.h_)(C),(0,ex.h_)(this.#l),{lowS:!0});return Signature.from({r:(0,eA.m9)(T.r,32),s:(0,eA.m9)(T.s,32),v:T.recovery?28:27})}computeSharedSecret(C){let T=SigningKey.computePublicKey(C);return(0,ex.Dv)(tN.getSharedSecret((0,ex.h_)(this.#l),(0,ex.Pw)(T),!1))}static computePublicKey(C,T){let N=(0,ex.Pw)(C,"key");if(32===N.length){let C=tN.getPublicKey(N,!!T);return(0,ex.Dv)(C)}if(64===N.length){let C=new Uint8Array(65);C[0]=4,C.set(N,1),N=C}let U=tN.ProjectivePoint.fromHex(N);return(0,ex.Dv)(U.toRawBytes(T))}static recoverPublicKey(C,T){(0,eb.en)(32===(0,ex.M5)(C),"invalid digest length","digest",C);let N=Signature.from(T),U=tN.Signature.fromCompact((0,ex.h_)((0,ex.zo)([N.r,N.s])));U=U.addRecoveryBit(N.yParity);let $=U.recoverPublicKey((0,ex.h_)(C));return(0,eb.en)(null!=$,"invalid signature for digest","signature",T),"0x"+$.toHex(!1)}static addPoints(C,T,N){let U=tN.ProjectivePoint.fromHex(SigningKey.computePublicKey(C).substring(2)),$=tN.ProjectivePoint.fromHex(SigningKey.computePublicKey(T).substring(2));return"0x"+U.add($).toHex(!!N)}};function unarrayifyInteger(C,T,N){let U=0;for(let $=0;$<N;$++)U=256*U+C[T+$];return U}function _decodeChildren(C,T,N,U){let $=[];for(;N<T+1+U;){let Q=_decode(C,N);$.push(Q.result),N+=Q.consumed,(0,eb.hu)(N<=T+1+U,"child data too short","BUFFER_OVERRUN",{buffer:C,length:U,offset:T})}return{consumed:1+U,result:$}}function _decode(C,T){(0,eb.hu)(0!==C.length,"data too short","BUFFER_OVERRUN",{buffer:C,length:0,offset:1});let checkOffset=T=>{(0,eb.hu)(T<=C.length,"data short segment too short","BUFFER_OVERRUN",{buffer:C,length:C.length,offset:T})};if(C[T]>=248){let N=C[T]-247;checkOffset(T+1+N);let U=unarrayifyInteger(C,T+1,N);return checkOffset(T+1+N+U),_decodeChildren(C,T,T+1+N,N+U)}if(C[T]>=192){let N=C[T]-192;return checkOffset(T+1+N),_decodeChildren(C,T,T+1,N)}if(C[T]>=184){let N=C[T]-183;checkOffset(T+1+N);let U=unarrayifyInteger(C,T+1,N);checkOffset(T+1+N+U);let $=(0,ex.Dv)(C.slice(T+1+N,T+1+N+U));return{consumed:1+N+U,result:$}}if(C[T]>=128){let N=C[T]-128;checkOffset(T+1+N);let U=(0,ex.Dv)(C.slice(T+1,T+1+N));return{consumed:1+N,result:U}}return{consumed:1,result:function(C){let T=C.toString(16);for(;T.length<2;)T="0"+T;return"0x"+T}(C[T])}}function decodeRlp(C){let T=(0,ex.Pw)(C,"data"),N=_decode(T,0);return(0,eb.en)(N.consumed===T.length,"unexpected junk after rlp payload","data",C),N.result}function arrayifyInteger(C){let T=[];for(;C;)T.unshift(255&C),C>>=8;return T}let tk="0123456789abcdef";function encodeRlp(C){let T="0x";for(let N of function _encode(C){if(Array.isArray(C)){let T=[];if(C.forEach(function(C){T=T.concat(_encode(C))}),T.length<=55)return T.unshift(192+T.length),T;let N=arrayifyInteger(T.length);return N.unshift(247+N.length),N.concat(T)}let T=Array.prototype.slice.call((0,ex.Pw)(C,"object"));if(1===T.length&&T[0]<=127)return T;if(T.length<=55)return T.unshift(128+T.length),T;let N=arrayifyInteger(T.length);return N.unshift(183+N.length),N.concat(T)}(C))T+=tk[N>>4]+tk[15&N];return T}let tU=BigInt(0),tL=BigInt(2),tM=BigInt(27),tF=BigInt(28),tj=BigInt(35),tz=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function getVersionedHash(C,T){let N=C.toString(16);for(;N.length<2;)N="0"+N;return"0x"+(N+=sha2_sha256(T).substring(4))}function handleAddress(C){return"0x"===C?null:(0,e_.K)(C)}function handleAccessList(C,T){try{return(0,eL.z)(C)}catch(N){(0,eb.en)(!1,N.message,T,C)}}function handleNumber(C,T){return"0x"===C?0:(0,eA.Dx)(C,T)}function handleUint(C,T){if("0x"===C)return tU;let N=(0,eA.yT)(C,T);return(0,eb.en)(N<=tz,"value exceeds uint size",T,N),N}function formatNumber(C,T){let N=(0,eA.yT)(C,"value"),U=(0,eA.ot)(N);return(0,eb.en)(U.length<=32,"value too large",`tx.${T}`,N),U}function formatAccessList(C){return(0,eL.z)(C).map(C=>[C.address,C.storageKeys])}function _parseEipSignature(C,T){let N;try{if(N=handleNumber(T[0],"yParity"),0!==N&&1!==N)throw Error("bad yParity")}catch(C){(0,eb.en)(!1,"invalid yParity","yParity",T[0])}let U=(0,ex.U3)(T[1],32),$=(0,ex.U3)(T[2],32),Q=Signature.from({r:U,s:$,yParity:N});C.signature=Q}let Transaction=class Transaction{#c;#h;#u;#d;#f;#p;#g;#y;#m;#b;#w;#_;#v;#E;#x;#A;#I;get type(){return this.#c}set type(C){switch(C){case null:this.#c=null;break;case 0:case"legacy":this.#c=0;break;case 1:case"berlin":case"eip-2930":this.#c=1;break;case 2:case"london":case"eip-1559":this.#c=2;break;case 3:case"cancun":case"eip-4844":this.#c=3;break;case 4:case"pectra":case"eip-7702":this.#c=4;break;default:(0,eb.en)(!1,"unsupported transaction type","type",C)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let C=this.#h;return null==C&&3===this.type?e$:C}set to(C){this.#h=null==C?null:(0,e_.K)(C)}get nonce(){return this.#d}set nonce(C){this.#d=(0,eA.Dx)(C,"value")}get gasLimit(){return this.#f}set gasLimit(C){this.#f=(0,eA.yT)(C)}get gasPrice(){let C=this.#p;return null==C&&(0===this.type||1===this.type)?tU:C}set gasPrice(C){this.#p=null==C?null:(0,eA.yT)(C,"gasPrice")}get maxPriorityFeePerGas(){let C=this.#g;return null==C?2===this.type||3===this.type?tU:null:C}set maxPriorityFeePerGas(C){this.#g=null==C?null:(0,eA.yT)(C,"maxPriorityFeePerGas")}get maxFeePerGas(){let C=this.#y;return null==C?2===this.type||3===this.type?tU:null:C}set maxFeePerGas(C){this.#y=null==C?null:(0,eA.yT)(C,"maxFeePerGas")}get data(){return this.#u}set data(C){this.#u=(0,ex.Dv)(C)}get value(){return this.#m}set value(C){this.#m=(0,eA.yT)(C,"value")}get chainId(){return this.#b}set chainId(C){this.#b=(0,eA.yT)(C)}get signature(){return this.#w||null}set signature(C){this.#w=null==C?null:Signature.from(C)}get accessList(){let C=this.#_||null;return null==C?1===this.type||2===this.type||3===this.type?[]:null:C}set accessList(C){this.#_=null==C?null:(0,eL.z)(C)}get authorizationList(){let C=this.#I||null;return null==C&&4===this.type?[]:C}set authorizationList(C){this.#I=null==C?null:C.map(C=>authorizationify(C))}get maxFeePerBlobGas(){let C=this.#v;return null==C&&3===this.type?tU:C}set maxFeePerBlobGas(C){this.#v=null==C?null:(0,eA.yT)(C,"maxFeePerBlobGas")}get blobVersionedHashes(){let C=this.#E;return null==C&&3===this.type?[]:C}set blobVersionedHashes(C){if(null!=C){(0,eb.en)(Array.isArray(C),"blobVersionedHashes must be an Array","value",C),C=C.slice();for(let T=0;T<C.length;T++)(0,eb.en)((0,ex.A7)(C[T],32),"invalid blobVersionedHash",`value[${T}]`,C[T])}this.#E=C}get blobs(){return null==this.#A?null:this.#A.map(C=>Object.assign({},C))}set blobs(C){if(null==C){this.#A=null;return}let T=[],N=[];for(let U=0;U<C.length;U++){let $=C[U];if((0,ex.Zq)($)){(0,eb.hu)(this.#x,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let C=(0,ex.Pw)($);if((0,eb.en)(C.length<=131072,"blob is too large",`blobs[${U}]`,$),131072!==C.length){let T=new Uint8Array(131072);T.set(C),C=T}let Q=this.#x.blobToKzgCommitment(C),Y=(0,ex.Dv)(this.#x.computeBlobKzgProof(C,Q));T.push({data:(0,ex.Dv)(C),commitment:(0,ex.Dv)(Q),proof:Y}),N.push(getVersionedHash(1,Q))}else{let C=(0,ex.Dv)($.commitment);T.push({data:(0,ex.Dv)($.data),commitment:C,proof:(0,ex.Dv)($.proof)}),N.push(getVersionedHash(1,C))}}this.#A=T,this.#E=N}get kzg(){return this.#x}set kzg(C){null==C?this.#x=null:this.#x={blobToKzgCommitment:T=>{if("computeBlobProof"in C){if("blobToKzgCommitment"in C&&"function"==typeof C.blobToKzgCommitment)return(0,ex.Pw)(C.blobToKzgCommitment((0,ex.Dv)(T)))}else if("blobToKzgCommitment"in C&&"function"==typeof C.blobToKzgCommitment)return(0,ex.Pw)(C.blobToKzgCommitment(T));if("blobToKZGCommitment"in C&&"function"==typeof C.blobToKZGCommitment)return(0,ex.Pw)(C.blobToKZGCommitment((0,ex.Dv)(T)));(0,eb.en)(!1,"unsupported KZG library","kzg",C)},computeBlobKzgProof:(T,N)=>"computeBlobProof"in C&&"function"==typeof C.computeBlobProof?(0,ex.Pw)(C.computeBlobProof((0,ex.Dv)(T),(0,ex.Dv)(N))):"computeBlobKzgProof"in C&&"function"==typeof C.computeBlobKzgProof?C.computeBlobKzgProof(T,N):"computeBlobKZGProof"in C&&"function"==typeof C.computeBlobKZGProof?(0,ex.Pw)(C.computeBlobKZGProof((0,ex.Dv)(T),(0,ex.Dv)(N))):void(0,eb.en)(!1,"unsupported KZG library","kzg",C)}}constructor(){this.#c=null,this.#h=null,this.#d=0,this.#f=tU,this.#p=null,this.#g=null,this.#y=null,this.#u="0x",this.#m=tU,this.#b=tU,this.#w=null,this.#_=null,this.#v=null,this.#E=null,this.#x=null,this.#A=null,this.#I=null}get hash(){return null==this.signature?null:(0,eE.w)(this.#P(!0,!1))}get unsignedHash(){return(0,eE.w)(this.unsignedSerialized)}get from(){var C,T,N;let U;return null==this.signature?null:(C=this.unsignedHash,T=this.signature,U="string"==typeof(N=SigningKey.recoverPublicKey(C,T))?SigningKey.computePublicKey(N,!1):N.publicKey,(0,e_.K)((0,eE.w)("0x"+U.substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#P(C,T){(0,eb.hu)(!C||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let N=C?this.signature:null;switch(this.inferType()){case 0:return function(C,T){let N=[formatNumber(C.nonce,"nonce"),formatNumber(C.gasPrice||0,"gasPrice"),formatNumber(C.gasLimit,"gasLimit"),C.to||"0x",formatNumber(C.value,"value"),C.data],U=tU;if(C.chainId!=tU)U=(0,eA.yT)(C.chainId,"tx.chainId"),(0,eb.en)(!T||null==T.networkV||T.legacyChainId===U,"tx.chainId/sig.v mismatch","sig",T);else if(C.signature){let T=C.signature.legacyChainId;null!=T&&(U=T)}if(!T)return U!==tU&&(N.push((0,eA.ot)(U)),N.push("0x"),N.push("0x")),encodeRlp(N);let $=BigInt(27+T.yParity);return U!==tU?$=Signature.getChainIdV(U,T.v):BigInt(T.v)!==$&&(0,eb.en)(!1,"tx.chainId/sig.v mismatch","sig",T),N.push((0,eA.ot)($)),N.push((0,eA.ot)(T.r)),N.push((0,eA.ot)(T.s)),encodeRlp(N)}(this,N);case 1:return function(C,T){let N=[formatNumber(C.chainId,"chainId"),formatNumber(C.nonce,"nonce"),formatNumber(C.gasPrice||0,"gasPrice"),formatNumber(C.gasLimit,"gasLimit"),C.to||"0x",formatNumber(C.value,"value"),C.data,formatAccessList(C.accessList||[])];return T&&(N.push(formatNumber(T.yParity,"recoveryParam")),N.push((0,eA.ot)(T.r)),N.push((0,eA.ot)(T.s))),(0,ex.zo)(["0x01",encodeRlp(N)])}(this,N);case 2:return function(C,T){let N=[formatNumber(C.chainId,"chainId"),formatNumber(C.nonce,"nonce"),formatNumber(C.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(C.maxFeePerGas||0,"maxFeePerGas"),formatNumber(C.gasLimit,"gasLimit"),C.to||"0x",formatNumber(C.value,"value"),C.data,formatAccessList(C.accessList||[])];return T&&(N.push(formatNumber(T.yParity,"yParity")),N.push((0,eA.ot)(T.r)),N.push((0,eA.ot)(T.s))),(0,ex.zo)(["0x02",encodeRlp(N)])}(this,N);case 3:return function(C,T,N){let U=[formatNumber(C.chainId,"chainId"),formatNumber(C.nonce,"nonce"),formatNumber(C.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(C.maxFeePerGas||0,"maxFeePerGas"),formatNumber(C.gasLimit,"gasLimit"),C.to||e$,formatNumber(C.value,"value"),C.data,formatAccessList(C.accessList||[]),formatNumber(C.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(C,T){(0,eb.en)(Array.isArray(C),`invalid ${T}`,"value",C);for(let T=0;T<C.length;T++)(0,eb.en)((0,ex.A7)(C[T],32),"invalid ${ param } hash",`value[${T}]`,C[T]);return C}(C.blobVersionedHashes||[],"blobVersionedHashes")];return T&&(U.push(formatNumber(T.yParity,"yParity")),U.push((0,eA.ot)(T.r)),U.push((0,eA.ot)(T.s)),N)?(0,ex.zo)(["0x03",encodeRlp([U,N.map(C=>C.data),N.map(C=>C.commitment),N.map(C=>C.proof)])]):(0,ex.zo)(["0x03",encodeRlp(U)])}(this,N,T?this.blobs:null);case 4:return function(C,T){let N=[formatNumber(C.chainId,"chainId"),formatNumber(C.nonce,"nonce"),formatNumber(C.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(C.maxFeePerGas||0,"maxFeePerGas"),formatNumber(C.gasLimit,"gasLimit"),C.to||"0x",formatNumber(C.value,"value"),C.data,formatAccessList(C.accessList||[]),(C.authorizationList||[]).map(C=>[formatNumber(C.chainId,"chainId"),C.address,formatNumber(C.nonce,"nonce"),formatNumber(C.signature.yParity,"yParity"),(0,eA.ot)(C.signature.r),(0,eA.ot)(C.signature.s)])];return T&&(N.push(formatNumber(T.yParity,"yParity")),N.push((0,eA.ot)(T.r)),N.push((0,eA.ot)(T.s))),(0,ex.zo)(["0x04",encodeRlp(N)])}(this,N)}(0,eb.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#P(!0,!0)}get unsignedSerialized(){return this.#P(!1,!1)}inferType(){let C=this.inferTypes();return C.indexOf(2)>=0?2:C.pop()}inferTypes(){let C=null!=this.gasPrice,T=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,N=null!=this.accessList,U=null!=this.#v||this.#E;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,eb.hu)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,eb.hu)(!T||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,eb.hu)(0!==this.type||!N,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let $=[];return null!=this.type?$.push(this.type):this.authorizationList&&this.authorizationList.length?$.push(4):T?$.push(2):C?($.push(1),N||$.push(0)):N?($.push(1),$.push(2)):(U&&this.to||($.push(0),$.push(1),$.push(2)),$.push(3)),$.sort(),$}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Transaction.from(this)}toJSON(){let s=C=>null==C?null:C.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:s(this.gasLimit),gasPrice:s(this.gasPrice),maxPriorityFeePerGas:s(this.maxPriorityFeePerGas),maxFeePerGas:s(this.maxFeePerGas),value:s(this.value),chainId:s(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(C){if(null==C)return new Transaction;if("string"==typeof C){let T=(0,ex.Pw)(C);if(T[0]>=127)return Transaction.from(function(C){let T=decodeRlp(C);(0,eb.en)(Array.isArray(T)&&(9===T.length||6===T.length),"invalid field count for legacy transaction","data",C);let N={type:0,nonce:handleNumber(T[0],"nonce"),gasPrice:handleUint(T[1],"gasPrice"),gasLimit:handleUint(T[2],"gasLimit"),to:handleAddress(T[3]),value:handleUint(T[4],"value"),data:(0,ex.Dv)(T[5]),chainId:tU};if(6===T.length)return N;let U=handleUint(T[6],"v"),$=handleUint(T[7],"r"),Q=handleUint(T[8],"s");if($===tU&&Q===tU)N.chainId=U;else{let C=(U-tj)/tL;C<tU&&(C=tU),N.chainId=C,(0,eb.en)(C!==tU||U===tM||U===tF,"non-canonical legacy v","v",T[6]),N.signature=Signature.from({r:(0,ex.U3)(T[7],32),s:(0,ex.U3)(T[8],32),v:U})}return N}(T));switch(T[0]){case 1:return Transaction.from(function(C){let T=decodeRlp((0,ex.Pw)(C).slice(1));(0,eb.en)(Array.isArray(T)&&(8===T.length||11===T.length),"invalid field count for transaction type: 1","data",(0,ex.Dv)(C));let N={type:1,chainId:handleUint(T[0],"chainId"),nonce:handleNumber(T[1],"nonce"),gasPrice:handleUint(T[2],"gasPrice"),gasLimit:handleUint(T[3],"gasLimit"),to:handleAddress(T[4]),value:handleUint(T[5],"value"),data:(0,ex.Dv)(T[6]),accessList:handleAccessList(T[7],"accessList")};return 8===T.length||_parseEipSignature(N,T.slice(8)),N}(T));case 2:return Transaction.from(function(C){let T=decodeRlp((0,ex.Pw)(C).slice(1));(0,eb.en)(Array.isArray(T)&&(9===T.length||12===T.length),"invalid field count for transaction type: 2","data",(0,ex.Dv)(C));let N={type:2,chainId:handleUint(T[0],"chainId"),nonce:handleNumber(T[1],"nonce"),maxPriorityFeePerGas:handleUint(T[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(T[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(T[4],"gasLimit"),to:handleAddress(T[5]),value:handleUint(T[6],"value"),data:(0,ex.Dv)(T[7]),accessList:handleAccessList(T[8],"accessList")};return 9===T.length||_parseEipSignature(N,T.slice(9)),N}(T));case 3:return Transaction.from(function(C){let T=decodeRlp((0,ex.Pw)(C).slice(1)),N="3",U=null;if(4===T.length&&Array.isArray(T[0])){N="3 (network format)";let C=T[1],$=T[2],Q=T[3];(0,eb.en)(Array.isArray(C),"invalid network format: blobs not an array","fields[1]",C),(0,eb.en)(Array.isArray($),"invalid network format: commitments not an array","fields[2]",$),(0,eb.en)(Array.isArray(Q),"invalid network format: proofs not an array","fields[3]",Q),(0,eb.en)(C.length===$.length,"invalid network format: blobs/commitments length mismatch","fields",T),(0,eb.en)(C.length===Q.length,"invalid network format: blobs/proofs length mismatch","fields",T),U=[];for(let N=0;N<T[1].length;N++)U.push({data:C[N],commitment:$[N],proof:Q[N]});T=T[0]}(0,eb.en)(Array.isArray(T)&&(11===T.length||14===T.length),`invalid field count for transaction type: ${N}`,"data",(0,ex.Dv)(C));let $={type:3,chainId:handleUint(T[0],"chainId"),nonce:handleNumber(T[1],"nonce"),maxPriorityFeePerGas:handleUint(T[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(T[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(T[4],"gasLimit"),to:handleAddress(T[5]),value:handleUint(T[6],"value"),data:(0,ex.Dv)(T[7]),accessList:handleAccessList(T[8],"accessList"),maxFeePerBlobGas:handleUint(T[9],"maxFeePerBlobGas"),blobVersionedHashes:T[10]};U&&($.blobs=U),(0,eb.en)(null!=$.to,`invalid address for transaction type: ${N}`,"data",C),(0,eb.en)(Array.isArray($.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",C);for(let T=0;T<$.blobVersionedHashes.length;T++)(0,eb.en)((0,ex.A7)($.blobVersionedHashes[T],32),`invalid blobVersionedHash at index ${T}: must be length 32`,"data",C);return 11===T.length||_parseEipSignature($,T.slice(11)),$}(T));case 4:return Transaction.from(function(C){let T=decodeRlp((0,ex.Pw)(C).slice(1));(0,eb.en)(Array.isArray(T)&&(10===T.length||13===T.length),"invalid field count for transaction type: 4","data",(0,ex.Dv)(C));let N={type:4,chainId:handleUint(T[0],"chainId"),nonce:handleNumber(T[1],"nonce"),maxPriorityFeePerGas:handleUint(T[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(T[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(T[4],"gasLimit"),to:handleAddress(T[5]),value:handleUint(T[6],"value"),data:(0,ex.Dv)(T[7]),accessList:handleAccessList(T[8],"accessList"),authorizationList:function(C,T){try{if(!Array.isArray(C))throw Error("authorizationList: invalid array");let T=[];for(let N=0;N<C.length;N++){let U=C[N];if(!Array.isArray(U))throw Error(`authorization[${N}]: invalid array`);if(6!==U.length)throw Error(`authorization[${N}]: wrong length`);if(!U[1])throw Error(`authorization[${N}]: null address`);T.push({address:handleAddress(U[1]),nonce:handleUint(U[2],"nonce"),chainId:handleUint(U[0],"chainId"),signature:Signature.from({yParity:handleNumber(U[3],"yParity"),r:(0,ex.U3)(U[4],32),s:(0,ex.U3)(U[5],32)})})}return T}catch(N){(0,eb.en)(!1,N.message,T,C)}}(T[9],"authorizationList")};return 10===T.length||_parseEipSignature(N,T.slice(10)),N}(T))}(0,eb.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let T=new Transaction;return null!=C.type&&(T.type=C.type),null!=C.to&&(T.to=C.to),null!=C.nonce&&(T.nonce=C.nonce),null!=C.gasLimit&&(T.gasLimit=C.gasLimit),null!=C.gasPrice&&(T.gasPrice=C.gasPrice),null!=C.maxPriorityFeePerGas&&(T.maxPriorityFeePerGas=C.maxPriorityFeePerGas),null!=C.maxFeePerGas&&(T.maxFeePerGas=C.maxFeePerGas),null!=C.maxFeePerBlobGas&&(T.maxFeePerBlobGas=C.maxFeePerBlobGas),null!=C.data&&(T.data=C.data),null!=C.value&&(T.value=C.value),null!=C.chainId&&(T.chainId=C.chainId),null!=C.signature&&(T.signature=Signature.from(C.signature)),null!=C.accessList&&(T.accessList=C.accessList),null!=C.authorizationList&&(T.authorizationList=C.authorizationList),null!=C.blobVersionedHashes&&(T.blobVersionedHashes=C.blobVersionedHashes),null!=C.kzg&&(T.kzg=C.kzg),null!=C.blobs&&(T.blobs=C.blobs),null!=C.hash&&((0,eb.en)(T.isSigned(),"unsigned transaction cannot define '.hash'","tx",C),(0,eb.en)(T.hash===C.hash,"hash mismatch","tx",C)),null!=C.from&&((0,eb.en)(T.isSigned(),"unsigned transaction cannot define '.from'","tx",C),(0,eb.en)(T.from.toLowerCase()===(C.from||"").toLowerCase(),"from mismatch","tx",C)),T}};function createGetUrl(C){return async function(T,N){let U;(0,eb.hu)(null==N||!N.cancelled,"request cancelled before sending","CANCELLED");let $=T.url.split(":")[0].toLowerCase();(0,eb.hu)("http"===$||"https"===$,`unsupported protocol ${$}`,"UNSUPPORTED_OPERATION",{info:{protocol:$},operation:"request"}),(0,eb.hu)("https"===$||!T.credentials||T.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let Q=null,Y=new AbortController,X=setTimeout(()=>{Q=(0,eb.wf)("request timeout","TIMEOUT"),Y.abort()},T.timeout);N&&N.addListener(()=>{Q=(0,eb.wf)("request cancelled","CANCELLED"),Y.abort()});let ee=Object.assign({},C,{method:T.method,headers:new Headers(Array.from(T)),body:T.body||void 0,signal:Y.signal});try{U=await fetch(T.url,ee)}catch(C){if(clearTimeout(X),Q)throw Q;throw C}clearTimeout(X);let es={};U.headers.forEach((C,T)=>{es[T.toLowerCase()]=C});let el=await U.arrayBuffer(),ec=null==el?null:new Uint8Array(el);return{statusCode:U.status,statusMessage:U.statusText,headers:es,body:ec}}}createGetUrl({});let tq=createGetUrl(),tH=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),tV=RegExp("^ipfs://(ipfs/)?(.*)$","i"),tK=!1;async function dataGatewayFunc(C,T){try{var N;let T=C.match(tH);if(!T)throw Error("invalid data");return new FetchResponse(200,"OK",{"content-type":T[1]||"text/plain"},T[2]?function(C){C=atob(C);let T=new Uint8Array(C.length);for(let N=0;N<C.length;N++)T[N]=C.charCodeAt(N);return(0,ex.Pw)(T)}(T[3]):(N=T[3],(0,eG.Y0)(N.replace(/%([0-9a-f][0-9a-f])/gi,(C,T)=>String.fromCharCode(parseInt(T,16))))))}catch(T){return new FetchResponse(599,"BAD REQUEST (invalid data: URI)",{},null,new fetch_FetchRequest(C))}}function getIpfsGatewayFunc(C){return async function(T,N){try{let N=T.match(tV);if(!N)throw Error("invalid link");return new fetch_FetchRequest(`${C}${N[2]}`)}catch(C){return new FetchResponse(599,"BAD REQUEST (invalid IPFS URI)",{},null,new fetch_FetchRequest(T))}}}let tG={data:dataGatewayFunc,ipfs:getIpfsGatewayFunc("https://gateway.ipfs.io/ipfs/")},t$=new WeakMap;let FetchCancelSignal=class FetchCancelSignal{#S;#D;constructor(C){this.#S=[],this.#D=!1,t$.set(C,()=>{if(!this.#D){for(let C of(this.#D=!0,this.#S))setTimeout(()=>{C()},0);this.#S=[]}})}addListener(C){(0,eb.hu)(!this.#D,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#S.push(C)}get cancelled(){return this.#D}checkSignal(){(0,eb.hu)(!this.cancelled,"cancelled","CANCELLED",{})}};function checkSignal(C){if(null==C)throw Error("missing signal; should not happen");return C.checkSignal(),C}let fetch_FetchRequest=class fetch_FetchRequest{#B;#C;#O;#R;#T;#N;#k;#U;#L;#M;#F;#j;#z;#q;#H;get url(){return this.#N}set url(C){this.#N=String(C)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}set body(C){if(null==C)this.#k=void 0,this.#U=void 0;else if("string"==typeof C)this.#k=(0,eG.Y0)(C),this.#U="text/plain";else if(C instanceof Uint8Array)this.#k=C,this.#U="application/octet-stream";else if("object"==typeof C)this.#k=(0,eG.Y0)(JSON.stringify(C)),this.#U="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#k}get method(){return this.#R?this.#R:this.hasBody()?"POST":"GET"}set method(C){null==C&&(C=""),this.#R=String(C).toUpperCase()}get headers(){let C=Object.assign({},this.#O);return this.#L&&(C.authorization=`Basic ${function(C){let T=(0,ex.Pw)(C),N="";for(let C=0;C<T.length;C++)N+=String.fromCharCode(T[C]);return btoa(N)}((0,eG.Y0)(this.#L))}`),this.allowGzip&&(C["accept-encoding"]="gzip"),null==C["content-type"]&&this.#U&&(C["content-type"]=this.#U),this.body&&(C["content-length"]=String(this.body.length)),C}getHeader(C){return this.headers[C.toLowerCase()]}setHeader(C,T){this.#O[String(C).toLowerCase()]=String(T)}clearHeaders(){this.#O={}}[Symbol.iterator](){let C=this.headers,T=Object.keys(C),N=0;return{next:()=>{if(N<T.length){let U=T[N++];return{value:[U,C[U]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#L||null}setCredentials(C,T){(0,eb.en)(!C.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#L=`${C}:${T}`}get allowGzip(){return this.#C}set allowGzip(C){this.#C=!!C}get allowInsecureAuthentication(){return!!this.#B}set allowInsecureAuthentication(C){this.#B=!!C}get timeout(){return this.#T}set timeout(C){(0,eb.en)(C>=0,"timeout must be non-zero","timeout",C),this.#T=C}get preflightFunc(){return this.#M||null}set preflightFunc(C){this.#M=C}get processFunc(){return this.#F||null}set processFunc(C){this.#F=C}get retryFunc(){return this.#j||null}set retryFunc(C){this.#j=C}get getUrlFunc(){return this.#H||tq}set getUrlFunc(C){this.#H=C}constructor(C){this.#N=String(C),this.#B=!1,this.#C=!0,this.#O={},this.#R="",this.#T=3e5,this.#q={slotInterval:250,maxAttempts:12},this.#H=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#k?(0,ex.Dv)(this.#k):"null"}>`}setThrottleParams(C){null!=C.slotInterval&&(this.#q.slotInterval=C.slotInterval),null!=C.maxAttempts&&(this.#q.maxAttempts=C.maxAttempts)}async #V(C,T,N,U,$){if(C>=this.#q.maxAttempts)return $.makeServerError("exceeded maximum retry limit");(0,eb.hu)(getTime()<=T,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:U}),N>0&&await new Promise(C=>setTimeout(C,N));let Q=this.clone(),Y=(Q.url.split(":")[0]||"").toLowerCase();if(Y in tG){let C=await tG[Y](Q.url,checkSignal(U.#z));if(C instanceof FetchResponse){let T=C;if(this.processFunc){checkSignal(U.#z);try{T=await this.processFunc(Q,T)}catch(C){(null==C.throttle||"number"!=typeof C.stall)&&T.makeServerError("error in post-processing function",C).assertOk()}}return T}Q=C}this.preflightFunc&&(Q=await this.preflightFunc(Q));let X=await this.getUrlFunc(Q,checkSignal(U.#z)),ee=new FetchResponse(X.statusCode,X.statusMessage,X.headers,X.body,U);if(301===ee.statusCode||302===ee.statusCode){try{let N=ee.headers.location||"";return Q.redirect(N).#V(C+1,T,0,U,ee)}catch(C){}return ee}if(429===ee.statusCode&&(null==this.retryFunc||await this.retryFunc(Q,ee,C))){let N=ee.headers["retry-after"],$=this.#q.slotInterval*Math.trunc(Math.random()*Math.pow(2,C));return"string"==typeof N&&N.match(/^[1-9][0-9]*$/)&&($=parseInt(N)),Q.clone().#V(C+1,T,$,U,ee)}if(this.processFunc){checkSignal(U.#z);try{ee=await this.processFunc(Q,ee)}catch($){(null==$.throttle||"number"!=typeof $.stall)&&ee.makeServerError("error in post-processing function",$).assertOk();let N=this.#q.slotInterval*Math.trunc(Math.random()*Math.pow(2,C));return $.stall>=0&&(N=$.stall),Q.clone().#V(C+1,T,N,U,ee)}}return ee}send(){return(0,eb.hu)(null==this.#z,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#z=new FetchCancelSignal(this),this.#V(0,getTime()+this.timeout,0,this,new FetchResponse(0,"",{},null,this))}cancel(){(0,eb.hu)(null!=this.#z,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let C=t$.get(this);if(!C)throw Error("missing signal; should not happen");C()}redirect(C){let T=this.url.split(":")[0].toLowerCase(),N=C.split(":")[0].toLowerCase();(0,eb.hu)("GET"===this.method&&("https"!==T||"http"!==N)&&C.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(C)})`});let U=new fetch_FetchRequest(C);return U.method="GET",U.allowGzip=this.allowGzip,U.timeout=this.timeout,U.#O=Object.assign({},this.#O),this.#k&&(U.#k=new Uint8Array(this.#k)),U.#U=this.#U,U}clone(){let C=new fetch_FetchRequest(this.url);return C.#R=this.#R,this.#k&&(C.#k=this.#k),C.#U=this.#U,C.#O=Object.assign({},this.#O),C.#L=this.#L,this.allowGzip&&(C.allowGzip=!0),C.timeout=this.timeout,this.allowInsecureAuthentication&&(C.allowInsecureAuthentication=!0),C.#M=this.#M,C.#F=this.#F,C.#j=this.#j,C.#q=Object.assign({},this.#q),C.#H=this.#H,C}static lockConfig(){tK=!0}static getGateway(C){return tG[C.toLowerCase()]||null}static registerGateway(C,T){if("http"===(C=C.toLowerCase())||"https"===C)throw Error(`cannot intercept ${C}; use registerGetUrl`);if(tK)throw Error("gateways locked");tG[C]=T}static registerGetUrl(C){if(tK)throw Error("gateways locked");tq=C}static createGetUrlFunc(C){return createGetUrl(C)}static createDataGateway(){return dataGatewayFunc}static createIpfsGatewayFunc(C){return getIpfsGatewayFunc(C)}};let FetchResponse=class FetchResponse{#K;#G;#O;#k;#$;#Q;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#k?(0,ex.Dv)(this.#k):"null"}>`}get statusCode(){return this.#K}get statusMessage(){return this.#G}get headers(){return Object.assign({},this.#O)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}get bodyText(){try{return null==this.#k?"":(0,eG.ZN)(this.#k)}catch(C){(0,eb.hu)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(C){(0,eb.hu)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let C=this.headers,T=Object.keys(C),N=0;return{next:()=>{if(N<T.length){let U=T[N++];return{value:[U,C[U]],done:!1}}return{value:void 0,done:!0}}}}constructor(C,T,N,U,$){this.#K=C,this.#G=T,this.#O=Object.keys(N).reduce((C,T)=>(C[T.toLowerCase()]=String(N[T]),C),{}),this.#k=null==U?null:new Uint8Array(U),this.#$=$||null,this.#Q={message:""}}makeServerError(C,T){let N;C?N=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${C})`:(C=`${this.statusCode} ${this.statusMessage}`,N=`CLIENT ESCALATED SERVER ERROR (${C})`);let U=new FetchResponse(599,N,this.headers,this.body,this.#$||void 0);return U.#Q={message:C,error:T},U}throwThrottleError(C,T){null==T?T=-1:(0,eb.en)(Number.isInteger(T)&&T>=0,"invalid stall timeout","stall",T);let N=Error(C||"throttling requests");throw(0,eI.h)(N,{stall:T,throttle:!0}),N}getHeader(C){return this.headers[C.toLowerCase()]}hasBody(){return null!=this.#k}get request(){return this.#$}ok(){return""===this.#Q.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:C,error:T}=this.#Q;""===C&&(C=`server response ${this.statusCode} ${this.statusMessage}`);let N=null;this.request&&(N=this.request.url);let U=null;try{this.#k&&(U=(0,eG.ZN)(this.#k))}catch(C){}(0,eb.hu)(!1,C,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:T,info:{requestUrl:N,responseBody:U,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};function getTime(){return new Date().getTime()}var tQ=N(6539);let tJ="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);let tW=BigInt(58);function getIpfsLink(C){return C.match(/^ipfs:\/\/ipfs\//i)?C=C.substring(12):C.match(/^ipfs:\/\//i)?C=C.substring(7):(0,eb.en)(!1,"unsupported IPFS format","link",C),`https://gateway.ipfs.io/ipfs/${C}`}let MulticoinProviderPlugin=class MulticoinProviderPlugin{name;constructor(C){(0,eI.h)(this,{name:C})}connect(C){return this}supportsCoinType(C){return!1}async encodeAddress(C,T){throw Error("unsupported coin")}async decodeAddress(C,T){throw Error("unsupported coin")}};let tZ=RegExp("^(ipfs)://(.*)$","i"),tY=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),tZ,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];let EnsResolver=class EnsResolver{provider;address;name;#J;#W;constructor(C,T,N){(0,eI.h)(this,{provider:C,address:T,name:N}),this.#J=null,this.#W=new eQ.CH(T,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],C)}async supportsWildcard(){return null==this.#J&&(this.#J=(async()=>{try{return await this.#W.supportsInterface("0x9061b923")}catch(C){if((0,eb.VZ)(C,"CALL_EXCEPTION"))return!1;throw this.#J=null,C}})()),await this.#J}async #Z(C,T){T=(T||[]).slice();let N=this.#W.interface;T.unshift(namehash(this.name));let U=null;await this.supportsWildcard()&&(U=N.getFunction(C),(0,eb.hu)(U,"missing fragment","UNKNOWN_ERROR",{info:{funcName:C}}),T=[function(C,T){let N=null!=T?T:63;return(0,eb.en)(N<=255,"DNS encoded label cannot exceed 255","length",N),(0,ex.Dv)((0,ex.zo)(ensNameSplit(C).map(T=>{(0,eb.en)(T.length<=N,`label ${JSON.stringify(C)} exceeds ${N} bytes`,"name",C);let U=new Uint8Array(T.length+1);return U.set(T,1),U[0]=U.length-1,U})))+"00"}(this.name,255),N.encodeFunctionData(U,T)],C="resolve(bytes,bytes)"),T.push({enableCcipRead:!0});try{let $=await this.#W[C](...T);if(U)return N.decodeFunctionResult(U,$)[0];return $}catch(C){if(!(0,eb.VZ)(C,"CALL_EXCEPTION"))throw C}return null}async getAddress(C){if(null==C&&(C=60),60===C)try{let C=await this.#Z("addr(bytes32)");if(null==C||C===e$)return null;return C}catch(C){if((0,eb.VZ)(C,"CALL_EXCEPTION"))return null;throw C}if(C>=0&&C<2147483648){let T=C+2147483648,N=await this.#Z("addr(bytes32,uint)",[T]);if((0,ex.A7)(N,20))return(0,e_.K)(N)}let T=null;for(let N of this.provider.plugins)if(N instanceof MulticoinProviderPlugin&&N.supportsCoinType(C)){T=N;break}if(null==T)return null;let N=await this.#Z("addr(bytes32,uint)",[C]);if(null==N||"0x"===N)return null;let U=await T.decodeAddress(C,N);if(null!=U)return U;(0,eb.hu)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${C})`,info:{coinType:C,data:N}})}async getText(C){let T=await this.#Z("text(bytes32,string)",[C]);return null==T||"0x"===T?null:T}async getContentHash(){let C=await this.#Z("contenthash(bytes32)");if(null==C||"0x"===C)return null;let T=C.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(T){let C="e3010170"===T[1]?"ipfs":"ipns",N=parseInt(T[4],16);if(T[5].length===2*N)return`${C}://${function(C){let T=(0,ex.Pw)(C),N=(0,eA.Gh)(T),U="";for(;N;)U=tJ[Number(N%tW)]+U,N/=tW;for(let C=0;C<T.length&&!T[C];C++)U=tJ[0]+U;return U}("0x"+T[2])}`}let N=C.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(N&&64===N[1].length)return`bzz://${N[1]}`;(0,eb.hu)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:C}})}async getAvatar(){let C=await this._getAvatar();return C.url}async _getAvatar(){let C=[{type:"name",value:this.name}];try{let T=await this.getText("avatar");if(null==T)return C.push({type:"!avatar",value:""}),{url:null,linkage:C};C.push({type:"avatar",value:T});for(let N=0;N<tY.length;N++){let U=T.match(tY[N]);if(null==U)continue;let $=U[1].toLowerCase();switch($){case"https":case"data":return C.push({type:"url",value:T}),{linkage:C,url:T};case"ipfs":{let N=getIpfsLink(T);return C.push({type:"ipfs",value:T}),C.push({type:"url",value:N}),{linkage:C,url:N}}case"erc721":case"erc1155":{let N="erc721"===$?"tokenURI(uint256)":"uri(uint256)";C.push({type:$,value:T});let Q=await this.getAddress();if(null==Q)return C.push({type:"!owner",value:""}),{url:null,linkage:C};let Y=(U[2]||"").split("/");if(2!==Y.length)return C.push({type:`!${$}caip`,value:U[2]||""}),{url:null,linkage:C};let X=Y[1],ee=new eQ.CH(Y[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===$){let T=await ee.ownerOf(X);if(Q!==T)return C.push({type:"!owner",value:T}),{url:null,linkage:C};C.push({type:"owner",value:T})}else if("erc1155"===$){let T=await ee.balanceOf(Q,X);if(!T)return C.push({type:"!balance",value:"0"}),{url:null,linkage:C};C.push({type:"balance",value:T.toString()})}let es=await ee[N](X);if(null==es||"0x"===es)return C.push({type:"!metadata-url",value:""}),{url:null,linkage:C};C.push({type:"metadata-url-base",value:es}),"erc1155"===$&&(es=es.replace("{id}",(0,eA.m9)(X,32).substring(2)),C.push({type:"metadata-url-expanded",value:es})),es.match(/^ipfs:/i)&&(es=getIpfsLink(es)),C.push({type:"metadata-url",value:es});let el={},ec=await new fetch_FetchRequest(es).send();ec.assertOk();try{el=ec.bodyJson}catch(T){try{C.push({type:"!metadata",value:ec.bodyText})}catch(N){let T=ec.body;T&&C.push({type:"!metadata",value:(0,ex.Dv)(T)})}return{url:null,linkage:C}}if(!el)return C.push({type:"!metadata",value:""}),{url:null,linkage:C};C.push({type:"metadata",value:JSON.stringify(el)});let eh=el.image;if("string"!=typeof eh)return C.push({type:"!imageUrl",value:""}),{url:null,linkage:C};if(eh.match(/^(https:\/\/|data:)/i));else{let T=eh.match(tZ);if(null==T)return C.push({type:"!imageUrl-ipfs",value:eh}),{url:null,linkage:C};C.push({type:"imageUrl-ipfs",value:eh}),eh=getIpfsLink(eh)}return C.push({type:"url",value:eh}),{linkage:C,url:eh}}}}}catch(C){}return{linkage:C,url:null}}static async getEnsAddress(C){let T=await C.getNetwork(),N=T.getPlugin("org.ethers.plugins.network.Ens");return(0,eb.hu)(N,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:T}}),N.address}static async #Y(C,T){let N=await EnsResolver.getEnsAddress(C);try{let U=new eQ.CH(N,["function resolver(bytes32) view returns (address)"],C),$=await U.resolver(namehash(T),{enableCcipRead:!0});if($===e$)return null;return $}catch(C){throw C}return null}static async fromName(C,T){let N=T;for(;;){if(""===N||"."===N||"eth"!==T&&"eth"===N)return null;let U=await EnsResolver.#Y(C,N);if(null!=U){let $=new EnsResolver(C,U,T);if(N!==T&&!await $.supportsWildcard())return null;return $}N=N.split(".").slice(1).join(".")}}};let tX=BigInt(0);function allowNull(C,T){return function(N){return null==N?T:C(N)}}function arrayOf(C,T){return N=>{if(T&&null==N)return null;if(!Array.isArray(N))throw Error("not an array");return N.map(T=>C(T))}}function object(C,T){return N=>{let U={};for(let $ in C){let Q=$;if(T&&$ in T&&!(Q in N)){for(let C of T[$])if(C in N){Q=C;break}}try{let T=C[$](N[Q]);void 0!==T&&(U[$]=T)}catch(T){let C=T instanceof Error?T.message:"not-an-error";(0,eb.hu)(!1,`invalid value for value.${$} (${C})`,"BAD_DATA",{value:N})}}return U}}function formatData(C){return(0,eb.en)((0,ex.A7)(C,!0),"invalid data","value",C),C}function formatHash(C){return(0,eb.en)((0,ex.A7)(C,32),"invalid hash","value",C),C}let t0=object({address:e_.K,blockHash:formatHash,blockNumber:eA.Dx,data:formatData,index:eA.Dx,removed:allowNull(function(C){switch(C){case!0:case"true":return!0;case!1:case"false":return!1}(0,eb.en)(!1,`invalid boolean; ${JSON.stringify(C)}`,"value",C)},!1),topics:arrayOf(formatHash),transactionHash:formatHash,transactionIndex:eA.Dx},{index:["logIndex"]}),t1=object({hash:allowNull(formatHash),parentHash:formatHash,parentBeaconBlockRoot:allowNull(formatHash,null),number:eA.Dx,timestamp:eA.Dx,nonce:allowNull(formatData),difficulty:eA.yT,gasLimit:eA.yT,gasUsed:eA.yT,stateRoot:allowNull(formatHash,null),receiptsRoot:allowNull(formatHash,null),blobGasUsed:allowNull(eA.yT,null),excessBlobGas:allowNull(eA.yT,null),miner:allowNull(e_.K),prevRandao:allowNull(formatHash,null),extraData:formatData,baseFeePerGas:allowNull(eA.yT)},{prevRandao:["mixHash"]}),t2=object({transactionIndex:eA.Dx,blockNumber:eA.Dx,transactionHash:formatHash,address:e_.K,topics:arrayOf(formatHash),data:formatData,index:eA.Dx,blockHash:formatHash},{index:["logIndex"]}),t3=object({to:allowNull(e_.K,null),from:allowNull(e_.K,null),contractAddress:allowNull(e_.K,null),index:eA.Dx,root:allowNull(ex.Dv),gasUsed:eA.yT,blobGasUsed:allowNull(eA.yT,null),logsBloom:allowNull(formatData),blockHash:formatHash,hash:formatHash,logs:arrayOf(function(C){return t2(C)}),blockNumber:eA.Dx,cumulativeGasUsed:eA.yT,effectiveGasPrice:allowNull(eA.yT),blobGasPrice:allowNull(eA.yT,null),status:allowNull(eA.Dx),type:allowNull(eA.Dx,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionResponse(C){C.to&&(0,eA.yT)(C.to)===tX&&(C.to="0x0000000000000000000000000000000000000000");let T=object({hash:formatHash,index:allowNull(eA.Dx,void 0),type:C=>"0x"===C||null==C?0:(0,eA.Dx)(C),accessList:allowNull(eL.z,null),blobVersionedHashes:allowNull(arrayOf(formatHash,!0),null),authorizationList:allowNull(arrayOf(C=>{let T;if(C.signature)T=C.signature;else{let N=C.yParity;"0x1b"===N?N=0:"0x1c"===N&&(N=1),T=Object.assign({},C,{yParity:N})}return{address:(0,e_.K)(C.address),chainId:(0,eA.yT)(C.chainId),nonce:(0,eA.yT)(C.nonce),signature:Signature.from(T)}},!1),null),blockHash:allowNull(formatHash,null),blockNumber:allowNull(eA.Dx,null),transactionIndex:allowNull(eA.Dx,null),from:e_.K,gasPrice:allowNull(eA.yT),maxPriorityFeePerGas:allowNull(eA.yT),maxFeePerGas:allowNull(eA.yT),maxFeePerBlobGas:allowNull(eA.yT,null),gasLimit:eA.yT,to:allowNull(e_.K,null),value:eA.yT,nonce:eA.Dx,data:formatData,creates:allowNull(e_.K,null),chainId:allowNull(eA.yT,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(C);if(null==T.to&&null==T.creates&&(T.creates=function(C){let T=(0,e_.K)(C.from),N=(0,eA.yT)(C.nonce,"tx.nonce"),U=N.toString(16);return U="0"===U?"0x":U.length%2?"0x0"+U:"0x"+U,(0,e_.K)((0,ex.QB)((0,eE.w)(encodeRlp([T,U])),12))}(T)),(1===C.type||2===C.type)&&null==C.accessList&&(T.accessList=[]),C.signature?T.signature=Signature.from(C.signature):T.signature=Signature.from(C),null==T.chainId){let C=T.signature.legacyChainId;null!=C&&(T.chainId=C)}return T.blockHash&&(0,eA.yT)(T.blockHash)===tX&&(T.blockHash=null),T}let NetworkPlugin=class NetworkPlugin{name;constructor(C){(0,eI.h)(this,{name:C})}clone(){return new NetworkPlugin(this.name)}};let GasCostPlugin=class GasCostPlugin extends NetworkPlugin{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(C,T){null==C&&(C=0),super(`org.ethers.network.plugins.GasCost#${C||0}`);let N={effectiveBlock:C};function set(C,U){let $=(T||{})[C];null==$&&($=U),(0,eb.en)("number"==typeof $,`invalud value for ${C}`,"costs",T),N[C]=$}set("txBase",21e3),set("txCreate",32e3),set("txDataZero",4),set("txDataNonzero",16),set("txAccessListStorageKey",1900),set("txAccessListAddress",2400),(0,eI.h)(this,N)}clone(){return new GasCostPlugin(this.effectiveBlock,this)}};let EnsPlugin=class EnsPlugin extends NetworkPlugin{address;targetNetwork;constructor(C,T){super("org.ethers.plugins.network.Ens"),(0,eI.h)(this,{address:C||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==T?1:T})}clone(){return new EnsPlugin(this.address,this.targetNetwork)}};let FetchUrlFeeDataNetworkPlugin=class FetchUrlFeeDataNetworkPlugin extends NetworkPlugin{#N;#X;get url(){return this.#N}get processFunc(){return this.#X}constructor(C,T){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#N=C,this.#X=T}clone(){return this}};let t8=new Map;let Network=class Network{#ee;#b;#et;constructor(C,T){this.#ee=C,this.#b=(0,eA.yT)(T),this.#et=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ee}set name(C){this.#ee=C}get chainId(){return this.#b}set chainId(C){this.#b=(0,eA.yT)(C,"chainId")}matches(C){if(null==C)return!1;if("string"==typeof C){try{return this.chainId===(0,eA.yT)(C)}catch(C){}return this.name===C}if("number"==typeof C||"bigint"==typeof C){try{return this.chainId===(0,eA.yT)(C)}catch(C){}return!1}if("object"==typeof C){if(null!=C.chainId){try{return this.chainId===(0,eA.yT)(C.chainId)}catch(C){}return!1}if(null!=C.name)return this.name===C.name}return!1}get plugins(){return Array.from(this.#et.values())}attachPlugin(C){if(this.#et.get(C.name))throw Error(`cannot replace existing plugin: ${C.name} `);return this.#et.set(C.name,C.clone()),this}getPlugin(C){return this.#et.get(C)||null}getPlugins(C){return this.plugins.filter(T=>T.name.split("#")[0]===C)}clone(){let C=new Network(this.name,this.chainId);return this.plugins.forEach(T=>{C.attachPlugin(T.clone())}),C}computeIntrinsicGas(C){let T=this.getPlugin("org.ethers.plugins.network.GasCost")||new GasCostPlugin,N=T.txBase;if(null==C.to&&(N+=T.txCreate),C.data)for(let U=2;U<C.data.length;U+=2)"00"===C.data.substring(U,U+2)?N+=T.txDataZero:N+=T.txDataNonzero;if(C.accessList){let U=(0,eL.z)(C.accessList);for(let C in U)N+=T.txAccessListAddress+T.txAccessListStorageKey*U[C].storageKeys.length}return N}static from(C){if(function(){t4||(t4=!0,registerEth("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),registerEth("ropsten",3,{ensNetwork:3}),registerEth("rinkeby",4,{ensNetwork:4}),registerEth("goerli",5,{ensNetwork:5}),registerEth("kovan",42,{ensNetwork:42}),registerEth("sepolia",11155111,{ensNetwork:11155111}),registerEth("holesky",17e3,{ensNetwork:17e3}),registerEth("classic",61,{}),registerEth("classicKotti",6,{}),registerEth("arbitrum",42161,{ensNetwork:1}),registerEth("arbitrum-goerli",421613,{}),registerEth("arbitrum-sepolia",421614,{}),registerEth("base",8453,{ensNetwork:1}),registerEth("base-goerli",84531,{}),registerEth("base-sepolia",84532,{}),registerEth("bnb",56,{ensNetwork:1}),registerEth("bnbt",97,{}),registerEth("linea",59144,{ensNetwork:1}),registerEth("linea-goerli",59140,{}),registerEth("linea-sepolia",59141,{}),registerEth("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin("https://gasstation.polygon.technology/v2")]}),registerEth("matic-amoy",80002,{}),registerEth("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin("https://gasstation-testnet.polygon.technology/v2")]}),registerEth("optimism",10,{ensNetwork:1,plugins:[]}),registerEth("optimism-goerli",420,{}),registerEth("optimism-sepolia",11155420,{}),registerEth("xdai",100,{ensNetwork:1}));function registerEth(C,T,N){let func=function(){let U=new Network(C,T);return null!=N.ensNetwork&&U.attachPlugin(new EnsPlugin(null,N.ensNetwork)),U.attachPlugin(new GasCostPlugin),(N.plugins||[]).forEach(C=>{U.attachPlugin(C)}),U};Network.register(C,func),Network.register(T,func),N.altNames&&N.altNames.forEach(C=>{Network.register(C,func)})}}(),null==C)return Network.from("mainnet");if("number"==typeof C&&(C=BigInt(C)),"string"==typeof C||"bigint"==typeof C){let T=t8.get(C);if(T)return T();if("bigint"==typeof C)return new Network("unknown",C);(0,eb.en)(!1,"unknown network","network",C)}if("function"==typeof C.clone){let T=C.clone();return T}if("object"==typeof C){(0,eb.en)("string"==typeof C.name&&"number"==typeof C.chainId,"invalid network object name or chainId","network",C);let T=new Network(C.name,C.chainId);return(C.ensAddress||null!=C.ensNetwork)&&T.attachPlugin(new EnsPlugin(C.ensAddress,C.ensNetwork)),T}(0,eb.en)(!1,"invalid network","network",C)}static register(C,T){"number"==typeof C&&(C=BigInt(C));let N=t8.get(C);N&&(0,eb.en)(!1,`conflicting network for ${JSON.stringify(N.name)}`,"nameOrChainId",C),t8.set(C,T)}};function parseUnits(C,T){let N=String(C);if(!N.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${C}`);let U=N.split(".");if(1===U.length&&U.push(""),2!==U.length)throw Error(`invalid gwei value: ${C}`);for(;U[1].length<T;)U[1]+="0";if(U[1].length>9){let C=BigInt(U[1].substring(0,9));!U[1].substring(9).match(/^0+$/)&&C++,U[1]=C.toString()}return BigInt(U[0]+U[1])}function getGasStationPlugin(C){return new FetchUrlFeeDataNetworkPlugin(C,async(C,T,N)=>{let U;N.setHeader("User-Agent","ethers");try{let[T,$]=await Promise.all([N.send(),C()]);U=T;let Q=U.bodyJson.standard,Y={gasPrice:$.gasPrice,maxFeePerGas:parseUnits(Q.maxFee,9),maxPriorityFeePerGas:parseUnits(Q.maxPriorityFee,9)};return Y}catch(C){(0,eb.hu)(!1,`error encountered with polygon gas station (${JSON.stringify(N.url)})`,"SERVER_ERROR",{request:N,response:U,error:C})}})}let t4=!1;var t6=N(4101);function copy(C){return JSON.parse(JSON.stringify(C))}let PollingBlockSubscriber=class PollingBlockSubscriber{#er;#ei;#es;#en;constructor(C){this.#er=C,this.#ei=null,this.#es=4e3,this.#en=-2}get pollingInterval(){return this.#es}set pollingInterval(C){this.#es=C}async #eo(){try{let C=await this.#er.getBlockNumber();if(-2===this.#en){this.#en=C;return}if(C!==this.#en){for(let T=this.#en+1;T<=C;T++){if(null==this.#ei)return;await this.#er.emit("block",T)}this.#en=C}}catch(C){}null!=this.#ei&&(this.#ei=this.#er._setTimeout(this.#eo.bind(this),this.#es))}start(){this.#ei||(this.#ei=this.#er._setTimeout(this.#eo.bind(this),this.#es),this.#eo())}stop(){this.#ei&&(this.#er._clearTimeout(this.#ei),this.#ei=null)}pause(C){this.stop(),C&&(this.#en=-2)}resume(){this.start()}};let OnBlockSubscriber=class OnBlockSubscriber{#er;#eo;#ea;constructor(C){this.#er=C,this.#ea=!1,this.#eo=C=>{this._poll(C,this.#er)}}async _poll(C,T){throw Error("sub-classes must override this")}start(){this.#ea||(this.#ea=!0,this.#eo(-2),this.#er.on("block",this.#eo))}stop(){this.#ea&&(this.#ea=!1,this.#er.off("block",this.#eo))}pause(C){this.stop()}resume(){this.start()}};let PollingBlockTagSubscriber=class PollingBlockTagSubscriber extends OnBlockSubscriber{#el;#ec;constructor(C,T){super(C),this.#el=T,this.#ec=-2}pause(C){C&&(this.#ec=-2),super.pause(C)}async _poll(C,T){let N=await T.getBlock(this.#el);null!=N&&(-2===this.#ec?this.#ec=N.number:N.number>this.#ec&&(T.emit(this.#el,N.number),this.#ec=N.number))}};let PollingOrphanSubscriber=class PollingOrphanSubscriber extends OnBlockSubscriber{#eh;constructor(C,T){super(C),this.#eh=copy(T)}async _poll(C,T){throw Error("@TODO")}};let PollingTransactionSubscriber=class PollingTransactionSubscriber extends OnBlockSubscriber{#eu;constructor(C,T){super(C),this.#eu=T}async _poll(C,T){let N=await T.getTransactionReceipt(this.#eu);N&&T.emit(this.#eu,N)}};let PollingEventSubscriber=class PollingEventSubscriber{#er;#eh;#ei;#ea;#en;constructor(C,T){this.#er=C,this.#eh=copy(T),this.#ei=this.#eo.bind(this),this.#ea=!1,this.#en=-2}async #eo(C){if(-2===this.#en)return;let T=copy(this.#eh);T.fromBlock=this.#en+1,T.toBlock=C;let N=await this.#er.getLogs(T);if(0===N.length){this.#en<C-60&&(this.#en=C-60);return}for(let C of N)this.#er.emit(this.#eh,C),this.#en=C.blockNumber}start(){this.#ea||(this.#ea=!0,-2===this.#en&&this.#er.getBlockNumber().then(C=>{this.#en=C}),this.#er.on("block",this.#ei))}stop(){this.#ea&&(this.#ea=!1,this.#er.off("block",this.#ei))}pause(C){this.stop(),C&&(this.#en=-2)}resume(){this.start()}};let t5=BigInt(2);function isPromise(C){return C&&"function"==typeof C.then}function getTag(C,T){return C+":"+JSON.stringify(T,(C,T)=>{if(null==T)return"null";if("bigint"==typeof T)return`bigint:${T.toString()}`;if("string"==typeof T)return T.toLowerCase();if("object"==typeof T&&!Array.isArray(T)){let C=Object.keys(T);return C.sort(),C.reduce((C,N)=>(C[N]=T[N],C),{})}return T})}let UnmanagedSubscriber=class UnmanagedSubscriber{name;constructor(C){(0,eI.h)(this,{name:C})}start(){}stop(){}pause(C){}resume(){}};function concisify(C){return(C=Array.from(new Set(C).values())).sort(),C}async function getSubscription(C,T){if(null==C)throw Error("invalid event");if(Array.isArray(C)&&(C={topics:C}),"string"==typeof C)switch(C){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:C,tag:C}}if((0,ex.A7)(C,32)){let T=C.toLowerCase();return{type:"transaction",tag:getTag("tx",{hash:T}),hash:T}}if(C.orphan){let T=C;return{type:"orphan",tag:getTag("orphan",T),filter:JSON.parse(JSON.stringify(T))}}if(C.address||C.topics){let N=C,U={topics:(N.topics||[]).map(C=>null==C?null:Array.isArray(C)?concisify(C.map(C=>C.toLowerCase())):C.toLowerCase())};if(N.address){let C=[],$=[],addAddress=N=>{(0,ex.A7)(N)?C.push(N):$.push((async()=>{C.push(await (0,ev.ru)(N,T))})())};Array.isArray(N.address)?N.address.forEach(addAddress):addAddress(N.address),$.length&&await Promise.all($),U.address=concisify(C.map(C=>C.toLowerCase()))}return{filter:U,tag:getTag("event",U),type:"event"}}(0,eb.en)(!1,"unknown ProviderEvent","event",C)}function abstract_provider_getTime(){return new Date().getTime()}let t9={cacheTimeout:250,pollingInterval:4e3};let AbstractProvider=class AbstractProvider{#ed;#et;#ef;#ep;#eg;#ey;#em;#eb;#ew;#e_;#ev;#eE;constructor(C,T){if(this.#eE=Object.assign({},t9,T||{}),"any"===C)this.#ey=!0,this.#eg=null;else if(C){let T=Network.from(C);this.#ey=!1,this.#eg=Promise.resolve(T),setTimeout(()=>{this.emit("network",T,null)},0)}else this.#ey=!1,this.#eg=null;this.#eb=-1,this.#em=new Map,this.#ed=new Map,this.#et=new Map,this.#ef=null,this.#ep=!1,this.#ew=1,this.#e_=new Map,this.#ev=!1}get pollingInterval(){return this.#eE.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#et.values())}attachPlugin(C){if(this.#et.get(C.name))throw Error(`cannot replace existing plugin: ${C.name} `);return this.#et.set(C.name,C.connect(this)),this}getPlugin(C){return this.#et.get(C)||null}get disableCcipRead(){return this.#ev}set disableCcipRead(C){this.#ev=!!C}async #ex(C){let T=this.#eE.cacheTimeout;if(T<0)return await this._perform(C);let N=getTag(C.method,C),U=this.#em.get(N);return U||(U=this._perform(C),this.#em.set(N,U),setTimeout(()=>{this.#em.get(N)===U&&this.#em.delete(N)},T)),await U}async ccipReadFetch(C,T,N){if(this.disableCcipRead||0===N.length||null==C.to)return null;let U=C.to.toLowerCase(),$=T.toLowerCase(),Q=[];for(let T=0;T<N.length;T++){let Y;let X=N[T],ee=X.replace("{sender}",U).replace("{data}",$),es=new fetch_FetchRequest(ee);-1===X.indexOf("{data}")&&(es.body={data:$,sender:U}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:es,index:T,urls:N});let el="unknown error";try{Y=await es.send()}catch(C){Q.push(C.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:es,result:{error:C}});continue}try{let C=Y.bodyJson;if(C.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:es,result:C}),C.data;C.message&&(el=C.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:es,result:C})}catch(C){}(0,eb.hu)(Y.statusCode<400||Y.statusCode>=500,`response not found during CCIP fetch: ${el}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:C,info:{url:X,errorMessage:el}}),Q.push(el)}(0,eb.hu)(!1,`error encountered during CCIP fetch: ${Q.map(C=>JSON.stringify(C)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:C,info:{urls:N,errorMessages:Q}})}_wrapBlock(C,T){return new t6.gO(function(C){let T=t1(C);return T.transactions=C.transactions.map(C=>"string"==typeof C?C:formatTransactionResponse(C)),T}(C),this)}_wrapLog(C,T){return new t6.Zb(t0(C),this)}_wrapTransactionReceipt(C,T){return new t6.IX(t3(C),this)}_wrapTransactionResponse(C,T){return new t6.Mw(formatTransactionResponse(C),this)}_detectNetwork(){(0,eb.hu)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(C){(0,eb.hu)(!1,`unsupported method: ${C.method}`,"UNSUPPORTED_OPERATION",{operation:C.method,info:C})}async getBlockNumber(){let C=(0,eA.Dx)(await this.#ex({method:"getBlockNumber"}),"%response");return this.#eb>=0&&(this.#eb=C),C}_getAddress(C){return(0,ev.ru)(C,this)}_getBlockTag(C){if(null==C)return"latest";switch(C){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return C}return(0,ex.A7)(C)?(0,ex.A7)(C,32)?C:(0,eA.B4)(C):("bigint"==typeof C&&(C=(0,eA.Dx)(C,"blockTag")),"number"==typeof C)?C>=0?(0,eA.B4)(C):this.#eb>=0?(0,eA.B4)(this.#eb+C):this.getBlockNumber().then(T=>(0,eA.B4)(T+C)):void(0,eb.en)(!1,"invalid blockTag","blockTag",C)}_getFilter(C){let T,N;let U=(C.topics||[]).map(C=>null==C?null:Array.isArray(C)?concisify(C.map(C=>C.toLowerCase())):C.toLowerCase()),$="blockHash"in C?C.blockHash:void 0,resolve=(C,T,N)=>{let Q;switch(C.length){case 0:break;case 1:Q=C[0];break;default:C.sort(),Q=C}if($&&(null!=T||null!=N))throw Error("invalid filter");let Y={};return Q&&(Y.address=Q),U.length&&(Y.topics=U),T&&(Y.fromBlock=T),N&&(Y.toBlock=N),$&&(Y.blockHash=$),Y},Q=[];if(C.address){if(Array.isArray(C.address))for(let T of C.address)Q.push(this._getAddress(T));else Q.push(this._getAddress(C.address))}return"fromBlock"in C&&(T=this._getBlockTag(C.fromBlock)),("toBlock"in C&&(N=this._getBlockTag(C.toBlock)),Q.filter(C=>"string"!=typeof C).length||null!=T&&"string"!=typeof T||null!=N&&"string"!=typeof N)?Promise.all([Promise.all(Q),T,N]).then(C=>resolve(C[0],C[1],C[2])):resolve(Q,T,N)}_getTransactionRequest(C){let T=(0,t6.kK)(C),N=[];if(["to","from"].forEach(C=>{if(null==T[C])return;let U=(0,ev.ru)(T[C],this);isPromise(U)?N.push(async function(){T[C]=await U}()):T[C]=U}),null!=T.blockTag){let C=this._getBlockTag(T.blockTag);isPromise(C)?N.push(async function(){T.blockTag=await C}()):T.blockTag=C}return N.length?async function(){return await Promise.all(N),T}():T}async getNetwork(){if(null==this.#eg){let C=(async()=>{try{let C=await this._detectNetwork();return this.emit("network",C,null),C}catch(T){throw this.#eg===C&&(this.#eg=null),T}})();return this.#eg=C,(await C).clone()}let C=this.#eg,[T,N]=await Promise.all([C,this._detectNetwork()]);return T.chainId!==N.chainId&&(this.#ey?(this.emit("network",N,T),this.#eg===C&&(this.#eg=Promise.resolve(N))):(0,eb.hu)(!1,`network changed: ${T.chainId} => ${N.chainId} `,"NETWORK_ERROR",{event:"changed"})),T.clone()}async getFeeData(){let C=await this.getNetwork(),getFeeDataFunc=async()=>{let{_block:T,gasPrice:N,priorityFee:U}=await (0,eI.m)({_block:this.#eA("latest",!1),gasPrice:(async()=>{try{let C=await this.#ex({method:"getGasPrice"});return(0,eA.yT)(C,"%response")}catch(C){}return null})(),priorityFee:(async()=>{try{let C=await this.#ex({method:"getPriorityFee"});return(0,eA.yT)(C,"%response")}catch(C){}return null})()}),$=null,Q=null,Y=this._wrapBlock(T,C);return Y&&Y.baseFeePerGas&&(Q=null!=U?U:BigInt("1000000000"),$=Y.baseFeePerGas*t5+Q),new t6.jW(N,$,Q)},T=C.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(T){let C=new fetch_FetchRequest(T.url),N=await T.processFunc(getFeeDataFunc,this,C);return new t6.jW(N.gasPrice,N.maxFeePerGas,N.maxPriorityFeePerGas)}return await getFeeDataFunc()}async estimateGas(C){let T=this._getTransactionRequest(C);return isPromise(T)&&(T=await T),(0,eA.yT)(await this.#ex({method:"estimateGas",transaction:T}),"%response")}async #eI(C,T,N){(0,eb.hu)(N<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},C,{blockTag:T,enableCcipRead:!0})});let U=(0,t6.kK)(C);try{return(0,ex.Dv)(await this._perform({method:"call",transaction:U,blockTag:T}))}catch(C){if(!this.disableCcipRead&&(0,eb.Hl)(C)&&C.data&&N>=0&&"latest"===T&&null!=U.to&&"0x556f1830"===(0,ex.QB)(C.data,0,4)){let $;let Q=C.data,Y=await (0,ev.ru)(U.to,this);try{$=function(C){let T={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,eb.hu)((0,ex.M5)(C)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let N=(0,ex.QB)(C,0,32);(0,eb.hu)((0,ex.QB)(N,0,12)===(0,ex.QB)(re,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),T.sender=(0,ex.QB)(N,12);try{let N=[],U=(0,eA.Dx)((0,ex.QB)(C,32,64)),$=(0,eA.Dx)((0,ex.QB)(C,U,U+32)),Q=(0,ex.QB)(C,U+32);for(let C=0;C<$;C++){let T=function(C,T){try{let N=_parseBytes(C,T);if(N)return(0,eG.ZN)(N)}catch(C){}return null}(Q,32*C);if(null==T)throw Error("abort");N.push(T)}T.urls=N}catch(C){(0,eb.hu)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let N=_parseBytes(C,64);if(null==N)throw Error("abort");T.calldata=N}catch(C){(0,eb.hu)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,eb.hu)((0,ex.QB)(C,100,128)===(0,ex.QB)(re,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),T.selector=(0,ex.QB)(C,96,100);try{let N=_parseBytes(C,128);if(null==N)throw Error("abort");T.extraData=N}catch(C){(0,eb.hu)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return T.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(C=>T[C]),T}((0,ex.QB)(C.data,4))}catch(C){(0,eb.hu)(!1,C.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:U,info:{data:Q}})}(0,eb.hu)($.sender.toLowerCase()===Y.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:Q,reason:"OffchainLookup",transaction:U,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:$.errorArgs}});let X=await this.ccipReadFetch(U,$.calldata,$.urls);(0,eb.hu)(null!=X,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:U,info:{data:C.data,errorArgs:$.errorArgs}});let ee={to:Y,data:(0,ex.zo)([$.selector,function(C){let T=[],N=0;for(let U=0;U<C.length;U++)T.push(t7),N+=32;for(let U=0;U<C.length;U++){let $=(0,ex.Pw)(C[U]);T[U]=numPad(N),T.push(numPad($.length)),T.push(function(C){if(C.length%32==0)return C;let T=new Uint8Array(32*Math.ceil(C.length/32));return T.set(C),T}($)),N+=32+32*Math.ceil($.length/32)}return(0,ex.zo)(T)}([X,$.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:ee});try{let C=await this.#eI(ee,T,N+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},ee),result:C}),C}catch(C){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},ee),error:C}),C}}throw C}}async #eP(C){let{value:T}=await (0,eI.m)({network:this.getNetwork(),value:C});return T}async call(C){let{tx:T,blockTag:N}=await (0,eI.m)({tx:this._getTransactionRequest(C),blockTag:this._getBlockTag(C.blockTag)});return await this.#eP(this.#eI(T,N,C.enableCcipRead?0:-1))}async #eS(C,T,N){let U=this._getAddress(T),$=this._getBlockTag(N);return("string"!=typeof U||"string"!=typeof $)&&([U,$]=await Promise.all([U,$])),await this.#eP(this.#ex(Object.assign(C,{address:U,blockTag:$})))}async getBalance(C,T){return(0,eA.yT)(await this.#eS({method:"getBalance"},C,T),"%response")}async getTransactionCount(C,T){return(0,eA.Dx)(await this.#eS({method:"getTransactionCount"},C,T),"%response")}async getCode(C,T){return(0,ex.Dv)(await this.#eS({method:"getCode"},C,T))}async getStorage(C,T,N){let U=(0,eA.yT)(T,"position");return(0,ex.Dv)(await this.#eS({method:"getStorage",position:U},C,N))}async broadcastTransaction(C){let{blockNumber:T,hash:N,network:U}=await (0,eI.m)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:C}),network:this.getNetwork()}),$=Transaction.from(C);if($.hash!==N)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse($,U).replaceableTransaction(T)}async #eA(C,T){if((0,ex.A7)(C,32))return await this.#ex({method:"getBlock",blockHash:C,includeTransactions:T});let N=this._getBlockTag(C);return"string"!=typeof N&&(N=await N),await this.#ex({method:"getBlock",blockTag:N,includeTransactions:T})}async getBlock(C,T){let{network:N,params:U}=await (0,eI.m)({network:this.getNetwork(),params:this.#eA(C,!!T)});return null==U?null:this._wrapBlock(U,N)}async getTransaction(C){let{network:T,params:N}=await (0,eI.m)({network:this.getNetwork(),params:this.#ex({method:"getTransaction",hash:C})});return null==N?null:this._wrapTransactionResponse(N,T)}async getTransactionReceipt(C){let{network:T,params:N}=await (0,eI.m)({network:this.getNetwork(),params:this.#ex({method:"getTransactionReceipt",hash:C})});if(null==N)return null;if(null==N.gasPrice&&null==N.effectiveGasPrice){let T=await this.#ex({method:"getTransaction",hash:C});if(null==T)throw Error("report this; could not find tx or effectiveGasPrice");N.effectiveGasPrice=T.gasPrice}return this._wrapTransactionReceipt(N,T)}async getTransactionResult(C){let{result:T}=await (0,eI.m)({network:this.getNetwork(),result:this.#ex({method:"getTransactionResult",hash:C})});return null==T?null:(0,ex.Dv)(T)}async getLogs(C){let T=this._getFilter(C);isPromise(T)&&(T=await T);let{network:N,params:U}=await (0,eI.m)({network:this.getNetwork(),params:this.#ex({method:"getLogs",filter:T})});return U.map(C=>this._wrapLog(C,N))}_getProvider(C){(0,eb.hu)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(C){return await EnsResolver.fromName(this,C)}async getAvatar(C){let T=await this.getResolver(C);return T?await T.getAvatar():null}async resolveName(C){let T=await this.getResolver(C);return T?await T.getAddress():null}async lookupAddress(C){C=(0,e_.K)(C);let T=namehash(C.substring(2).toLowerCase()+".addr.reverse");try{let N=await EnsResolver.getEnsAddress(this),U=new eQ.CH(N,["function resolver(bytes32) view returns (address)"],this),$=await U.resolver(T);if(null==$||$===e$)return null;let Q=new eQ.CH($,["function name(bytes32) view returns (string)"],this),Y=await Q.name(T),X=await this.resolveName(Y);if(X!==C)return null;return Y}catch(C){if((0,eb.VZ)(C,"BAD_DATA")&&"0x"===C.value||(0,eb.VZ)(C,"CALL_EXCEPTION"))return null;throw C}return null}async waitForTransaction(C,T,N){let U=null!=T?T:1;return 0===U?this.getTransactionReceipt(C):new Promise(async(T,$)=>{let Q=null,listener=async N=>{try{let $=await this.getTransactionReceipt(C);if(null!=$&&N-$.blockNumber+1>=U){T($),Q&&(clearTimeout(Q),Q=null);return}}catch(C){console.log("EEE",C)}this.once("block",listener)};null!=N&&(Q=setTimeout(()=>{null!=Q&&(Q=null,this.off("block",listener),$((0,eb.wf)("timeout","TIMEOUT",{reason:"timeout"})))},N)),listener(await this.getBlockNumber())})}async waitForBlock(C){(0,eb.hu)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(C){let T=this.#e_.get(C);T&&(T.timer&&clearTimeout(T.timer),this.#e_.delete(C))}_setTimeout(C,T){null==T&&(T=0);let N=this.#ew++,func=()=>{this.#e_.delete(N),C()};if(this.paused)this.#e_.set(N,{timer:null,func,time:T});else{let C=setTimeout(func,T);this.#e_.set(N,{timer:C,func,time:abstract_provider_getTime()})}return N}_forEachSubscriber(C){for(let T of this.#ed.values())C(T.subscriber)}_getSubscriber(C){switch(C.type){case"debug":case"error":case"network":return new UnmanagedSubscriber(C.type);case"block":{let C=new PollingBlockSubscriber(this);return C.pollingInterval=this.pollingInterval,C}case"safe":case"finalized":return new PollingBlockTagSubscriber(this,C.type);case"event":return new PollingEventSubscriber(this,C.filter);case"transaction":return new PollingTransactionSubscriber(this,C.hash);case"orphan":return new PollingOrphanSubscriber(this,C.filter)}throw Error(`unsupported event: ${C.type}`)}_recoverSubscriber(C,T){for(let N of this.#ed.values())if(N.subscriber===C){N.started&&N.subscriber.stop(),N.subscriber=T,N.started&&T.start(),null!=this.#ef&&T.pause(this.#ef);break}}async #eD(C,T){let N=await getSubscription(C,this);return"event"===N.type&&T&&T.length>0&&!0===T[0].removed&&(N=await getSubscription({orphan:"drop-log",log:T[0]},this)),this.#ed.get(N.tag)||null}async #eB(C){let T=await getSubscription(C,this),N=T.tag,U=this.#ed.get(N);if(!U){let C=this._getSubscriber(T),$=new WeakMap,Q=new Map;U={subscriber:C,tag:N,addressableMap:$,nameMap:Q,started:!1,listeners:[]},this.#ed.set(N,U)}return U}async on(C,T){let N=await this.#eB(C);return N.listeners.push({listener:T,once:!1}),N.started||(N.subscriber.start(),N.started=!0,null!=this.#ef&&N.subscriber.pause(this.#ef)),this}async once(C,T){let N=await this.#eB(C);return N.listeners.push({listener:T,once:!0}),N.started||(N.subscriber.start(),N.started=!0,null!=this.#ef&&N.subscriber.pause(this.#ef)),this}async emit(C,...T){let N=await this.#eD(C,T);if(!N||0===N.listeners.length)return!1;let U=N.listeners.length;return N.listeners=N.listeners.filter(({listener:N,once:U})=>{let $=new tQ.Z(this,U?null:N,C);try{N.call(this,...T,$)}catch(C){}return!U}),0===N.listeners.length&&(N.started&&N.subscriber.stop(),this.#ed.delete(N.tag)),U>0}async listenerCount(C){if(C){let T=await this.#eD(C);return T?T.listeners.length:0}let T=0;for(let{listeners:C}of this.#ed.values())T+=C.length;return T}async listeners(C){if(C){let T=await this.#eD(C);return T?T.listeners.map(({listener:C})=>C):[]}let T=[];for(let{listeners:C}of this.#ed.values())T=T.concat(C.map(({listener:C})=>C));return T}async off(C,T){let N=await this.#eD(C);if(!N)return this;if(T){let C=N.listeners.map(({listener:C})=>C).indexOf(T);C>=0&&N.listeners.splice(C,1)}return T&&0!==N.listeners.length||(N.started&&N.subscriber.stop(),this.#ed.delete(N.tag)),this}async removeAllListeners(C){if(C){let{tag:T,started:N,subscriber:U}=await this.#eB(C);N&&U.stop(),this.#ed.delete(T)}else for(let[C,{started:T,subscriber:N}]of this.#ed)T&&N.stop(),this.#ed.delete(C);return this}async addListener(C,T){return await this.on(C,T)}async removeListener(C,T){return this.off(C,T)}get destroyed(){return this.#ep}destroy(){for(let C of(this.removeAllListeners(),this.#e_.keys()))this._clearTimeout(C);this.#ep=!0}get paused(){return null!=this.#ef}set paused(C){!!C!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(C){if(this.#eb=-1,null!=this.#ef){if(!!C==this.#ef)return;(0,eb.hu)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let T of(this._forEachSubscriber(T=>T.pause(C)),this.#ef=!!C,this.#e_.values()))T.timer&&clearTimeout(T.timer),T.time=abstract_provider_getTime()-T.time}resume(){if(null!=this.#ef)for(let C of(this._forEachSubscriber(C=>C.resume()),this.#ef=null,this.#e_.values())){let T=C.time;T<0&&(T=0),C.time=abstract_provider_getTime(),setTimeout(C.func,T)}}};function _parseBytes(C,T){if("0x"===C)return null;try{let N=(0,eA.Dx)((0,ex.QB)(C,T,T+32)),U=(0,eA.Dx)((0,ex.QB)(C,N,N+32));return(0,ex.QB)(C,N+32,N+32+U)}catch(C){}return null}function numPad(C){let T=(0,eA.ot)(C);if(T.length>32)throw Error("internal; should not happen");let N=new Uint8Array(32);return N.set(T,32-T.length),N}let t7=new Uint8Array([]),re="0x0000000000000000000000000000000000000000000000000000000000000000";function checkProvider(C,T){if(C.provider)return C.provider;(0,eb.hu)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:T})}async function populate(C,T){let N=(0,t6.kK)(T);if(null!=N.to&&(N.to=(0,ev.ru)(N.to,C)),null!=N.from){let T=N.from;N.from=Promise.all([C.getAddress(),(0,ev.ru)(T,C)]).then(([C,T])=>((0,eb.en)(C.toLowerCase()===T.toLowerCase(),"transaction from mismatch","tx.from",T),C))}else N.from=C.getAddress();return await (0,eI.m)(N)}let AbstractSigner=class AbstractSigner{provider;constructor(C){(0,eI.h)(this,{provider:C||null})}async getNonce(C){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),C)}async populateCall(C){let T=await populate(this,C);return T}async populateTransaction(C){let T=checkProvider(this,"populateTransaction"),N=await populate(this,C);null==N.nonce&&(N.nonce=await this.getNonce("pending")),null==N.gasLimit&&(N.gasLimit=await this.estimateGas(N));let U=await this.provider.getNetwork();if(null!=N.chainId){let T=(0,eA.yT)(N.chainId);(0,eb.en)(T===U.chainId,"transaction chainId mismatch","tx.chainId",C.chainId)}else N.chainId=U.chainId;let $=null!=N.maxFeePerGas||null!=N.maxPriorityFeePerGas;if(null!=N.gasPrice&&(2===N.type||$)?(0,eb.en)(!1,"eip-1559 transaction do not support gasPrice","tx",C):(0===N.type||1===N.type)&&$&&(0,eb.en)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",C),(2===N.type||null==N.type)&&null!=N.maxFeePerGas&&null!=N.maxPriorityFeePerGas)N.type=2;else if(0===N.type||1===N.type){let C=await T.getFeeData();(0,eb.hu)(null!=C.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==N.gasPrice&&(N.gasPrice=C.gasPrice)}else{let C=await T.getFeeData();if(null==N.type){if(null!=C.maxFeePerGas&&null!=C.maxPriorityFeePerGas){if(N.authorizationList&&N.authorizationList.length?N.type=4:N.type=2,null!=N.gasPrice){let C=N.gasPrice;delete N.gasPrice,N.maxFeePerGas=C,N.maxPriorityFeePerGas=C}else null==N.maxFeePerGas&&(N.maxFeePerGas=C.maxFeePerGas),null==N.maxPriorityFeePerGas&&(N.maxPriorityFeePerGas=C.maxPriorityFeePerGas)}else null!=C.gasPrice?((0,eb.hu)(!$,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==N.gasPrice&&(N.gasPrice=C.gasPrice),N.type=0):(0,eb.hu)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}else(2===N.type||3===N.type||4===N.type)&&(null==N.maxFeePerGas&&(N.maxFeePerGas=C.maxFeePerGas),null==N.maxPriorityFeePerGas&&(N.maxPriorityFeePerGas=C.maxPriorityFeePerGas))}return await (0,eI.m)(N)}async populateAuthorization(C){let T=Object.assign({},C);return null==T.chainId&&(T.chainId=(await checkProvider(this,"getNetwork").getNetwork()).chainId),null==T.nonce&&(T.nonce=await this.getNonce()),T}async estimateGas(C){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(C))}async call(C){return checkProvider(this,"call").call(await this.populateCall(C))}async resolveName(C){let T=checkProvider(this,"resolveName");return await T.resolveName(C)}async sendTransaction(C){let T=checkProvider(this,"sendTransaction"),N=await this.populateTransaction(C);delete N.from;let U=Transaction.from(N);return await T.broadcastTransaction(await this.signTransaction(U))}authorize(C){(0,eb.hu)(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}};let FilterIdSubscriber=class FilterIdSubscriber{#er;#eC;#ei;#ea;#eO;#eR;constructor(C){this.#er=C,this.#eC=null,this.#ei=this.#eo.bind(this),this.#ea=!1,this.#eO=null,this.#eR=!1}_subscribe(C){throw Error("subclasses must override this")}_emitResults(C,T){throw Error("subclasses must override this")}_recover(C){throw Error("subclasses must override this")}async #eo(C){try{null==this.#eC&&(this.#eC=this._subscribe(this.#er));let C=null;try{C=await this.#eC}catch(C){if(!(0,eb.VZ)(C,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==C.operation)throw C}if(null==C){this.#eC=null,this.#er._recoverSubscriber(this,this._recover(this.#er));return}let T=await this.#er.getNetwork();if(this.#eO||(this.#eO=T),this.#eO.chainId!==T.chainId)throw Error("chaid changed");if(this.#eR)return;let N=await this.#er.send("eth_getFilterChanges",[C]);await this._emitResults(this.#er,N)}catch(C){console.log("@TODO",C)}this.#er.once("block",this.#ei)}#eT(){let C=this.#eC;C&&(this.#eC=null,C.then(C=>{this.#er.destroyed||this.#er.send("eth_uninstallFilter",[C])}))}start(){this.#ea||(this.#ea=!0,this.#eo(-2))}stop(){this.#ea&&(this.#ea=!1,this.#eR=!0,this.#eT(),this.#er.off("block",this.#ei))}pause(C){C&&this.#eT(),this.#er.off("block",this.#ei)}resume(){this.start()}};let FilterIdEventSubscriber=class FilterIdEventSubscriber extends FilterIdSubscriber{#eN;constructor(C,T){super(C),this.#eN=JSON.parse(JSON.stringify(T))}_recover(C){return new PollingEventSubscriber(C,this.#eN)}async _subscribe(C){let T=await C.send("eth_newFilter",[this.#eN]);return T}async _emitResults(C,T){for(let N of T)C.emit(this.#eN,C._wrapLog(N,C._network))}};let FilterIdPendingSubscriber=class FilterIdPendingSubscriber extends FilterIdSubscriber{async _subscribe(C){return await C.send("eth_newPendingTransactionFilter",[])}async _emitResults(C,T){for(let N of T)C.emit("pending",N)}};let rr="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy(C){if(null==C||rr.indexOf(typeof C)>=0||"function"==typeof C.getAddress)return C;if(Array.isArray(C))return C.map(deepCopy);if("object"==typeof C)return Object.keys(C).reduce((T,N)=>(T[N]=C[N],T),{});throw Error(`should not happen: ${C} (${typeof C})`)}function getLowerCase(C){return C?C.toLowerCase():C}function isPollable(C){return C&&"number"==typeof C.pollingInterval}let ri={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};let JsonRpcSigner=class JsonRpcSigner extends AbstractSigner{address;constructor(C,T){super(C),T=(0,e_.K)(T),(0,eI.h)(this,{address:T})}connect(C){(0,eb.hu)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(C){return await this.populateCall(C)}async sendUncheckedTransaction(C){let T=deepCopy(C),N=[];if(T.from){let U=T.from;N.push((async()=>{let N=await (0,ev.ru)(U,this.provider);(0,eb.en)(null!=N&&N.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",C),T.from=N})())}else T.from=this.address;if(null==T.gasLimit&&N.push((async()=>{T.gasLimit=await this.provider.estimateGas({...T,from:this.address})})()),null!=T.to){let C=T.to;N.push((async()=>{T.to=await (0,ev.ru)(C,this.provider)})())}N.length&&await Promise.all(N);let U=this.provider.getRpcTransaction(T);return this.provider.send("eth_sendTransaction",[U])}async sendTransaction(C){let T=await this.provider.getBlockNumber(),N=await this.sendUncheckedTransaction(C);return await new Promise((C,U)=>{let $=[1e3,100],Q=0,checkTx=async()=>{try{let U=await this.provider.getTransaction(N);if(null!=U){C(U.replaceableTransaction(T));return}}catch(C){if((0,eb.VZ)(C,"CANCELLED")||(0,eb.VZ)(C,"BAD_DATA")||(0,eb.VZ)(C,"NETWORK_ERROR")||(0,eb.VZ)(C,"UNSUPPORTED_OPERATION")){null==C.info&&(C.info={}),C.info.sendTransactionHash=N,U(C);return}if((0,eb.VZ)(C,"INVALID_ARGUMENT")&&(Q++,null==C.info&&(C.info={}),C.info.sendTransactionHash=N,Q>10)){U(C);return}this.provider.emit("error",(0,eb.wf)("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:C}))}this.provider._setTimeout(()=>{checkTx()},$.pop()||4e3)};checkTx()})}async signTransaction(C){let T=deepCopy(C);if(T.from){let N=await (0,ev.ru)(T.from,this.provider);(0,eb.en)(null!=N&&N.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",C),T.from=N}else T.from=this.address;let N=this.provider.getRpcTransaction(T);return await this.provider.send("eth_signTransaction",[N])}async signMessage(C){let T="string"==typeof C?(0,eG.Y0)(C):C;return await this.provider.send("personal_sign",[(0,ex.Dv)(T),this.address.toLowerCase()])}async signTypedData(C,T,N){let U=deepCopy(N),$=await TypedDataEncoder.resolveNames(C,T,U,async C=>{let T=await (0,ev.ru)(C);return(0,eb.en)(null!=T,"TypedData does not support null address","value",C),T});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload($.domain,T,$.value))])}async unlock(C){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),C,null])}async _legacySignMessage(C){let T="string"==typeof C?(0,eG.Y0)(C):C;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,ex.Dv)(T)])}};let JsonRpcApiProvider=class JsonRpcApiProvider extends AbstractProvider{#eE;#ek;#eU;#eL;#eM;#eO;#eF;#ej(){if(this.#eL)return;let C=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#eL=setTimeout(()=>{this.#eL=null;let C=this.#eU;for(this.#eU=[];C.length;){let T=[C.shift()];for(;C.length&&T.length!==this.#eE.batchMaxCount;){T.push(C.shift());let N=JSON.stringify(T.map(C=>C.payload));if(N.length>this.#eE.batchMaxSize){C.unshift(T.pop());break}}(async()=>{let C=1===T.length?T[0].payload:T.map(C=>C.payload);this.emit("debug",{action:"sendRpcPayload",payload:C});try{let N=await this._send(C);for(let{resolve:C,reject:U,payload:$}of(this.emit("debug",{action:"receiveRpcResult",result:N}),T)){if(this.destroyed){U((0,eb.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:$.method}));continue}let T=N.filter(C=>C.id===$.id)[0];if(null==T){let C=(0,eb.wf)("missing response for request","BAD_DATA",{value:N,info:{payload:$}});this.emit("error",C),U(C);continue}if("error"in T){U(this.getRpcError($,T));continue}C(T.result)}}catch(C){for(let{reject:N}of(this.emit("debug",{action:"receiveRpcError",error:C}),T))N(C)}})()}},C)}constructor(C,T){super(C,T),this.#ek=1,this.#eE=Object.assign({},ri,T||{}),this.#eU=[],this.#eL=null,this.#eO=null,this.#eF=null;{let C=null,T=new Promise(T=>{C=T});this.#eM={promise:T,resolve:C}}let N=this._getOption("staticNetwork");"boolean"==typeof N?((0,eb.en)(!N||"any"!==C,"staticNetwork cannot be used on special network 'any'","options",T),N&&null!=C&&(this.#eO=Network.from(C))):N&&((0,eb.en)(null==C||N.matches(C),"staticNetwork MUST match network object","options",T),this.#eO=N)}_getOption(C){return this.#eE[C]}get _network(){return(0,eb.hu)(this.#eO,"network is not available yet","NETWORK_ERROR"),this.#eO}async _perform(C){if("call"===C.method||"estimateGas"===C.method){let T=C.transaction;if(T&&null!=T.type&&(0,eA.yT)(T.type)&&null==T.maxFeePerGas&&null==T.maxPriorityFeePerGas){let N=await this.getFeeData();null==N.maxFeePerGas&&null==N.maxPriorityFeePerGas&&(C=Object.assign({},C,{transaction:Object.assign({},T,{type:void 0})}))}}let T=this.getRpcRequest(C);return null!=T?await this.send(T.method,T.args):super._perform(C)}async _detectNetwork(){let C=this._getOption("staticNetwork");if(C){if(!0!==C)return C;if(this.#eO)return this.#eO}return this.#eF||(this.ready?this.#eF=(async()=>{try{let C=Network.from((0,eA.yT)(await this.send("eth_chainId",[])));return this.#eF=null,C}catch(C){throw this.#eF=null,C}})():this.#eF=(async()=>{let C;let T={id:this.#ek++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:T});try{C=(await this._send(T))[0],this.#eF=null}catch(C){throw this.#eF=null,this.emit("debug",{action:"receiveRpcError",error:C}),C}if(this.emit("debug",{action:"receiveRpcResult",result:C}),"result"in C)return Network.from((0,eA.yT)(C.result));throw this.getRpcError(T,C)})()),await this.#eF}_start(){null!=this.#eM&&null!=this.#eM.resolve&&(this.#eM.resolve(),this.#eM=null,(async()=>{for(;null==this.#eO&&!this.destroyed;)try{this.#eO=await this._detectNetwork()}catch(C){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,eb.wf)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:C}})),await new Promise(C=>{setTimeout(C,1e3)})}this.#ej()})())}async _waitUntilReady(){if(null!=this.#eM)return await this.#eM.promise}_getSubscriber(C){return"pending"===C.type?new FilterIdPendingSubscriber(this):"event"===C.type?this._getOption("polling")?new PollingEventSubscriber(this,C.filter):new FilterIdEventSubscriber(this,C.filter):"orphan"===C.type&&"drop-log"===C.filter.orphan?new UnmanagedSubscriber("orphan"):super._getSubscriber(C)}get ready(){return null==this.#eM}getRpcTransaction(C){let T={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(N=>{if(null==C[N])return;let U=N;"gasLimit"===N&&(U="gas"),T[U]=(0,eA.B4)((0,eA.yT)(C[N],`tx.${N}`))}),["from","to","data"].forEach(N=>{null!=C[N]&&(T[N]=(0,ex.Dv)(C[N]))}),C.accessList&&(T.accessList=(0,eL.z)(C.accessList)),C.blobVersionedHashes&&(T.blobVersionedHashes=C.blobVersionedHashes.map(C=>C.toLowerCase())),C.authorizationList&&(T.authorizationList=C.authorizationList.map(C=>{let T=authorizationify(C);return{address:T.address,nonce:(0,eA.B4)(T.nonce),chainId:(0,eA.B4)(T.chainId),yParity:(0,eA.B4)(T.signature.yParity),r:(0,eA.B4)(T.signature.r),s:(0,eA.B4)(T.signature.s)}})),T}getRpcRequest(C){switch(C.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase(C.address),C.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase(C.address),C.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase(C.address),C.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase(C.address),"0x"+C.position.toString(16),C.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[C.signedTransaction]};case"getBlock":if("blockTag"in C)return{method:"eth_getBlockByNumber",args:[C.blockTag,!!C.includeTransactions]};if("blockHash"in C)return{method:"eth_getBlockByHash",args:[C.blockHash,!!C.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[C.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[C.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(C.transaction),C.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(C.transaction)]};case"getLogs":return C.filter&&null!=C.filter.address&&(Array.isArray(C.filter.address)?C.filter.address=C.filter.address.map(getLowerCase):C.filter.address=getLowerCase(C.filter.address)),{method:"eth_getLogs",args:[C.filter]}}return null}getRpcError(C,T){let{method:N}=C,{error:U}=T;if("eth_estimateGas"===N&&U.message){let T=U.message;if(!T.match(/revert/i)&&T.match(/insufficient funds/i))return(0,eb.wf)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:C.params[0],info:{payload:C,error:U}});if(T.match(/nonce/i)&&T.match(/too low/i))return(0,eb.wf)("nonce has already been used","NONCE_EXPIRED",{transaction:C.params[0],info:{payload:C,error:U}})}if("eth_call"===N||"eth_estimateGas"===N){let T=function spelunkData(C){if(null==C)return null;if("string"==typeof C.message&&C.message.match(/revert/i)&&(0,ex.A7)(C.data))return{message:C.message,data:C.data};if("object"==typeof C){for(let T in C){let N=spelunkData(C[T]);if(N)return N}return null}if("string"==typeof C)try{return spelunkData(JSON.parse(C))}catch(C){}return null}(U),$=ew.R.getBuiltinCallException("eth_call"===N?"call":"estimateGas",C.params[0],T?T.data:null);return $.info={error:U,payload:C},$}let $=JSON.stringify(function(C){let T=[];return!function _spelunkMessage(C,T){if(null!=C){if("string"==typeof C.message&&T.push(C.message),"object"==typeof C)for(let N in C)_spelunkMessage(C[N],T);if("string"==typeof C)try{return _spelunkMessage(JSON.parse(C),T)}catch(C){}}}(C,T),T}(U));if("string"==typeof U.message&&U.message.match(/user denied|ethers-user-denied/i))return(0,eb.wf)("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[N]||"unknown",reason:"rejected",info:{payload:C,error:U}});if("eth_sendRawTransaction"===N||"eth_sendTransaction"===N){let T=C.params[0];if($.match(/insufficient funds|base fee exceeds gas limit/i))return(0,eb.wf)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:T,info:{error:U}});if($.match(/nonce/i)&&$.match(/too low/i))return(0,eb.wf)("nonce has already been used","NONCE_EXPIRED",{transaction:T,info:{error:U}});if($.match(/replacement transaction/i)&&$.match(/underpriced/i))return(0,eb.wf)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:T,info:{error:U}});if($.match(/only replay-protected/i))return(0,eb.wf)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:N,info:{transaction:T,info:{error:U}}})}let Q=!!$.match(/the method .* does not exist/i);return(!Q&&U&&U.details&&U.details.startsWith("Unauthorized method:")&&(Q=!0),Q)?(0,eb.wf)("unsupported operation","UNSUPPORTED_OPERATION",{operation:C.method,info:{error:U,payload:C}}):(0,eb.wf)("could not coalesce error","UNKNOWN_ERROR",{error:U,payload:C})}send(C,T){if(this.destroyed)return Promise.reject((0,eb.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:C}));let N=this.#ek++,U=new Promise((U,$)=>{this.#eU.push({resolve:U,reject:$,payload:{method:C,params:T,id:N,jsonrpc:"2.0"}})});return this.#ej(),U}async getSigner(C){null==C&&(C=0);let T=this.send("eth_accounts",[]);if("number"==typeof C){let N=await T;if(C>=N.length)throw Error("no such account");return new JsonRpcSigner(this,N[C])}let{accounts:N}=await (0,eI.m)({network:this.getNetwork(),accounts:T});for(let T of(C=(0,e_.K)(C),N))if((0,e_.K)(T)===C)return new JsonRpcSigner(this,C);throw Error("invalid account")}async listAccounts(){let C=await this.send("eth_accounts",[]);return C.map(C=>new JsonRpcSigner(this,C))}destroy(){for(let{payload:C,reject:T}of(this.#eL&&(clearTimeout(this.#eL),this.#eL=null),this.#eU))T((0,eb.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:C.method}));this.#eU=[],super.destroy()}};let JsonRpcApiPollingProvider=class JsonRpcApiPollingProvider extends JsonRpcApiProvider{#ez;constructor(C,T){super(C,T);let N=this._getOption("pollingInterval");null==N&&(N=ri.pollingInterval),this.#ez=N}_getSubscriber(C){let T=super._getSubscriber(C);return isPollable(T)&&(T.pollingInterval=this.#ez),T}get pollingInterval(){return this.#ez}set pollingInterval(C){if(!Number.isInteger(C)||C<0)throw Error("invalid interval");this.#ez=C,this._forEachSubscriber(C=>{isPollable(C)&&(C.pollingInterval=this.#ez)})}};let BrowserProvider=class BrowserProvider extends JsonRpcApiPollingProvider{#$;#eq;constructor(C,T,N){let U=Object.assign({},null!=N?N:{},{batchMaxCount:1});(0,eb.en)(C&&C.request,"invalid EIP-1193 provider","ethereum",C),super(T,U),this.#eq=null,N&&N.providerInfo&&(this.#eq=N.providerInfo),this.#$=async(T,N)=>{let U={method:T,params:N};this.emit("debug",{action:"sendEip1193Request",payload:U});try{let T=await C.request(U);return this.emit("debug",{action:"receiveEip1193Result",result:T}),T}catch(T){let C=Error(T.message);throw C.code=T.code,C.data=T.data,C.payload=U,this.emit("debug",{action:"receiveEip1193Error",error:C}),C}}}get providerInfo(){return this.#eq}async send(C,T){return await this._start(),await super.send(C,T)}async _send(C){(0,eb.en)(!Array.isArray(C),"EIP-1193 does not support batch request","payload",C);try{let T=await this.#$(C.method,C.params||[]);return[{id:C.id,result:T}]}catch(T){return[{id:C.id,error:{code:T.code,data:T.data,message:T.message}}]}}getRpcError(C,T){switch((T=JSON.parse(JSON.stringify(T))).error.code||-1){case 4001:T.error.message=`ethers-user-denied: ${T.error.message}`;break;case 4200:T.error.message=`ethers-unsupported: ${T.error.message}`}return super.getRpcError(C,T)}async hasSigner(C){null==C&&(C=0);let T=await this.send("eth_accounts",[]);return"number"==typeof C?T.length>C:(C=C.toLowerCase(),0!==T.filter(T=>T.toLowerCase()===C).length)}async getSigner(C){if(null==C&&(C=0),!await this.hasSigner(C))try{await this.#$("eth_requestAccounts",[])}catch(T){let C=T.payload;throw this.getRpcError(C,{id:C.id,error:T})}return await super.getSigner(C)}static async discover(C){if(null==C&&(C={}),C.provider)return new BrowserProvider(C.provider);let T=C.window?C.window:"undefined"!=typeof window?window:null;if(null==T)return null;let N=C.anyProvider;if(N&&T.ethereum)return new BrowserProvider(T.ethereum);if(!("addEventListener"in T&&"dispatchEvent"in T&&"removeEventListener"in T))return null;let U=C.timeout?C.timeout:300;return 0===U?null:await new Promise(($,Q)=>{let Y=[],addProvider=C=>{Y.push(C.detail),N&&finalize()},finalize=()=>{if(clearTimeout(X),Y.length){if(C&&C.filter){let T=C.filter(Y.map(C=>Object.assign({},C.info)));if(null==T)$(null);else if(T instanceof BrowserProvider)$(T);else{let C=null;if(T.uuid){let N=Y.filter(C=>T.uuid===C.info.uuid);C=N[0]}if(C){let{provider:T,info:N}=C;$(new BrowserProvider(T,void 0,{providerInfo:N}))}else Q((0,eb.wf)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:T}))}}else{let{provider:C,info:T}=Y[0];$(new BrowserProvider(C,void 0,{providerInfo:T}))}}else $(null);T.removeEventListener("eip6963:announceProvider",addProvider)},X=setTimeout(()=>{finalize()},U);T.addEventListener("eip6963:announceProvider",addProvider),T.dispatchEvent(new Event("eip6963:requestProvider"))})}}},8470:function(C,T,N){"use strict";N.d(T,{dF:function(){return formatEther}});var U=N(2423),$=N(455),Q=N(2229),Y=N(5857);let X=BigInt(-1),ee=BigInt(0),es=BigInt(1),el=BigInt(5),ec={},eh="0000";for(;eh.length<80;)eh+=eh;function getTens(C){let T=eh;for(;T.length<C;)T+=T;return BigInt("1"+T.substring(0,C))}function checkValue(C,T,N){let $=BigInt(T.width);if(T.signed){let T=es<<$-es;(0,U.hu)(null==N||C>=-T&&C<T,"overflow","NUMERIC_FAULT",{operation:N,fault:"overflow",value:C}),C=C>ee?(0,Q._Y)((0,Q.sS)(C,$),$):-(0,Q._Y)((0,Q.sS)(-C,$),$)}else{let T=es<<$;(0,U.hu)(null==N||C>=0&&C<T,"overflow","NUMERIC_FAULT",{operation:N,fault:"overflow",value:C}),C=(C%T+T)%T&T-es}return C}function getFormat(C){"number"==typeof C&&(C=`fixed128x${C}`);let T=!0,N=128,$=18;if("string"==typeof C){if("fixed"===C);else if("ufixed"===C)T=!1;else{let Q=C.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,U.en)(Q,"invalid fixed format","format",C),T="u"!==Q[1],N=parseInt(Q[2]),$=parseInt(Q[3])}}else if(C){let Q=C,check=(C,T,N)=>null==Q[C]?N:((0,U.en)(typeof Q[C]===T,"invalid fixed format ("+C+" not "+T+")","format."+C,Q[C]),Q[C]);T=check("signed","boolean",T),N=check("width","number",N),$=check("decimals","number",$)}(0,U.en)(N%8==0,"invalid FixedNumber width (not byte aligned)","format.width",N),(0,U.en)($<=80,"invalid FixedNumber decimals (too large)","format.decimals",$);let Q=(T?"":"u")+"fixed"+String(N)+"x"+String($);return{signed:T,width:N,decimals:$,name:Q}}let fixednumber_FixedNumber=class fixednumber_FixedNumber{format;#eH;#eV;#eK;_value;constructor(C,T,N){(0,U.NK)(C,ec,"FixedNumber"),this.#eV=T,this.#eH=N;let $=function(C,T){let N="";C<ee&&(N="-",C*=X);let U=C.toString();if(0===T)return N+U;for(;U.length<=T;)U=eh+U;let $=U.length-T;for(U=U.substring(0,$)+"."+U.substring($);"0"===U[0]&&"."!==U[1];)U=U.substring(1);for(;"0"===U[U.length-1]&&"."!==U[U.length-2];)U=U.substring(0,U.length-1);return N+U}(T,N.decimals);(0,Y.h)(this,{format:N.name,_value:$}),this.#eK=getTens(N.decimals)}get signed(){return this.#eH.signed}get width(){return this.#eH.width}get decimals(){return this.#eH.decimals}get value(){return this.#eV}#eG(C){(0,U.en)(this.format===C.format,"incompatible format; use fixedNumber.toFormat","other",C)}#e$(C,T){return C=checkValue(C,this.#eH,T),new fixednumber_FixedNumber(ec,C,this.#eH)}#eQ(C,T){return this.#eG(C),this.#e$(this.#eV+C.#eV,T)}addUnsafe(C){return this.#eQ(C)}add(C){return this.#eQ(C,"add")}#eJ(C,T){return this.#eG(C),this.#e$(this.#eV-C.#eV,T)}subUnsafe(C){return this.#eJ(C)}sub(C){return this.#eJ(C,"sub")}#eW(C,T){return this.#eG(C),this.#e$(this.#eV*C.#eV/this.#eK,T)}mulUnsafe(C){return this.#eW(C)}mul(C){return this.#eW(C,"mul")}mulSignal(C){this.#eG(C);let T=this.#eV*C.#eV;return(0,U.hu)(T%this.#eK===ee,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#e$(T/this.#eK,"mulSignal")}#eZ(C,T){return(0,U.hu)(C.#eV!==ee,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#eG(C),this.#e$(this.#eV*this.#eK/C.#eV,T)}divUnsafe(C){return this.#eZ(C)}div(C){return this.#eZ(C,"div")}divSignal(C){(0,U.hu)(C.#eV!==ee,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#eG(C);let T=this.#eV*this.#eK;return(0,U.hu)(T%C.#eV===ee,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#e$(T/C.#eV,"divSignal")}cmp(C){let T=this.value,N=C.value,U=this.decimals-C.decimals;return(U>0?N*=getTens(U):U<0&&(T*=getTens(-U)),T<N)?-1:T>N?1:0}eq(C){return 0===this.cmp(C)}lt(C){return 0>this.cmp(C)}lte(C){return 0>=this.cmp(C)}gt(C){return this.cmp(C)>0}gte(C){return this.cmp(C)>=0}floor(){let C=this.#eV;return this.#eV<ee&&(C-=this.#eK-es),C=this.#eV/this.#eK*this.#eK,this.#e$(C,"floor")}ceiling(){let C=this.#eV;return this.#eV>ee&&(C+=this.#eK-es),C=this.#eV/this.#eK*this.#eK,this.#e$(C,"ceiling")}round(C){if(null==C&&(C=0),C>=this.decimals)return this;let T=this.decimals-C,N=el*getTens(T-1),U=this.value+N,$=getTens(T);return checkValue(U=U/$*$,this.#eH,"round"),new fixednumber_FixedNumber(ec,U,this.#eH)}isZero(){return this.#eV===ee}isNegative(){return this.#eV<ee}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(C){return fixednumber_FixedNumber.fromString(this.toString(),C)}static fromValue(C,T,N){let $=null==T?0:(0,Q.Dx)(T),Y=getFormat(N),X=(0,Q.yT)(C,"value"),es=$-Y.decimals;if(es>0){let T=getTens(es);(0,U.hu)(X%T===ee,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:C}),X/=T}else es<0&&(X*=getTens(-es));return checkValue(X,Y,"fromValue"),new fixednumber_FixedNumber(ec,X,Y)}static fromString(C,T){let N=C.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,U.en)(N&&N[2].length+N[3].length>0,"invalid FixedNumber string value","value",C);let $=getFormat(T),Q=N[2]||"0",Y=N[3]||"";for(;Y.length<$.decimals;)Y+=eh;(0,U.hu)(Y.substring($.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:C}),Y=Y.substring(0,$.decimals);let X=BigInt(N[1]+Q+Y);return checkValue(X,$,"fromString"),new fixednumber_FixedNumber(ec,X,$)}static fromBytes(C,T){let N=(0,Q.Gh)((0,$.Pw)(C,"value")),U=getFormat(T);return U.signed&&(N=(0,Q._Y)(N,U.width)),checkValue(N,U,"fromBytes"),new fixednumber_FixedNumber(ec,N,U)}};let eu=["wei","kwei","mwei","gwei","szabo","finney","ether"];function formatEther(C){return function(C,T){let N=18;if("string"==typeof T){let C=eu.indexOf(T);(0,U.en)(C>=0,"invalid unit","unit",T),N=3*C}else null!=T&&(N=(0,Q.Dx)(T,"unit"));return fixednumber_FixedNumber.fromValue(C,N,{decimals:N,width:512}).toString()}(C,18)}},1835:function(C,T,N){"use strict";N.d(T,{gh:function(){return e4}});var U={};N.r(U),N.d(U,{identity:function(){return ey}});var $={};N.r($),N.d($,{base2:function(){return em}});var Q={};N.r(Q),N.d(Q,{base8:function(){return eb}});var Y={};N.r(Y),N.d(Y,{base10:function(){return ew}});var X={};N.r(X),N.d(X,{base16:function(){return e_},base16upper:function(){return ev}});var ee={};N.r(ee),N.d(ee,{base32:function(){return eE},base32hex:function(){return eP},base32hexpad:function(){return eD},base32hexpadupper:function(){return eB},base32hexupper:function(){return eS},base32pad:function(){return eA},base32padupper:function(){return eI},base32upper:function(){return ex},base32z:function(){return eC}});var es={};N.r(es),N.d(es,{base36:function(){return eO},base36upper:function(){return eR}});var el={};N.r(el),N.d(el,{base58btc:function(){return eT},base58flickr:function(){return eN}});var ec={};N.r(ec),N.d(ec,{base64:function(){return ek},base64pad:function(){return eU},base64url:function(){return eL},base64urlpad:function(){return eM}});var eh={};N.r(eh),N.d(eh,{base256emoji:function(){return eq}});var eu={};N.r(eu),N.d(eu,{sha256:function(){return eV},sha512:function(){return eK}});var ed={};N.r(ed),N.d(ed,{identity:function(){return eG}});var ep={};N.r(ep),N.d(ep,{code:function(){return eQ},decode:function(){return raw_decode},encode:function(){return raw_encode},name:function(){return e$}});var eg={};N.r(eg),N.d(eg,{code:function(){return eY},decode:function(){return json_decode},encode:function(){return json_encode},name:function(){return eZ}});var base_x=function(C,T){if(C.length>=255)throw TypeError("Alphabet too long");for(var N=new Uint8Array(256),U=0;U<N.length;U++)N[U]=255;for(var $=0;$<C.length;$++){var Q=C.charAt($),Y=Q.charCodeAt(0);if(255!==N[Y])throw TypeError(Q+" is ambiguous");N[Y]=$}var X=C.length,ee=C.charAt(0),es=Math.log(X)/Math.log(256),el=Math.log(256)/Math.log(X);function decodeUnsafe(C){if("string"!=typeof C)throw TypeError("Expected String");if(0===C.length)return new Uint8Array;var T=0;if(" "!==C[0]){for(var U=0,$=0;C[T]===ee;)U++,T++;for(var Q=(C.length-T)*es+1>>>0,Y=new Uint8Array(Q);C[T];){var el=N[C.charCodeAt(T)];if(255===el)return;for(var ec=0,eh=Q-1;(0!==el||ec<$)&&-1!==eh;eh--,ec++)el+=X*Y[eh]>>>0,Y[eh]=el%256>>>0,el=el/256>>>0;if(0!==el)throw Error("Non-zero carry");$=ec,T++}if(" "!==C[T]){for(var eu=Q-$;eu!==Q&&0===Y[eu];)eu++;for(var ed=new Uint8Array(U+(Q-eu)),ep=U;eu!==Q;)ed[ep++]=Y[eu++];return ed}}}return{encode:function(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===T.length)return"";for(var N=0,U=0,$=0,Q=T.length;$!==Q&&0===T[$];)$++,N++;for(var Y=(Q-$)*el+1>>>0,es=new Uint8Array(Y);$!==Q;){for(var ec=T[$],eh=0,eu=Y-1;(0!==ec||eh<U)&&-1!==eu;eu--,eh++)ec+=256*es[eu]>>>0,es[eu]=ec%X>>>0,ec=ec/X>>>0;if(0!==ec)throw Error("Non-zero carry");U=eh,$++}for(var ed=Y-U;ed!==Y&&0===es[ed];)ed++;for(var ep=ee.repeat(N);ed<Y;++ed)ep+=C.charAt(es[ed]);return ep},decodeUnsafe:decodeUnsafe,decode:function(C){var N=decodeUnsafe(C);if(N)return N;throw Error(`Non-${T} character`)}}};new Uint8Array(0);let equals=(C,T)=>{if(C===T)return!0;if(C.byteLength!==T.byteLength)return!1;for(let N=0;N<C.byteLength;N++)if(C[N]!==T[N])return!1;return!0},coerce=C=>{if(C instanceof Uint8Array&&"Uint8Array"===C.constructor.name)return C;if(C instanceof ArrayBuffer)return new Uint8Array(C);if(ArrayBuffer.isView(C))return new Uint8Array(C.buffer,C.byteOffset,C.byteLength);throw Error("Unknown type, must be binary type")},fromString=C=>new TextEncoder().encode(C),bytes_toString=C=>new TextDecoder().decode(C);let Encoder=class Encoder{constructor(C,T,N){this.name=C,this.prefix=T,this.baseEncode=N}encode(C){if(C instanceof Uint8Array)return`${this.prefix}${this.baseEncode(C)}`;throw Error("Unknown type, must be binary type")}};let Decoder=class Decoder{constructor(C,T,N){if(this.name=C,this.prefix=T,void 0===T.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=T.codePointAt(0),this.baseDecode=N}decode(C){if("string"==typeof C){if(C.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(C)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(C.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(C){return or(this,C)}};let ComposedDecoder=class ComposedDecoder{constructor(C){this.decoders=C}or(C){return or(this,C)}decode(C){let T=C[0],N=this.decoders[T];if(N)return N.decode(C);throw RangeError(`Unable to decode multibase string ${JSON.stringify(C)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let or=(C,T)=>new ComposedDecoder({...C.decoders||{[C.prefix]:C},...T.decoders||{[T.prefix]:T}});let Codec=class Codec{constructor(C,T,N,U){this.name=C,this.prefix=T,this.baseEncode=N,this.baseDecode=U,this.encoder=new Encoder(C,T,N),this.decoder=new Decoder(C,T,U)}encode(C){return this.encoder.encode(C)}decode(C){return this.decoder.decode(C)}};let from=({name:C,prefix:T,encode:N,decode:U})=>new Codec(C,T,N,U),baseX=({prefix:C,name:T,alphabet:N})=>{let{encode:U,decode:$}=base_x(N,T);return from({prefix:C,name:T,encode:U,decode:C=>coerce($(C))})},decode=(C,T,N,U)=>{let $={};for(let C=0;C<T.length;++C)$[T[C]]=C;let Q=C.length;for(;"="===C[Q-1];)--Q;let Y=new Uint8Array(Q*N/8|0),X=0,ee=0,es=0;for(let T=0;T<Q;++T){let Q=$[C[T]];if(void 0===Q)throw SyntaxError(`Non-${U} character`);ee=ee<<N|Q,(X+=N)>=8&&(X-=8,Y[es++]=255&ee>>X)}if(X>=N||255&ee<<8-X)throw SyntaxError("Unexpected end of data");return Y},encode=(C,T,N)=>{let U="="===T[T.length-1],$=(1<<N)-1,Q="",Y=0,X=0;for(let U=0;U<C.length;++U)for(X=X<<8|C[U],Y+=8;Y>N;)Y-=N,Q+=T[$&X>>Y];if(Y&&(Q+=T[$&X<<N-Y]),U)for(;Q.length*N&7;)Q+="=";return Q},rfc4648=({name:C,prefix:T,bitsPerChar:N,alphabet:U})=>from({prefix:T,name:C,encode:C=>encode(C,U,N),decode:T=>decode(T,U,N,C)}),ey=from({prefix:"\x00",name:"identity",encode:C=>bytes_toString(C),decode:C=>fromString(C)}),em=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),eb=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ew=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),e_=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ev=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eE=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ex=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eA=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eI=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eP=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eS=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eD=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eB=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eC=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eO=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eR=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),eT=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eN=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ek=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),eU=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eL=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eM=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),eF=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),ej=eF.reduce((C,T,N)=>(C[N]=T,C),[]),ez=eF.reduce((C,T,N)=>(C[T.codePointAt(0)]=N,C),[]),eq=from({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(C){return C.reduce((C,T)=>C+=ej[T],"")},decode:function(C){let T=[];for(let N of C){let C=ez[N.codePointAt(0)];if(void 0===C)throw Error(`Non-base256emoji character: ${N}`);T.push(C)}return new Uint8Array(T)}});function varint_encode(C,T,N){T=T||[];for(var U=N=N||0;C>=2147483648;)T[N++]=255&C|128,C/=128;for(;-128&C;)T[N++]=255&C|128,C>>>=7;return T[N]=0|C,varint_encode.bytes=N-U+1,T}function read(C,T){var N,U=0,T=T||0,$=0,Q=T,Y=C.length;do{if(Q>=Y)throw read.bytes=0,RangeError("Could not decode varint");N=C[Q++],U+=$<28?(127&N)<<$:(127&N)*Math.pow(2,$),$+=7}while(N>=128);return read.bytes=Q-T,U}var eH={encode:varint_encode,decode:read,encodingLength:function(C){return C<128?1:C<16384?2:C<2097152?3:C<268435456?4:C<34359738368?5:C<4398046511104?6:C<562949953421312?7:C<72057594037927940?8:C<0x7fffffffffffffff?9:10}};let src_varint_decode=(C,T=0)=>{let N=eH.decode(C,T);return[N,eH.decode.bytes]},encodeTo=(C,T,N=0)=>(eH.encode(C,T,N),T),encodingLength=C=>eH.encodingLength(C),create=(C,T)=>{let N=T.byteLength,U=encodingLength(C),$=U+encodingLength(N),Q=new Uint8Array($+N);return encodeTo(C,Q,0),encodeTo(N,Q,U),Q.set(T,$),new Digest(C,N,T,Q)},digest_decode=C=>{let T=coerce(C),[N,U]=src_varint_decode(T),[$,Q]=src_varint_decode(T.subarray(U)),Y=T.subarray(U+Q);if(Y.byteLength!==$)throw Error("Incorrect length");return new Digest(N,$,Y,T)},digest_equals=(C,T)=>C===T||C.code===T.code&&C.size===T.size&&equals(C.bytes,T.bytes);let Digest=class Digest{constructor(C,T,N,U){this.code=C,this.size=T,this.digest=N,this.bytes=U}};let hasher_from=({name:C,code:T,encode:N})=>new Hasher(C,T,N);let Hasher=class Hasher{constructor(C,T,N){this.name=C,this.code=T,this.encode=N}digest(C){if(C instanceof Uint8Array){let T=this.encode(C);return T instanceof Uint8Array?create(this.code,T):T.then(C=>create(this.code,C))}throw Error("Unknown type, must be binary type")}};let sha=C=>async T=>new Uint8Array(await crypto.subtle.digest(C,T)),eV=hasher_from({name:"sha2-256",code:18,encode:sha("SHA-256")}),eK=hasher_from({name:"sha2-512",code:19,encode:sha("SHA-512")}),eG={code:0,name:"identity",encode:coerce,digest:C=>create(0,coerce(C))},e$="raw",eQ=85,raw_encode=C=>coerce(C),raw_decode=C=>coerce(C),eJ=new TextEncoder,eW=new TextDecoder,eZ="json",eY=512,json_encode=C=>eJ.encode(JSON.stringify(C)),json_decode=C=>JSON.parse(eW.decode(C));let CID=class CID{constructor(C,T,N,U){this.code=T,this.version=C,this.multihash=N,this.bytes=U,this.byteOffset=U.byteOffset,this.byteLength=U.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:e3,byteLength:e3,code:e2,version:e2,multihash:e2,bytes:e2,_baseCache:e3,asCID:e3})}toV0(){if(0===this.version)return this;{let{code:C,multihash:T}=this;if(C!==eX)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(T.code!==e0)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(T)}}toV1(){switch(this.version){case 0:{let{code:C,digest:T}=this.multihash,N=create(C,T);return CID.createV1(this.code,N)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(C){return C&&this.code===C.code&&this.version===C.version&&digest_equals(this.multihash,C.multihash)}toString(C){let{bytes:T,version:N,_baseCache:U}=this;return 0===N?toStringV0(T,U,C||eT.encoder):toStringV1(T,U,C||eE.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(C){return deprecate(/^0\.0/,e8),!!(C&&(C[e1]||C.asCID===C))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(C){if(C instanceof CID)return C;if(null!=C&&C.asCID===C){let{version:T,code:N,multihash:U,bytes:$}=C;return new CID(T,N,U,$||encodeCID(T,N,U.bytes))}if(null==C||!0!==C[e1])return null;{let{version:T,multihash:N,code:U}=C,$=digest_decode(N);return CID.create(T,U,$)}}static create(C,T,N){if("number"!=typeof T)throw Error("String codecs are no longer supported");switch(C){case 0:if(T===eX)return new CID(C,T,N,N.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eX}) block encoding`);case 1:{let U=encodeCID(C,T,N.bytes);return new CID(C,T,N,U)}default:throw Error("Invalid version")}}static createV0(C){return CID.create(0,eX,C)}static createV1(C,T){return CID.create(1,C,T)}static decode(C){let[T,N]=CID.decodeFirst(C);if(N.length)throw Error("Incorrect length");return T}static decodeFirst(C){let T=CID.inspectBytes(C),N=T.size-T.multihashSize,U=coerce(C.subarray(N,N+T.multihashSize));if(U.byteLength!==T.multihashSize)throw Error("Incorrect length");let $=U.subarray(T.multihashSize-T.digestSize),Q=new Digest(T.multihashCode,T.digestSize,$,U),Y=0===T.version?CID.createV0(Q):CID.createV1(T.codec,Q);return[Y,C.subarray(T.size)]}static inspectBytes(C){let T=0,next=()=>{let[N,U]=src_varint_decode(C.subarray(T));return T+=U,N},N=next(),U=eX;if(18===N?(N=0,T=0):1===N&&(U=next()),0!==N&&1!==N)throw RangeError(`Invalid CID version ${N}`);let $=T,Q=next(),Y=next(),X=T+Y;return{version:N,codec:U,multihashCode:Q,digestSize:Y,multihashSize:X-$,size:X}}static parse(C,T){let[N,U]=parseCIDtoBytes(C,T),$=CID.decode(U);return $._baseCache.set(N,C),$}};let parseCIDtoBytes=(C,T)=>{switch(C[0]){case"Q":return[eT.prefix,(T||eT).decode(`${eT.prefix}${C}`)];case eT.prefix:return[eT.prefix,(T||eT).decode(C)];case eE.prefix:return[eE.prefix,(T||eE).decode(C)];default:if(null==T)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[C[0],T.decode(C)]}},toStringV0=(C,T,N)=>{let{prefix:U}=N;if(U!==eT.prefix)throw Error(`Cannot string encode V0 in ${N.name} encoding`);let $=T.get(U);if(null!=$)return $;{let $=N.encode(C).slice(1);return T.set(U,$),$}},toStringV1=(C,T,N)=>{let{prefix:U}=N,$=T.get(U);if(null!=$)return $;{let $=N.encode(C);return T.set(U,$),$}},eX=112,e0=18,encodeCID=(C,T,N)=>{let U=encodingLength(C),$=U+encodingLength(T),Q=new Uint8Array($+N.byteLength);return encodeTo(C,Q,0),encodeTo(T,Q,U),Q.set(N,$),Q},e1=Symbol.for("@ipld/js-cid/CID"),e2={writable:!1,configurable:!1,enumerable:!0},e3={writable:!1,enumerable:!1,configurable:!1},deprecate=(C,T)=>{if(C.test("0.0.0-dev"))console.warn(T);else throw Error(T)},e8=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,e4={...U,...$,...Q,...Y,...X,...ee,...es,...el,...ec,...eh};({...eu,...ed})}}]);